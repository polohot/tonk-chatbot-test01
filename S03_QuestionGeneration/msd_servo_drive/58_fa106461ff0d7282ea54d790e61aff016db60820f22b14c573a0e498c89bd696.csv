,NODE_FILE_NAME,NODE_NUMBER,NODE_HASH,NODE_TEXT,Q,A1,A2,A3,A4,A5
0,msd_servo_drive.txt,58,fa106461ff0d7282ea54d790e61aff016db60820f22b14c573a0e498c89bd696,"However, these values are only a guideline. Every application will, of course, have its own requirements for dynamics and accuracy. The optimum setting must be determined during commissioning.

Image 7.60: Example of application for volume/mass sensors

For the purpose of pressure limitation during the process or in individual motion blocks, a scaling (P 2872 HYD_Tab_Limit) can be used to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193 and see also section ""Scaling of the hydraulic limits"" on page 195)

# 7.11.4 Hydraulic Limitations

# 7.11.4.1 Pressure limit

Furthermore, the limitation can be switched to inactive by means of a higher-level control system. The five lower bits of the hydraulic control word are used for this purpose, P 2841 HYD_Ctrl bit 11 to bit 15. Setting bit 11 deactivates the pressure limitation. Bits 12 to 15 only switch off the limitation in the respective quadrant of the P/Q coordinate system. (Bit 12 = Q1, bit 13 = Q2, bit 14 = Q3, bit 15 = Q4).

It is usually necessary to limit the pressure to a maximum permissible value. This can be done either mechanically using an overpressure valve or using the pressure limitation of the servo drive. The pressure limitation allows both the maximum and the minimum permissible reference value of the pressure control to be limited.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 184

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 185

Q [l/min]

NOTE

- The limitation controllers are not active in all control modes. The following table shows which limitations can be configured for which control mode.
- Section 7.11.6 Hydraulic Motion profile describes for which control modes the scaling factor can be used.

|Control mode|Pressure limit|Volumetric flow rate limit|
|---|---|---|
|NPumpCon(4)|x|x|
|PressCon(0)|x|x|
|VolCon(5)| |x|
|VolConPlim(1)|x|x|
|SpdCon(2)| |x|
|SpdCon_plimit|x| |
|-SpdCon_PI| | |
|PosCon(3)| | |
|- PosCon_QFF|x| |
|- PosCon| | |
|- PosCon_plimit|x|x|
|- PosCon_TrackingError|x| |

Table 7.54: Hydraulic Limitations

For the purpose of volumetric flow rate limitation during the process or in individual motion blocks, a scaling factor (P 2872 HYD_Tab_Limit) can be used in some control modes (see Table) to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193)

NOTE

l  The limitation controllers are not active in all control modes. The table shows which limitations can be configured for which control mode. See

# Table 7.54: Hydraulic Limitations

Image 7.62: “Pressure limit” screen

# 7.11.4.2 Volumetric flow rate limit

The minimum and maximum volumetric flow rate can be limited to suit the system requirements using the volumetric flow rate limit. Once the parametrized volumetric flow rate limits are reached, the pump speed is limited by the motor speed controller.

A selection can be made between P 2850[8] - QMax and P 2847[3] - QRef as the source of the limit value by making a source selection (QMaxSrc). P 2847[3] - QRef can be used to specify the limit via the volumetric flow rate value, which, for example, can be set variably using an analog input.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 186

# 7 Control

# 7 Control

MOOG                          ID No.:CB40859-001 Date:11/2020

MSD ServoDrive   - DeviceHelp      187

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2840|4|pMinSrc| |Minimum pressure source selector|
|2840|5|pMaxSrc| |Maximum pressure source selector|
|2840|6|QMinSrc| |Minimum flow rate source selector|
|2840|7|QMaxSrc| |Maximum flow rate source selector|
|2840|8|QActCalc| |Flow rate calculation method|
|2840|9|QLeakEst| |Flow rate leakage estimation method|
|2840|10|nRefSrc| |Pump speed reference source selector|
|2840|11|CylValveSwSel| |Function selector for the valve switchover of the cylinder|
|2840|12|AltPosCon| |Alternative position controller|
|2840|13|AltSpdCon| |Alternative cylinder speed controllers|
|2840|14|PumpSpdProt| |Pump speed protection|
|2840|15|PumpP2tProt| |p2t protection for pump|
|2840|16|AltPressCon| |Alternative pressure controller|
|2840|17|AltPressConLimit| |Alternative pressure limit controller|

Table 7.55: Parameters – Configure Hydraulic System Control (continue)

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850| |HYD_PressCon| |Hydraulic pressure control parameters|
|2850|0|Kp|rpm/bar|Gain|
|2850|1|KpScale| |Gain scaling|
|2850|2|Tn|ms|Integration time constant|
|2850|3|Tv|ms|Rate time|
|2850|4|Tp|ms|Integral-action time|
|2850|5|pMin|bar|Minimum permissible pressure|
|2850|6|pMax|bar|Maximum permissible pressure|
|2850|7|QMin|l/min|Minimum flow rate|
|2850|8|QMax|l/min|Maximum flow rate|
|2850|9|PressWindow|bar|Pressure control parameters|
|2850|10|decmpLvl|bar|Level for active decompression|

Table 7.56: Parameters – Pressure control parameters

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850|11|decmpRate|bar/s|Rate for active decompression|
|2850|12|pActScale| |Scaling for pAct|
|2850|13|pAct2Scale| |Scaling for pAct2|
|2850|14|pRange_k|%|Pressure range threshold|
|2850|15|pRange_midpoint|bar|Pressure range midpoint|

Table 7.56: Parameters – Pressure control parameters (continue)

# 7.11.5 Cylinder configuration

If no volumetric flow rate sensor is employed, the volumetric flow rate can be calculated using a linear encoder and the cylinder geometry (P 2840.8 QActCalc). To do so, various different cylinder dimensions must be passed to the servo drive. The different surface areas of the piston and ring side must be kept in mind because either more or less medium is required for the same path depending on the power direction.

Image 7.64: “Cylinder configuration” screen

The parameters which must be set are P 2852[0] - cylArea1 and P 2852[2] - cylArea2.

Cylinder piston surface area A1 = cylAreal1 = A1 in cm²

Cylinder ring surface area A2 = cylAreal2 = A2 in cm²

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 188

# 7 Control

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 189

# NOTE

For pumps which only operate with a positive speed (only one direction of rotation) and switch the direction of action of the cylinder via a directional valve, one of the two cylinder surfaces must be specified as negative (Image 7.64: “Cylinder configuration” screen). If the pump can be operated in both directions of rotation, this is not necessary.

Since in MSD Servo Drive all encoder input variables are calculated in revolutions, the hydraulics require a relationship between linear and rotary motion for the internal calculations of the cylinder model, cylinder speed and feed-forward control variables. For this purpose, the encoder resolution Sx of the linear encoder in μm per encoder revolution must be known (Para 2852.7unit_scale). In this case, one encoder revolution is the singleturn range of the respective position sensor for the cylinder position. This corresponds to 32768 μm/rev for a 16 bit linear encoder with a resolution of 0.5 μm per increment.

If the current position of the cylinder is transferred via the bus interface (P 2298 ComAngle32), the single and multiturn range is set to 16 bits each. This corresponds to 65536 μm/rev.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2852|HYD_SpdCon|Speed control parameters|Speed control parameters|Speed control parameters|
|2852|0|cylArea1|cm2|Cylinder area|
|2852|1|Ife_K_scale| |Leakage Flow Estimator: Gain scaling|
|2852|2|cylArea2|cm2|Cylinder area (option 2, use neg. value for neg. direction)|
|2852|3|Ife_K_scale2| |Leakage Flow Estimator: Gain scaling (option 2)|
|2852|4|res| |Reserved|
|2852|5|res| |Reserved|
|2852|6|res| |Reserved|
|2852|7|unit_scale|um/rev|Hydraulic physical unit scaling|

Table 7.57: Parameters – Pressure control parameters

# 7.11.6 Hydraulic Motion profile

specified manually for each individual table index. In addition, the valve switching delay can be taken into account; the start of the setpoint ramp is delayed after a valve switchover (P 2851.13 - tSwValve). Once the command for the switchover of a valve has been triggered, a timer begins to run which delays the setpoint enable. If the motor still has a speed reference value at the moment of the switchover, it is run down to 0 rpm using the ramp specified in P 2851.12 - stopRamp.

# Selection of operation mode

- 0 = PARA
- Setpoint setting from table, table index (P 2860) set using parameter access (BUS, PLC, Moog DRIVEADMINISTRATOR 5, etc.) (ramp changes are applied when the index changes)
- 1 = TERM
- Setting from table, table index (P 2860) will be updated via digital inputs (ramp changes will be applied when the index changes)
- 2 = CTRL1
- Operation via control word. Only parameters from table index 0 are used in the CTRL1 mode. The control mode is set via the control word (CtrlBit 0-3) and the setpoint values can be changed directly in table index 0.
- 3 = CTRL2
- Operation via control word. Parameters from all table indexes can be used in CTRL2 mode. The respective motion block is selected using the control word (CtrlBit 0-3).
- 4 = TAB
- Setpoint setting from table, table index (P 2860) is controlled using the switching condition of the motion block table.

NOTE

- In CTRL1 and CTRL2, the setpoint is adopted cyclically independently of NewSetpoint and ramp change with rising edge at NewSetpoint or new table index.

The various different operating modes for controlling the motion sequences can be selected using P 2862[0] - OpMode. The parameter P 2840[11] -CylValveSwSel can be used to set various different modes for controlling the actuating valves. Valve switching can be performed automatically via the POS(3) mode depending on the position difference or be.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 190

# Control

# MOOG

ID No.: CB40859-001 Date: 11/2020

# MSD ServoDrive - DeviceHelp

191

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2862|0|HYD_OpMode|Hydraulic: operation mode|

Table 7.58: “Hydraulic - Operation mode” parameters

For communication with a higher-level controller in the CTRL1 and CTRL2 operating modes, some scaling factors of process variables and control parameters are summarized in P 2879 HYD_AddProcData. These parameters are PDO-capable and are created in the int16 format in order to use as little memory space as possible in the process data channel. ",What is the purpose of the scaling factor P 2872 HYD_Tab_Limit in the MSD ServoDrive?,The scaling factor P 2872 HYD_Tab_Limit is used to influence the preset limitation for pressure or volumetric flow rate during the process or in individual motion blocks.,"In the MSD ServoDrive, P 2872 HYD_Tab_Limit serves to adjust the preset limitations for pressure and volumetric flow rate, either during the process or within specific motion blocks.","To modify the default limitations for pressure and volumetric flow rate in processes or motion blocks, the MSD ServoDrive utilizes the scaling factor P 2872 HYD_Tab_Limit.",P 2872 HYD_Tab_Limit in the MSD ServoDrive is a scaling factor designed to adjust the preset limitations for pressure and volumetric flow rate in various operational contexts.,The MSD ServoDrive's P 2872 HYD_Tab_Limit scaling factor allows for the customization of pressure and volumetric flow rate limitations during processes or in specific motion blocks.
1,msd_servo_drive.txt,58,fa106461ff0d7282ea54d790e61aff016db60820f22b14c573a0e498c89bd696,"However, these values are only a guideline. Every application will, of course, have its own requirements for dynamics and accuracy. The optimum setting must be determined during commissioning.

Image 7.60: Example of application for volume/mass sensors

For the purpose of pressure limitation during the process or in individual motion blocks, a scaling (P 2872 HYD_Tab_Limit) can be used to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193 and see also section ""Scaling of the hydraulic limits"" on page 195)

# 7.11.4 Hydraulic Limitations

# 7.11.4.1 Pressure limit

Furthermore, the limitation can be switched to inactive by means of a higher-level control system. The five lower bits of the hydraulic control word are used for this purpose, P 2841 HYD_Ctrl bit 11 to bit 15. Setting bit 11 deactivates the pressure limitation. Bits 12 to 15 only switch off the limitation in the respective quadrant of the P/Q coordinate system. (Bit 12 = Q1, bit 13 = Q2, bit 14 = Q3, bit 15 = Q4).

It is usually necessary to limit the pressure to a maximum permissible value. This can be done either mechanically using an overpressure valve or using the pressure limitation of the servo drive. The pressure limitation allows both the maximum and the minimum permissible reference value of the pressure control to be limited.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 184

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 185

Q [l/min]

NOTE

- The limitation controllers are not active in all control modes. The following table shows which limitations can be configured for which control mode.
- Section 7.11.6 Hydraulic Motion profile describes for which control modes the scaling factor can be used.

|Control mode|Pressure limit|Volumetric flow rate limit|
|---|---|---|
|NPumpCon(4)|x|x|
|PressCon(0)|x|x|
|VolCon(5)| |x|
|VolConPlim(1)|x|x|
|SpdCon(2)| |x|
|SpdCon_plimit|x| |
|-SpdCon_PI| | |
|PosCon(3)| | |
|- PosCon_QFF|x| |
|- PosCon| | |
|- PosCon_plimit|x|x|
|- PosCon_TrackingError|x| |

Table 7.54: Hydraulic Limitations

For the purpose of volumetric flow rate limitation during the process or in individual motion blocks, a scaling factor (P 2872 HYD_Tab_Limit) can be used in some control modes (see Table) to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193)

NOTE

l  The limitation controllers are not active in all control modes. The table shows which limitations can be configured for which control mode. See

# Table 7.54: Hydraulic Limitations

Image 7.62: “Pressure limit” screen

# 7.11.4.2 Volumetric flow rate limit

The minimum and maximum volumetric flow rate can be limited to suit the system requirements using the volumetric flow rate limit. Once the parametrized volumetric flow rate limits are reached, the pump speed is limited by the motor speed controller.

A selection can be made between P 2850[8] - QMax and P 2847[3] - QRef as the source of the limit value by making a source selection (QMaxSrc). P 2847[3] - QRef can be used to specify the limit via the volumetric flow rate value, which, for example, can be set variably using an analog input.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 186

# 7 Control

# 7 Control

MOOG                          ID No.:CB40859-001 Date:11/2020

MSD ServoDrive   - DeviceHelp      187

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2840|4|pMinSrc| |Minimum pressure source selector|
|2840|5|pMaxSrc| |Maximum pressure source selector|
|2840|6|QMinSrc| |Minimum flow rate source selector|
|2840|7|QMaxSrc| |Maximum flow rate source selector|
|2840|8|QActCalc| |Flow rate calculation method|
|2840|9|QLeakEst| |Flow rate leakage estimation method|
|2840|10|nRefSrc| |Pump speed reference source selector|
|2840|11|CylValveSwSel| |Function selector for the valve switchover of the cylinder|
|2840|12|AltPosCon| |Alternative position controller|
|2840|13|AltSpdCon| |Alternative cylinder speed controllers|
|2840|14|PumpSpdProt| |Pump speed protection|
|2840|15|PumpP2tProt| |p2t protection for pump|
|2840|16|AltPressCon| |Alternative pressure controller|
|2840|17|AltPressConLimit| |Alternative pressure limit controller|

Table 7.55: Parameters – Configure Hydraulic System Control (continue)

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850| |HYD_PressCon| |Hydraulic pressure control parameters|
|2850|0|Kp|rpm/bar|Gain|
|2850|1|KpScale| |Gain scaling|
|2850|2|Tn|ms|Integration time constant|
|2850|3|Tv|ms|Rate time|
|2850|4|Tp|ms|Integral-action time|
|2850|5|pMin|bar|Minimum permissible pressure|
|2850|6|pMax|bar|Maximum permissible pressure|
|2850|7|QMin|l/min|Minimum flow rate|
|2850|8|QMax|l/min|Maximum flow rate|
|2850|9|PressWindow|bar|Pressure control parameters|
|2850|10|decmpLvl|bar|Level for active decompression|

Table 7.56: Parameters – Pressure control parameters

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850|11|decmpRate|bar/s|Rate for active decompression|
|2850|12|pActScale| |Scaling for pAct|
|2850|13|pAct2Scale| |Scaling for pAct2|
|2850|14|pRange_k|%|Pressure range threshold|
|2850|15|pRange_midpoint|bar|Pressure range midpoint|

Table 7.56: Parameters – Pressure control parameters (continue)

# 7.11.5 Cylinder configuration

If no volumetric flow rate sensor is employed, the volumetric flow rate can be calculated using a linear encoder and the cylinder geometry (P 2840.8 QActCalc). To do so, various different cylinder dimensions must be passed to the servo drive. The different surface areas of the piston and ring side must be kept in mind because either more or less medium is required for the same path depending on the power direction.

Image 7.64: “Cylinder configuration” screen

The parameters which must be set are P 2852[0] - cylArea1 and P 2852[2] - cylArea2.

Cylinder piston surface area A1 = cylAreal1 = A1 in cm²

Cylinder ring surface area A2 = cylAreal2 = A2 in cm²

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 188

# 7 Control

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 189

# NOTE

For pumps which only operate with a positive speed (only one direction of rotation) and switch the direction of action of the cylinder via a directional valve, one of the two cylinder surfaces must be specified as negative (Image 7.64: “Cylinder configuration” screen). If the pump can be operated in both directions of rotation, this is not necessary.

Since in MSD Servo Drive all encoder input variables are calculated in revolutions, the hydraulics require a relationship between linear and rotary motion for the internal calculations of the cylinder model, cylinder speed and feed-forward control variables. For this purpose, the encoder resolution Sx of the linear encoder in μm per encoder revolution must be known (Para 2852.7unit_scale). In this case, one encoder revolution is the singleturn range of the respective position sensor for the cylinder position. This corresponds to 32768 μm/rev for a 16 bit linear encoder with a resolution of 0.5 μm per increment.

If the current position of the cylinder is transferred via the bus interface (P 2298 ComAngle32), the single and multiturn range is set to 16 bits each. This corresponds to 65536 μm/rev.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2852|HYD_SpdCon|Speed control parameters|Speed control parameters|Speed control parameters|
|2852|0|cylArea1|cm2|Cylinder area|
|2852|1|Ife_K_scale| |Leakage Flow Estimator: Gain scaling|
|2852|2|cylArea2|cm2|Cylinder area (option 2, use neg. value for neg. direction)|
|2852|3|Ife_K_scale2| |Leakage Flow Estimator: Gain scaling (option 2)|
|2852|4|res| |Reserved|
|2852|5|res| |Reserved|
|2852|6|res| |Reserved|
|2852|7|unit_scale|um/rev|Hydraulic physical unit scaling|

Table 7.57: Parameters – Pressure control parameters

# 7.11.6 Hydraulic Motion profile

specified manually for each individual table index. In addition, the valve switching delay can be taken into account; the start of the setpoint ramp is delayed after a valve switchover (P 2851.13 - tSwValve). Once the command for the switchover of a valve has been triggered, a timer begins to run which delays the setpoint enable. If the motor still has a speed reference value at the moment of the switchover, it is run down to 0 rpm using the ramp specified in P 2851.12 - stopRamp.

# Selection of operation mode

- 0 = PARA
- Setpoint setting from table, table index (P 2860) set using parameter access (BUS, PLC, Moog DRIVEADMINISTRATOR 5, etc.) (ramp changes are applied when the index changes)
- 1 = TERM
- Setting from table, table index (P 2860) will be updated via digital inputs (ramp changes will be applied when the index changes)
- 2 = CTRL1
- Operation via control word. Only parameters from table index 0 are used in the CTRL1 mode. The control mode is set via the control word (CtrlBit 0-3) and the setpoint values can be changed directly in table index 0.
- 3 = CTRL2
- Operation via control word. Parameters from all table indexes can be used in CTRL2 mode. The respective motion block is selected using the control word (CtrlBit 0-3).
- 4 = TAB
- Setpoint setting from table, table index (P 2860) is controlled using the switching condition of the motion block table.

NOTE

- In CTRL1 and CTRL2, the setpoint is adopted cyclically independently of NewSetpoint and ramp change with rising edge at NewSetpoint or new table index.

The various different operating modes for controlling the motion sequences can be selected using P 2862[0] - OpMode. The parameter P 2840[11] -CylValveSwSel can be used to set various different modes for controlling the actuating valves. Valve switching can be performed automatically via the POS(3) mode depending on the position difference or be.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 190

# Control

# MOOG

ID No.: CB40859-001 Date: 11/2020

# MSD ServoDrive - DeviceHelp

191

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2862|0|HYD_OpMode|Hydraulic: operation mode|

Table 7.58: “Hydraulic - Operation mode” parameters

For communication with a higher-level controller in the CTRL1 and CTRL2 operating modes, some scaling factors of process variables and control parameters are summarized in P 2879 HYD_AddProcData. These parameters are PDO-capable and are created in the int16 format in order to use as little memory space as possible in the process data channel. ",How can the pressure limitation be deactivated in the MSD ServoDrive?,The pressure limitation can be deactivated by setting bit 11 in the hydraulic control word P 2841 HYD_Ctrl.,Deactivation of the pressure limitation in the MSD ServoDrive is achieved through the setting of bit 11 within P 2841 HYD_Ctrl.,"To turn off the pressure limitation, bit 11 of the hydraulic control word P 2841 HYD_Ctrl in the MSD ServoDrive must be set.","In the MSD ServoDrive, setting bit 11 of P 2841 HYD_Ctrl's hydraulic control word will deactivate the pressure limitation.",Pressure limitation in the MSD ServoDrive is deactivated by configuring bit 11 in the hydraulic control word P 2841 HYD_Ctrl.
2,msd_servo_drive.txt,58,fa106461ff0d7282ea54d790e61aff016db60820f22b14c573a0e498c89bd696,"However, these values are only a guideline. Every application will, of course, have its own requirements for dynamics and accuracy. The optimum setting must be determined during commissioning.

Image 7.60: Example of application for volume/mass sensors

For the purpose of pressure limitation during the process or in individual motion blocks, a scaling (P 2872 HYD_Tab_Limit) can be used to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193 and see also section ""Scaling of the hydraulic limits"" on page 195)

# 7.11.4 Hydraulic Limitations

# 7.11.4.1 Pressure limit

Furthermore, the limitation can be switched to inactive by means of a higher-level control system. The five lower bits of the hydraulic control word are used for this purpose, P 2841 HYD_Ctrl bit 11 to bit 15. Setting bit 11 deactivates the pressure limitation. Bits 12 to 15 only switch off the limitation in the respective quadrant of the P/Q coordinate system. (Bit 12 = Q1, bit 13 = Q2, bit 14 = Q3, bit 15 = Q4).

It is usually necessary to limit the pressure to a maximum permissible value. This can be done either mechanically using an overpressure valve or using the pressure limitation of the servo drive. The pressure limitation allows both the maximum and the minimum permissible reference value of the pressure control to be limited.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 184

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 185

Q [l/min]

NOTE

- The limitation controllers are not active in all control modes. The following table shows which limitations can be configured for which control mode.
- Section 7.11.6 Hydraulic Motion profile describes for which control modes the scaling factor can be used.

|Control mode|Pressure limit|Volumetric flow rate limit|
|---|---|---|
|NPumpCon(4)|x|x|
|PressCon(0)|x|x|
|VolCon(5)| |x|
|VolConPlim(1)|x|x|
|SpdCon(2)| |x|
|SpdCon_plimit|x| |
|-SpdCon_PI| | |
|PosCon(3)| | |
|- PosCon_QFF|x| |
|- PosCon| | |
|- PosCon_plimit|x|x|
|- PosCon_TrackingError|x| |

Table 7.54: Hydraulic Limitations

For the purpose of volumetric flow rate limitation during the process or in individual motion blocks, a scaling factor (P 2872 HYD_Tab_Limit) can be used in some control modes (see Table) to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193)

NOTE

l  The limitation controllers are not active in all control modes. The table shows which limitations can be configured for which control mode. See

# Table 7.54: Hydraulic Limitations

Image 7.62: “Pressure limit” screen

# 7.11.4.2 Volumetric flow rate limit

The minimum and maximum volumetric flow rate can be limited to suit the system requirements using the volumetric flow rate limit. Once the parametrized volumetric flow rate limits are reached, the pump speed is limited by the motor speed controller.

A selection can be made between P 2850[8] - QMax and P 2847[3] - QRef as the source of the limit value by making a source selection (QMaxSrc). P 2847[3] - QRef can be used to specify the limit via the volumetric flow rate value, which, for example, can be set variably using an analog input.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 186

# 7 Control

# 7 Control

MOOG                          ID No.:CB40859-001 Date:11/2020

MSD ServoDrive   - DeviceHelp      187

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2840|4|pMinSrc| |Minimum pressure source selector|
|2840|5|pMaxSrc| |Maximum pressure source selector|
|2840|6|QMinSrc| |Minimum flow rate source selector|
|2840|7|QMaxSrc| |Maximum flow rate source selector|
|2840|8|QActCalc| |Flow rate calculation method|
|2840|9|QLeakEst| |Flow rate leakage estimation method|
|2840|10|nRefSrc| |Pump speed reference source selector|
|2840|11|CylValveSwSel| |Function selector for the valve switchover of the cylinder|
|2840|12|AltPosCon| |Alternative position controller|
|2840|13|AltSpdCon| |Alternative cylinder speed controllers|
|2840|14|PumpSpdProt| |Pump speed protection|
|2840|15|PumpP2tProt| |p2t protection for pump|
|2840|16|AltPressCon| |Alternative pressure controller|
|2840|17|AltPressConLimit| |Alternative pressure limit controller|

Table 7.55: Parameters – Configure Hydraulic System Control (continue)

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850| |HYD_PressCon| |Hydraulic pressure control parameters|
|2850|0|Kp|rpm/bar|Gain|
|2850|1|KpScale| |Gain scaling|
|2850|2|Tn|ms|Integration time constant|
|2850|3|Tv|ms|Rate time|
|2850|4|Tp|ms|Integral-action time|
|2850|5|pMin|bar|Minimum permissible pressure|
|2850|6|pMax|bar|Maximum permissible pressure|
|2850|7|QMin|l/min|Minimum flow rate|
|2850|8|QMax|l/min|Maximum flow rate|
|2850|9|PressWindow|bar|Pressure control parameters|
|2850|10|decmpLvl|bar|Level for active decompression|

Table 7.56: Parameters – Pressure control parameters

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850|11|decmpRate|bar/s|Rate for active decompression|
|2850|12|pActScale| |Scaling for pAct|
|2850|13|pAct2Scale| |Scaling for pAct2|
|2850|14|pRange_k|%|Pressure range threshold|
|2850|15|pRange_midpoint|bar|Pressure range midpoint|

Table 7.56: Parameters – Pressure control parameters (continue)

# 7.11.5 Cylinder configuration

If no volumetric flow rate sensor is employed, the volumetric flow rate can be calculated using a linear encoder and the cylinder geometry (P 2840.8 QActCalc). To do so, various different cylinder dimensions must be passed to the servo drive. The different surface areas of the piston and ring side must be kept in mind because either more or less medium is required for the same path depending on the power direction.

Image 7.64: “Cylinder configuration” screen

The parameters which must be set are P 2852[0] - cylArea1 and P 2852[2] - cylArea2.

Cylinder piston surface area A1 = cylAreal1 = A1 in cm²

Cylinder ring surface area A2 = cylAreal2 = A2 in cm²

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 188

# 7 Control

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 189

# NOTE

For pumps which only operate with a positive speed (only one direction of rotation) and switch the direction of action of the cylinder via a directional valve, one of the two cylinder surfaces must be specified as negative (Image 7.64: “Cylinder configuration” screen). If the pump can be operated in both directions of rotation, this is not necessary.

Since in MSD Servo Drive all encoder input variables are calculated in revolutions, the hydraulics require a relationship between linear and rotary motion for the internal calculations of the cylinder model, cylinder speed and feed-forward control variables. For this purpose, the encoder resolution Sx of the linear encoder in μm per encoder revolution must be known (Para 2852.7unit_scale). In this case, one encoder revolution is the singleturn range of the respective position sensor for the cylinder position. This corresponds to 32768 μm/rev for a 16 bit linear encoder with a resolution of 0.5 μm per increment.

If the current position of the cylinder is transferred via the bus interface (P 2298 ComAngle32), the single and multiturn range is set to 16 bits each. This corresponds to 65536 μm/rev.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2852|HYD_SpdCon|Speed control parameters|Speed control parameters|Speed control parameters|
|2852|0|cylArea1|cm2|Cylinder area|
|2852|1|Ife_K_scale| |Leakage Flow Estimator: Gain scaling|
|2852|2|cylArea2|cm2|Cylinder area (option 2, use neg. value for neg. direction)|
|2852|3|Ife_K_scale2| |Leakage Flow Estimator: Gain scaling (option 2)|
|2852|4|res| |Reserved|
|2852|5|res| |Reserved|
|2852|6|res| |Reserved|
|2852|7|unit_scale|um/rev|Hydraulic physical unit scaling|

Table 7.57: Parameters – Pressure control parameters

# 7.11.6 Hydraulic Motion profile

specified manually for each individual table index. In addition, the valve switching delay can be taken into account; the start of the setpoint ramp is delayed after a valve switchover (P 2851.13 - tSwValve). Once the command for the switchover of a valve has been triggered, a timer begins to run which delays the setpoint enable. If the motor still has a speed reference value at the moment of the switchover, it is run down to 0 rpm using the ramp specified in P 2851.12 - stopRamp.

# Selection of operation mode

- 0 = PARA
- Setpoint setting from table, table index (P 2860) set using parameter access (BUS, PLC, Moog DRIVEADMINISTRATOR 5, etc.) (ramp changes are applied when the index changes)
- 1 = TERM
- Setting from table, table index (P 2860) will be updated via digital inputs (ramp changes will be applied when the index changes)
- 2 = CTRL1
- Operation via control word. Only parameters from table index 0 are used in the CTRL1 mode. The control mode is set via the control word (CtrlBit 0-3) and the setpoint values can be changed directly in table index 0.
- 3 = CTRL2
- Operation via control word. Parameters from all table indexes can be used in CTRL2 mode. The respective motion block is selected using the control word (CtrlBit 0-3).
- 4 = TAB
- Setpoint setting from table, table index (P 2860) is controlled using the switching condition of the motion block table.

NOTE

- In CTRL1 and CTRL2, the setpoint is adopted cyclically independently of NewSetpoint and ramp change with rising edge at NewSetpoint or new table index.

The various different operating modes for controlling the motion sequences can be selected using P 2862[0] - OpMode. The parameter P 2840[11] -CylValveSwSel can be used to set various different modes for controlling the actuating valves. Valve switching can be performed automatically via the POS(3) mode depending on the position difference or be.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 190

# Control

# MOOG

ID No.: CB40859-001 Date: 11/2020

# MSD ServoDrive - DeviceHelp

191

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2862|0|HYD_OpMode|Hydraulic: operation mode|

Table 7.58: “Hydraulic - Operation mode” parameters

For communication with a higher-level controller in the CTRL1 and CTRL2 operating modes, some scaling factors of process variables and control parameters are summarized in P 2879 HYD_AddProcData. These parameters are PDO-capable and are created in the int16 format in order to use as little memory space as possible in the process data channel. ",What are the methods for limiting pressure in hydraulic systems according to the MSD ServoDrive documentation?,Pressure can be limited either mechanically using an overpressure valve or through the pressure limitation feature of the servo drive.,"According to the MSD ServoDrive documentation, pressure limitation can be achieved mechanically with an overpressure valve or via the servo drive's pressure limitation capability.",The MSD ServoDrive outlines two methods for pressure limitation: mechanical limitation with an overpressure valve and electronic limitation via the servo drive.,"In hydraulic systems, the MSD ServoDrive suggests using an overpressure valve for mechanical pressure limitation or the servo drive's built-in pressure limitation feature.",Mechanical pressure limitation with an overpressure valve and electronic limitation through the servo drive are the two methods described in the MSD ServoDrive documentation.
3,msd_servo_drive.txt,58,fa106461ff0d7282ea54d790e61aff016db60820f22b14c573a0e498c89bd696,"However, these values are only a guideline. Every application will, of course, have its own requirements for dynamics and accuracy. The optimum setting must be determined during commissioning.

Image 7.60: Example of application for volume/mass sensors

For the purpose of pressure limitation during the process or in individual motion blocks, a scaling (P 2872 HYD_Tab_Limit) can be used to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193 and see also section ""Scaling of the hydraulic limits"" on page 195)

# 7.11.4 Hydraulic Limitations

# 7.11.4.1 Pressure limit

Furthermore, the limitation can be switched to inactive by means of a higher-level control system. The five lower bits of the hydraulic control word are used for this purpose, P 2841 HYD_Ctrl bit 11 to bit 15. Setting bit 11 deactivates the pressure limitation. Bits 12 to 15 only switch off the limitation in the respective quadrant of the P/Q coordinate system. (Bit 12 = Q1, bit 13 = Q2, bit 14 = Q3, bit 15 = Q4).

It is usually necessary to limit the pressure to a maximum permissible value. This can be done either mechanically using an overpressure valve or using the pressure limitation of the servo drive. The pressure limitation allows both the maximum and the minimum permissible reference value of the pressure control to be limited.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 184

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 185

Q [l/min]

NOTE

- The limitation controllers are not active in all control modes. The following table shows which limitations can be configured for which control mode.
- Section 7.11.6 Hydraulic Motion profile describes for which control modes the scaling factor can be used.

|Control mode|Pressure limit|Volumetric flow rate limit|
|---|---|---|
|NPumpCon(4)|x|x|
|PressCon(0)|x|x|
|VolCon(5)| |x|
|VolConPlim(1)|x|x|
|SpdCon(2)| |x|
|SpdCon_plimit|x| |
|-SpdCon_PI| | |
|PosCon(3)| | |
|- PosCon_QFF|x| |
|- PosCon| | |
|- PosCon_plimit|x|x|
|- PosCon_TrackingError|x| |

Table 7.54: Hydraulic Limitations

For the purpose of volumetric flow rate limitation during the process or in individual motion blocks, a scaling factor (P 2872 HYD_Tab_Limit) can be used in some control modes (see Table) to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193)

NOTE

l  The limitation controllers are not active in all control modes. The table shows which limitations can be configured for which control mode. See

# Table 7.54: Hydraulic Limitations

Image 7.62: “Pressure limit” screen

# 7.11.4.2 Volumetric flow rate limit

The minimum and maximum volumetric flow rate can be limited to suit the system requirements using the volumetric flow rate limit. Once the parametrized volumetric flow rate limits are reached, the pump speed is limited by the motor speed controller.

A selection can be made between P 2850[8] - QMax and P 2847[3] - QRef as the source of the limit value by making a source selection (QMaxSrc). P 2847[3] - QRef can be used to specify the limit via the volumetric flow rate value, which, for example, can be set variably using an analog input.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 186

# 7 Control

# 7 Control

MOOG                          ID No.:CB40859-001 Date:11/2020

MSD ServoDrive   - DeviceHelp      187

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2840|4|pMinSrc| |Minimum pressure source selector|
|2840|5|pMaxSrc| |Maximum pressure source selector|
|2840|6|QMinSrc| |Minimum flow rate source selector|
|2840|7|QMaxSrc| |Maximum flow rate source selector|
|2840|8|QActCalc| |Flow rate calculation method|
|2840|9|QLeakEst| |Flow rate leakage estimation method|
|2840|10|nRefSrc| |Pump speed reference source selector|
|2840|11|CylValveSwSel| |Function selector for the valve switchover of the cylinder|
|2840|12|AltPosCon| |Alternative position controller|
|2840|13|AltSpdCon| |Alternative cylinder speed controllers|
|2840|14|PumpSpdProt| |Pump speed protection|
|2840|15|PumpP2tProt| |p2t protection for pump|
|2840|16|AltPressCon| |Alternative pressure controller|
|2840|17|AltPressConLimit| |Alternative pressure limit controller|

Table 7.55: Parameters – Configure Hydraulic System Control (continue)

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850| |HYD_PressCon| |Hydraulic pressure control parameters|
|2850|0|Kp|rpm/bar|Gain|
|2850|1|KpScale| |Gain scaling|
|2850|2|Tn|ms|Integration time constant|
|2850|3|Tv|ms|Rate time|
|2850|4|Tp|ms|Integral-action time|
|2850|5|pMin|bar|Minimum permissible pressure|
|2850|6|pMax|bar|Maximum permissible pressure|
|2850|7|QMin|l/min|Minimum flow rate|
|2850|8|QMax|l/min|Maximum flow rate|
|2850|9|PressWindow|bar|Pressure control parameters|
|2850|10|decmpLvl|bar|Level for active decompression|

Table 7.56: Parameters – Pressure control parameters

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850|11|decmpRate|bar/s|Rate for active decompression|
|2850|12|pActScale| |Scaling for pAct|
|2850|13|pAct2Scale| |Scaling for pAct2|
|2850|14|pRange_k|%|Pressure range threshold|
|2850|15|pRange_midpoint|bar|Pressure range midpoint|

Table 7.56: Parameters – Pressure control parameters (continue)

# 7.11.5 Cylinder configuration

If no volumetric flow rate sensor is employed, the volumetric flow rate can be calculated using a linear encoder and the cylinder geometry (P 2840.8 QActCalc). To do so, various different cylinder dimensions must be passed to the servo drive. The different surface areas of the piston and ring side must be kept in mind because either more or less medium is required for the same path depending on the power direction.

Image 7.64: “Cylinder configuration” screen

The parameters which must be set are P 2852[0] - cylArea1 and P 2852[2] - cylArea2.

Cylinder piston surface area A1 = cylAreal1 = A1 in cm²

Cylinder ring surface area A2 = cylAreal2 = A2 in cm²

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 188

# 7 Control

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 189

# NOTE

For pumps which only operate with a positive speed (only one direction of rotation) and switch the direction of action of the cylinder via a directional valve, one of the two cylinder surfaces must be specified as negative (Image 7.64: “Cylinder configuration” screen). If the pump can be operated in both directions of rotation, this is not necessary.

Since in MSD Servo Drive all encoder input variables are calculated in revolutions, the hydraulics require a relationship between linear and rotary motion for the internal calculations of the cylinder model, cylinder speed and feed-forward control variables. For this purpose, the encoder resolution Sx of the linear encoder in μm per encoder revolution must be known (Para 2852.7unit_scale). In this case, one encoder revolution is the singleturn range of the respective position sensor for the cylinder position. This corresponds to 32768 μm/rev for a 16 bit linear encoder with a resolution of 0.5 μm per increment.

If the current position of the cylinder is transferred via the bus interface (P 2298 ComAngle32), the single and multiturn range is set to 16 bits each. This corresponds to 65536 μm/rev.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2852|HYD_SpdCon|Speed control parameters|Speed control parameters|Speed control parameters|
|2852|0|cylArea1|cm2|Cylinder area|
|2852|1|Ife_K_scale| |Leakage Flow Estimator: Gain scaling|
|2852|2|cylArea2|cm2|Cylinder area (option 2, use neg. value for neg. direction)|
|2852|3|Ife_K_scale2| |Leakage Flow Estimator: Gain scaling (option 2)|
|2852|4|res| |Reserved|
|2852|5|res| |Reserved|
|2852|6|res| |Reserved|
|2852|7|unit_scale|um/rev|Hydraulic physical unit scaling|

Table 7.57: Parameters – Pressure control parameters

# 7.11.6 Hydraulic Motion profile

specified manually for each individual table index. In addition, the valve switching delay can be taken into account; the start of the setpoint ramp is delayed after a valve switchover (P 2851.13 - tSwValve). Once the command for the switchover of a valve has been triggered, a timer begins to run which delays the setpoint enable. If the motor still has a speed reference value at the moment of the switchover, it is run down to 0 rpm using the ramp specified in P 2851.12 - stopRamp.

# Selection of operation mode

- 0 = PARA
- Setpoint setting from table, table index (P 2860) set using parameter access (BUS, PLC, Moog DRIVEADMINISTRATOR 5, etc.) (ramp changes are applied when the index changes)
- 1 = TERM
- Setting from table, table index (P 2860) will be updated via digital inputs (ramp changes will be applied when the index changes)
- 2 = CTRL1
- Operation via control word. Only parameters from table index 0 are used in the CTRL1 mode. The control mode is set via the control word (CtrlBit 0-3) and the setpoint values can be changed directly in table index 0.
- 3 = CTRL2
- Operation via control word. Parameters from all table indexes can be used in CTRL2 mode. The respective motion block is selected using the control word (CtrlBit 0-3).
- 4 = TAB
- Setpoint setting from table, table index (P 2860) is controlled using the switching condition of the motion block table.

NOTE

- In CTRL1 and CTRL2, the setpoint is adopted cyclically independently of NewSetpoint and ramp change with rising edge at NewSetpoint or new table index.

The various different operating modes for controlling the motion sequences can be selected using P 2862[0] - OpMode. The parameter P 2840[11] -CylValveSwSel can be used to set various different modes for controlling the actuating valves. Valve switching can be performed automatically via the POS(3) mode depending on the position difference or be.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 190

# Control

# MOOG

ID No.: CB40859-001 Date: 11/2020

# MSD ServoDrive - DeviceHelp

191

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2862|0|HYD_OpMode|Hydraulic: operation mode|

Table 7.58: “Hydraulic - Operation mode” parameters

For communication with a higher-level controller in the CTRL1 and CTRL2 operating modes, some scaling factors of process variables and control parameters are summarized in P 2879 HYD_AddProcData. These parameters are PDO-capable and are created in the int16 format in order to use as little memory space as possible in the process data channel. ",Which control modes in the MSD ServoDrive allow for the configuration of pressure and volumetric flow rate limits?,"Control modes such as NPumpCon(4), PressCon(0), VolConPlim(1), and PosCon_plimit allow for the configuration of both pressure and volumetric flow rate limits.","In the MSD ServoDrive, NPumpCon(4), PressCon(0), VolConPlim(1), and PosCon_plimit are among the control modes that support both pressure and volumetric flow rate limitations.","The MSD ServoDrive's NPumpCon(4), PressCon(0), VolConPlim(1), and PosCon_plimit control modes enable the setting of limits for both pressure and volumetric flow rate.","Pressure and volumetric flow rate limits can be configured in the MSD ServoDrive within the NPumpCon(4), PressCon(0), VolConPlim(1), and PosCon_plimit control modes.","Among the MSD ServoDrive's control modes, NPumpCon(4), PressCon(0), VolConPlim(1), and PosCon_plimit provide options for setting both pressure and volumetric flow rate limits."
4,msd_servo_drive.txt,58,fa106461ff0d7282ea54d790e61aff016db60820f22b14c573a0e498c89bd696,"However, these values are only a guideline. Every application will, of course, have its own requirements for dynamics and accuracy. The optimum setting must be determined during commissioning.

Image 7.60: Example of application for volume/mass sensors

For the purpose of pressure limitation during the process or in individual motion blocks, a scaling (P 2872 HYD_Tab_Limit) can be used to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193 and see also section ""Scaling of the hydraulic limits"" on page 195)

# 7.11.4 Hydraulic Limitations

# 7.11.4.1 Pressure limit

Furthermore, the limitation can be switched to inactive by means of a higher-level control system. The five lower bits of the hydraulic control word are used for this purpose, P 2841 HYD_Ctrl bit 11 to bit 15. Setting bit 11 deactivates the pressure limitation. Bits 12 to 15 only switch off the limitation in the respective quadrant of the P/Q coordinate system. (Bit 12 = Q1, bit 13 = Q2, bit 14 = Q3, bit 15 = Q4).

It is usually necessary to limit the pressure to a maximum permissible value. This can be done either mechanically using an overpressure valve or using the pressure limitation of the servo drive. The pressure limitation allows both the maximum and the minimum permissible reference value of the pressure control to be limited.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 184

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 185

Q [l/min]

NOTE

- The limitation controllers are not active in all control modes. The following table shows which limitations can be configured for which control mode.
- Section 7.11.6 Hydraulic Motion profile describes for which control modes the scaling factor can be used.

|Control mode|Pressure limit|Volumetric flow rate limit|
|---|---|---|
|NPumpCon(4)|x|x|
|PressCon(0)|x|x|
|VolCon(5)| |x|
|VolConPlim(1)|x|x|
|SpdCon(2)| |x|
|SpdCon_plimit|x| |
|-SpdCon_PI| | |
|PosCon(3)| | |
|- PosCon_QFF|x| |
|- PosCon| | |
|- PosCon_plimit|x|x|
|- PosCon_TrackingError|x| |

Table 7.54: Hydraulic Limitations

For the purpose of volumetric flow rate limitation during the process or in individual motion blocks, a scaling factor (P 2872 HYD_Tab_Limit) can be used in some control modes (see Table) to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193)

NOTE

l  The limitation controllers are not active in all control modes. The table shows which limitations can be configured for which control mode. See

# Table 7.54: Hydraulic Limitations

Image 7.62: “Pressure limit” screen

# 7.11.4.2 Volumetric flow rate limit

The minimum and maximum volumetric flow rate can be limited to suit the system requirements using the volumetric flow rate limit. Once the parametrized volumetric flow rate limits are reached, the pump speed is limited by the motor speed controller.

A selection can be made between P 2850[8] - QMax and P 2847[3] - QRef as the source of the limit value by making a source selection (QMaxSrc). P 2847[3] - QRef can be used to specify the limit via the volumetric flow rate value, which, for example, can be set variably using an analog input.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 186

# 7 Control

# 7 Control

MOOG                          ID No.:CB40859-001 Date:11/2020

MSD ServoDrive   - DeviceHelp      187

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2840|4|pMinSrc| |Minimum pressure source selector|
|2840|5|pMaxSrc| |Maximum pressure source selector|
|2840|6|QMinSrc| |Minimum flow rate source selector|
|2840|7|QMaxSrc| |Maximum flow rate source selector|
|2840|8|QActCalc| |Flow rate calculation method|
|2840|9|QLeakEst| |Flow rate leakage estimation method|
|2840|10|nRefSrc| |Pump speed reference source selector|
|2840|11|CylValveSwSel| |Function selector for the valve switchover of the cylinder|
|2840|12|AltPosCon| |Alternative position controller|
|2840|13|AltSpdCon| |Alternative cylinder speed controllers|
|2840|14|PumpSpdProt| |Pump speed protection|
|2840|15|PumpP2tProt| |p2t protection for pump|
|2840|16|AltPressCon| |Alternative pressure controller|
|2840|17|AltPressConLimit| |Alternative pressure limit controller|

Table 7.55: Parameters – Configure Hydraulic System Control (continue)

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850| |HYD_PressCon| |Hydraulic pressure control parameters|
|2850|0|Kp|rpm/bar|Gain|
|2850|1|KpScale| |Gain scaling|
|2850|2|Tn|ms|Integration time constant|
|2850|3|Tv|ms|Rate time|
|2850|4|Tp|ms|Integral-action time|
|2850|5|pMin|bar|Minimum permissible pressure|
|2850|6|pMax|bar|Maximum permissible pressure|
|2850|7|QMin|l/min|Minimum flow rate|
|2850|8|QMax|l/min|Maximum flow rate|
|2850|9|PressWindow|bar|Pressure control parameters|
|2850|10|decmpLvl|bar|Level for active decompression|

Table 7.56: Parameters – Pressure control parameters

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850|11|decmpRate|bar/s|Rate for active decompression|
|2850|12|pActScale| |Scaling for pAct|
|2850|13|pAct2Scale| |Scaling for pAct2|
|2850|14|pRange_k|%|Pressure range threshold|
|2850|15|pRange_midpoint|bar|Pressure range midpoint|

Table 7.56: Parameters – Pressure control parameters (continue)

# 7.11.5 Cylinder configuration

If no volumetric flow rate sensor is employed, the volumetric flow rate can be calculated using a linear encoder and the cylinder geometry (P 2840.8 QActCalc). To do so, various different cylinder dimensions must be passed to the servo drive. The different surface areas of the piston and ring side must be kept in mind because either more or less medium is required for the same path depending on the power direction.

Image 7.64: “Cylinder configuration” screen

The parameters which must be set are P 2852[0] - cylArea1 and P 2852[2] - cylArea2.

Cylinder piston surface area A1 = cylAreal1 = A1 in cm²

Cylinder ring surface area A2 = cylAreal2 = A2 in cm²

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 188

# 7 Control

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 189

# NOTE

For pumps which only operate with a positive speed (only one direction of rotation) and switch the direction of action of the cylinder via a directional valve, one of the two cylinder surfaces must be specified as negative (Image 7.64: “Cylinder configuration” screen). If the pump can be operated in both directions of rotation, this is not necessary.

Since in MSD Servo Drive all encoder input variables are calculated in revolutions, the hydraulics require a relationship between linear and rotary motion for the internal calculations of the cylinder model, cylinder speed and feed-forward control variables. For this purpose, the encoder resolution Sx of the linear encoder in μm per encoder revolution must be known (Para 2852.7unit_scale). In this case, one encoder revolution is the singleturn range of the respective position sensor for the cylinder position. This corresponds to 32768 μm/rev for a 16 bit linear encoder with a resolution of 0.5 μm per increment.

If the current position of the cylinder is transferred via the bus interface (P 2298 ComAngle32), the single and multiturn range is set to 16 bits each. This corresponds to 65536 μm/rev.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2852|HYD_SpdCon|Speed control parameters|Speed control parameters|Speed control parameters|
|2852|0|cylArea1|cm2|Cylinder area|
|2852|1|Ife_K_scale| |Leakage Flow Estimator: Gain scaling|
|2852|2|cylArea2|cm2|Cylinder area (option 2, use neg. value for neg. direction)|
|2852|3|Ife_K_scale2| |Leakage Flow Estimator: Gain scaling (option 2)|
|2852|4|res| |Reserved|
|2852|5|res| |Reserved|
|2852|6|res| |Reserved|
|2852|7|unit_scale|um/rev|Hydraulic physical unit scaling|

Table 7.57: Parameters – Pressure control parameters

# 7.11.6 Hydraulic Motion profile

specified manually for each individual table index. In addition, the valve switching delay can be taken into account; the start of the setpoint ramp is delayed after a valve switchover (P 2851.13 - tSwValve). Once the command for the switchover of a valve has been triggered, a timer begins to run which delays the setpoint enable. If the motor still has a speed reference value at the moment of the switchover, it is run down to 0 rpm using the ramp specified in P 2851.12 - stopRamp.

# Selection of operation mode

- 0 = PARA
- Setpoint setting from table, table index (P 2860) set using parameter access (BUS, PLC, Moog DRIVEADMINISTRATOR 5, etc.) (ramp changes are applied when the index changes)
- 1 = TERM
- Setting from table, table index (P 2860) will be updated via digital inputs (ramp changes will be applied when the index changes)
- 2 = CTRL1
- Operation via control word. Only parameters from table index 0 are used in the CTRL1 mode. The control mode is set via the control word (CtrlBit 0-3) and the setpoint values can be changed directly in table index 0.
- 3 = CTRL2
- Operation via control word. Parameters from all table indexes can be used in CTRL2 mode. The respective motion block is selected using the control word (CtrlBit 0-3).
- 4 = TAB
- Setpoint setting from table, table index (P 2860) is controlled using the switching condition of the motion block table.

NOTE

- In CTRL1 and CTRL2, the setpoint is adopted cyclically independently of NewSetpoint and ramp change with rising edge at NewSetpoint or new table index.

The various different operating modes for controlling the motion sequences can be selected using P 2862[0] - OpMode. The parameter P 2840[11] -CylValveSwSel can be used to set various different modes for controlling the actuating valves. Valve switching can be performed automatically via the POS(3) mode depending on the position difference or be.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 190

# Control

# MOOG

ID No.: CB40859-001 Date: 11/2020

# MSD ServoDrive - DeviceHelp

191

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2862|0|HYD_OpMode|Hydraulic: operation mode|

Table 7.58: “Hydraulic - Operation mode” parameters

For communication with a higher-level controller in the CTRL1 and CTRL2 operating modes, some scaling factors of process variables and control parameters are summarized in P 2879 HYD_AddProcData. These parameters are PDO-capable and are created in the int16 format in order to use as little memory space as possible in the process data channel. ",What is the function of the volumetric flow rate limit in the MSD ServoDrive?,"The volumetric flow rate limit restricts the minimum and maximum flow rates to meet system requirements, with the pump speed being limited by the motor speed controller once these limits are reached.","In the MSD ServoDrive, the volumetric flow rate limit ensures that flow rates stay within specified minimum and maximum values, adjusting pump speed accordingly via the motor speed controller.","To adhere to system requirements, the MSD ServoDrive uses the volumetric flow rate limit to confine flow rates within set bounds, leveraging the motor speed controller to limit pump speed when necessary.","The MSD ServoDrive's volumetric flow rate limit function caps the flow rate at predefined minimum and maximum levels, utilizing the motor speed controller to restrict pump speed upon reaching these limits.","By setting minimum and maximum volumetric flow rate limits, the MSD ServoDrive can control pump speed through the motor speed controller to ensure system requirements are met."
5,msd_servo_drive.txt,58,fa106461ff0d7282ea54d790e61aff016db60820f22b14c573a0e498c89bd696,"However, these values are only a guideline. Every application will, of course, have its own requirements for dynamics and accuracy. The optimum setting must be determined during commissioning.

Image 7.60: Example of application for volume/mass sensors

For the purpose of pressure limitation during the process or in individual motion blocks, a scaling (P 2872 HYD_Tab_Limit) can be used to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193 and see also section ""Scaling of the hydraulic limits"" on page 195)

# 7.11.4 Hydraulic Limitations

# 7.11.4.1 Pressure limit

Furthermore, the limitation can be switched to inactive by means of a higher-level control system. The five lower bits of the hydraulic control word are used for this purpose, P 2841 HYD_Ctrl bit 11 to bit 15. Setting bit 11 deactivates the pressure limitation. Bits 12 to 15 only switch off the limitation in the respective quadrant of the P/Q coordinate system. (Bit 12 = Q1, bit 13 = Q2, bit 14 = Q3, bit 15 = Q4).

It is usually necessary to limit the pressure to a maximum permissible value. This can be done either mechanically using an overpressure valve or using the pressure limitation of the servo drive. The pressure limitation allows both the maximum and the minimum permissible reference value of the pressure control to be limited.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 184

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 185

Q [l/min]

NOTE

- The limitation controllers are not active in all control modes. The following table shows which limitations can be configured for which control mode.
- Section 7.11.6 Hydraulic Motion profile describes for which control modes the scaling factor can be used.

|Control mode|Pressure limit|Volumetric flow rate limit|
|---|---|---|
|NPumpCon(4)|x|x|
|PressCon(0)|x|x|
|VolCon(5)| |x|
|VolConPlim(1)|x|x|
|SpdCon(2)| |x|
|SpdCon_plimit|x| |
|-SpdCon_PI| | |
|PosCon(3)| | |
|- PosCon_QFF|x| |
|- PosCon| | |
|- PosCon_plimit|x|x|
|- PosCon_TrackingError|x| |

Table 7.54: Hydraulic Limitations

For the purpose of volumetric flow rate limitation during the process or in individual motion blocks, a scaling factor (P 2872 HYD_Tab_Limit) can be used in some control modes (see Table) to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193)

NOTE

l  The limitation controllers are not active in all control modes. The table shows which limitations can be configured for which control mode. See

# Table 7.54: Hydraulic Limitations

Image 7.62: “Pressure limit” screen

# 7.11.4.2 Volumetric flow rate limit

The minimum and maximum volumetric flow rate can be limited to suit the system requirements using the volumetric flow rate limit. Once the parametrized volumetric flow rate limits are reached, the pump speed is limited by the motor speed controller.

A selection can be made between P 2850[8] - QMax and P 2847[3] - QRef as the source of the limit value by making a source selection (QMaxSrc). P 2847[3] - QRef can be used to specify the limit via the volumetric flow rate value, which, for example, can be set variably using an analog input.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 186

# 7 Control

# 7 Control

MOOG                          ID No.:CB40859-001 Date:11/2020

MSD ServoDrive   - DeviceHelp      187

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2840|4|pMinSrc| |Minimum pressure source selector|
|2840|5|pMaxSrc| |Maximum pressure source selector|
|2840|6|QMinSrc| |Minimum flow rate source selector|
|2840|7|QMaxSrc| |Maximum flow rate source selector|
|2840|8|QActCalc| |Flow rate calculation method|
|2840|9|QLeakEst| |Flow rate leakage estimation method|
|2840|10|nRefSrc| |Pump speed reference source selector|
|2840|11|CylValveSwSel| |Function selector for the valve switchover of the cylinder|
|2840|12|AltPosCon| |Alternative position controller|
|2840|13|AltSpdCon| |Alternative cylinder speed controllers|
|2840|14|PumpSpdProt| |Pump speed protection|
|2840|15|PumpP2tProt| |p2t protection for pump|
|2840|16|AltPressCon| |Alternative pressure controller|
|2840|17|AltPressConLimit| |Alternative pressure limit controller|

Table 7.55: Parameters – Configure Hydraulic System Control (continue)

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850| |HYD_PressCon| |Hydraulic pressure control parameters|
|2850|0|Kp|rpm/bar|Gain|
|2850|1|KpScale| |Gain scaling|
|2850|2|Tn|ms|Integration time constant|
|2850|3|Tv|ms|Rate time|
|2850|4|Tp|ms|Integral-action time|
|2850|5|pMin|bar|Minimum permissible pressure|
|2850|6|pMax|bar|Maximum permissible pressure|
|2850|7|QMin|l/min|Minimum flow rate|
|2850|8|QMax|l/min|Maximum flow rate|
|2850|9|PressWindow|bar|Pressure control parameters|
|2850|10|decmpLvl|bar|Level for active decompression|

Table 7.56: Parameters – Pressure control parameters

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850|11|decmpRate|bar/s|Rate for active decompression|
|2850|12|pActScale| |Scaling for pAct|
|2850|13|pAct2Scale| |Scaling for pAct2|
|2850|14|pRange_k|%|Pressure range threshold|
|2850|15|pRange_midpoint|bar|Pressure range midpoint|

Table 7.56: Parameters – Pressure control parameters (continue)

# 7.11.5 Cylinder configuration

If no volumetric flow rate sensor is employed, the volumetric flow rate can be calculated using a linear encoder and the cylinder geometry (P 2840.8 QActCalc). To do so, various different cylinder dimensions must be passed to the servo drive. The different surface areas of the piston and ring side must be kept in mind because either more or less medium is required for the same path depending on the power direction.

Image 7.64: “Cylinder configuration” screen

The parameters which must be set are P 2852[0] - cylArea1 and P 2852[2] - cylArea2.

Cylinder piston surface area A1 = cylAreal1 = A1 in cm²

Cylinder ring surface area A2 = cylAreal2 = A2 in cm²

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 188

# 7 Control

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 189

# NOTE

For pumps which only operate with a positive speed (only one direction of rotation) and switch the direction of action of the cylinder via a directional valve, one of the two cylinder surfaces must be specified as negative (Image 7.64: “Cylinder configuration” screen). If the pump can be operated in both directions of rotation, this is not necessary.

Since in MSD Servo Drive all encoder input variables are calculated in revolutions, the hydraulics require a relationship between linear and rotary motion for the internal calculations of the cylinder model, cylinder speed and feed-forward control variables. For this purpose, the encoder resolution Sx of the linear encoder in μm per encoder revolution must be known (Para 2852.7unit_scale). In this case, one encoder revolution is the singleturn range of the respective position sensor for the cylinder position. This corresponds to 32768 μm/rev for a 16 bit linear encoder with a resolution of 0.5 μm per increment.

If the current position of the cylinder is transferred via the bus interface (P 2298 ComAngle32), the single and multiturn range is set to 16 bits each. This corresponds to 65536 μm/rev.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2852|HYD_SpdCon|Speed control parameters|Speed control parameters|Speed control parameters|
|2852|0|cylArea1|cm2|Cylinder area|
|2852|1|Ife_K_scale| |Leakage Flow Estimator: Gain scaling|
|2852|2|cylArea2|cm2|Cylinder area (option 2, use neg. value for neg. direction)|
|2852|3|Ife_K_scale2| |Leakage Flow Estimator: Gain scaling (option 2)|
|2852|4|res| |Reserved|
|2852|5|res| |Reserved|
|2852|6|res| |Reserved|
|2852|7|unit_scale|um/rev|Hydraulic physical unit scaling|

Table 7.57: Parameters – Pressure control parameters

# 7.11.6 Hydraulic Motion profile

specified manually for each individual table index. In addition, the valve switching delay can be taken into account; the start of the setpoint ramp is delayed after a valve switchover (P 2851.13 - tSwValve). Once the command for the switchover of a valve has been triggered, a timer begins to run which delays the setpoint enable. If the motor still has a speed reference value at the moment of the switchover, it is run down to 0 rpm using the ramp specified in P 2851.12 - stopRamp.

# Selection of operation mode

- 0 = PARA
- Setpoint setting from table, table index (P 2860) set using parameter access (BUS, PLC, Moog DRIVEADMINISTRATOR 5, etc.) (ramp changes are applied when the index changes)
- 1 = TERM
- Setting from table, table index (P 2860) will be updated via digital inputs (ramp changes will be applied when the index changes)
- 2 = CTRL1
- Operation via control word. Only parameters from table index 0 are used in the CTRL1 mode. The control mode is set via the control word (CtrlBit 0-3) and the setpoint values can be changed directly in table index 0.
- 3 = CTRL2
- Operation via control word. Parameters from all table indexes can be used in CTRL2 mode. The respective motion block is selected using the control word (CtrlBit 0-3).
- 4 = TAB
- Setpoint setting from table, table index (P 2860) is controlled using the switching condition of the motion block table.

NOTE

- In CTRL1 and CTRL2, the setpoint is adopted cyclically independently of NewSetpoint and ramp change with rising edge at NewSetpoint or new table index.

The various different operating modes for controlling the motion sequences can be selected using P 2862[0] - OpMode. The parameter P 2840[11] -CylValveSwSel can be used to set various different modes for controlling the actuating valves. Valve switching can be performed automatically via the POS(3) mode depending on the position difference or be.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 190

# Control

# MOOG

ID No.: CB40859-001 Date: 11/2020

# MSD ServoDrive - DeviceHelp

191

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2862|0|HYD_OpMode|Hydraulic: operation mode|

Table 7.58: “Hydraulic - Operation mode” parameters

For communication with a higher-level controller in the CTRL1 and CTRL2 operating modes, some scaling factors of process variables and control parameters are summarized in P 2879 HYD_AddProcData. These parameters are PDO-capable and are created in the int16 format in order to use as little memory space as possible in the process data channel. ",How is the volumetric flow rate calculated in the MSD ServoDrive when no sensor is employed?,"Without a volumetric flow rate sensor, the MSD ServoDrive calculates flow rate using a linear encoder and cylinder geometry, specifically through parameter P 2840.8 QActCalc.",The MSD ServoDrive can determine volumetric flow rate via a linear encoder and cylinder geometry (P 2840.8 QActCalc) in the absence of a dedicated sensor.,"In scenarios lacking a volumetric flow rate sensor, the MSD ServoDrive computes flow rate based on linear encoder data and cylinder dimensions, as defined by P 2840.8 QActCalc.",P 2840.8 QActCalc in the MSD ServoDrive enables the calculation of volumetric flow rate using a linear encoder and cylinder geometry when no sensor is present.,The MSD ServoDrive utilizes P 2840.8 QActCalc to estimate volumetric flow rate from linear encoder readings and cylinder geometry in the absence of a flow rate sensor.
6,msd_servo_drive.txt,58,fa106461ff0d7282ea54d790e61aff016db60820f22b14c573a0e498c89bd696,"However, these values are only a guideline. Every application will, of course, have its own requirements for dynamics and accuracy. The optimum setting must be determined during commissioning.

Image 7.60: Example of application for volume/mass sensors

For the purpose of pressure limitation during the process or in individual motion blocks, a scaling (P 2872 HYD_Tab_Limit) can be used to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193 and see also section ""Scaling of the hydraulic limits"" on page 195)

# 7.11.4 Hydraulic Limitations

# 7.11.4.1 Pressure limit

Furthermore, the limitation can be switched to inactive by means of a higher-level control system. The five lower bits of the hydraulic control word are used for this purpose, P 2841 HYD_Ctrl bit 11 to bit 15. Setting bit 11 deactivates the pressure limitation. Bits 12 to 15 only switch off the limitation in the respective quadrant of the P/Q coordinate system. (Bit 12 = Q1, bit 13 = Q2, bit 14 = Q3, bit 15 = Q4).

It is usually necessary to limit the pressure to a maximum permissible value. This can be done either mechanically using an overpressure valve or using the pressure limitation of the servo drive. The pressure limitation allows both the maximum and the minimum permissible reference value of the pressure control to be limited.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 184

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 185

Q [l/min]

NOTE

- The limitation controllers are not active in all control modes. The following table shows which limitations can be configured for which control mode.
- Section 7.11.6 Hydraulic Motion profile describes for which control modes the scaling factor can be used.

|Control mode|Pressure limit|Volumetric flow rate limit|
|---|---|---|
|NPumpCon(4)|x|x|
|PressCon(0)|x|x|
|VolCon(5)| |x|
|VolConPlim(1)|x|x|
|SpdCon(2)| |x|
|SpdCon_plimit|x| |
|-SpdCon_PI| | |
|PosCon(3)| | |
|- PosCon_QFF|x| |
|- PosCon| | |
|- PosCon_plimit|x|x|
|- PosCon_TrackingError|x| |

Table 7.54: Hydraulic Limitations

For the purpose of volumetric flow rate limitation during the process or in individual motion blocks, a scaling factor (P 2872 HYD_Tab_Limit) can be used in some control modes (see Table) to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193)

NOTE

l  The limitation controllers are not active in all control modes. The table shows which limitations can be configured for which control mode. See

# Table 7.54: Hydraulic Limitations

Image 7.62: “Pressure limit” screen

# 7.11.4.2 Volumetric flow rate limit

The minimum and maximum volumetric flow rate can be limited to suit the system requirements using the volumetric flow rate limit. Once the parametrized volumetric flow rate limits are reached, the pump speed is limited by the motor speed controller.

A selection can be made between P 2850[8] - QMax and P 2847[3] - QRef as the source of the limit value by making a source selection (QMaxSrc). P 2847[3] - QRef can be used to specify the limit via the volumetric flow rate value, which, for example, can be set variably using an analog input.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 186

# 7 Control

# 7 Control

MOOG                          ID No.:CB40859-001 Date:11/2020

MSD ServoDrive   - DeviceHelp      187

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2840|4|pMinSrc| |Minimum pressure source selector|
|2840|5|pMaxSrc| |Maximum pressure source selector|
|2840|6|QMinSrc| |Minimum flow rate source selector|
|2840|7|QMaxSrc| |Maximum flow rate source selector|
|2840|8|QActCalc| |Flow rate calculation method|
|2840|9|QLeakEst| |Flow rate leakage estimation method|
|2840|10|nRefSrc| |Pump speed reference source selector|
|2840|11|CylValveSwSel| |Function selector for the valve switchover of the cylinder|
|2840|12|AltPosCon| |Alternative position controller|
|2840|13|AltSpdCon| |Alternative cylinder speed controllers|
|2840|14|PumpSpdProt| |Pump speed protection|
|2840|15|PumpP2tProt| |p2t protection for pump|
|2840|16|AltPressCon| |Alternative pressure controller|
|2840|17|AltPressConLimit| |Alternative pressure limit controller|

Table 7.55: Parameters – Configure Hydraulic System Control (continue)

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850| |HYD_PressCon| |Hydraulic pressure control parameters|
|2850|0|Kp|rpm/bar|Gain|
|2850|1|KpScale| |Gain scaling|
|2850|2|Tn|ms|Integration time constant|
|2850|3|Tv|ms|Rate time|
|2850|4|Tp|ms|Integral-action time|
|2850|5|pMin|bar|Minimum permissible pressure|
|2850|6|pMax|bar|Maximum permissible pressure|
|2850|7|QMin|l/min|Minimum flow rate|
|2850|8|QMax|l/min|Maximum flow rate|
|2850|9|PressWindow|bar|Pressure control parameters|
|2850|10|decmpLvl|bar|Level for active decompression|

Table 7.56: Parameters – Pressure control parameters

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850|11|decmpRate|bar/s|Rate for active decompression|
|2850|12|pActScale| |Scaling for pAct|
|2850|13|pAct2Scale| |Scaling for pAct2|
|2850|14|pRange_k|%|Pressure range threshold|
|2850|15|pRange_midpoint|bar|Pressure range midpoint|

Table 7.56: Parameters – Pressure control parameters (continue)

# 7.11.5 Cylinder configuration

If no volumetric flow rate sensor is employed, the volumetric flow rate can be calculated using a linear encoder and the cylinder geometry (P 2840.8 QActCalc). To do so, various different cylinder dimensions must be passed to the servo drive. The different surface areas of the piston and ring side must be kept in mind because either more or less medium is required for the same path depending on the power direction.

Image 7.64: “Cylinder configuration” screen

The parameters which must be set are P 2852[0] - cylArea1 and P 2852[2] - cylArea2.

Cylinder piston surface area A1 = cylAreal1 = A1 in cm²

Cylinder ring surface area A2 = cylAreal2 = A2 in cm²

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 188

# 7 Control

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 189

# NOTE

For pumps which only operate with a positive speed (only one direction of rotation) and switch the direction of action of the cylinder via a directional valve, one of the two cylinder surfaces must be specified as negative (Image 7.64: “Cylinder configuration” screen). If the pump can be operated in both directions of rotation, this is not necessary.

Since in MSD Servo Drive all encoder input variables are calculated in revolutions, the hydraulics require a relationship between linear and rotary motion for the internal calculations of the cylinder model, cylinder speed and feed-forward control variables. For this purpose, the encoder resolution Sx of the linear encoder in μm per encoder revolution must be known (Para 2852.7unit_scale). In this case, one encoder revolution is the singleturn range of the respective position sensor for the cylinder position. This corresponds to 32768 μm/rev for a 16 bit linear encoder with a resolution of 0.5 μm per increment.

If the current position of the cylinder is transferred via the bus interface (P 2298 ComAngle32), the single and multiturn range is set to 16 bits each. This corresponds to 65536 μm/rev.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2852|HYD_SpdCon|Speed control parameters|Speed control parameters|Speed control parameters|
|2852|0|cylArea1|cm2|Cylinder area|
|2852|1|Ife_K_scale| |Leakage Flow Estimator: Gain scaling|
|2852|2|cylArea2|cm2|Cylinder area (option 2, use neg. value for neg. direction)|
|2852|3|Ife_K_scale2| |Leakage Flow Estimator: Gain scaling (option 2)|
|2852|4|res| |Reserved|
|2852|5|res| |Reserved|
|2852|6|res| |Reserved|
|2852|7|unit_scale|um/rev|Hydraulic physical unit scaling|

Table 7.57: Parameters – Pressure control parameters

# 7.11.6 Hydraulic Motion profile

specified manually for each individual table index. In addition, the valve switching delay can be taken into account; the start of the setpoint ramp is delayed after a valve switchover (P 2851.13 - tSwValve). Once the command for the switchover of a valve has been triggered, a timer begins to run which delays the setpoint enable. If the motor still has a speed reference value at the moment of the switchover, it is run down to 0 rpm using the ramp specified in P 2851.12 - stopRamp.

# Selection of operation mode

- 0 = PARA
- Setpoint setting from table, table index (P 2860) set using parameter access (BUS, PLC, Moog DRIVEADMINISTRATOR 5, etc.) (ramp changes are applied when the index changes)
- 1 = TERM
- Setting from table, table index (P 2860) will be updated via digital inputs (ramp changes will be applied when the index changes)
- 2 = CTRL1
- Operation via control word. Only parameters from table index 0 are used in the CTRL1 mode. The control mode is set via the control word (CtrlBit 0-3) and the setpoint values can be changed directly in table index 0.
- 3 = CTRL2
- Operation via control word. Parameters from all table indexes can be used in CTRL2 mode. The respective motion block is selected using the control word (CtrlBit 0-3).
- 4 = TAB
- Setpoint setting from table, table index (P 2860) is controlled using the switching condition of the motion block table.

NOTE

- In CTRL1 and CTRL2, the setpoint is adopted cyclically independently of NewSetpoint and ramp change with rising edge at NewSetpoint or new table index.

The various different operating modes for controlling the motion sequences can be selected using P 2862[0] - OpMode. The parameter P 2840[11] -CylValveSwSel can be used to set various different modes for controlling the actuating valves. Valve switching can be performed automatically via the POS(3) mode depending on the position difference or be.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 190

# Control

# MOOG

ID No.: CB40859-001 Date: 11/2020

# MSD ServoDrive - DeviceHelp

191

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2862|0|HYD_OpMode|Hydraulic: operation mode|

Table 7.58: “Hydraulic - Operation mode” parameters

For communication with a higher-level controller in the CTRL1 and CTRL2 operating modes, some scaling factors of process variables and control parameters are summarized in P 2879 HYD_AddProcData. These parameters are PDO-capable and are created in the int16 format in order to use as little memory space as possible in the process data channel. ",What parameters must be set for cylinder configuration in the MSD ServoDrive?,"For cylinder configuration, parameters P 2852[0] - cylArea1 and P 2852[2] - cylArea2 must be set to define the piston and ring surface areas.",Configuring a cylinder in the MSD ServoDrive requires setting P 2852[0] - cylArea1 and P 2852[2] - cylArea2 to specify the piston and ring surface areas.,The MSD ServoDrive's cylinder setup involves parameters P 2852[0] - cylArea1 and P 2852[2] - cylArea2 for detailing the piston and ring surface areas.,"To configure a cylinder, the MSD ServoDrive needs P 2852[0] - cylArea1 and P 2852[2] - cylArea2 parameters to be set for the piston and ring surface areas.",Setting up a cylinder in the MSD ServoDrive entails defining the piston and ring surface areas through parameters P 2852[0] - cylArea1 and P 2852[2] - cylArea2.
7,msd_servo_drive.txt,58,fa106461ff0d7282ea54d790e61aff016db60820f22b14c573a0e498c89bd696,"However, these values are only a guideline. Every application will, of course, have its own requirements for dynamics and accuracy. The optimum setting must be determined during commissioning.

Image 7.60: Example of application for volume/mass sensors

For the purpose of pressure limitation during the process or in individual motion blocks, a scaling (P 2872 HYD_Tab_Limit) can be used to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193 and see also section ""Scaling of the hydraulic limits"" on page 195)

# 7.11.4 Hydraulic Limitations

# 7.11.4.1 Pressure limit

Furthermore, the limitation can be switched to inactive by means of a higher-level control system. The five lower bits of the hydraulic control word are used for this purpose, P 2841 HYD_Ctrl bit 11 to bit 15. Setting bit 11 deactivates the pressure limitation. Bits 12 to 15 only switch off the limitation in the respective quadrant of the P/Q coordinate system. (Bit 12 = Q1, bit 13 = Q2, bit 14 = Q3, bit 15 = Q4).

It is usually necessary to limit the pressure to a maximum permissible value. This can be done either mechanically using an overpressure valve or using the pressure limitation of the servo drive. The pressure limitation allows both the maximum and the minimum permissible reference value of the pressure control to be limited.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 184

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 185

Q [l/min]

NOTE

- The limitation controllers are not active in all control modes. The following table shows which limitations can be configured for which control mode.
- Section 7.11.6 Hydraulic Motion profile describes for which control modes the scaling factor can be used.

|Control mode|Pressure limit|Volumetric flow rate limit|
|---|---|---|
|NPumpCon(4)|x|x|
|PressCon(0)|x|x|
|VolCon(5)| |x|
|VolConPlim(1)|x|x|
|SpdCon(2)| |x|
|SpdCon_plimit|x| |
|-SpdCon_PI| | |
|PosCon(3)| | |
|- PosCon_QFF|x| |
|- PosCon| | |
|- PosCon_plimit|x|x|
|- PosCon_TrackingError|x| |

Table 7.54: Hydraulic Limitations

For the purpose of volumetric flow rate limitation during the process or in individual motion blocks, a scaling factor (P 2872 HYD_Tab_Limit) can be used in some control modes (see Table) to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193)

NOTE

l  The limitation controllers are not active in all control modes. The table shows which limitations can be configured for which control mode. See

# Table 7.54: Hydraulic Limitations

Image 7.62: “Pressure limit” screen

# 7.11.4.2 Volumetric flow rate limit

The minimum and maximum volumetric flow rate can be limited to suit the system requirements using the volumetric flow rate limit. Once the parametrized volumetric flow rate limits are reached, the pump speed is limited by the motor speed controller.

A selection can be made between P 2850[8] - QMax and P 2847[3] - QRef as the source of the limit value by making a source selection (QMaxSrc). P 2847[3] - QRef can be used to specify the limit via the volumetric flow rate value, which, for example, can be set variably using an analog input.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 186

# 7 Control

# 7 Control

MOOG                          ID No.:CB40859-001 Date:11/2020

MSD ServoDrive   - DeviceHelp      187

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2840|4|pMinSrc| |Minimum pressure source selector|
|2840|5|pMaxSrc| |Maximum pressure source selector|
|2840|6|QMinSrc| |Minimum flow rate source selector|
|2840|7|QMaxSrc| |Maximum flow rate source selector|
|2840|8|QActCalc| |Flow rate calculation method|
|2840|9|QLeakEst| |Flow rate leakage estimation method|
|2840|10|nRefSrc| |Pump speed reference source selector|
|2840|11|CylValveSwSel| |Function selector for the valve switchover of the cylinder|
|2840|12|AltPosCon| |Alternative position controller|
|2840|13|AltSpdCon| |Alternative cylinder speed controllers|
|2840|14|PumpSpdProt| |Pump speed protection|
|2840|15|PumpP2tProt| |p2t protection for pump|
|2840|16|AltPressCon| |Alternative pressure controller|
|2840|17|AltPressConLimit| |Alternative pressure limit controller|

Table 7.55: Parameters – Configure Hydraulic System Control (continue)

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850| |HYD_PressCon| |Hydraulic pressure control parameters|
|2850|0|Kp|rpm/bar|Gain|
|2850|1|KpScale| |Gain scaling|
|2850|2|Tn|ms|Integration time constant|
|2850|3|Tv|ms|Rate time|
|2850|4|Tp|ms|Integral-action time|
|2850|5|pMin|bar|Minimum permissible pressure|
|2850|6|pMax|bar|Maximum permissible pressure|
|2850|7|QMin|l/min|Minimum flow rate|
|2850|8|QMax|l/min|Maximum flow rate|
|2850|9|PressWindow|bar|Pressure control parameters|
|2850|10|decmpLvl|bar|Level for active decompression|

Table 7.56: Parameters – Pressure control parameters

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850|11|decmpRate|bar/s|Rate for active decompression|
|2850|12|pActScale| |Scaling for pAct|
|2850|13|pAct2Scale| |Scaling for pAct2|
|2850|14|pRange_k|%|Pressure range threshold|
|2850|15|pRange_midpoint|bar|Pressure range midpoint|

Table 7.56: Parameters – Pressure control parameters (continue)

# 7.11.5 Cylinder configuration

If no volumetric flow rate sensor is employed, the volumetric flow rate can be calculated using a linear encoder and the cylinder geometry (P 2840.8 QActCalc). To do so, various different cylinder dimensions must be passed to the servo drive. The different surface areas of the piston and ring side must be kept in mind because either more or less medium is required for the same path depending on the power direction.

Image 7.64: “Cylinder configuration” screen

The parameters which must be set are P 2852[0] - cylArea1 and P 2852[2] - cylArea2.

Cylinder piston surface area A1 = cylAreal1 = A1 in cm²

Cylinder ring surface area A2 = cylAreal2 = A2 in cm²

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 188

# 7 Control

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 189

# NOTE

For pumps which only operate with a positive speed (only one direction of rotation) and switch the direction of action of the cylinder via a directional valve, one of the two cylinder surfaces must be specified as negative (Image 7.64: “Cylinder configuration” screen). If the pump can be operated in both directions of rotation, this is not necessary.

Since in MSD Servo Drive all encoder input variables are calculated in revolutions, the hydraulics require a relationship between linear and rotary motion for the internal calculations of the cylinder model, cylinder speed and feed-forward control variables. For this purpose, the encoder resolution Sx of the linear encoder in μm per encoder revolution must be known (Para 2852.7unit_scale). In this case, one encoder revolution is the singleturn range of the respective position sensor for the cylinder position. This corresponds to 32768 μm/rev for a 16 bit linear encoder with a resolution of 0.5 μm per increment.

If the current position of the cylinder is transferred via the bus interface (P 2298 ComAngle32), the single and multiturn range is set to 16 bits each. This corresponds to 65536 μm/rev.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2852|HYD_SpdCon|Speed control parameters|Speed control parameters|Speed control parameters|
|2852|0|cylArea1|cm2|Cylinder area|
|2852|1|Ife_K_scale| |Leakage Flow Estimator: Gain scaling|
|2852|2|cylArea2|cm2|Cylinder area (option 2, use neg. value for neg. direction)|
|2852|3|Ife_K_scale2| |Leakage Flow Estimator: Gain scaling (option 2)|
|2852|4|res| |Reserved|
|2852|5|res| |Reserved|
|2852|6|res| |Reserved|
|2852|7|unit_scale|um/rev|Hydraulic physical unit scaling|

Table 7.57: Parameters – Pressure control parameters

# 7.11.6 Hydraulic Motion profile

specified manually for each individual table index. In addition, the valve switching delay can be taken into account; the start of the setpoint ramp is delayed after a valve switchover (P 2851.13 - tSwValve). Once the command for the switchover of a valve has been triggered, a timer begins to run which delays the setpoint enable. If the motor still has a speed reference value at the moment of the switchover, it is run down to 0 rpm using the ramp specified in P 2851.12 - stopRamp.

# Selection of operation mode

- 0 = PARA
- Setpoint setting from table, table index (P 2860) set using parameter access (BUS, PLC, Moog DRIVEADMINISTRATOR 5, etc.) (ramp changes are applied when the index changes)
- 1 = TERM
- Setting from table, table index (P 2860) will be updated via digital inputs (ramp changes will be applied when the index changes)
- 2 = CTRL1
- Operation via control word. Only parameters from table index 0 are used in the CTRL1 mode. The control mode is set via the control word (CtrlBit 0-3) and the setpoint values can be changed directly in table index 0.
- 3 = CTRL2
- Operation via control word. Parameters from all table indexes can be used in CTRL2 mode. The respective motion block is selected using the control word (CtrlBit 0-3).
- 4 = TAB
- Setpoint setting from table, table index (P 2860) is controlled using the switching condition of the motion block table.

NOTE

- In CTRL1 and CTRL2, the setpoint is adopted cyclically independently of NewSetpoint and ramp change with rising edge at NewSetpoint or new table index.

The various different operating modes for controlling the motion sequences can be selected using P 2862[0] - OpMode. The parameter P 2840[11] -CylValveSwSel can be used to set various different modes for controlling the actuating valves. Valve switching can be performed automatically via the POS(3) mode depending on the position difference or be.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 190

# Control

# MOOG

ID No.: CB40859-001 Date: 11/2020

# MSD ServoDrive - DeviceHelp

191

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2862|0|HYD_OpMode|Hydraulic: operation mode|

Table 7.58: “Hydraulic - Operation mode” parameters

For communication with a higher-level controller in the CTRL1 and CTRL2 operating modes, some scaling factors of process variables and control parameters are summarized in P 2879 HYD_AddProcData. These parameters are PDO-capable and are created in the int16 format in order to use as little memory space as possible in the process data channel. ",What is the significance of the encoder resolution Sx in the MSD ServoDrive's hydraulic calculations?,"The encoder resolution Sx, specified in μm per encoder revolution, is crucial for relating linear to rotary motion in the MSD ServoDrive's internal hydraulic calculations.","In the MSD ServoDrive, the encoder resolution Sx (μm/rev) is essential for converting linear motion into rotary motion for hydraulic computations.","For the MSD ServoDrive's hydraulic system, the encoder resolution Sx (μm per revolution) plays a key role in translating linear encoder data into rotational terms.","The MSD ServoDrive relies on the encoder resolution Sx, measured in μm per revolution, to bridge linear and rotary motion in its hydraulic calculations.",Encoder resolution Sx (μm/rev) is vital in the MSD ServoDrive for accurately converting linear encoder inputs into rotational data for hydraulic modeling.
8,msd_servo_drive.txt,58,fa106461ff0d7282ea54d790e61aff016db60820f22b14c573a0e498c89bd696,"However, these values are only a guideline. Every application will, of course, have its own requirements for dynamics and accuracy. The optimum setting must be determined during commissioning.

Image 7.60: Example of application for volume/mass sensors

For the purpose of pressure limitation during the process or in individual motion blocks, a scaling (P 2872 HYD_Tab_Limit) can be used to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193 and see also section ""Scaling of the hydraulic limits"" on page 195)

# 7.11.4 Hydraulic Limitations

# 7.11.4.1 Pressure limit

Furthermore, the limitation can be switched to inactive by means of a higher-level control system. The five lower bits of the hydraulic control word are used for this purpose, P 2841 HYD_Ctrl bit 11 to bit 15. Setting bit 11 deactivates the pressure limitation. Bits 12 to 15 only switch off the limitation in the respective quadrant of the P/Q coordinate system. (Bit 12 = Q1, bit 13 = Q2, bit 14 = Q3, bit 15 = Q4).

It is usually necessary to limit the pressure to a maximum permissible value. This can be done either mechanically using an overpressure valve or using the pressure limitation of the servo drive. The pressure limitation allows both the maximum and the minimum permissible reference value of the pressure control to be limited.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 184

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 185

Q [l/min]

NOTE

- The limitation controllers are not active in all control modes. The following table shows which limitations can be configured for which control mode.
- Section 7.11.6 Hydraulic Motion profile describes for which control modes the scaling factor can be used.

|Control mode|Pressure limit|Volumetric flow rate limit|
|---|---|---|
|NPumpCon(4)|x|x|
|PressCon(0)|x|x|
|VolCon(5)| |x|
|VolConPlim(1)|x|x|
|SpdCon(2)| |x|
|SpdCon_plimit|x| |
|-SpdCon_PI| | |
|PosCon(3)| | |
|- PosCon_QFF|x| |
|- PosCon| | |
|- PosCon_plimit|x|x|
|- PosCon_TrackingError|x| |

Table 7.54: Hydraulic Limitations

For the purpose of volumetric flow rate limitation during the process or in individual motion blocks, a scaling factor (P 2872 HYD_Tab_Limit) can be used in some control modes (see Table) to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193)

NOTE

l  The limitation controllers are not active in all control modes. The table shows which limitations can be configured for which control mode. See

# Table 7.54: Hydraulic Limitations

Image 7.62: “Pressure limit” screen

# 7.11.4.2 Volumetric flow rate limit

The minimum and maximum volumetric flow rate can be limited to suit the system requirements using the volumetric flow rate limit. Once the parametrized volumetric flow rate limits are reached, the pump speed is limited by the motor speed controller.

A selection can be made between P 2850[8] - QMax and P 2847[3] - QRef as the source of the limit value by making a source selection (QMaxSrc). P 2847[3] - QRef can be used to specify the limit via the volumetric flow rate value, which, for example, can be set variably using an analog input.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 186

# 7 Control

# 7 Control

MOOG                          ID No.:CB40859-001 Date:11/2020

MSD ServoDrive   - DeviceHelp      187

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2840|4|pMinSrc| |Minimum pressure source selector|
|2840|5|pMaxSrc| |Maximum pressure source selector|
|2840|6|QMinSrc| |Minimum flow rate source selector|
|2840|7|QMaxSrc| |Maximum flow rate source selector|
|2840|8|QActCalc| |Flow rate calculation method|
|2840|9|QLeakEst| |Flow rate leakage estimation method|
|2840|10|nRefSrc| |Pump speed reference source selector|
|2840|11|CylValveSwSel| |Function selector for the valve switchover of the cylinder|
|2840|12|AltPosCon| |Alternative position controller|
|2840|13|AltSpdCon| |Alternative cylinder speed controllers|
|2840|14|PumpSpdProt| |Pump speed protection|
|2840|15|PumpP2tProt| |p2t protection for pump|
|2840|16|AltPressCon| |Alternative pressure controller|
|2840|17|AltPressConLimit| |Alternative pressure limit controller|

Table 7.55: Parameters – Configure Hydraulic System Control (continue)

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850| |HYD_PressCon| |Hydraulic pressure control parameters|
|2850|0|Kp|rpm/bar|Gain|
|2850|1|KpScale| |Gain scaling|
|2850|2|Tn|ms|Integration time constant|
|2850|3|Tv|ms|Rate time|
|2850|4|Tp|ms|Integral-action time|
|2850|5|pMin|bar|Minimum permissible pressure|
|2850|6|pMax|bar|Maximum permissible pressure|
|2850|7|QMin|l/min|Minimum flow rate|
|2850|8|QMax|l/min|Maximum flow rate|
|2850|9|PressWindow|bar|Pressure control parameters|
|2850|10|decmpLvl|bar|Level for active decompression|

Table 7.56: Parameters – Pressure control parameters

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850|11|decmpRate|bar/s|Rate for active decompression|
|2850|12|pActScale| |Scaling for pAct|
|2850|13|pAct2Scale| |Scaling for pAct2|
|2850|14|pRange_k|%|Pressure range threshold|
|2850|15|pRange_midpoint|bar|Pressure range midpoint|

Table 7.56: Parameters – Pressure control parameters (continue)

# 7.11.5 Cylinder configuration

If no volumetric flow rate sensor is employed, the volumetric flow rate can be calculated using a linear encoder and the cylinder geometry (P 2840.8 QActCalc). To do so, various different cylinder dimensions must be passed to the servo drive. The different surface areas of the piston and ring side must be kept in mind because either more or less medium is required for the same path depending on the power direction.

Image 7.64: “Cylinder configuration” screen

The parameters which must be set are P 2852[0] - cylArea1 and P 2852[2] - cylArea2.

Cylinder piston surface area A1 = cylAreal1 = A1 in cm²

Cylinder ring surface area A2 = cylAreal2 = A2 in cm²

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 188

# 7 Control

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 189

# NOTE

For pumps which only operate with a positive speed (only one direction of rotation) and switch the direction of action of the cylinder via a directional valve, one of the two cylinder surfaces must be specified as negative (Image 7.64: “Cylinder configuration” screen). If the pump can be operated in both directions of rotation, this is not necessary.

Since in MSD Servo Drive all encoder input variables are calculated in revolutions, the hydraulics require a relationship between linear and rotary motion for the internal calculations of the cylinder model, cylinder speed and feed-forward control variables. For this purpose, the encoder resolution Sx of the linear encoder in μm per encoder revolution must be known (Para 2852.7unit_scale). In this case, one encoder revolution is the singleturn range of the respective position sensor for the cylinder position. This corresponds to 32768 μm/rev for a 16 bit linear encoder with a resolution of 0.5 μm per increment.

If the current position of the cylinder is transferred via the bus interface (P 2298 ComAngle32), the single and multiturn range is set to 16 bits each. This corresponds to 65536 μm/rev.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2852|HYD_SpdCon|Speed control parameters|Speed control parameters|Speed control parameters|
|2852|0|cylArea1|cm2|Cylinder area|
|2852|1|Ife_K_scale| |Leakage Flow Estimator: Gain scaling|
|2852|2|cylArea2|cm2|Cylinder area (option 2, use neg. value for neg. direction)|
|2852|3|Ife_K_scale2| |Leakage Flow Estimator: Gain scaling (option 2)|
|2852|4|res| |Reserved|
|2852|5|res| |Reserved|
|2852|6|res| |Reserved|
|2852|7|unit_scale|um/rev|Hydraulic physical unit scaling|

Table 7.57: Parameters – Pressure control parameters

# 7.11.6 Hydraulic Motion profile

specified manually for each individual table index. In addition, the valve switching delay can be taken into account; the start of the setpoint ramp is delayed after a valve switchover (P 2851.13 - tSwValve). Once the command for the switchover of a valve has been triggered, a timer begins to run which delays the setpoint enable. If the motor still has a speed reference value at the moment of the switchover, it is run down to 0 rpm using the ramp specified in P 2851.12 - stopRamp.

# Selection of operation mode

- 0 = PARA
- Setpoint setting from table, table index (P 2860) set using parameter access (BUS, PLC, Moog DRIVEADMINISTRATOR 5, etc.) (ramp changes are applied when the index changes)
- 1 = TERM
- Setting from table, table index (P 2860) will be updated via digital inputs (ramp changes will be applied when the index changes)
- 2 = CTRL1
- Operation via control word. Only parameters from table index 0 are used in the CTRL1 mode. The control mode is set via the control word (CtrlBit 0-3) and the setpoint values can be changed directly in table index 0.
- 3 = CTRL2
- Operation via control word. Parameters from all table indexes can be used in CTRL2 mode. The respective motion block is selected using the control word (CtrlBit 0-3).
- 4 = TAB
- Setpoint setting from table, table index (P 2860) is controlled using the switching condition of the motion block table.

NOTE

- In CTRL1 and CTRL2, the setpoint is adopted cyclically independently of NewSetpoint and ramp change with rising edge at NewSetpoint or new table index.

The various different operating modes for controlling the motion sequences can be selected using P 2862[0] - OpMode. The parameter P 2840[11] -CylValveSwSel can be used to set various different modes for controlling the actuating valves. Valve switching can be performed automatically via the POS(3) mode depending on the position difference or be.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 190

# Control

# MOOG

ID No.: CB40859-001 Date: 11/2020

# MSD ServoDrive - DeviceHelp

191

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2862|0|HYD_OpMode|Hydraulic: operation mode|

Table 7.58: “Hydraulic - Operation mode” parameters

For communication with a higher-level controller in the CTRL1 and CTRL2 operating modes, some scaling factors of process variables and control parameters are summarized in P 2879 HYD_AddProcData. These parameters are PDO-capable and are created in the int16 format in order to use as little memory space as possible in the process data channel. ",What are the different operating modes available for controlling motion sequences in the MSD ServoDrive?,"The MSD ServoDrive offers several operating modes for motion control, including PARA, TERM, CTRL1, CTRL2, and TAB, each selected via P 2862[0] - OpMode.","Operating modes such as PARA, TERM, CTRL1, CTRL2, and TAB are available in the MSD ServoDrive for motion sequence control, chosen through P 2862[0] - OpMode.","For motion sequence control, the MSD ServoDrive provides PARA, TERM, CTRL1, CTRL2, and TAB modes, selectable by setting P 2862[0] - OpMode.","The MSD ServoDrive's motion sequences can be managed in various modes (PARA, TERM, CTRL1, CTRL2, TAB) by configuring P 2862[0] - OpMode.","Selecting among PARA, TERM, CTRL1, CTRL2, and TAB modes via P 2862[0] - OpMode allows for flexible motion sequence control in the MSD ServoDrive."
9,msd_servo_drive.txt,58,fa106461ff0d7282ea54d790e61aff016db60820f22b14c573a0e498c89bd696,"However, these values are only a guideline. Every application will, of course, have its own requirements for dynamics and accuracy. The optimum setting must be determined during commissioning.

Image 7.60: Example of application for volume/mass sensors

For the purpose of pressure limitation during the process or in individual motion blocks, a scaling (P 2872 HYD_Tab_Limit) can be used to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193 and see also section ""Scaling of the hydraulic limits"" on page 195)

# 7.11.4 Hydraulic Limitations

# 7.11.4.1 Pressure limit

Furthermore, the limitation can be switched to inactive by means of a higher-level control system. The five lower bits of the hydraulic control word are used for this purpose, P 2841 HYD_Ctrl bit 11 to bit 15. Setting bit 11 deactivates the pressure limitation. Bits 12 to 15 only switch off the limitation in the respective quadrant of the P/Q coordinate system. (Bit 12 = Q1, bit 13 = Q2, bit 14 = Q3, bit 15 = Q4).

It is usually necessary to limit the pressure to a maximum permissible value. This can be done either mechanically using an overpressure valve or using the pressure limitation of the servo drive. The pressure limitation allows both the maximum and the minimum permissible reference value of the pressure control to be limited.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 184

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 185

Q [l/min]

NOTE

- The limitation controllers are not active in all control modes. The following table shows which limitations can be configured for which control mode.
- Section 7.11.6 Hydraulic Motion profile describes for which control modes the scaling factor can be used.

|Control mode|Pressure limit|Volumetric flow rate limit|
|---|---|---|
|NPumpCon(4)|x|x|
|PressCon(0)|x|x|
|VolCon(5)| |x|
|VolConPlim(1)|x|x|
|SpdCon(2)| |x|
|SpdCon_plimit|x| |
|-SpdCon_PI| | |
|PosCon(3)| | |
|- PosCon_QFF|x| |
|- PosCon| | |
|- PosCon_plimit|x|x|
|- PosCon_TrackingError|x| |

Table 7.54: Hydraulic Limitations

For the purpose of volumetric flow rate limitation during the process or in individual motion blocks, a scaling factor (P 2872 HYD_Tab_Limit) can be used in some control modes (see Table) to influence the preset limitation. (see also section ""Hydraulic motion block table"" on page 193)

NOTE

l  The limitation controllers are not active in all control modes. The table shows which limitations can be configured for which control mode. See

# Table 7.54: Hydraulic Limitations

Image 7.62: “Pressure limit” screen

# 7.11.4.2 Volumetric flow rate limit

The minimum and maximum volumetric flow rate can be limited to suit the system requirements using the volumetric flow rate limit. Once the parametrized volumetric flow rate limits are reached, the pump speed is limited by the motor speed controller.

A selection can be made between P 2850[8] - QMax and P 2847[3] - QRef as the source of the limit value by making a source selection (QMaxSrc). P 2847[3] - QRef can be used to specify the limit via the volumetric flow rate value, which, for example, can be set variably using an analog input.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 186

# 7 Control

# 7 Control

MOOG                          ID No.:CB40859-001 Date:11/2020

MSD ServoDrive   - DeviceHelp      187

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2840|4|pMinSrc| |Minimum pressure source selector|
|2840|5|pMaxSrc| |Maximum pressure source selector|
|2840|6|QMinSrc| |Minimum flow rate source selector|
|2840|7|QMaxSrc| |Maximum flow rate source selector|
|2840|8|QActCalc| |Flow rate calculation method|
|2840|9|QLeakEst| |Flow rate leakage estimation method|
|2840|10|nRefSrc| |Pump speed reference source selector|
|2840|11|CylValveSwSel| |Function selector for the valve switchover of the cylinder|
|2840|12|AltPosCon| |Alternative position controller|
|2840|13|AltSpdCon| |Alternative cylinder speed controllers|
|2840|14|PumpSpdProt| |Pump speed protection|
|2840|15|PumpP2tProt| |p2t protection for pump|
|2840|16|AltPressCon| |Alternative pressure controller|
|2840|17|AltPressConLimit| |Alternative pressure limit controller|

Table 7.55: Parameters – Configure Hydraulic System Control (continue)

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850| |HYD_PressCon| |Hydraulic pressure control parameters|
|2850|0|Kp|rpm/bar|Gain|
|2850|1|KpScale| |Gain scaling|
|2850|2|Tn|ms|Integration time constant|
|2850|3|Tv|ms|Rate time|
|2850|4|Tp|ms|Integral-action time|
|2850|5|pMin|bar|Minimum permissible pressure|
|2850|6|pMax|bar|Maximum permissible pressure|
|2850|7|QMin|l/min|Minimum flow rate|
|2850|8|QMax|l/min|Maximum flow rate|
|2850|9|PressWindow|bar|Pressure control parameters|
|2850|10|decmpLvl|bar|Level for active decompression|

Table 7.56: Parameters – Pressure control parameters

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2850|11|decmpRate|bar/s|Rate for active decompression|
|2850|12|pActScale| |Scaling for pAct|
|2850|13|pAct2Scale| |Scaling for pAct2|
|2850|14|pRange_k|%|Pressure range threshold|
|2850|15|pRange_midpoint|bar|Pressure range midpoint|

Table 7.56: Parameters – Pressure control parameters (continue)

# 7.11.5 Cylinder configuration

If no volumetric flow rate sensor is employed, the volumetric flow rate can be calculated using a linear encoder and the cylinder geometry (P 2840.8 QActCalc). To do so, various different cylinder dimensions must be passed to the servo drive. The different surface areas of the piston and ring side must be kept in mind because either more or less medium is required for the same path depending on the power direction.

Image 7.64: “Cylinder configuration” screen

The parameters which must be set are P 2852[0] - cylArea1 and P 2852[2] - cylArea2.

Cylinder piston surface area A1 = cylAreal1 = A1 in cm²

Cylinder ring surface area A2 = cylAreal2 = A2 in cm²

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 188

# 7 Control

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 189

# NOTE

For pumps which only operate with a positive speed (only one direction of rotation) and switch the direction of action of the cylinder via a directional valve, one of the two cylinder surfaces must be specified as negative (Image 7.64: “Cylinder configuration” screen). If the pump can be operated in both directions of rotation, this is not necessary.

Since in MSD Servo Drive all encoder input variables are calculated in revolutions, the hydraulics require a relationship between linear and rotary motion for the internal calculations of the cylinder model, cylinder speed and feed-forward control variables. For this purpose, the encoder resolution Sx of the linear encoder in μm per encoder revolution must be known (Para 2852.7unit_scale). In this case, one encoder revolution is the singleturn range of the respective position sensor for the cylinder position. This corresponds to 32768 μm/rev for a 16 bit linear encoder with a resolution of 0.5 μm per increment.

If the current position of the cylinder is transferred via the bus interface (P 2298 ComAngle32), the single and multiturn range is set to 16 bits each. This corresponds to 65536 μm/rev.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|2852|HYD_SpdCon|Speed control parameters|Speed control parameters|Speed control parameters|
|2852|0|cylArea1|cm2|Cylinder area|
|2852|1|Ife_K_scale| |Leakage Flow Estimator: Gain scaling|
|2852|2|cylArea2|cm2|Cylinder area (option 2, use neg. value for neg. direction)|
|2852|3|Ife_K_scale2| |Leakage Flow Estimator: Gain scaling (option 2)|
|2852|4|res| |Reserved|
|2852|5|res| |Reserved|
|2852|6|res| |Reserved|
|2852|7|unit_scale|um/rev|Hydraulic physical unit scaling|

Table 7.57: Parameters – Pressure control parameters

# 7.11.6 Hydraulic Motion profile

specified manually for each individual table index. In addition, the valve switching delay can be taken into account; the start of the setpoint ramp is delayed after a valve switchover (P 2851.13 - tSwValve). Once the command for the switchover of a valve has been triggered, a timer begins to run which delays the setpoint enable. If the motor still has a speed reference value at the moment of the switchover, it is run down to 0 rpm using the ramp specified in P 2851.12 - stopRamp.

# Selection of operation mode

- 0 = PARA
- Setpoint setting from table, table index (P 2860) set using parameter access (BUS, PLC, Moog DRIVEADMINISTRATOR 5, etc.) (ramp changes are applied when the index changes)
- 1 = TERM
- Setting from table, table index (P 2860) will be updated via digital inputs (ramp changes will be applied when the index changes)
- 2 = CTRL1
- Operation via control word. Only parameters from table index 0 are used in the CTRL1 mode. The control mode is set via the control word (CtrlBit 0-3) and the setpoint values can be changed directly in table index 0.
- 3 = CTRL2
- Operation via control word. Parameters from all table indexes can be used in CTRL2 mode. The respective motion block is selected using the control word (CtrlBit 0-3).
- 4 = TAB
- Setpoint setting from table, table index (P 2860) is controlled using the switching condition of the motion block table.

NOTE

- In CTRL1 and CTRL2, the setpoint is adopted cyclically independently of NewSetpoint and ramp change with rising edge at NewSetpoint or new table index.

The various different operating modes for controlling the motion sequences can be selected using P 2862[0] - OpMode. The parameter P 2840[11] -CylValveSwSel can be used to set various different modes for controlling the actuating valves. Valve switching can be performed automatically via the POS(3) mode depending on the position difference or be.

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 190

# Control

# MOOG

ID No.: CB40859-001 Date: 11/2020

# MSD ServoDrive - DeviceHelp

191

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2862|0|HYD_OpMode|Hydraulic: operation mode|

Table 7.58: “Hydraulic - Operation mode” parameters

For communication with a higher-level controller in the CTRL1 and CTRL2 operating modes, some scaling factors of process variables and control parameters are summarized in P 2879 HYD_AddProcData. These parameters are PDO-capable and are created in the int16 format in order to use as little memory space as possible in the process data channel. ",How does the MSD ServoDrive handle valve switching delay in hydraulic motion profiles?,"The MSD ServoDrive accounts for valve switching delay by delaying the setpoint ramp start post-switchover, using P 2851.13 - tSwValve, and ramping down the motor speed to 0 rpm if necessary.","In hydraulic motion profiles, the MSD ServoDrive manages valve switching delay with P 2851.13 - tSwValve, postponing the setpoint ramp start and potentially reducing motor speed to 0 rpm.","Valve switching delay in the MSD ServoDrive is addressed by delaying the setpoint ramp start after switchover (P 2851.13 - tSwValve) and, if needed, decelerating the motor to 0 rpm.","The MSD ServoDrive uses P 2851.13 - tSwValve to introduce a delay in the setpoint ramp start following valve switchover, with provisions to ramp down motor speed to 0 rpm.","To handle valve switching delay, the MSD ServoDrive delays the setpoint ramp start via P 2851.13 - tSwValve and can ramp the motor speed down to 0 rpm post-switchover."
