,NODE_FILE_NAME,NODE_NUMBER,NODE_HASH,NODE_TEXT,Q,A1,A2,A3,A4,A5
0,msd_servo_drive.txt,7,7e57e914c15e5d431d828292506d54404bad6624063209b278f9d6dfeb871841,"Temperature-related derating may occur. Switching frequency noise decreases as the switching frequency rises (audible range < 12 kHz).|
|309|CON_EnableWiretest| |Enable wire test|
|409|CON_ACT_VDC_TF|ms|Filter time constant for DC link voltage|
|752|MON_PWM_SwitchFreqSelect_Sel| |Switching frequency mode selector|
| |OFF (0)| |No function|
| |AUTO (1)| |Automatic switchover|
| |MAN(2)| |Manual switchover limited by P 758[0]|
| |CON_SwitchFreq_selMan| |Manually configurable power stage switching frequency|
| |(0)2 kHz| |2 kHz|
| |(1)4 kHz| |4 kHz|
|759|CON_|V|Overwrite default under voltage threshold level|

Table 4.1: “Power stage” parameters

# 4 Power stage

# Table 4.1: “Power stage” parameters (continue)

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(-1)1 /3x 110 V|
| | | |The device can be connected to the mains with one or three phases.|
| | | |(0)1x 230 V Single-phase device|
| | | |(1)3x 230 V Three-phase device|
| | | |(2)3x 400 V Three-phase device|
| | | |(3)3x 460 V Three-phase device|
| | | |(4)3x480 V Three-phase device|

# Table 4.2: “Power stage - AC servo drive” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(5)Safety low voltage 24-60 V|
|424|0 CON_VoltageMode|Device power supply mode| |
|425|0 CON_GridVoltageNom|V r.m.s|Mains voltage|
|426|0 CON_DCLinkVoltageNom|V|DC link voltage (DC low voltage)|

# Table 4.3: “Power stage - DC drives” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|308|0 CON_VoltageNom|V|Nominal voltage (DC low voltage)|

# Table 4.4: “Power stage - Low-voltage DC supply” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|MOOG|ID No.:CB40859-001|Date:11/2020| |

# Table 4.5: “Power stage - Mains voltage adaption” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|760|MON_VDC_Guard|Monitoring of DC link voltage| |
|760|0 Tfilt_av|ms|Filter time constant for average|
|760|1 Tfilt_var|ms|Filter time constant for variance|
|760|2 Max_var|V^2|Max allowed variance|
|760|3 Max_time|s|Max time with variance threshold exceeded|
|760|4 Check_time|s|Interval to check return of failed phase|
|1958|0 CON_FPGA_PWMScale|%|Phase voltage scaling of the fpga current controller (0 = no block modulation)|

# Table 4.6: “Power stage - Power failure bridging settings” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2940|0 CON_PowerFail_Sel| |Power failure bridging: selector|
|2941|0 Kr|A/V|Power failure bridging: Gain|
|2941|1 Tn|ms|Voltage control integration time constant|
|2941|2 imax|A|Voltage control maximum (negative) q-current|
|2941|3 imax_pos|A|Voltage control maximum q-current|
|2941|4 n_min|rpm|Minimum speed (abs value) for voltage control|
|2942|0 POWF_VOn|V|Threshold voltage (offset) to start power fail control|
|2942|1 POWF_VRef|V|Reference voltage (offset) at power fail|
|2943|0 CON_POWF_RetTime|ms|uzk return time (65535 = infinite)|
|2944|0 CON_POWF_UdcOffSw|V|Shutdown threshold: Undervoltage|
|2945|0 CON_POWF_UbcOnSw|V|Switch-on threshold: Braking chopper|

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 28

# 4.2 Power failure bridging

# 4.2.1 Functional description

# 4.2.1.1 Detection of a voltage failure

The P 2940 - CON_PowerFail_Sel selection parameter can be used to select the following operating modes:

|0= (OFF)|switched off|
|---|---|
|1= (Ret)|Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.|
|2= (NoRet)|Power failure bridging with power return detection. The system will not start up again.|
|3= (NoLim)|Fastest possible speed reduction without power return detection.|
|5= (RetAbs)|Same as 1=Ret, but with absolute voltage levels and without validation check.|
|6= (NotRetAbs)|Same as 2=NoRet, but with absolute voltage levels and without validation check.|
|7= (NoRetAbsPulse)|Same as 6=NoRetAbs, but with pulse operation.|

In the event of a power failure, the DC link voltage can be supported by using the motor’s rotational energy. To this end, the motor will be operated as a generator and decelerated in a controlled manner in the event of a power failure so that a configurable DC link voltage setpoint will be maintained. This function is especially useful when it comes to powering the electronics in drives with magnetic bearings, as this will prevent the assembly from crashing into the safety bearing in the event of a power failure all the way to the lowest possible speeds.

NOTE

Please note that the components which need bridging must be powered via the DC link (DC power supply). In particular, the power supply of the servo drive itself (24 V control voltage) must be ensured.

# 4.2.1.2 Parametrisation

P 2941 - CON_POWF_VCtrl is used to configure the voltage controller by adjusting the corresponding gain and reset time. Within this context, the specified gain refers to the motor’s rated speed. At lower speeds, the gain will be automatically increased in order to maintain a constant dynamic performance in the voltage control circuit.

P 2942 - CON_POWF_VLim is used to configure the threshold voltage for detecting power failures / power returns, as well as the voltage setpoint for the controller. The configured voltage values will not be absolute values, but will instead be added to specific DC link threshold values (based on the operating mode). The corresponding

Image 4.2: Power failure bridging settings screen

# 4.2.1.3 Modes

# Mode 1

Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.

The power failure detection limit is formed by adding together P 701[12] - u_zkoff (Software shut-off limit for detection of DC link undervoltage) and P 2942[0] - POWF_Von. It should be considerably higher than the shutdown limit (default setting = 40 V).

Likewise, the voltage setpoint is yielded by adding P 701[12] - u_zkoff and P 2942[1] - POWF_VRef. The voltage setpoint must be lower than the detection limit so that it will be possible to detect when the power returns. Moreover, it should be considerably higher than the shutdown limit (default setting = 20 V).

After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. If a power return is detected within the time period set in P 2943[0] - CON_POWF_RetTime, the drive will return to its original control state. If power returns after the aforementioned time period has already elapsed, error 34-1 will be triggered. If P 2943[0] - CON_POWF_RetTime is set to 65535, there will be no time limit for the drive to return to its original control state after power returns.

# Mode 2

Power failure bridging with power return detection. The system will not start up again.

Same as mode 1, except the system will not start up again if the power returns. Error 34-1 will always be triggered once the power returns.

# Mode 3

Fastest possible speed reduction without power return detection.

In terms of configuring the power failure detection limits, the requirements listed for mode 1 apply here as well. The voltage setpoint is yielded by adding P 701[17] - u_bc_on (braking chopper threshold) and P 2942[1] - POWF_VRef. After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. This setpoint will be considerably higher than the power failure detection limit, which will technically ensure that it will not be possible to detect the return of power. This mode is characterized by the fact that the DC link voltage is typically raised all the way over the braking chopper threshold, resulting in the braking energy being converted into braking resistance. Accordingly, the drive will decelerate as quickly as possible.

# Mode 4

Only with expanded VFC functionality.

MOOG ID No.:CB40859-001 Date:11/2020

# 4 Power stage

If the power does not return, the drive will theoretically decelerate all the way to a stop. Within this context, there will be a specific speed below which it will not be possible to maintain the DC link voltage any longer even with the maximum motor (brake) current. This will result in an undervoltage shutdown.

MSD ServoDrive - DeviceHelp 29

# Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 30

# Mode 5

Same as mode 1, but with absolute voltage levels and without a validation check.

# 4.2.1.4 Parameters

|P No.|Index|Name / Setting|Unit|Function|
|---|---|---|---|---|
|P 2942[0]|-|POWF_VOn|-|is used to define the power failure detection limit.|
|P 2942[1]|2940|CON_PowerFail|-|Power failure bridging: selector|
|-|-|Off (0)|-|Function disabled|
|-|-|RET(1)|-|Function enabled. Return of power allowed if it occurs within defined time; otherwise, trigger error upon return|
|-|-|NORET(2)|-|Function enabled. ",What are the operating modes available for power failure bridging in the 'MSD ServoDrive'?,"The operating modes are OFF (0), Ret (1), NoRet (2), NoLim (3), RetAbs (5), NoRetAbs (6), and NoRetAbsPulse (7).","In 'MSD ServoDrive', you can select from OFF, Ret, NoRet, NoLim, RetAbs, NoRetAbs, and NoRetAbsPulse for power failure bridging.","Available modes: 0=OFF, 1=Ret, 2=NoRet, 3=NoLim, 5=RetAbs, 6=NoRetAbs, 7=NoRetAbsPulse.","The 'MSD ServoDrive' offers seven modes for power failure bridging, including OFF, Ret, and NoRetAbsPulse.","Options for power failure bridging in 'MSD ServoDrive' range from OFF to NoRetAbsPulse, covering various scenarios."
1,msd_servo_drive.txt,7,7e57e914c15e5d431d828292506d54404bad6624063209b278f9d6dfeb871841,"Temperature-related derating may occur. Switching frequency noise decreases as the switching frequency rises (audible range < 12 kHz).|
|309|CON_EnableWiretest| |Enable wire test|
|409|CON_ACT_VDC_TF|ms|Filter time constant for DC link voltage|
|752|MON_PWM_SwitchFreqSelect_Sel| |Switching frequency mode selector|
| |OFF (0)| |No function|
| |AUTO (1)| |Automatic switchover|
| |MAN(2)| |Manual switchover limited by P 758[0]|
| |CON_SwitchFreq_selMan| |Manually configurable power stage switching frequency|
| |(0)2 kHz| |2 kHz|
| |(1)4 kHz| |4 kHz|
|759|CON_|V|Overwrite default under voltage threshold level|

Table 4.1: “Power stage” parameters

# 4 Power stage

# Table 4.1: “Power stage” parameters (continue)

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(-1)1 /3x 110 V|
| | | |The device can be connected to the mains with one or three phases.|
| | | |(0)1x 230 V Single-phase device|
| | | |(1)3x 230 V Three-phase device|
| | | |(2)3x 400 V Three-phase device|
| | | |(3)3x 460 V Three-phase device|
| | | |(4)3x480 V Three-phase device|

# Table 4.2: “Power stage - AC servo drive” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(5)Safety low voltage 24-60 V|
|424|0 CON_VoltageMode|Device power supply mode| |
|425|0 CON_GridVoltageNom|V r.m.s|Mains voltage|
|426|0 CON_DCLinkVoltageNom|V|DC link voltage (DC low voltage)|

# Table 4.3: “Power stage - DC drives” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|308|0 CON_VoltageNom|V|Nominal voltage (DC low voltage)|

# Table 4.4: “Power stage - Low-voltage DC supply” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|MOOG|ID No.:CB40859-001|Date:11/2020| |

# Table 4.5: “Power stage - Mains voltage adaption” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|760|MON_VDC_Guard|Monitoring of DC link voltage| |
|760|0 Tfilt_av|ms|Filter time constant for average|
|760|1 Tfilt_var|ms|Filter time constant for variance|
|760|2 Max_var|V^2|Max allowed variance|
|760|3 Max_time|s|Max time with variance threshold exceeded|
|760|4 Check_time|s|Interval to check return of failed phase|
|1958|0 CON_FPGA_PWMScale|%|Phase voltage scaling of the fpga current controller (0 = no block modulation)|

# Table 4.6: “Power stage - Power failure bridging settings” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2940|0 CON_PowerFail_Sel| |Power failure bridging: selector|
|2941|0 Kr|A/V|Power failure bridging: Gain|
|2941|1 Tn|ms|Voltage control integration time constant|
|2941|2 imax|A|Voltage control maximum (negative) q-current|
|2941|3 imax_pos|A|Voltage control maximum q-current|
|2941|4 n_min|rpm|Minimum speed (abs value) for voltage control|
|2942|0 POWF_VOn|V|Threshold voltage (offset) to start power fail control|
|2942|1 POWF_VRef|V|Reference voltage (offset) at power fail|
|2943|0 CON_POWF_RetTime|ms|uzk return time (65535 = infinite)|
|2944|0 CON_POWF_UdcOffSw|V|Shutdown threshold: Undervoltage|
|2945|0 CON_POWF_UbcOnSw|V|Switch-on threshold: Braking chopper|

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 28

# 4.2 Power failure bridging

# 4.2.1 Functional description

# 4.2.1.1 Detection of a voltage failure

The P 2940 - CON_PowerFail_Sel selection parameter can be used to select the following operating modes:

|0= (OFF)|switched off|
|---|---|
|1= (Ret)|Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.|
|2= (NoRet)|Power failure bridging with power return detection. The system will not start up again.|
|3= (NoLim)|Fastest possible speed reduction without power return detection.|
|5= (RetAbs)|Same as 1=Ret, but with absolute voltage levels and without validation check.|
|6= (NotRetAbs)|Same as 2=NoRet, but with absolute voltage levels and without validation check.|
|7= (NoRetAbsPulse)|Same as 6=NoRetAbs, but with pulse operation.|

In the event of a power failure, the DC link voltage can be supported by using the motor’s rotational energy. To this end, the motor will be operated as a generator and decelerated in a controlled manner in the event of a power failure so that a configurable DC link voltage setpoint will be maintained. This function is especially useful when it comes to powering the electronics in drives with magnetic bearings, as this will prevent the assembly from crashing into the safety bearing in the event of a power failure all the way to the lowest possible speeds.

NOTE

Please note that the components which need bridging must be powered via the DC link (DC power supply). In particular, the power supply of the servo drive itself (24 V control voltage) must be ensured.

# 4.2.1.2 Parametrisation

P 2941 - CON_POWF_VCtrl is used to configure the voltage controller by adjusting the corresponding gain and reset time. Within this context, the specified gain refers to the motor’s rated speed. At lower speeds, the gain will be automatically increased in order to maintain a constant dynamic performance in the voltage control circuit.

P 2942 - CON_POWF_VLim is used to configure the threshold voltage for detecting power failures / power returns, as well as the voltage setpoint for the controller. The configured voltage values will not be absolute values, but will instead be added to specific DC link threshold values (based on the operating mode). The corresponding

Image 4.2: Power failure bridging settings screen

# 4.2.1.3 Modes

# Mode 1

Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.

The power failure detection limit is formed by adding together P 701[12] - u_zkoff (Software shut-off limit for detection of DC link undervoltage) and P 2942[0] - POWF_Von. It should be considerably higher than the shutdown limit (default setting = 40 V).

Likewise, the voltage setpoint is yielded by adding P 701[12] - u_zkoff and P 2942[1] - POWF_VRef. The voltage setpoint must be lower than the detection limit so that it will be possible to detect when the power returns. Moreover, it should be considerably higher than the shutdown limit (default setting = 20 V).

After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. If a power return is detected within the time period set in P 2943[0] - CON_POWF_RetTime, the drive will return to its original control state. If power returns after the aforementioned time period has already elapsed, error 34-1 will be triggered. If P 2943[0] - CON_POWF_RetTime is set to 65535, there will be no time limit for the drive to return to its original control state after power returns.

# Mode 2

Power failure bridging with power return detection. The system will not start up again.

Same as mode 1, except the system will not start up again if the power returns. Error 34-1 will always be triggered once the power returns.

# Mode 3

Fastest possible speed reduction without power return detection.

In terms of configuring the power failure detection limits, the requirements listed for mode 1 apply here as well. The voltage setpoint is yielded by adding P 701[17] - u_bc_on (braking chopper threshold) and P 2942[1] - POWF_VRef. After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. This setpoint will be considerably higher than the power failure detection limit, which will technically ensure that it will not be possible to detect the return of power. This mode is characterized by the fact that the DC link voltage is typically raised all the way over the braking chopper threshold, resulting in the braking energy being converted into braking resistance. Accordingly, the drive will decelerate as quickly as possible.

# Mode 4

Only with expanded VFC functionality.

MOOG ID No.:CB40859-001 Date:11/2020

# 4 Power stage

If the power does not return, the drive will theoretically decelerate all the way to a stop. Within this context, there will be a specific speed below which it will not be possible to maintain the DC link voltage any longer even with the maximum motor (brake) current. This will result in an undervoltage shutdown.

MSD ServoDrive - DeviceHelp 29

# Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 30

# Mode 5

Same as mode 1, but with absolute voltage levels and without a validation check.

# 4.2.1.4 Parameters

|P No.|Index|Name / Setting|Unit|Function|
|---|---|---|---|---|
|P 2942[0]|-|POWF_VOn|-|is used to define the power failure detection limit.|
|P 2942[1]|2940|CON_PowerFail|-|Power failure bridging: selector|
|-|-|Off (0)|-|Function disabled|
|-|-|RET(1)|-|Function enabled. Return of power allowed if it occurs within defined time; otherwise, trigger error upon return|
|-|-|NORET(2)|-|Function enabled. ",How is the DC link voltage supported during a power failure in the 'MSD ServoDrive'?,By operating the motor as a generator and decelerating it in a controlled manner to maintain a configurable DC link voltage setpoint.,"The 'MSD ServoDrive' uses the motor's rotational energy, acting as a generator, to support DC link voltage during power failures.",Support is achieved through controlled deceleration of the motor as a generator to keep the DC link voltage at a set level.,"During a power failure, the system decelerates the motor generator-style to sustain the DC link voltage.",The device maintains DC link voltage by converting the motor's kinetic energy into electrical energy during power failures.
2,msd_servo_drive.txt,7,7e57e914c15e5d431d828292506d54404bad6624063209b278f9d6dfeb871841,"Temperature-related derating may occur. Switching frequency noise decreases as the switching frequency rises (audible range < 12 kHz).|
|309|CON_EnableWiretest| |Enable wire test|
|409|CON_ACT_VDC_TF|ms|Filter time constant for DC link voltage|
|752|MON_PWM_SwitchFreqSelect_Sel| |Switching frequency mode selector|
| |OFF (0)| |No function|
| |AUTO (1)| |Automatic switchover|
| |MAN(2)| |Manual switchover limited by P 758[0]|
| |CON_SwitchFreq_selMan| |Manually configurable power stage switching frequency|
| |(0)2 kHz| |2 kHz|
| |(1)4 kHz| |4 kHz|
|759|CON_|V|Overwrite default under voltage threshold level|

Table 4.1: “Power stage” parameters

# 4 Power stage

# Table 4.1: “Power stage” parameters (continue)

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(-1)1 /3x 110 V|
| | | |The device can be connected to the mains with one or three phases.|
| | | |(0)1x 230 V Single-phase device|
| | | |(1)3x 230 V Three-phase device|
| | | |(2)3x 400 V Three-phase device|
| | | |(3)3x 460 V Three-phase device|
| | | |(4)3x480 V Three-phase device|

# Table 4.2: “Power stage - AC servo drive” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(5)Safety low voltage 24-60 V|
|424|0 CON_VoltageMode|Device power supply mode| |
|425|0 CON_GridVoltageNom|V r.m.s|Mains voltage|
|426|0 CON_DCLinkVoltageNom|V|DC link voltage (DC low voltage)|

# Table 4.3: “Power stage - DC drives” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|308|0 CON_VoltageNom|V|Nominal voltage (DC low voltage)|

# Table 4.4: “Power stage - Low-voltage DC supply” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|MOOG|ID No.:CB40859-001|Date:11/2020| |

# Table 4.5: “Power stage - Mains voltage adaption” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|760|MON_VDC_Guard|Monitoring of DC link voltage| |
|760|0 Tfilt_av|ms|Filter time constant for average|
|760|1 Tfilt_var|ms|Filter time constant for variance|
|760|2 Max_var|V^2|Max allowed variance|
|760|3 Max_time|s|Max time with variance threshold exceeded|
|760|4 Check_time|s|Interval to check return of failed phase|
|1958|0 CON_FPGA_PWMScale|%|Phase voltage scaling of the fpga current controller (0 = no block modulation)|

# Table 4.6: “Power stage - Power failure bridging settings” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2940|0 CON_PowerFail_Sel| |Power failure bridging: selector|
|2941|0 Kr|A/V|Power failure bridging: Gain|
|2941|1 Tn|ms|Voltage control integration time constant|
|2941|2 imax|A|Voltage control maximum (negative) q-current|
|2941|3 imax_pos|A|Voltage control maximum q-current|
|2941|4 n_min|rpm|Minimum speed (abs value) for voltage control|
|2942|0 POWF_VOn|V|Threshold voltage (offset) to start power fail control|
|2942|1 POWF_VRef|V|Reference voltage (offset) at power fail|
|2943|0 CON_POWF_RetTime|ms|uzk return time (65535 = infinite)|
|2944|0 CON_POWF_UdcOffSw|V|Shutdown threshold: Undervoltage|
|2945|0 CON_POWF_UbcOnSw|V|Switch-on threshold: Braking chopper|

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 28

# 4.2 Power failure bridging

# 4.2.1 Functional description

# 4.2.1.1 Detection of a voltage failure

The P 2940 - CON_PowerFail_Sel selection parameter can be used to select the following operating modes:

|0= (OFF)|switched off|
|---|---|
|1= (Ret)|Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.|
|2= (NoRet)|Power failure bridging with power return detection. The system will not start up again.|
|3= (NoLim)|Fastest possible speed reduction without power return detection.|
|5= (RetAbs)|Same as 1=Ret, but with absolute voltage levels and without validation check.|
|6= (NotRetAbs)|Same as 2=NoRet, but with absolute voltage levels and without validation check.|
|7= (NoRetAbsPulse)|Same as 6=NoRetAbs, but with pulse operation.|

In the event of a power failure, the DC link voltage can be supported by using the motor’s rotational energy. To this end, the motor will be operated as a generator and decelerated in a controlled manner in the event of a power failure so that a configurable DC link voltage setpoint will be maintained. This function is especially useful when it comes to powering the electronics in drives with magnetic bearings, as this will prevent the assembly from crashing into the safety bearing in the event of a power failure all the way to the lowest possible speeds.

NOTE

Please note that the components which need bridging must be powered via the DC link (DC power supply). In particular, the power supply of the servo drive itself (24 V control voltage) must be ensured.

# 4.2.1.2 Parametrisation

P 2941 - CON_POWF_VCtrl is used to configure the voltage controller by adjusting the corresponding gain and reset time. Within this context, the specified gain refers to the motor’s rated speed. At lower speeds, the gain will be automatically increased in order to maintain a constant dynamic performance in the voltage control circuit.

P 2942 - CON_POWF_VLim is used to configure the threshold voltage for detecting power failures / power returns, as well as the voltage setpoint for the controller. The configured voltage values will not be absolute values, but will instead be added to specific DC link threshold values (based on the operating mode). The corresponding

Image 4.2: Power failure bridging settings screen

# 4.2.1.3 Modes

# Mode 1

Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.

The power failure detection limit is formed by adding together P 701[12] - u_zkoff (Software shut-off limit for detection of DC link undervoltage) and P 2942[0] - POWF_Von. It should be considerably higher than the shutdown limit (default setting = 40 V).

Likewise, the voltage setpoint is yielded by adding P 701[12] - u_zkoff and P 2942[1] - POWF_VRef. The voltage setpoint must be lower than the detection limit so that it will be possible to detect when the power returns. Moreover, it should be considerably higher than the shutdown limit (default setting = 20 V).

After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. If a power return is detected within the time period set in P 2943[0] - CON_POWF_RetTime, the drive will return to its original control state. If power returns after the aforementioned time period has already elapsed, error 34-1 will be triggered. If P 2943[0] - CON_POWF_RetTime is set to 65535, there will be no time limit for the drive to return to its original control state after power returns.

# Mode 2

Power failure bridging with power return detection. The system will not start up again.

Same as mode 1, except the system will not start up again if the power returns. Error 34-1 will always be triggered once the power returns.

# Mode 3

Fastest possible speed reduction without power return detection.

In terms of configuring the power failure detection limits, the requirements listed for mode 1 apply here as well. The voltage setpoint is yielded by adding P 701[17] - u_bc_on (braking chopper threshold) and P 2942[1] - POWF_VRef. After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. This setpoint will be considerably higher than the power failure detection limit, which will technically ensure that it will not be possible to detect the return of power. This mode is characterized by the fact that the DC link voltage is typically raised all the way over the braking chopper threshold, resulting in the braking energy being converted into braking resistance. Accordingly, the drive will decelerate as quickly as possible.

# Mode 4

Only with expanded VFC functionality.

MOOG ID No.:CB40859-001 Date:11/2020

# 4 Power stage

If the power does not return, the drive will theoretically decelerate all the way to a stop. Within this context, there will be a specific speed below which it will not be possible to maintain the DC link voltage any longer even with the maximum motor (brake) current. This will result in an undervoltage shutdown.

MSD ServoDrive - DeviceHelp 29

# Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 30

# Mode 5

Same as mode 1, but with absolute voltage levels and without a validation check.

# 4.2.1.4 Parameters

|P No.|Index|Name / Setting|Unit|Function|
|---|---|---|---|---|
|P 2942[0]|-|POWF_VOn|-|is used to define the power failure detection limit.|
|P 2942[1]|2940|CON_PowerFail|-|Power failure bridging: selector|
|-|-|Off (0)|-|Function disabled|
|-|-|RET(1)|-|Function enabled. Return of power allowed if it occurs within defined time; otherwise, trigger error upon return|
|-|-|NORET(2)|-|Function enabled. ",What is the purpose of the parameter P 2941 - CON_POWF_VCtrl in the 'MSD ServoDrive'?,To configure the voltage controller by adjusting the gain and reset time for maintaining dynamic performance in the voltage control circuit.,P 2941 is used for setting up the voltage controller's gain and reset time to ensure consistent performance across speeds.,"This parameter allows configuration of the voltage controller's dynamics, adjusting gain and reset time based on motor speed.","It adjusts the voltage controller settings to maintain performance, automatically increasing gain at lower speeds.","Configures the voltage controller, ensuring optimal dynamic response by adjusting gain and reset time parameters."
3,msd_servo_drive.txt,7,7e57e914c15e5d431d828292506d54404bad6624063209b278f9d6dfeb871841,"Temperature-related derating may occur. Switching frequency noise decreases as the switching frequency rises (audible range < 12 kHz).|
|309|CON_EnableWiretest| |Enable wire test|
|409|CON_ACT_VDC_TF|ms|Filter time constant for DC link voltage|
|752|MON_PWM_SwitchFreqSelect_Sel| |Switching frequency mode selector|
| |OFF (0)| |No function|
| |AUTO (1)| |Automatic switchover|
| |MAN(2)| |Manual switchover limited by P 758[0]|
| |CON_SwitchFreq_selMan| |Manually configurable power stage switching frequency|
| |(0)2 kHz| |2 kHz|
| |(1)4 kHz| |4 kHz|
|759|CON_|V|Overwrite default under voltage threshold level|

Table 4.1: “Power stage” parameters

# 4 Power stage

# Table 4.1: “Power stage” parameters (continue)

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(-1)1 /3x 110 V|
| | | |The device can be connected to the mains with one or three phases.|
| | | |(0)1x 230 V Single-phase device|
| | | |(1)3x 230 V Three-phase device|
| | | |(2)3x 400 V Three-phase device|
| | | |(3)3x 460 V Three-phase device|
| | | |(4)3x480 V Three-phase device|

# Table 4.2: “Power stage - AC servo drive” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(5)Safety low voltage 24-60 V|
|424|0 CON_VoltageMode|Device power supply mode| |
|425|0 CON_GridVoltageNom|V r.m.s|Mains voltage|
|426|0 CON_DCLinkVoltageNom|V|DC link voltage (DC low voltage)|

# Table 4.3: “Power stage - DC drives” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|308|0 CON_VoltageNom|V|Nominal voltage (DC low voltage)|

# Table 4.4: “Power stage - Low-voltage DC supply” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|MOOG|ID No.:CB40859-001|Date:11/2020| |

# Table 4.5: “Power stage - Mains voltage adaption” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|760|MON_VDC_Guard|Monitoring of DC link voltage| |
|760|0 Tfilt_av|ms|Filter time constant for average|
|760|1 Tfilt_var|ms|Filter time constant for variance|
|760|2 Max_var|V^2|Max allowed variance|
|760|3 Max_time|s|Max time with variance threshold exceeded|
|760|4 Check_time|s|Interval to check return of failed phase|
|1958|0 CON_FPGA_PWMScale|%|Phase voltage scaling of the fpga current controller (0 = no block modulation)|

# Table 4.6: “Power stage - Power failure bridging settings” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2940|0 CON_PowerFail_Sel| |Power failure bridging: selector|
|2941|0 Kr|A/V|Power failure bridging: Gain|
|2941|1 Tn|ms|Voltage control integration time constant|
|2941|2 imax|A|Voltage control maximum (negative) q-current|
|2941|3 imax_pos|A|Voltage control maximum q-current|
|2941|4 n_min|rpm|Minimum speed (abs value) for voltage control|
|2942|0 POWF_VOn|V|Threshold voltage (offset) to start power fail control|
|2942|1 POWF_VRef|V|Reference voltage (offset) at power fail|
|2943|0 CON_POWF_RetTime|ms|uzk return time (65535 = infinite)|
|2944|0 CON_POWF_UdcOffSw|V|Shutdown threshold: Undervoltage|
|2945|0 CON_POWF_UbcOnSw|V|Switch-on threshold: Braking chopper|

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 28

# 4.2 Power failure bridging

# 4.2.1 Functional description

# 4.2.1.1 Detection of a voltage failure

The P 2940 - CON_PowerFail_Sel selection parameter can be used to select the following operating modes:

|0= (OFF)|switched off|
|---|---|
|1= (Ret)|Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.|
|2= (NoRet)|Power failure bridging with power return detection. The system will not start up again.|
|3= (NoLim)|Fastest possible speed reduction without power return detection.|
|5= (RetAbs)|Same as 1=Ret, but with absolute voltage levels and without validation check.|
|6= (NotRetAbs)|Same as 2=NoRet, but with absolute voltage levels and without validation check.|
|7= (NoRetAbsPulse)|Same as 6=NoRetAbs, but with pulse operation.|

In the event of a power failure, the DC link voltage can be supported by using the motor’s rotational energy. To this end, the motor will be operated as a generator and decelerated in a controlled manner in the event of a power failure so that a configurable DC link voltage setpoint will be maintained. This function is especially useful when it comes to powering the electronics in drives with magnetic bearings, as this will prevent the assembly from crashing into the safety bearing in the event of a power failure all the way to the lowest possible speeds.

NOTE

Please note that the components which need bridging must be powered via the DC link (DC power supply). In particular, the power supply of the servo drive itself (24 V control voltage) must be ensured.

# 4.2.1.2 Parametrisation

P 2941 - CON_POWF_VCtrl is used to configure the voltage controller by adjusting the corresponding gain and reset time. Within this context, the specified gain refers to the motor’s rated speed. At lower speeds, the gain will be automatically increased in order to maintain a constant dynamic performance in the voltage control circuit.

P 2942 - CON_POWF_VLim is used to configure the threshold voltage for detecting power failures / power returns, as well as the voltage setpoint for the controller. The configured voltage values will not be absolute values, but will instead be added to specific DC link threshold values (based on the operating mode). The corresponding

Image 4.2: Power failure bridging settings screen

# 4.2.1.3 Modes

# Mode 1

Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.

The power failure detection limit is formed by adding together P 701[12] - u_zkoff (Software shut-off limit for detection of DC link undervoltage) and P 2942[0] - POWF_Von. It should be considerably higher than the shutdown limit (default setting = 40 V).

Likewise, the voltage setpoint is yielded by adding P 701[12] - u_zkoff and P 2942[1] - POWF_VRef. The voltage setpoint must be lower than the detection limit so that it will be possible to detect when the power returns. Moreover, it should be considerably higher than the shutdown limit (default setting = 20 V).

After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. If a power return is detected within the time period set in P 2943[0] - CON_POWF_RetTime, the drive will return to its original control state. If power returns after the aforementioned time period has already elapsed, error 34-1 will be triggered. If P 2943[0] - CON_POWF_RetTime is set to 65535, there will be no time limit for the drive to return to its original control state after power returns.

# Mode 2

Power failure bridging with power return detection. The system will not start up again.

Same as mode 1, except the system will not start up again if the power returns. Error 34-1 will always be triggered once the power returns.

# Mode 3

Fastest possible speed reduction without power return detection.

In terms of configuring the power failure detection limits, the requirements listed for mode 1 apply here as well. The voltage setpoint is yielded by adding P 701[17] - u_bc_on (braking chopper threshold) and P 2942[1] - POWF_VRef. After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. This setpoint will be considerably higher than the power failure detection limit, which will technically ensure that it will not be possible to detect the return of power. This mode is characterized by the fact that the DC link voltage is typically raised all the way over the braking chopper threshold, resulting in the braking energy being converted into braking resistance. Accordingly, the drive will decelerate as quickly as possible.

# Mode 4

Only with expanded VFC functionality.

MOOG ID No.:CB40859-001 Date:11/2020

# 4 Power stage

If the power does not return, the drive will theoretically decelerate all the way to a stop. Within this context, there will be a specific speed below which it will not be possible to maintain the DC link voltage any longer even with the maximum motor (brake) current. This will result in an undervoltage shutdown.

MSD ServoDrive - DeviceHelp 29

# Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 30

# Mode 5

Same as mode 1, but with absolute voltage levels and without a validation check.

# 4.2.1.4 Parameters

|P No.|Index|Name / Setting|Unit|Function|
|---|---|---|---|---|
|P 2942[0]|-|POWF_VOn|-|is used to define the power failure detection limit.|
|P 2942[1]|2940|CON_PowerFail|-|Power failure bridging: selector|
|-|-|Off (0)|-|Function disabled|
|-|-|RET(1)|-|Function enabled. Return of power allowed if it occurs within defined time; otherwise, trigger error upon return|
|-|-|NORET(2)|-|Function enabled. ",What does the parameter P 2942 - CON_POWF_VLim configure in the 'MSD ServoDrive'?,It sets the threshold voltage for detecting power failures/power returns and the voltage setpoint for the controller.,"P 2942 configures detection thresholds and setpoints for power failure and return, added to DC link threshold values.",This parameter defines the voltage levels for power failure detection and the controller's target voltage.,Sets up the necessary voltage thresholds for identifying power failures and establishing controller setpoints.,Configures detection limits and reference voltages for power failure bridging functionality.
4,msd_servo_drive.txt,7,7e57e914c15e5d431d828292506d54404bad6624063209b278f9d6dfeb871841,"Temperature-related derating may occur. Switching frequency noise decreases as the switching frequency rises (audible range < 12 kHz).|
|309|CON_EnableWiretest| |Enable wire test|
|409|CON_ACT_VDC_TF|ms|Filter time constant for DC link voltage|
|752|MON_PWM_SwitchFreqSelect_Sel| |Switching frequency mode selector|
| |OFF (0)| |No function|
| |AUTO (1)| |Automatic switchover|
| |MAN(2)| |Manual switchover limited by P 758[0]|
| |CON_SwitchFreq_selMan| |Manually configurable power stage switching frequency|
| |(0)2 kHz| |2 kHz|
| |(1)4 kHz| |4 kHz|
|759|CON_|V|Overwrite default under voltage threshold level|

Table 4.1: “Power stage” parameters

# 4 Power stage

# Table 4.1: “Power stage” parameters (continue)

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(-1)1 /3x 110 V|
| | | |The device can be connected to the mains with one or three phases.|
| | | |(0)1x 230 V Single-phase device|
| | | |(1)3x 230 V Three-phase device|
| | | |(2)3x 400 V Three-phase device|
| | | |(3)3x 460 V Three-phase device|
| | | |(4)3x480 V Three-phase device|

# Table 4.2: “Power stage - AC servo drive” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(5)Safety low voltage 24-60 V|
|424|0 CON_VoltageMode|Device power supply mode| |
|425|0 CON_GridVoltageNom|V r.m.s|Mains voltage|
|426|0 CON_DCLinkVoltageNom|V|DC link voltage (DC low voltage)|

# Table 4.3: “Power stage - DC drives” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|308|0 CON_VoltageNom|V|Nominal voltage (DC low voltage)|

# Table 4.4: “Power stage - Low-voltage DC supply” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|MOOG|ID No.:CB40859-001|Date:11/2020| |

# Table 4.5: “Power stage - Mains voltage adaption” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|760|MON_VDC_Guard|Monitoring of DC link voltage| |
|760|0 Tfilt_av|ms|Filter time constant for average|
|760|1 Tfilt_var|ms|Filter time constant for variance|
|760|2 Max_var|V^2|Max allowed variance|
|760|3 Max_time|s|Max time with variance threshold exceeded|
|760|4 Check_time|s|Interval to check return of failed phase|
|1958|0 CON_FPGA_PWMScale|%|Phase voltage scaling of the fpga current controller (0 = no block modulation)|

# Table 4.6: “Power stage - Power failure bridging settings” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2940|0 CON_PowerFail_Sel| |Power failure bridging: selector|
|2941|0 Kr|A/V|Power failure bridging: Gain|
|2941|1 Tn|ms|Voltage control integration time constant|
|2941|2 imax|A|Voltage control maximum (negative) q-current|
|2941|3 imax_pos|A|Voltage control maximum q-current|
|2941|4 n_min|rpm|Minimum speed (abs value) for voltage control|
|2942|0 POWF_VOn|V|Threshold voltage (offset) to start power fail control|
|2942|1 POWF_VRef|V|Reference voltage (offset) at power fail|
|2943|0 CON_POWF_RetTime|ms|uzk return time (65535 = infinite)|
|2944|0 CON_POWF_UdcOffSw|V|Shutdown threshold: Undervoltage|
|2945|0 CON_POWF_UbcOnSw|V|Switch-on threshold: Braking chopper|

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 28

# 4.2 Power failure bridging

# 4.2.1 Functional description

# 4.2.1.1 Detection of a voltage failure

The P 2940 - CON_PowerFail_Sel selection parameter can be used to select the following operating modes:

|0= (OFF)|switched off|
|---|---|
|1= (Ret)|Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.|
|2= (NoRet)|Power failure bridging with power return detection. The system will not start up again.|
|3= (NoLim)|Fastest possible speed reduction without power return detection.|
|5= (RetAbs)|Same as 1=Ret, but with absolute voltage levels and without validation check.|
|6= (NotRetAbs)|Same as 2=NoRet, but with absolute voltage levels and without validation check.|
|7= (NoRetAbsPulse)|Same as 6=NoRetAbs, but with pulse operation.|

In the event of a power failure, the DC link voltage can be supported by using the motor’s rotational energy. To this end, the motor will be operated as a generator and decelerated in a controlled manner in the event of a power failure so that a configurable DC link voltage setpoint will be maintained. This function is especially useful when it comes to powering the electronics in drives with magnetic bearings, as this will prevent the assembly from crashing into the safety bearing in the event of a power failure all the way to the lowest possible speeds.

NOTE

Please note that the components which need bridging must be powered via the DC link (DC power supply). In particular, the power supply of the servo drive itself (24 V control voltage) must be ensured.

# 4.2.1.2 Parametrisation

P 2941 - CON_POWF_VCtrl is used to configure the voltage controller by adjusting the corresponding gain and reset time. Within this context, the specified gain refers to the motor’s rated speed. At lower speeds, the gain will be automatically increased in order to maintain a constant dynamic performance in the voltage control circuit.

P 2942 - CON_POWF_VLim is used to configure the threshold voltage for detecting power failures / power returns, as well as the voltage setpoint for the controller. The configured voltage values will not be absolute values, but will instead be added to specific DC link threshold values (based on the operating mode). The corresponding

Image 4.2: Power failure bridging settings screen

# 4.2.1.3 Modes

# Mode 1

Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.

The power failure detection limit is formed by adding together P 701[12] - u_zkoff (Software shut-off limit for detection of DC link undervoltage) and P 2942[0] - POWF_Von. It should be considerably higher than the shutdown limit (default setting = 40 V).

Likewise, the voltage setpoint is yielded by adding P 701[12] - u_zkoff and P 2942[1] - POWF_VRef. The voltage setpoint must be lower than the detection limit so that it will be possible to detect when the power returns. Moreover, it should be considerably higher than the shutdown limit (default setting = 20 V).

After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. If a power return is detected within the time period set in P 2943[0] - CON_POWF_RetTime, the drive will return to its original control state. If power returns after the aforementioned time period has already elapsed, error 34-1 will be triggered. If P 2943[0] - CON_POWF_RetTime is set to 65535, there will be no time limit for the drive to return to its original control state after power returns.

# Mode 2

Power failure bridging with power return detection. The system will not start up again.

Same as mode 1, except the system will not start up again if the power returns. Error 34-1 will always be triggered once the power returns.

# Mode 3

Fastest possible speed reduction without power return detection.

In terms of configuring the power failure detection limits, the requirements listed for mode 1 apply here as well. The voltage setpoint is yielded by adding P 701[17] - u_bc_on (braking chopper threshold) and P 2942[1] - POWF_VRef. After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. This setpoint will be considerably higher than the power failure detection limit, which will technically ensure that it will not be possible to detect the return of power. This mode is characterized by the fact that the DC link voltage is typically raised all the way over the braking chopper threshold, resulting in the braking energy being converted into braking resistance. Accordingly, the drive will decelerate as quickly as possible.

# Mode 4

Only with expanded VFC functionality.

MOOG ID No.:CB40859-001 Date:11/2020

# 4 Power stage

If the power does not return, the drive will theoretically decelerate all the way to a stop. Within this context, there will be a specific speed below which it will not be possible to maintain the DC link voltage any longer even with the maximum motor (brake) current. This will result in an undervoltage shutdown.

MSD ServoDrive - DeviceHelp 29

# Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 30

# Mode 5

Same as mode 1, but with absolute voltage levels and without a validation check.

# 4.2.1.4 Parameters

|P No.|Index|Name / Setting|Unit|Function|
|---|---|---|---|---|
|P 2942[0]|-|POWF_VOn|-|is used to define the power failure detection limit.|
|P 2942[1]|2940|CON_PowerFail|-|Power failure bridging: selector|
|-|-|Off (0)|-|Function disabled|
|-|-|RET(1)|-|Function enabled. Return of power allowed if it occurs within defined time; otherwise, trigger error upon return|
|-|-|NORET(2)|-|Function enabled. ",What happens if power returns after the time set in P 2943 - CON_POWF_RetTime has elapsed in the 'MSD ServoDrive'?,Error 34-1 will be triggered if power returns after the configured time period has elapsed.,The system triggers error 34-1 upon power return if it occurs beyond the time specified in P 2943.,"After the set time, a power return results in error 34-1, indicating a delayed restoration.","A late power return, post the P 2943 timeframe, causes the system to generate error 34-1.",Exceeding the return time limit in P 2943 leads to an error condition (34-1) upon power restoration.
5,msd_servo_drive.txt,7,7e57e914c15e5d431d828292506d54404bad6624063209b278f9d6dfeb871841,"Temperature-related derating may occur. Switching frequency noise decreases as the switching frequency rises (audible range < 12 kHz).|
|309|CON_EnableWiretest| |Enable wire test|
|409|CON_ACT_VDC_TF|ms|Filter time constant for DC link voltage|
|752|MON_PWM_SwitchFreqSelect_Sel| |Switching frequency mode selector|
| |OFF (0)| |No function|
| |AUTO (1)| |Automatic switchover|
| |MAN(2)| |Manual switchover limited by P 758[0]|
| |CON_SwitchFreq_selMan| |Manually configurable power stage switching frequency|
| |(0)2 kHz| |2 kHz|
| |(1)4 kHz| |4 kHz|
|759|CON_|V|Overwrite default under voltage threshold level|

Table 4.1: “Power stage” parameters

# 4 Power stage

# Table 4.1: “Power stage” parameters (continue)

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(-1)1 /3x 110 V|
| | | |The device can be connected to the mains with one or three phases.|
| | | |(0)1x 230 V Single-phase device|
| | | |(1)3x 230 V Three-phase device|
| | | |(2)3x 400 V Three-phase device|
| | | |(3)3x 460 V Three-phase device|
| | | |(4)3x480 V Three-phase device|

# Table 4.2: “Power stage - AC servo drive” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(5)Safety low voltage 24-60 V|
|424|0 CON_VoltageMode|Device power supply mode| |
|425|0 CON_GridVoltageNom|V r.m.s|Mains voltage|
|426|0 CON_DCLinkVoltageNom|V|DC link voltage (DC low voltage)|

# Table 4.3: “Power stage - DC drives” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|308|0 CON_VoltageNom|V|Nominal voltage (DC low voltage)|

# Table 4.4: “Power stage - Low-voltage DC supply” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|MOOG|ID No.:CB40859-001|Date:11/2020| |

# Table 4.5: “Power stage - Mains voltage adaption” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|760|MON_VDC_Guard|Monitoring of DC link voltage| |
|760|0 Tfilt_av|ms|Filter time constant for average|
|760|1 Tfilt_var|ms|Filter time constant for variance|
|760|2 Max_var|V^2|Max allowed variance|
|760|3 Max_time|s|Max time with variance threshold exceeded|
|760|4 Check_time|s|Interval to check return of failed phase|
|1958|0 CON_FPGA_PWMScale|%|Phase voltage scaling of the fpga current controller (0 = no block modulation)|

# Table 4.6: “Power stage - Power failure bridging settings” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2940|0 CON_PowerFail_Sel| |Power failure bridging: selector|
|2941|0 Kr|A/V|Power failure bridging: Gain|
|2941|1 Tn|ms|Voltage control integration time constant|
|2941|2 imax|A|Voltage control maximum (negative) q-current|
|2941|3 imax_pos|A|Voltage control maximum q-current|
|2941|4 n_min|rpm|Minimum speed (abs value) for voltage control|
|2942|0 POWF_VOn|V|Threshold voltage (offset) to start power fail control|
|2942|1 POWF_VRef|V|Reference voltage (offset) at power fail|
|2943|0 CON_POWF_RetTime|ms|uzk return time (65535 = infinite)|
|2944|0 CON_POWF_UdcOffSw|V|Shutdown threshold: Undervoltage|
|2945|0 CON_POWF_UbcOnSw|V|Switch-on threshold: Braking chopper|

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 28

# 4.2 Power failure bridging

# 4.2.1 Functional description

# 4.2.1.1 Detection of a voltage failure

The P 2940 - CON_PowerFail_Sel selection parameter can be used to select the following operating modes:

|0= (OFF)|switched off|
|---|---|
|1= (Ret)|Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.|
|2= (NoRet)|Power failure bridging with power return detection. The system will not start up again.|
|3= (NoLim)|Fastest possible speed reduction without power return detection.|
|5= (RetAbs)|Same as 1=Ret, but with absolute voltage levels and without validation check.|
|6= (NotRetAbs)|Same as 2=NoRet, but with absolute voltage levels and without validation check.|
|7= (NoRetAbsPulse)|Same as 6=NoRetAbs, but with pulse operation.|

In the event of a power failure, the DC link voltage can be supported by using the motor’s rotational energy. To this end, the motor will be operated as a generator and decelerated in a controlled manner in the event of a power failure so that a configurable DC link voltage setpoint will be maintained. This function is especially useful when it comes to powering the electronics in drives with magnetic bearings, as this will prevent the assembly from crashing into the safety bearing in the event of a power failure all the way to the lowest possible speeds.

NOTE

Please note that the components which need bridging must be powered via the DC link (DC power supply). In particular, the power supply of the servo drive itself (24 V control voltage) must be ensured.

# 4.2.1.2 Parametrisation

P 2941 - CON_POWF_VCtrl is used to configure the voltage controller by adjusting the corresponding gain and reset time. Within this context, the specified gain refers to the motor’s rated speed. At lower speeds, the gain will be automatically increased in order to maintain a constant dynamic performance in the voltage control circuit.

P 2942 - CON_POWF_VLim is used to configure the threshold voltage for detecting power failures / power returns, as well as the voltage setpoint for the controller. The configured voltage values will not be absolute values, but will instead be added to specific DC link threshold values (based on the operating mode). The corresponding

Image 4.2: Power failure bridging settings screen

# 4.2.1.3 Modes

# Mode 1

Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.

The power failure detection limit is formed by adding together P 701[12] - u_zkoff (Software shut-off limit for detection of DC link undervoltage) and P 2942[0] - POWF_Von. It should be considerably higher than the shutdown limit (default setting = 40 V).

Likewise, the voltage setpoint is yielded by adding P 701[12] - u_zkoff and P 2942[1] - POWF_VRef. The voltage setpoint must be lower than the detection limit so that it will be possible to detect when the power returns. Moreover, it should be considerably higher than the shutdown limit (default setting = 20 V).

After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. If a power return is detected within the time period set in P 2943[0] - CON_POWF_RetTime, the drive will return to its original control state. If power returns after the aforementioned time period has already elapsed, error 34-1 will be triggered. If P 2943[0] - CON_POWF_RetTime is set to 65535, there will be no time limit for the drive to return to its original control state after power returns.

# Mode 2

Power failure bridging with power return detection. The system will not start up again.

Same as mode 1, except the system will not start up again if the power returns. Error 34-1 will always be triggered once the power returns.

# Mode 3

Fastest possible speed reduction without power return detection.

In terms of configuring the power failure detection limits, the requirements listed for mode 1 apply here as well. The voltage setpoint is yielded by adding P 701[17] - u_bc_on (braking chopper threshold) and P 2942[1] - POWF_VRef. After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. This setpoint will be considerably higher than the power failure detection limit, which will technically ensure that it will not be possible to detect the return of power. This mode is characterized by the fact that the DC link voltage is typically raised all the way over the braking chopper threshold, resulting in the braking energy being converted into braking resistance. Accordingly, the drive will decelerate as quickly as possible.

# Mode 4

Only with expanded VFC functionality.

MOOG ID No.:CB40859-001 Date:11/2020

# 4 Power stage

If the power does not return, the drive will theoretically decelerate all the way to a stop. Within this context, there will be a specific speed below which it will not be possible to maintain the DC link voltage any longer even with the maximum motor (brake) current. This will result in an undervoltage shutdown.

MSD ServoDrive - DeviceHelp 29

# Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 30

# Mode 5

Same as mode 1, but with absolute voltage levels and without a validation check.

# 4.2.1.4 Parameters

|P No.|Index|Name / Setting|Unit|Function|
|---|---|---|---|---|
|P 2942[0]|-|POWF_VOn|-|is used to define the power failure detection limit.|
|P 2942[1]|2940|CON_PowerFail|-|Power failure bridging: selector|
|-|-|Off (0)|-|Function disabled|
|-|-|RET(1)|-|Function enabled. Return of power allowed if it occurs within defined time; otherwise, trigger error upon return|
|-|-|NORET(2)|-|Function enabled. ",What is unique about Mode 3 in the power failure bridging settings of the 'MSD ServoDrive'?,"Mode 3 ensures the fastest possible speed reduction without power return detection, often raising DC link voltage above the braking chopper threshold.","In Mode 3, the system prioritizes rapid deceleration, converting braking energy into resistance, without checking for power return.","This mode focuses on quick deceleration by exceeding the braking chopper threshold, making power return detection impossible.","Unique to Mode 3 is its emphasis on speed reduction, utilizing braking resistance for energy conversion, ignoring power return.","Mode 3 stands out for its aggressive deceleration approach, bypassing power return detection to maximize speed reduction."
6,msd_servo_drive.txt,7,7e57e914c15e5d431d828292506d54404bad6624063209b278f9d6dfeb871841,"Temperature-related derating may occur. Switching frequency noise decreases as the switching frequency rises (audible range < 12 kHz).|
|309|CON_EnableWiretest| |Enable wire test|
|409|CON_ACT_VDC_TF|ms|Filter time constant for DC link voltage|
|752|MON_PWM_SwitchFreqSelect_Sel| |Switching frequency mode selector|
| |OFF (0)| |No function|
| |AUTO (1)| |Automatic switchover|
| |MAN(2)| |Manual switchover limited by P 758[0]|
| |CON_SwitchFreq_selMan| |Manually configurable power stage switching frequency|
| |(0)2 kHz| |2 kHz|
| |(1)4 kHz| |4 kHz|
|759|CON_|V|Overwrite default under voltage threshold level|

Table 4.1: “Power stage” parameters

# 4 Power stage

# Table 4.1: “Power stage” parameters (continue)

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(-1)1 /3x 110 V|
| | | |The device can be connected to the mains with one or three phases.|
| | | |(0)1x 230 V Single-phase device|
| | | |(1)3x 230 V Three-phase device|
| | | |(2)3x 400 V Three-phase device|
| | | |(3)3x 460 V Three-phase device|
| | | |(4)3x480 V Three-phase device|

# Table 4.2: “Power stage - AC servo drive” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(5)Safety low voltage 24-60 V|
|424|0 CON_VoltageMode|Device power supply mode| |
|425|0 CON_GridVoltageNom|V r.m.s|Mains voltage|
|426|0 CON_DCLinkVoltageNom|V|DC link voltage (DC low voltage)|

# Table 4.3: “Power stage - DC drives” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|308|0 CON_VoltageNom|V|Nominal voltage (DC low voltage)|

# Table 4.4: “Power stage - Low-voltage DC supply” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|MOOG|ID No.:CB40859-001|Date:11/2020| |

# Table 4.5: “Power stage - Mains voltage adaption” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|760|MON_VDC_Guard|Monitoring of DC link voltage| |
|760|0 Tfilt_av|ms|Filter time constant for average|
|760|1 Tfilt_var|ms|Filter time constant for variance|
|760|2 Max_var|V^2|Max allowed variance|
|760|3 Max_time|s|Max time with variance threshold exceeded|
|760|4 Check_time|s|Interval to check return of failed phase|
|1958|0 CON_FPGA_PWMScale|%|Phase voltage scaling of the fpga current controller (0 = no block modulation)|

# Table 4.6: “Power stage - Power failure bridging settings” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2940|0 CON_PowerFail_Sel| |Power failure bridging: selector|
|2941|0 Kr|A/V|Power failure bridging: Gain|
|2941|1 Tn|ms|Voltage control integration time constant|
|2941|2 imax|A|Voltage control maximum (negative) q-current|
|2941|3 imax_pos|A|Voltage control maximum q-current|
|2941|4 n_min|rpm|Minimum speed (abs value) for voltage control|
|2942|0 POWF_VOn|V|Threshold voltage (offset) to start power fail control|
|2942|1 POWF_VRef|V|Reference voltage (offset) at power fail|
|2943|0 CON_POWF_RetTime|ms|uzk return time (65535 = infinite)|
|2944|0 CON_POWF_UdcOffSw|V|Shutdown threshold: Undervoltage|
|2945|0 CON_POWF_UbcOnSw|V|Switch-on threshold: Braking chopper|

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 28

# 4.2 Power failure bridging

# 4.2.1 Functional description

# 4.2.1.1 Detection of a voltage failure

The P 2940 - CON_PowerFail_Sel selection parameter can be used to select the following operating modes:

|0= (OFF)|switched off|
|---|---|
|1= (Ret)|Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.|
|2= (NoRet)|Power failure bridging with power return detection. The system will not start up again.|
|3= (NoLim)|Fastest possible speed reduction without power return detection.|
|5= (RetAbs)|Same as 1=Ret, but with absolute voltage levels and without validation check.|
|6= (NotRetAbs)|Same as 2=NoRet, but with absolute voltage levels and without validation check.|
|7= (NoRetAbsPulse)|Same as 6=NoRetAbs, but with pulse operation.|

In the event of a power failure, the DC link voltage can be supported by using the motor’s rotational energy. To this end, the motor will be operated as a generator and decelerated in a controlled manner in the event of a power failure so that a configurable DC link voltage setpoint will be maintained. This function is especially useful when it comes to powering the electronics in drives with magnetic bearings, as this will prevent the assembly from crashing into the safety bearing in the event of a power failure all the way to the lowest possible speeds.

NOTE

Please note that the components which need bridging must be powered via the DC link (DC power supply). In particular, the power supply of the servo drive itself (24 V control voltage) must be ensured.

# 4.2.1.2 Parametrisation

P 2941 - CON_POWF_VCtrl is used to configure the voltage controller by adjusting the corresponding gain and reset time. Within this context, the specified gain refers to the motor’s rated speed. At lower speeds, the gain will be automatically increased in order to maintain a constant dynamic performance in the voltage control circuit.

P 2942 - CON_POWF_VLim is used to configure the threshold voltage for detecting power failures / power returns, as well as the voltage setpoint for the controller. The configured voltage values will not be absolute values, but will instead be added to specific DC link threshold values (based on the operating mode). The corresponding

Image 4.2: Power failure bridging settings screen

# 4.2.1.3 Modes

# Mode 1

Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.

The power failure detection limit is formed by adding together P 701[12] - u_zkoff (Software shut-off limit for detection of DC link undervoltage) and P 2942[0] - POWF_Von. It should be considerably higher than the shutdown limit (default setting = 40 V).

Likewise, the voltage setpoint is yielded by adding P 701[12] - u_zkoff and P 2942[1] - POWF_VRef. The voltage setpoint must be lower than the detection limit so that it will be possible to detect when the power returns. Moreover, it should be considerably higher than the shutdown limit (default setting = 20 V).

After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. If a power return is detected within the time period set in P 2943[0] - CON_POWF_RetTime, the drive will return to its original control state. If power returns after the aforementioned time period has already elapsed, error 34-1 will be triggered. If P 2943[0] - CON_POWF_RetTime is set to 65535, there will be no time limit for the drive to return to its original control state after power returns.

# Mode 2

Power failure bridging with power return detection. The system will not start up again.

Same as mode 1, except the system will not start up again if the power returns. Error 34-1 will always be triggered once the power returns.

# Mode 3

Fastest possible speed reduction without power return detection.

In terms of configuring the power failure detection limits, the requirements listed for mode 1 apply here as well. The voltage setpoint is yielded by adding P 701[17] - u_bc_on (braking chopper threshold) and P 2942[1] - POWF_VRef. After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. This setpoint will be considerably higher than the power failure detection limit, which will technically ensure that it will not be possible to detect the return of power. This mode is characterized by the fact that the DC link voltage is typically raised all the way over the braking chopper threshold, resulting in the braking energy being converted into braking resistance. Accordingly, the drive will decelerate as quickly as possible.

# Mode 4

Only with expanded VFC functionality.

MOOG ID No.:CB40859-001 Date:11/2020

# 4 Power stage

If the power does not return, the drive will theoretically decelerate all the way to a stop. Within this context, there will be a specific speed below which it will not be possible to maintain the DC link voltage any longer even with the maximum motor (brake) current. This will result in an undervoltage shutdown.

MSD ServoDrive - DeviceHelp 29

# Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 30

# Mode 5

Same as mode 1, but with absolute voltage levels and without a validation check.

# 4.2.1.4 Parameters

|P No.|Index|Name / Setting|Unit|Function|
|---|---|---|---|---|
|P 2942[0]|-|POWF_VOn|-|is used to define the power failure detection limit.|
|P 2942[1]|2940|CON_PowerFail|-|Power failure bridging: selector|
|-|-|Off (0)|-|Function disabled|
|-|-|RET(1)|-|Function enabled. Return of power allowed if it occurs within defined time; otherwise, trigger error upon return|
|-|-|NORET(2)|-|Function enabled. ",What must be ensured for components needing bridging during a power failure in the 'MSD ServoDrive'?,"They must be powered via the DC link, and the servo drive's 24 V control voltage supply must be secured.","Essential components require DC link power, with the 24 V control voltage for the servo drive being critical.","For effective bridging, components need DC link power, especially ensuring the 24 V control voltage is uninterrupted.","DC link power is mandatory for components, alongside a guaranteed 24 V control supply for the servo drive.",The system demands DC link-powered components and a stable 24 V control voltage for the servo drive during bridging.
7,msd_servo_drive.txt,7,7e57e914c15e5d431d828292506d54404bad6624063209b278f9d6dfeb871841,"Temperature-related derating may occur. Switching frequency noise decreases as the switching frequency rises (audible range < 12 kHz).|
|309|CON_EnableWiretest| |Enable wire test|
|409|CON_ACT_VDC_TF|ms|Filter time constant for DC link voltage|
|752|MON_PWM_SwitchFreqSelect_Sel| |Switching frequency mode selector|
| |OFF (0)| |No function|
| |AUTO (1)| |Automatic switchover|
| |MAN(2)| |Manual switchover limited by P 758[0]|
| |CON_SwitchFreq_selMan| |Manually configurable power stage switching frequency|
| |(0)2 kHz| |2 kHz|
| |(1)4 kHz| |4 kHz|
|759|CON_|V|Overwrite default under voltage threshold level|

Table 4.1: “Power stage” parameters

# 4 Power stage

# Table 4.1: “Power stage” parameters (continue)

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(-1)1 /3x 110 V|
| | | |The device can be connected to the mains with one or three phases.|
| | | |(0)1x 230 V Single-phase device|
| | | |(1)3x 230 V Three-phase device|
| | | |(2)3x 400 V Three-phase device|
| | | |(3)3x 460 V Three-phase device|
| | | |(4)3x480 V Three-phase device|

# Table 4.2: “Power stage - AC servo drive” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(5)Safety low voltage 24-60 V|
|424|0 CON_VoltageMode|Device power supply mode| |
|425|0 CON_GridVoltageNom|V r.m.s|Mains voltage|
|426|0 CON_DCLinkVoltageNom|V|DC link voltage (DC low voltage)|

# Table 4.3: “Power stage - DC drives” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|308|0 CON_VoltageNom|V|Nominal voltage (DC low voltage)|

# Table 4.4: “Power stage - Low-voltage DC supply” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|MOOG|ID No.:CB40859-001|Date:11/2020| |

# Table 4.5: “Power stage - Mains voltage adaption” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|760|MON_VDC_Guard|Monitoring of DC link voltage| |
|760|0 Tfilt_av|ms|Filter time constant for average|
|760|1 Tfilt_var|ms|Filter time constant for variance|
|760|2 Max_var|V^2|Max allowed variance|
|760|3 Max_time|s|Max time with variance threshold exceeded|
|760|4 Check_time|s|Interval to check return of failed phase|
|1958|0 CON_FPGA_PWMScale|%|Phase voltage scaling of the fpga current controller (0 = no block modulation)|

# Table 4.6: “Power stage - Power failure bridging settings” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2940|0 CON_PowerFail_Sel| |Power failure bridging: selector|
|2941|0 Kr|A/V|Power failure bridging: Gain|
|2941|1 Tn|ms|Voltage control integration time constant|
|2941|2 imax|A|Voltage control maximum (negative) q-current|
|2941|3 imax_pos|A|Voltage control maximum q-current|
|2941|4 n_min|rpm|Minimum speed (abs value) for voltage control|
|2942|0 POWF_VOn|V|Threshold voltage (offset) to start power fail control|
|2942|1 POWF_VRef|V|Reference voltage (offset) at power fail|
|2943|0 CON_POWF_RetTime|ms|uzk return time (65535 = infinite)|
|2944|0 CON_POWF_UdcOffSw|V|Shutdown threshold: Undervoltage|
|2945|0 CON_POWF_UbcOnSw|V|Switch-on threshold: Braking chopper|

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 28

# 4.2 Power failure bridging

# 4.2.1 Functional description

# 4.2.1.1 Detection of a voltage failure

The P 2940 - CON_PowerFail_Sel selection parameter can be used to select the following operating modes:

|0= (OFF)|switched off|
|---|---|
|1= (Ret)|Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.|
|2= (NoRet)|Power failure bridging with power return detection. The system will not start up again.|
|3= (NoLim)|Fastest possible speed reduction without power return detection.|
|5= (RetAbs)|Same as 1=Ret, but with absolute voltage levels and without validation check.|
|6= (NotRetAbs)|Same as 2=NoRet, but with absolute voltage levels and without validation check.|
|7= (NoRetAbsPulse)|Same as 6=NoRetAbs, but with pulse operation.|

In the event of a power failure, the DC link voltage can be supported by using the motor’s rotational energy. To this end, the motor will be operated as a generator and decelerated in a controlled manner in the event of a power failure so that a configurable DC link voltage setpoint will be maintained. This function is especially useful when it comes to powering the electronics in drives with magnetic bearings, as this will prevent the assembly from crashing into the safety bearing in the event of a power failure all the way to the lowest possible speeds.

NOTE

Please note that the components which need bridging must be powered via the DC link (DC power supply). In particular, the power supply of the servo drive itself (24 V control voltage) must be ensured.

# 4.2.1.2 Parametrisation

P 2941 - CON_POWF_VCtrl is used to configure the voltage controller by adjusting the corresponding gain and reset time. Within this context, the specified gain refers to the motor’s rated speed. At lower speeds, the gain will be automatically increased in order to maintain a constant dynamic performance in the voltage control circuit.

P 2942 - CON_POWF_VLim is used to configure the threshold voltage for detecting power failures / power returns, as well as the voltage setpoint for the controller. The configured voltage values will not be absolute values, but will instead be added to specific DC link threshold values (based on the operating mode). The corresponding

Image 4.2: Power failure bridging settings screen

# 4.2.1.3 Modes

# Mode 1

Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.

The power failure detection limit is formed by adding together P 701[12] - u_zkoff (Software shut-off limit for detection of DC link undervoltage) and P 2942[0] - POWF_Von. It should be considerably higher than the shutdown limit (default setting = 40 V).

Likewise, the voltage setpoint is yielded by adding P 701[12] - u_zkoff and P 2942[1] - POWF_VRef. The voltage setpoint must be lower than the detection limit so that it will be possible to detect when the power returns. Moreover, it should be considerably higher than the shutdown limit (default setting = 20 V).

After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. If a power return is detected within the time period set in P 2943[0] - CON_POWF_RetTime, the drive will return to its original control state. If power returns after the aforementioned time period has already elapsed, error 34-1 will be triggered. If P 2943[0] - CON_POWF_RetTime is set to 65535, there will be no time limit for the drive to return to its original control state after power returns.

# Mode 2

Power failure bridging with power return detection. The system will not start up again.

Same as mode 1, except the system will not start up again if the power returns. Error 34-1 will always be triggered once the power returns.

# Mode 3

Fastest possible speed reduction without power return detection.

In terms of configuring the power failure detection limits, the requirements listed for mode 1 apply here as well. The voltage setpoint is yielded by adding P 701[17] - u_bc_on (braking chopper threshold) and P 2942[1] - POWF_VRef. After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. This setpoint will be considerably higher than the power failure detection limit, which will technically ensure that it will not be possible to detect the return of power. This mode is characterized by the fact that the DC link voltage is typically raised all the way over the braking chopper threshold, resulting in the braking energy being converted into braking resistance. Accordingly, the drive will decelerate as quickly as possible.

# Mode 4

Only with expanded VFC functionality.

MOOG ID No.:CB40859-001 Date:11/2020

# 4 Power stage

If the power does not return, the drive will theoretically decelerate all the way to a stop. Within this context, there will be a specific speed below which it will not be possible to maintain the DC link voltage any longer even with the maximum motor (brake) current. This will result in an undervoltage shutdown.

MSD ServoDrive - DeviceHelp 29

# Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 30

# Mode 5

Same as mode 1, but with absolute voltage levels and without a validation check.

# 4.2.1.4 Parameters

|P No.|Index|Name / Setting|Unit|Function|
|---|---|---|---|---|
|P 2942[0]|-|POWF_VOn|-|is used to define the power failure detection limit.|
|P 2942[1]|2940|CON_PowerFail|-|Power failure bridging: selector|
|-|-|Off (0)|-|Function disabled|
|-|-|RET(1)|-|Function enabled. Return of power allowed if it occurs within defined time; otherwise, trigger error upon return|
|-|-|NORET(2)|-|Function enabled. ",How does the 'MSD ServoDrive' adjust the voltage controller's gain at lower speeds?,It automatically increases the gain to maintain constant dynamic performance in the voltage control circuit.,The system boosts the gain at reduced speeds to ensure the voltage controller's dynamics remain stable.,"To keep performance consistent, the gain is raised automatically when the motor operates at lower speeds.","At lower speeds, an automatic gain increase is applied to sustain the voltage controller's effectiveness.","The device adjusts by increasing gain dynamically at lower speeds, preserving voltage control performance."
8,msd_servo_drive.txt,7,7e57e914c15e5d431d828292506d54404bad6624063209b278f9d6dfeb871841,"Temperature-related derating may occur. Switching frequency noise decreases as the switching frequency rises (audible range < 12 kHz).|
|309|CON_EnableWiretest| |Enable wire test|
|409|CON_ACT_VDC_TF|ms|Filter time constant for DC link voltage|
|752|MON_PWM_SwitchFreqSelect_Sel| |Switching frequency mode selector|
| |OFF (0)| |No function|
| |AUTO (1)| |Automatic switchover|
| |MAN(2)| |Manual switchover limited by P 758[0]|
| |CON_SwitchFreq_selMan| |Manually configurable power stage switching frequency|
| |(0)2 kHz| |2 kHz|
| |(1)4 kHz| |4 kHz|
|759|CON_|V|Overwrite default under voltage threshold level|

Table 4.1: “Power stage” parameters

# 4 Power stage

# Table 4.1: “Power stage” parameters (continue)

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(-1)1 /3x 110 V|
| | | |The device can be connected to the mains with one or three phases.|
| | | |(0)1x 230 V Single-phase device|
| | | |(1)3x 230 V Three-phase device|
| | | |(2)3x 400 V Three-phase device|
| | | |(3)3x 460 V Three-phase device|
| | | |(4)3x480 V Three-phase device|

# Table 4.2: “Power stage - AC servo drive” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(5)Safety low voltage 24-60 V|
|424|0 CON_VoltageMode|Device power supply mode| |
|425|0 CON_GridVoltageNom|V r.m.s|Mains voltage|
|426|0 CON_DCLinkVoltageNom|V|DC link voltage (DC low voltage)|

# Table 4.3: “Power stage - DC drives” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|308|0 CON_VoltageNom|V|Nominal voltage (DC low voltage)|

# Table 4.4: “Power stage - Low-voltage DC supply” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|MOOG|ID No.:CB40859-001|Date:11/2020| |

# Table 4.5: “Power stage - Mains voltage adaption” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|760|MON_VDC_Guard|Monitoring of DC link voltage| |
|760|0 Tfilt_av|ms|Filter time constant for average|
|760|1 Tfilt_var|ms|Filter time constant for variance|
|760|2 Max_var|V^2|Max allowed variance|
|760|3 Max_time|s|Max time with variance threshold exceeded|
|760|4 Check_time|s|Interval to check return of failed phase|
|1958|0 CON_FPGA_PWMScale|%|Phase voltage scaling of the fpga current controller (0 = no block modulation)|

# Table 4.6: “Power stage - Power failure bridging settings” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2940|0 CON_PowerFail_Sel| |Power failure bridging: selector|
|2941|0 Kr|A/V|Power failure bridging: Gain|
|2941|1 Tn|ms|Voltage control integration time constant|
|2941|2 imax|A|Voltage control maximum (negative) q-current|
|2941|3 imax_pos|A|Voltage control maximum q-current|
|2941|4 n_min|rpm|Minimum speed (abs value) for voltage control|
|2942|0 POWF_VOn|V|Threshold voltage (offset) to start power fail control|
|2942|1 POWF_VRef|V|Reference voltage (offset) at power fail|
|2943|0 CON_POWF_RetTime|ms|uzk return time (65535 = infinite)|
|2944|0 CON_POWF_UdcOffSw|V|Shutdown threshold: Undervoltage|
|2945|0 CON_POWF_UbcOnSw|V|Switch-on threshold: Braking chopper|

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 28

# 4.2 Power failure bridging

# 4.2.1 Functional description

# 4.2.1.1 Detection of a voltage failure

The P 2940 - CON_PowerFail_Sel selection parameter can be used to select the following operating modes:

|0= (OFF)|switched off|
|---|---|
|1= (Ret)|Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.|
|2= (NoRet)|Power failure bridging with power return detection. The system will not start up again.|
|3= (NoLim)|Fastest possible speed reduction without power return detection.|
|5= (RetAbs)|Same as 1=Ret, but with absolute voltage levels and without validation check.|
|6= (NotRetAbs)|Same as 2=NoRet, but with absolute voltage levels and without validation check.|
|7= (NoRetAbsPulse)|Same as 6=NoRetAbs, but with pulse operation.|

In the event of a power failure, the DC link voltage can be supported by using the motor’s rotational energy. To this end, the motor will be operated as a generator and decelerated in a controlled manner in the event of a power failure so that a configurable DC link voltage setpoint will be maintained. This function is especially useful when it comes to powering the electronics in drives with magnetic bearings, as this will prevent the assembly from crashing into the safety bearing in the event of a power failure all the way to the lowest possible speeds.

NOTE

Please note that the components which need bridging must be powered via the DC link (DC power supply). In particular, the power supply of the servo drive itself (24 V control voltage) must be ensured.

# 4.2.1.2 Parametrisation

P 2941 - CON_POWF_VCtrl is used to configure the voltage controller by adjusting the corresponding gain and reset time. Within this context, the specified gain refers to the motor’s rated speed. At lower speeds, the gain will be automatically increased in order to maintain a constant dynamic performance in the voltage control circuit.

P 2942 - CON_POWF_VLim is used to configure the threshold voltage for detecting power failures / power returns, as well as the voltage setpoint for the controller. The configured voltage values will not be absolute values, but will instead be added to specific DC link threshold values (based on the operating mode). The corresponding

Image 4.2: Power failure bridging settings screen

# 4.2.1.3 Modes

# Mode 1

Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.

The power failure detection limit is formed by adding together P 701[12] - u_zkoff (Software shut-off limit for detection of DC link undervoltage) and P 2942[0] - POWF_Von. It should be considerably higher than the shutdown limit (default setting = 40 V).

Likewise, the voltage setpoint is yielded by adding P 701[12] - u_zkoff and P 2942[1] - POWF_VRef. The voltage setpoint must be lower than the detection limit so that it will be possible to detect when the power returns. Moreover, it should be considerably higher than the shutdown limit (default setting = 20 V).

After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. If a power return is detected within the time period set in P 2943[0] - CON_POWF_RetTime, the drive will return to its original control state. If power returns after the aforementioned time period has already elapsed, error 34-1 will be triggered. If P 2943[0] - CON_POWF_RetTime is set to 65535, there will be no time limit for the drive to return to its original control state after power returns.

# Mode 2

Power failure bridging with power return detection. The system will not start up again.

Same as mode 1, except the system will not start up again if the power returns. Error 34-1 will always be triggered once the power returns.

# Mode 3

Fastest possible speed reduction without power return detection.

In terms of configuring the power failure detection limits, the requirements listed for mode 1 apply here as well. The voltage setpoint is yielded by adding P 701[17] - u_bc_on (braking chopper threshold) and P 2942[1] - POWF_VRef. After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. This setpoint will be considerably higher than the power failure detection limit, which will technically ensure that it will not be possible to detect the return of power. This mode is characterized by the fact that the DC link voltage is typically raised all the way over the braking chopper threshold, resulting in the braking energy being converted into braking resistance. Accordingly, the drive will decelerate as quickly as possible.

# Mode 4

Only with expanded VFC functionality.

MOOG ID No.:CB40859-001 Date:11/2020

# 4 Power stage

If the power does not return, the drive will theoretically decelerate all the way to a stop. Within this context, there will be a specific speed below which it will not be possible to maintain the DC link voltage any longer even with the maximum motor (brake) current. This will result in an undervoltage shutdown.

MSD ServoDrive - DeviceHelp 29

# Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 30

# Mode 5

Same as mode 1, but with absolute voltage levels and without a validation check.

# 4.2.1.4 Parameters

|P No.|Index|Name / Setting|Unit|Function|
|---|---|---|---|---|
|P 2942[0]|-|POWF_VOn|-|is used to define the power failure detection limit.|
|P 2942[1]|2940|CON_PowerFail|-|Power failure bridging: selector|
|-|-|Off (0)|-|Function disabled|
|-|-|RET(1)|-|Function enabled. Return of power allowed if it occurs within defined time; otherwise, trigger error upon return|
|-|-|NORET(2)|-|Function enabled. ",What is the significance of setting P 2943 - CON_POWF_RetTime to 65535 in the 'MSD ServoDrive'?,It means there is no time limit for the drive to return to its original control state after power returns.,A setting of 65535 removes any time restriction for system recovery following power restoration.,This value indicates an infinite wait period for the drive to revert to normal operation post power return.,Setting it to 65535 allows the drive unlimited time to resume original control state after power comes back.,It signifies that the system can take as long as needed to return to normal operation after power is restored.
9,msd_servo_drive.txt,7,7e57e914c15e5d431d828292506d54404bad6624063209b278f9d6dfeb871841,"Temperature-related derating may occur. Switching frequency noise decreases as the switching frequency rises (audible range < 12 kHz).|
|309|CON_EnableWiretest| |Enable wire test|
|409|CON_ACT_VDC_TF|ms|Filter time constant for DC link voltage|
|752|MON_PWM_SwitchFreqSelect_Sel| |Switching frequency mode selector|
| |OFF (0)| |No function|
| |AUTO (1)| |Automatic switchover|
| |MAN(2)| |Manual switchover limited by P 758[0]|
| |CON_SwitchFreq_selMan| |Manually configurable power stage switching frequency|
| |(0)2 kHz| |2 kHz|
| |(1)4 kHz| |4 kHz|
|759|CON_|V|Overwrite default under voltage threshold level|

Table 4.1: “Power stage” parameters

# 4 Power stage

# Table 4.1: “Power stage” parameters (continue)

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(-1)1 /3x 110 V|
| | | |The device can be connected to the mains with one or three phases.|
| | | |(0)1x 230 V Single-phase device|
| | | |(1)3x 230 V Three-phase device|
| | | |(2)3x 400 V Three-phase device|
| | | |(3)3x 460 V Three-phase device|
| | | |(4)3x480 V Three-phase device|

# Table 4.2: “Power stage - AC servo drive” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|307|0 CON_VoltageSupply|Power supply mains voltage|(5)Safety low voltage 24-60 V|
|424|0 CON_VoltageMode|Device power supply mode| |
|425|0 CON_GridVoltageNom|V r.m.s|Mains voltage|
|426|0 CON_DCLinkVoltageNom|V|DC link voltage (DC low voltage)|

# Table 4.3: “Power stage - DC drives” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|308|0 CON_VoltageNom|V|Nominal voltage (DC low voltage)|

# Table 4.4: “Power stage - Low-voltage DC supply” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|MOOG|ID No.:CB40859-001|Date:11/2020| |

# Table 4.5: “Power stage - Mains voltage adaption” parameters

|ID|Index Name / Setting|Unit|Description|
|---|---|---|---|
|760|MON_VDC_Guard|Monitoring of DC link voltage| |
|760|0 Tfilt_av|ms|Filter time constant for average|
|760|1 Tfilt_var|ms|Filter time constant for variance|
|760|2 Max_var|V^2|Max allowed variance|
|760|3 Max_time|s|Max time with variance threshold exceeded|
|760|4 Check_time|s|Interval to check return of failed phase|
|1958|0 CON_FPGA_PWMScale|%|Phase voltage scaling of the fpga current controller (0 = no block modulation)|

# Table 4.6: “Power stage - Power failure bridging settings” parameters

|ID|Index Name|Unit|Description|
|---|---|---|---|
|2940|0 CON_PowerFail_Sel| |Power failure bridging: selector|
|2941|0 Kr|A/V|Power failure bridging: Gain|
|2941|1 Tn|ms|Voltage control integration time constant|
|2941|2 imax|A|Voltage control maximum (negative) q-current|
|2941|3 imax_pos|A|Voltage control maximum q-current|
|2941|4 n_min|rpm|Minimum speed (abs value) for voltage control|
|2942|0 POWF_VOn|V|Threshold voltage (offset) to start power fail control|
|2942|1 POWF_VRef|V|Reference voltage (offset) at power fail|
|2943|0 CON_POWF_RetTime|ms|uzk return time (65535 = infinite)|
|2944|0 CON_POWF_UdcOffSw|V|Shutdown threshold: Undervoltage|
|2945|0 CON_POWF_UbcOnSw|V|Switch-on threshold: Braking chopper|

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 28

# 4.2 Power failure bridging

# 4.2.1 Functional description

# 4.2.1.1 Detection of a voltage failure

The P 2940 - CON_PowerFail_Sel selection parameter can be used to select the following operating modes:

|0= (OFF)|switched off|
|---|---|
|1= (Ret)|Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.|
|2= (NoRet)|Power failure bridging with power return detection. The system will not start up again.|
|3= (NoLim)|Fastest possible speed reduction without power return detection.|
|5= (RetAbs)|Same as 1=Ret, but with absolute voltage levels and without validation check.|
|6= (NotRetAbs)|Same as 2=NoRet, but with absolute voltage levels and without validation check.|
|7= (NoRetAbsPulse)|Same as 6=NoRetAbs, but with pulse operation.|

In the event of a power failure, the DC link voltage can be supported by using the motor’s rotational energy. To this end, the motor will be operated as a generator and decelerated in a controlled manner in the event of a power failure so that a configurable DC link voltage setpoint will be maintained. This function is especially useful when it comes to powering the electronics in drives with magnetic bearings, as this will prevent the assembly from crashing into the safety bearing in the event of a power failure all the way to the lowest possible speeds.

NOTE

Please note that the components which need bridging must be powered via the DC link (DC power supply). In particular, the power supply of the servo drive itself (24 V control voltage) must be ensured.

# 4.2.1.2 Parametrisation

P 2941 - CON_POWF_VCtrl is used to configure the voltage controller by adjusting the corresponding gain and reset time. Within this context, the specified gain refers to the motor’s rated speed. At lower speeds, the gain will be automatically increased in order to maintain a constant dynamic performance in the voltage control circuit.

P 2942 - CON_POWF_VLim is used to configure the threshold voltage for detecting power failures / power returns, as well as the voltage setpoint for the controller. The configured voltage values will not be absolute values, but will instead be added to specific DC link threshold values (based on the operating mode). The corresponding

Image 4.2: Power failure bridging settings screen

# 4.2.1.3 Modes

# Mode 1

Power failure bridging with power return detection. The system will start up again if the power returns within a configurable period of time.

The power failure detection limit is formed by adding together P 701[12] - u_zkoff (Software shut-off limit for detection of DC link undervoltage) and P 2942[0] - POWF_Von. It should be considerably higher than the shutdown limit (default setting = 40 V).

Likewise, the voltage setpoint is yielded by adding P 701[12] - u_zkoff and P 2942[1] - POWF_VRef. The voltage setpoint must be lower than the detection limit so that it will be possible to detect when the power returns. Moreover, it should be considerably higher than the shutdown limit (default setting = 20 V).

After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. If a power return is detected within the time period set in P 2943[0] - CON_POWF_RetTime, the drive will return to its original control state. If power returns after the aforementioned time period has already elapsed, error 34-1 will be triggered. If P 2943[0] - CON_POWF_RetTime is set to 65535, there will be no time limit for the drive to return to its original control state after power returns.

# Mode 2

Power failure bridging with power return detection. The system will not start up again.

Same as mode 1, except the system will not start up again if the power returns. Error 34-1 will always be triggered once the power returns.

# Mode 3

Fastest possible speed reduction without power return detection.

In terms of configuring the power failure detection limits, the requirements listed for mode 1 apply here as well. The voltage setpoint is yielded by adding P 701[17] - u_bc_on (braking chopper threshold) and P 2942[1] - POWF_VRef. After a power failure is detected, the controller will control the voltage so that it reaches the configured setpoint. This setpoint will be considerably higher than the power failure detection limit, which will technically ensure that it will not be possible to detect the return of power. This mode is characterized by the fact that the DC link voltage is typically raised all the way over the braking chopper threshold, resulting in the braking energy being converted into braking resistance. Accordingly, the drive will decelerate as quickly as possible.

# Mode 4

Only with expanded VFC functionality.

MOOG ID No.:CB40859-001 Date:11/2020

# 4 Power stage

If the power does not return, the drive will theoretically decelerate all the way to a stop. Within this context, there will be a specific speed below which it will not be possible to maintain the DC link voltage any longer even with the maximum motor (brake) current. This will result in an undervoltage shutdown.

MSD ServoDrive - DeviceHelp 29

# Power stage

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 30

# Mode 5

Same as mode 1, but with absolute voltage levels and without a validation check.

# 4.2.1.4 Parameters

|P No.|Index|Name / Setting|Unit|Function|
|---|---|---|---|---|
|P 2942[0]|-|POWF_VOn|-|is used to define the power failure detection limit.|
|P 2942[1]|2940|CON_PowerFail|-|Power failure bridging: selector|
|-|-|Off (0)|-|Function disabled|
|-|-|RET(1)|-|Function enabled. Return of power allowed if it occurs within defined time; otherwise, trigger error upon return|
|-|-|NORET(2)|-|Function enabled. ",What are the default settings for the power failure detection limit and voltage setpoint in Mode 1 of the 'MSD ServoDrive'?,"The detection limit defaults to 40 V above the software shut-off limit, and the setpoint is 20 V above.","Default detection limit is 40 V over the shut-off limit, with a 20 V higher setpoint for the controller.","In Mode 1, detection is set 40 V above shut-off, and the controller aims for a 20 V higher voltage.",Mode 1 defaults include a 40 V margin for detection and a 20 V margin for the voltage setpoint.,The system uses a 40 V detection threshold and a 20 V setpoint above the shut-off limit by default.
