,NODE_FILE_NAME,NODE_NUMBER,NODE_HASH,NODE_TEXT,Q,A1,A2,A3,A4,A5
0,msd_servo_drive.txt,68,0ebe04756316c46352786c22f8d48336e344cbf35f5f17b182c6e17a12fed3eb,"The same applies to the negative direction. On reaching 0° the actual position is set to 360°.

Image 8.9: “‘Clockwise rotation’ process option” screen

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 227

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 228

# 8.2.1.3 Process option “Path - optimized”

Not path-optimized Optimized path

An absolute target position is always approached by the shortest path. Relative movements cannot be carried out with the “path – optimized” mode.

|Position range|Example|Effect|
|---|---|---|
|Target position < 120°< 360°|The drive moves to the target position|within 360°.|
|Target position = 120° = 120°|The drive remains in position.| |
|Target position > 600° - 360° =|The drive moves to the position within|240° (target position - (n x circumferential length))|

Table 8.3: Path-optimized movement

Table 8.4: Path optimization diagram

# 8.2.1.4 Infinite motion task when using indexing table function

In the case of infinite motion tasks the drive moves at constant speed, regardless of a transmitted target position, until the mode is deactivated or is overwritten by a new motion task. On switching to the next driving set (absolute or relative), the new target position is approached in the current direction of movement. A preset path optimization is ignored when the indexing table is active.

# 8.2.1.5 Relative motion task when using indexing table function

Relative driving jobs may relate to the current target position or to the actual position. For more information see ""Field Buses"" User Manuals. In the case of relative driving jobs greater travel distances than the circumferential length are possible.

Example without gear ratio:

- Circumferential length = 360°
- Relative target position = 800°
- Start position = 0°
- Movement: The drive will complete two motor revolutions (720°) and stop at the 3rd revolution at 80° (800° - 720°).

# 8.2.2 SERCOS

When using the SERCOS profile, scaling of the units is termed weighting. The weighting describes the physical unit and the exponent with which the numerical values of the parameters exchanged between the master control system and the drives are to be interpreted. The method of weighting is defined by the parameters for position, speed, force/torque and acceleration weighting.

**Table 8.5: “Standardization / units - SERCOS” parameter**
|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|MPRO_FG_Config| |Factor group configuration|
|10043|COM_SER_| |Speed polarity parameter|
|10044|PolaritySpeed| | |
|10045|COM_SER_| |Velocity data scaling type|
|10046|COM_SER_| |Velocity data scaling factor|
|10055|0| |ScaleExpSpeed|
|10076|COM_SER_| |Position data scaling type|
|10077|COM_SER_| |Linear position data scaling factor|
|10078|COM_SER_| |Linear position data scaling exponent|
|10085|COM_SER_| |Torque polarity parameter|

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 229

# 8 Motion profile

# 8 Motion profile

MOOG                          ID No.:CB40859-001 Date:11/2020                                                                                       MSD ServoDrive   - DeviceHelp     230

|ID|Index Name|Unit|Description|
|---|---|---|---|
|10086|COM_SER_| |Torque/force data scaling type|
|10093|COM_SER_| |Torque/force data scaling factor|
|10094|COM_SER_| |Torque/force data scaling exponent|
|10103|COM_SER_ModuloVal|mDegree|Modulo value|
|10121|COM_SER_| |Input revolutions of load gear|
|10122|COM_SER_| |Output revolutions of load gear|
|10123|COM_SER_FeedConst|um/rev|Feed constant|
|10160|COM_SER_| |Acceleration data scaling type|
|10161|COM_SER_| |Acceleration data scaling factor|
|10162|COM_SER_| |Acceleration data scaling exponent|

Table 8.5:  “Standardization / units - SERCOS” parameter (continue)

Image 8.11: “Standardization profile - SERCOS - Position unit (1)” screen

# Image 8.12: “Standardization profile - SERCOS - Position unit (2)” screen

# Image 8.13: Position data weighting method

# Position polarity

The polarity of the position data can be inverted according to the application. An increasing actual position value indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|m|1|E-7|

Table 8.6: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 231

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

232

# Rotary weighting

# 8.2.2.2 Speed

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|Degrees|3,600,000|0.0001 μm|

Table 8.7: Weighting for rotary motion (default setting)

Image 8.14: “Standardization profile - SERCOS - Speed (1)” screen

# Image 8.15: “Standardization profile - SERCOS - Speed (2)” screen

The “Speed data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.16: Speed data weighting method

# Speed polarity

The polarity of the speed data can be inverted according to the application. A positive speed reference indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|m/min|1|
| |0.001 m/min|

# Table 8.8: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 233

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

Rotary weighting

# 8.2.2.3 Unit of torque/power

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|Degrees|3,600,000|
| |0.001 m/min|

Table 8.9: Weighting for rotary motion (default setting)

Image 8.17: “Standardization profile - SERCOS torque/power(1)” screen

# Image 8.18: “Standardization profile - SERCOS torque/power(2)” screen

# Image 8.19: Force/torque weighting method

The “Power/torque weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here. In percentage weighting the permanently permissible standstill torque of the motor is used as the reference value. All torque/force data is given in [%] with one decimal place.

# Torque polarity

The polarity of the torque can be inverted according to the application. A positive torque reference indicates clockwise rotation (looking at the motor shaft).

**Table 8.10: Weighting for linear motion (default setting)**
|Unit|Weighting factor|
|---|---|
|Nm|1|

LSB = Unit * Exponent

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 235

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 236

# 8.2.2.4 Unit of acceleration

|Weighting|Preferential weighting|Parameter weighting|
|---|---|---|
|Unit|factor|(LSB)|
|Nm|1|0.01 Nm|
|LSB = Unit * Exponent|LSB = Unit * Exponent|LSB = Unit * Exponent|

Table 8.11: Weighting for rotary motion (default setting)

Image 8.20: “Standardization profile - SERCOS - Acceleration(1)” screen

# Image 8.21: “Standardization profile - SERCOS - Acceleration(2)” screen

The ""Acceleration data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.22: Acceleration weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|m/s2|1|E-6|

Table 8.12: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 237

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 238

# Rotary weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|rad/s2|3,600,000|E-3|

Table 8.13: Weighting for rotary motion (default setting)

# 8.2.2.5 Modulo weighting

If Modulo (indexing table application) is to be selected (see Section ""As linear"" process option"" on page 227), the number range of the position data (modulo value) must be entered. When the modulo value is exceeded the actual position is reset to 0.

Image 8.23: Schematic of user-defined scaling

# 8.2.3 User defined

|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|0 MPRO_FG_Config| |Factor group configuration|
|270|0 MPRO_FG_PosNorm|incr/rev|internal position resolution|
|271|0 MPRO_FG_Num|rev|Factor group: Numerator (profile independent)|
|272|0 MPRO_FG_Den|mDegree|Factor group: denominator (profile independent)|
|273|0 MPRO_FG_Reverse| |Factor group: Position and speed reverse (profile independent)|
|274|0 MPRO_FG_SpeedFac|rev/min/SPEED|Factor group: speed factor (profile independent)|
|275|0 MPRO_FG_AccFac|rev/s2/ACC|Factor group: acceleration factor (profile independent)|
|284|0 MPRO_FG_PosUnit| |Unit for position values|
|285|0 MPRO_FG_PosExp| |Factor group: Position unit exponent (profile independent)|
|286|0 MPRO_FG_| |Factor group: Position unit scaling factor|

Table 8.14: “Standardization / units - Custom” parameters

# 8 Motion profile

|ID|Index Name|Unit|Description|
|---|---|---|---|
|0290|MPRO_FG_AccUnit|[m/s²]|Acceleration unit|
| |PosScaleFac| |(profile independent)|
| | | |Feed constant: 0.1 mm = 1 rev|
|287|MPRO_FG_SpeedUnit| |Unit for speed values|
| | | |Gearing: 1 drive revolution = 3 motor revs|
|288|MPRO_FG_SpeedExp| |Factor group: Velocity unit exponent (profile independent)|
|289|MPRO_FG_SpeedScaleFac| |Factor group: Velocity unit scaling factor (profile independent)|
| | | |P 0284 MPRO_FG_PosUnit = 1 μm = 1/1000 mm = 10/1000 rev (output) = 30/1000 rev (motor)|
|290|MPRO_FG_AccUnit| |Unit for acceleration and deceleration values|
|291|MPRO_FG_AccExp| |Factor group: Acceleration unit exponent (profile independent)|
|292|MPRO_FG_AccScaleFac| |Factor group: Acceleration unit scaling factor (profile independent)|
| | | |P 0287 MPRO_FG_SpeedUnit = 1 m/s = 1000 mm/s = 10 000 rev/s (output) = 30 000 rev/s (motor)*60 (min) = 1 800 000 rev/min|
|293|MPRO_FG_TorqueUnit| |Unit for torque values|
|294|MPRO_FG_TorqueExp| |Factor group: Torque unit exponent (profile independent)|
|295|MPRO_FG_TorqueScaleFac| |Factor group: Torque unit scaling factor (profile independent)|
|298|MPRO_FG_UsrActPosDly|ms|Actual position delay (multiple of CON_PConTS)|

# Table 8.14: “Standardization / units - Custom” parameters (continue)

|ID|Name|Function|Standard rotary system|
|---|---|---|---|
|270|MPRO_FG_Nom|Numerator|1[rev]|
|271|PosNom|Increments per revolution|1048576 [incr/rev]|
|272|MPRO_FG_Den|Denominator|360° [POS]|
|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|274|MPRO_FG_SpeedFac|Speed factor|1[rpm]|
|275|MPRO_FG_AccFac|Acceleration factor|1/60 = 0.01667 [rpm/s]|

# Table 8.15: Parameters for user-defined scaling (rotary system)

1 motor revolution corresponds to 360° or 1048576 increments

Speed in [rpm]

Acceleration in [rpm/s]

Positioning in [°degrees]

Given

Position unit P 0284 MPRO_FG_PosUnit = [μm]

Speed unit P 0287 MPRO_FG_SpeedUnit = [m/s]

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 239

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 240

|ID|Name|Function|Standard|ID|Name|Function|Standard|
|---|---|---|---|---|---|---|---|
|284|MPRO_FG_PosUnit|Unit for position value|mdegree|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|287|MPRO_FG_SpeetUnit|Unit for speed value|rev/min|1.875 rps| | | |
| | |Unit for| |274|MPRO_FG_SpeedFac|Speed factor|mm/s, 1/32 mm = 0.03125 rps²|
| | | | | | | |s = 1.875 rps|
| | | | | | | |1/32 mm =|
|275|MPRO_FG_AccFac|Acceleration factor|0.03125 rps²| | | |corresponding to 1mm/s²|

# 8.2.3.2 Example of scaling of a linear motor

Presetting:

- One revolution corresponds to 32 mm pitch
- Travel in [μm]
- Speed in [mm/sec]
- Acceleration in [mm/s²]

|ID|Name|Function|Standard|
|---|---|---|---|
|270|MPRO_FG_PosNom|Increments per revolution|1048576 [incr/rev]|
|271|MPRO_FG_Nom|Numerator|1 [rev]|
|272|MPRO_FG_Den|Denominator|32000 μm|

# Table 8.16: Parameters for user-defined scaling (linear system)

# 8.3 Basic settings

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|144|0|MPRO_DRVCOM_AUTO_START| |DriveCom: Auto start of system|
|159|0|MPRO_CTRL_SEL| |Motion profile selection|
|165|0|MPRO_REF_SEL| |Motion profile selection|
|166|0|MPRO_REF_JTIME|ms|Motion profile jerk time|
|167|0|MPRO_REF_OVR|%|Motion profile override factor|
|223|0|MPRO_REF_Config| |Motion profile: Config of specific profiling behaviour|
|301|0|CON_REF_Mode| |Mode selection of setpoint profiling|
|306|0|CON_IpRefTS|ms|Sampling time (for interpolation)|
|335|0|CON_SCON_DirLock| |Direction lock for speed reference value|
|370|0|CON_IP| |Interpolation type|
|755|0|MPRO_FG_RefPosFilType| |Position reference filter type|
|756| |MPRO_FG_RefPosFilData| |Reference position filter data|
|756|0|RefFil_TimeConst|ms|Position reference filter time constant (PT1/PT2/AVG)|
|756|1|RefFil_DampConst| |Position reference filter damping constant|

Image 8.24: “Basic settings” screen

Interpolation

Table 8.17: “Motion profile - Basic settings” parameters

See Section ""Interpolation"" on page 246.

# 8.3.1 PG mode with speed control

NOTE

- The reference filters are initialized only after the control has been re-enabled or by a device restart.
- Select reference source
- Motion profile adaptation: scaling, ramps and smoothing time.
- In reference processing by way of the profile generator the fine interpolator is always in use.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 241

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 242

# Profile Generator with speed control:

- Control mode P 300[0] - CON_CfgCon = speed control
- Under Profile select the profile generator (PG) P 301[0] - CON_Ref_Mode = PG(0)
- Selection of reference source/>P 165[0] - MPRO_REF_SEL
- Scaling
- Select jerk conditions
- Set stop ramps, smoothing, filter, homing

# 8.3.2 PG mode with position control

Travel commands are transmitted to the internal profile generator (see Section ""Basic settings"" on page 241). It is composed of the following items:

- Target position
- Maximum travel speed
- Maximum acceleration
- Maximum deceleration

The profile generator uses the P 166[0] - MPRO_REF_JTIME jerk values and a P 167[0] - MPRO_REF_OVR override factor for the travel speed in order to generate the trajectory for the position setpoint that will take the least amount of time, taking all limitations into account.

The position references are then processed with the selected interpolation method.

# 8 Motion profile

# 8.3.2.1 Motion profile / Basic settings

The position references are used to generate pre-control values for speed Interpolation (IP) mode and acceleration. These are scanned at the sampling time of the position controller (normally 125 μs) and switched to the control loops.

Reference values are interpolated in linear mode before being switched to the control loops.

- The profile generator is inactive.
- Ramps and smoothing are inactive.
- The reference values are switched directly to the closed-loop control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# Speed control in IP mode:

- Control mode P 300[0] - CON_CfgCon = speed control or setting via Modes of Operation (CAN, EtherCAT®)
- Selection of reference source P 165[0] - MPRO_REF_SEL

Image 8.27: PG mode with position control

# 8.3.3 IP mode with speed control

In IP (Interpolation) mode the appropriate reference source and correct scaling of units are selected for the speed reference before the reference is passed via the interpolator to the control. Linear interpolation is always applied in this process.

",What happens to the actual position when it reaches 0° in the negative direction according to the 'MSD ServoDrive - DeviceHelp' document?,"On reaching 0° in the negative direction, the actual position is set to 360°.","The document states that at 0°, the position resets to 360° when moving in the negative direction.","In the 'MSD ServoDrive - DeviceHelp', it's explained that a negative direction movement to 0° results in the position being adjusted to 360°.","When the drive moves past 0° in the negative direction, the actual position wraps around to 360°, as per the device's documentation.",The 'MSD ServoDrive - DeviceHelp' specifies that crossing 0° in a negative rotation sets the position to 360° to maintain continuous motion tracking.
1,msd_servo_drive.txt,68,0ebe04756316c46352786c22f8d48336e344cbf35f5f17b182c6e17a12fed3eb,"The same applies to the negative direction. On reaching 0° the actual position is set to 360°.

Image 8.9: “‘Clockwise rotation’ process option” screen

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 227

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 228

# 8.2.1.3 Process option “Path - optimized”

Not path-optimized Optimized path

An absolute target position is always approached by the shortest path. Relative movements cannot be carried out with the “path – optimized” mode.

|Position range|Example|Effect|
|---|---|---|
|Target position < 120°< 360°|The drive moves to the target position|within 360°.|
|Target position = 120° = 120°|The drive remains in position.| |
|Target position > 600° - 360° =|The drive moves to the position within|240° (target position - (n x circumferential length))|

Table 8.3: Path-optimized movement

Table 8.4: Path optimization diagram

# 8.2.1.4 Infinite motion task when using indexing table function

In the case of infinite motion tasks the drive moves at constant speed, regardless of a transmitted target position, until the mode is deactivated or is overwritten by a new motion task. On switching to the next driving set (absolute or relative), the new target position is approached in the current direction of movement. A preset path optimization is ignored when the indexing table is active.

# 8.2.1.5 Relative motion task when using indexing table function

Relative driving jobs may relate to the current target position or to the actual position. For more information see ""Field Buses"" User Manuals. In the case of relative driving jobs greater travel distances than the circumferential length are possible.

Example without gear ratio:

- Circumferential length = 360°
- Relative target position = 800°
- Start position = 0°
- Movement: The drive will complete two motor revolutions (720°) and stop at the 3rd revolution at 80° (800° - 720°).

# 8.2.2 SERCOS

When using the SERCOS profile, scaling of the units is termed weighting. The weighting describes the physical unit and the exponent with which the numerical values of the parameters exchanged between the master control system and the drives are to be interpreted. The method of weighting is defined by the parameters for position, speed, force/torque and acceleration weighting.

**Table 8.5: “Standardization / units - SERCOS” parameter**
|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|MPRO_FG_Config| |Factor group configuration|
|10043|COM_SER_| |Speed polarity parameter|
|10044|PolaritySpeed| | |
|10045|COM_SER_| |Velocity data scaling type|
|10046|COM_SER_| |Velocity data scaling factor|
|10055|0| |ScaleExpSpeed|
|10076|COM_SER_| |Position data scaling type|
|10077|COM_SER_| |Linear position data scaling factor|
|10078|COM_SER_| |Linear position data scaling exponent|
|10085|COM_SER_| |Torque polarity parameter|

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 229

# 8 Motion profile

# 8 Motion profile

MOOG                          ID No.:CB40859-001 Date:11/2020                                                                                       MSD ServoDrive   - DeviceHelp     230

|ID|Index Name|Unit|Description|
|---|---|---|---|
|10086|COM_SER_| |Torque/force data scaling type|
|10093|COM_SER_| |Torque/force data scaling factor|
|10094|COM_SER_| |Torque/force data scaling exponent|
|10103|COM_SER_ModuloVal|mDegree|Modulo value|
|10121|COM_SER_| |Input revolutions of load gear|
|10122|COM_SER_| |Output revolutions of load gear|
|10123|COM_SER_FeedConst|um/rev|Feed constant|
|10160|COM_SER_| |Acceleration data scaling type|
|10161|COM_SER_| |Acceleration data scaling factor|
|10162|COM_SER_| |Acceleration data scaling exponent|

Table 8.5:  “Standardization / units - SERCOS” parameter (continue)

Image 8.11: “Standardization profile - SERCOS - Position unit (1)” screen

# Image 8.12: “Standardization profile - SERCOS - Position unit (2)” screen

# Image 8.13: Position data weighting method

# Position polarity

The polarity of the position data can be inverted according to the application. An increasing actual position value indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|m|1|E-7|

Table 8.6: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 231

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

232

# Rotary weighting

# 8.2.2.2 Speed

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|Degrees|3,600,000|0.0001 μm|

Table 8.7: Weighting for rotary motion (default setting)

Image 8.14: “Standardization profile - SERCOS - Speed (1)” screen

# Image 8.15: “Standardization profile - SERCOS - Speed (2)” screen

The “Speed data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.16: Speed data weighting method

# Speed polarity

The polarity of the speed data can be inverted according to the application. A positive speed reference indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|m/min|1|
| |0.001 m/min|

# Table 8.8: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 233

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

Rotary weighting

# 8.2.2.3 Unit of torque/power

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|Degrees|3,600,000|
| |0.001 m/min|

Table 8.9: Weighting for rotary motion (default setting)

Image 8.17: “Standardization profile - SERCOS torque/power(1)” screen

# Image 8.18: “Standardization profile - SERCOS torque/power(2)” screen

# Image 8.19: Force/torque weighting method

The “Power/torque weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here. In percentage weighting the permanently permissible standstill torque of the motor is used as the reference value. All torque/force data is given in [%] with one decimal place.

# Torque polarity

The polarity of the torque can be inverted according to the application. A positive torque reference indicates clockwise rotation (looking at the motor shaft).

**Table 8.10: Weighting for linear motion (default setting)**
|Unit|Weighting factor|
|---|---|
|Nm|1|

LSB = Unit * Exponent

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 235

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 236

# 8.2.2.4 Unit of acceleration

|Weighting|Preferential weighting|Parameter weighting|
|---|---|---|
|Unit|factor|(LSB)|
|Nm|1|0.01 Nm|
|LSB = Unit * Exponent|LSB = Unit * Exponent|LSB = Unit * Exponent|

Table 8.11: Weighting for rotary motion (default setting)

Image 8.20: “Standardization profile - SERCOS - Acceleration(1)” screen

# Image 8.21: “Standardization profile - SERCOS - Acceleration(2)” screen

The ""Acceleration data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.22: Acceleration weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|m/s2|1|E-6|

Table 8.12: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 237

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 238

# Rotary weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|rad/s2|3,600,000|E-3|

Table 8.13: Weighting for rotary motion (default setting)

# 8.2.2.5 Modulo weighting

If Modulo (indexing table application) is to be selected (see Section ""As linear"" process option"" on page 227), the number range of the position data (modulo value) must be entered. When the modulo value is exceeded the actual position is reset to 0.

Image 8.23: Schematic of user-defined scaling

# 8.2.3 User defined

|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|0 MPRO_FG_Config| |Factor group configuration|
|270|0 MPRO_FG_PosNorm|incr/rev|internal position resolution|
|271|0 MPRO_FG_Num|rev|Factor group: Numerator (profile independent)|
|272|0 MPRO_FG_Den|mDegree|Factor group: denominator (profile independent)|
|273|0 MPRO_FG_Reverse| |Factor group: Position and speed reverse (profile independent)|
|274|0 MPRO_FG_SpeedFac|rev/min/SPEED|Factor group: speed factor (profile independent)|
|275|0 MPRO_FG_AccFac|rev/s2/ACC|Factor group: acceleration factor (profile independent)|
|284|0 MPRO_FG_PosUnit| |Unit for position values|
|285|0 MPRO_FG_PosExp| |Factor group: Position unit exponent (profile independent)|
|286|0 MPRO_FG_| |Factor group: Position unit scaling factor|

Table 8.14: “Standardization / units - Custom” parameters

# 8 Motion profile

|ID|Index Name|Unit|Description|
|---|---|---|---|
|0290|MPRO_FG_AccUnit|[m/s²]|Acceleration unit|
| |PosScaleFac| |(profile independent)|
| | | |Feed constant: 0.1 mm = 1 rev|
|287|MPRO_FG_SpeedUnit| |Unit for speed values|
| | | |Gearing: 1 drive revolution = 3 motor revs|
|288|MPRO_FG_SpeedExp| |Factor group: Velocity unit exponent (profile independent)|
|289|MPRO_FG_SpeedScaleFac| |Factor group: Velocity unit scaling factor (profile independent)|
| | | |P 0284 MPRO_FG_PosUnit = 1 μm = 1/1000 mm = 10/1000 rev (output) = 30/1000 rev (motor)|
|290|MPRO_FG_AccUnit| |Unit for acceleration and deceleration values|
|291|MPRO_FG_AccExp| |Factor group: Acceleration unit exponent (profile independent)|
|292|MPRO_FG_AccScaleFac| |Factor group: Acceleration unit scaling factor (profile independent)|
| | | |P 0287 MPRO_FG_SpeedUnit = 1 m/s = 1000 mm/s = 10 000 rev/s (output) = 30 000 rev/s (motor)*60 (min) = 1 800 000 rev/min|
|293|MPRO_FG_TorqueUnit| |Unit for torque values|
|294|MPRO_FG_TorqueExp| |Factor group: Torque unit exponent (profile independent)|
|295|MPRO_FG_TorqueScaleFac| |Factor group: Torque unit scaling factor (profile independent)|
|298|MPRO_FG_UsrActPosDly|ms|Actual position delay (multiple of CON_PConTS)|

# Table 8.14: “Standardization / units - Custom” parameters (continue)

|ID|Name|Function|Standard rotary system|
|---|---|---|---|
|270|MPRO_FG_Nom|Numerator|1[rev]|
|271|PosNom|Increments per revolution|1048576 [incr/rev]|
|272|MPRO_FG_Den|Denominator|360° [POS]|
|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|274|MPRO_FG_SpeedFac|Speed factor|1[rpm]|
|275|MPRO_FG_AccFac|Acceleration factor|1/60 = 0.01667 [rpm/s]|

# Table 8.15: Parameters for user-defined scaling (rotary system)

1 motor revolution corresponds to 360° or 1048576 increments

Speed in [rpm]

Acceleration in [rpm/s]

Positioning in [°degrees]

Given

Position unit P 0284 MPRO_FG_PosUnit = [μm]

Speed unit P 0287 MPRO_FG_SpeedUnit = [m/s]

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 239

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 240

|ID|Name|Function|Standard|ID|Name|Function|Standard|
|---|---|---|---|---|---|---|---|
|284|MPRO_FG_PosUnit|Unit for position value|mdegree|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|287|MPRO_FG_SpeetUnit|Unit for speed value|rev/min|1.875 rps| | | |
| | |Unit for| |274|MPRO_FG_SpeedFac|Speed factor|mm/s, 1/32 mm = 0.03125 rps²|
| | | | | | | |s = 1.875 rps|
| | | | | | | |1/32 mm =|
|275|MPRO_FG_AccFac|Acceleration factor|0.03125 rps²| | | |corresponding to 1mm/s²|

# 8.2.3.2 Example of scaling of a linear motor

Presetting:

- One revolution corresponds to 32 mm pitch
- Travel in [μm]
- Speed in [mm/sec]
- Acceleration in [mm/s²]

|ID|Name|Function|Standard|
|---|---|---|---|
|270|MPRO_FG_PosNom|Increments per revolution|1048576 [incr/rev]|
|271|MPRO_FG_Nom|Numerator|1 [rev]|
|272|MPRO_FG_Den|Denominator|32000 μm|

# Table 8.16: Parameters for user-defined scaling (linear system)

# 8.3 Basic settings

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|144|0|MPRO_DRVCOM_AUTO_START| |DriveCom: Auto start of system|
|159|0|MPRO_CTRL_SEL| |Motion profile selection|
|165|0|MPRO_REF_SEL| |Motion profile selection|
|166|0|MPRO_REF_JTIME|ms|Motion profile jerk time|
|167|0|MPRO_REF_OVR|%|Motion profile override factor|
|223|0|MPRO_REF_Config| |Motion profile: Config of specific profiling behaviour|
|301|0|CON_REF_Mode| |Mode selection of setpoint profiling|
|306|0|CON_IpRefTS|ms|Sampling time (for interpolation)|
|335|0|CON_SCON_DirLock| |Direction lock for speed reference value|
|370|0|CON_IP| |Interpolation type|
|755|0|MPRO_FG_RefPosFilType| |Position reference filter type|
|756| |MPRO_FG_RefPosFilData| |Reference position filter data|
|756|0|RefFil_TimeConst|ms|Position reference filter time constant (PT1/PT2/AVG)|
|756|1|RefFil_DampConst| |Position reference filter damping constant|

Image 8.24: “Basic settings” screen

Interpolation

Table 8.17: “Motion profile - Basic settings” parameters

See Section ""Interpolation"" on page 246.

# 8.3.1 PG mode with speed control

NOTE

- The reference filters are initialized only after the control has been re-enabled or by a device restart.
- Select reference source
- Motion profile adaptation: scaling, ramps and smoothing time.
- In reference processing by way of the profile generator the fine interpolator is always in use.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 241

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 242

# Profile Generator with speed control:

- Control mode P 300[0] - CON_CfgCon = speed control
- Under Profile select the profile generator (PG) P 301[0] - CON_Ref_Mode = PG(0)
- Selection of reference source/>P 165[0] - MPRO_REF_SEL
- Scaling
- Select jerk conditions
- Set stop ramps, smoothing, filter, homing

# 8.3.2 PG mode with position control

Travel commands are transmitted to the internal profile generator (see Section ""Basic settings"" on page 241). It is composed of the following items:

- Target position
- Maximum travel speed
- Maximum acceleration
- Maximum deceleration

The profile generator uses the P 166[0] - MPRO_REF_JTIME jerk values and a P 167[0] - MPRO_REF_OVR override factor for the travel speed in order to generate the trajectory for the position setpoint that will take the least amount of time, taking all limitations into account.

The position references are then processed with the selected interpolation method.

# 8 Motion profile

# 8.3.2.1 Motion profile / Basic settings

The position references are used to generate pre-control values for speed Interpolation (IP) mode and acceleration. These are scanned at the sampling time of the position controller (normally 125 μs) and switched to the control loops.

Reference values are interpolated in linear mode before being switched to the control loops.

- The profile generator is inactive.
- Ramps and smoothing are inactive.
- The reference values are switched directly to the closed-loop control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# Speed control in IP mode:

- Control mode P 300[0] - CON_CfgCon = speed control or setting via Modes of Operation (CAN, EtherCAT®)
- Selection of reference source P 165[0] - MPRO_REF_SEL

Image 8.27: PG mode with position control

# 8.3.3 IP mode with speed control

In IP (Interpolation) mode the appropriate reference source and correct scaling of units are selected for the speed reference before the reference is passed via the interpolator to the control. Linear interpolation is always applied in this process.

",How does the 'path - optimized' mode affect the approach to an absolute target position in the 'MSD ServoDrive - DeviceHelp' document?,"In 'path - optimized' mode, an absolute target position is always approached by the shortest path.",The document indicates that the 'path - optimized' mode ensures the shortest route is taken to reach an absolute target position.,"According to 'MSD ServoDrive - DeviceHelp', the 'path - optimized' setting makes the drive move directly to the target position via the minimal angular distance.","Optimized path mode directs the drive to the absolute target position in the most efficient manner, avoiding unnecessary rotations.",The 'MSD ServoDrive - DeviceHelp' explains that 'path - optimized' mode simplifies motion by directly navigating to the target position without relative movements.
2,msd_servo_drive.txt,68,0ebe04756316c46352786c22f8d48336e344cbf35f5f17b182c6e17a12fed3eb,"The same applies to the negative direction. On reaching 0° the actual position is set to 360°.

Image 8.9: “‘Clockwise rotation’ process option” screen

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 227

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 228

# 8.2.1.3 Process option “Path - optimized”

Not path-optimized Optimized path

An absolute target position is always approached by the shortest path. Relative movements cannot be carried out with the “path – optimized” mode.

|Position range|Example|Effect|
|---|---|---|
|Target position < 120°< 360°|The drive moves to the target position|within 360°.|
|Target position = 120° = 120°|The drive remains in position.| |
|Target position > 600° - 360° =|The drive moves to the position within|240° (target position - (n x circumferential length))|

Table 8.3: Path-optimized movement

Table 8.4: Path optimization diagram

# 8.2.1.4 Infinite motion task when using indexing table function

In the case of infinite motion tasks the drive moves at constant speed, regardless of a transmitted target position, until the mode is deactivated or is overwritten by a new motion task. On switching to the next driving set (absolute or relative), the new target position is approached in the current direction of movement. A preset path optimization is ignored when the indexing table is active.

# 8.2.1.5 Relative motion task when using indexing table function

Relative driving jobs may relate to the current target position or to the actual position. For more information see ""Field Buses"" User Manuals. In the case of relative driving jobs greater travel distances than the circumferential length are possible.

Example without gear ratio:

- Circumferential length = 360°
- Relative target position = 800°
- Start position = 0°
- Movement: The drive will complete two motor revolutions (720°) and stop at the 3rd revolution at 80° (800° - 720°).

# 8.2.2 SERCOS

When using the SERCOS profile, scaling of the units is termed weighting. The weighting describes the physical unit and the exponent with which the numerical values of the parameters exchanged between the master control system and the drives are to be interpreted. The method of weighting is defined by the parameters for position, speed, force/torque and acceleration weighting.

**Table 8.5: “Standardization / units - SERCOS” parameter**
|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|MPRO_FG_Config| |Factor group configuration|
|10043|COM_SER_| |Speed polarity parameter|
|10044|PolaritySpeed| | |
|10045|COM_SER_| |Velocity data scaling type|
|10046|COM_SER_| |Velocity data scaling factor|
|10055|0| |ScaleExpSpeed|
|10076|COM_SER_| |Position data scaling type|
|10077|COM_SER_| |Linear position data scaling factor|
|10078|COM_SER_| |Linear position data scaling exponent|
|10085|COM_SER_| |Torque polarity parameter|

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 229

# 8 Motion profile

# 8 Motion profile

MOOG                          ID No.:CB40859-001 Date:11/2020                                                                                       MSD ServoDrive   - DeviceHelp     230

|ID|Index Name|Unit|Description|
|---|---|---|---|
|10086|COM_SER_| |Torque/force data scaling type|
|10093|COM_SER_| |Torque/force data scaling factor|
|10094|COM_SER_| |Torque/force data scaling exponent|
|10103|COM_SER_ModuloVal|mDegree|Modulo value|
|10121|COM_SER_| |Input revolutions of load gear|
|10122|COM_SER_| |Output revolutions of load gear|
|10123|COM_SER_FeedConst|um/rev|Feed constant|
|10160|COM_SER_| |Acceleration data scaling type|
|10161|COM_SER_| |Acceleration data scaling factor|
|10162|COM_SER_| |Acceleration data scaling exponent|

Table 8.5:  “Standardization / units - SERCOS” parameter (continue)

Image 8.11: “Standardization profile - SERCOS - Position unit (1)” screen

# Image 8.12: “Standardization profile - SERCOS - Position unit (2)” screen

# Image 8.13: Position data weighting method

# Position polarity

The polarity of the position data can be inverted according to the application. An increasing actual position value indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|m|1|E-7|

Table 8.6: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 231

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

232

# Rotary weighting

# 8.2.2.2 Speed

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|Degrees|3,600,000|0.0001 μm|

Table 8.7: Weighting for rotary motion (default setting)

Image 8.14: “Standardization profile - SERCOS - Speed (1)” screen

# Image 8.15: “Standardization profile - SERCOS - Speed (2)” screen

The “Speed data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.16: Speed data weighting method

# Speed polarity

The polarity of the speed data can be inverted according to the application. A positive speed reference indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|m/min|1|
| |0.001 m/min|

# Table 8.8: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 233

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

Rotary weighting

# 8.2.2.3 Unit of torque/power

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|Degrees|3,600,000|
| |0.001 m/min|

Table 8.9: Weighting for rotary motion (default setting)

Image 8.17: “Standardization profile - SERCOS torque/power(1)” screen

# Image 8.18: “Standardization profile - SERCOS torque/power(2)” screen

# Image 8.19: Force/torque weighting method

The “Power/torque weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here. In percentage weighting the permanently permissible standstill torque of the motor is used as the reference value. All torque/force data is given in [%] with one decimal place.

# Torque polarity

The polarity of the torque can be inverted according to the application. A positive torque reference indicates clockwise rotation (looking at the motor shaft).

**Table 8.10: Weighting for linear motion (default setting)**
|Unit|Weighting factor|
|---|---|
|Nm|1|

LSB = Unit * Exponent

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 235

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 236

# 8.2.2.4 Unit of acceleration

|Weighting|Preferential weighting|Parameter weighting|
|---|---|---|
|Unit|factor|(LSB)|
|Nm|1|0.01 Nm|
|LSB = Unit * Exponent|LSB = Unit * Exponent|LSB = Unit * Exponent|

Table 8.11: Weighting for rotary motion (default setting)

Image 8.20: “Standardization profile - SERCOS - Acceleration(1)” screen

# Image 8.21: “Standardization profile - SERCOS - Acceleration(2)” screen

The ""Acceleration data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.22: Acceleration weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|m/s2|1|E-6|

Table 8.12: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 237

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 238

# Rotary weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|rad/s2|3,600,000|E-3|

Table 8.13: Weighting for rotary motion (default setting)

# 8.2.2.5 Modulo weighting

If Modulo (indexing table application) is to be selected (see Section ""As linear"" process option"" on page 227), the number range of the position data (modulo value) must be entered. When the modulo value is exceeded the actual position is reset to 0.

Image 8.23: Schematic of user-defined scaling

# 8.2.3 User defined

|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|0 MPRO_FG_Config| |Factor group configuration|
|270|0 MPRO_FG_PosNorm|incr/rev|internal position resolution|
|271|0 MPRO_FG_Num|rev|Factor group: Numerator (profile independent)|
|272|0 MPRO_FG_Den|mDegree|Factor group: denominator (profile independent)|
|273|0 MPRO_FG_Reverse| |Factor group: Position and speed reverse (profile independent)|
|274|0 MPRO_FG_SpeedFac|rev/min/SPEED|Factor group: speed factor (profile independent)|
|275|0 MPRO_FG_AccFac|rev/s2/ACC|Factor group: acceleration factor (profile independent)|
|284|0 MPRO_FG_PosUnit| |Unit for position values|
|285|0 MPRO_FG_PosExp| |Factor group: Position unit exponent (profile independent)|
|286|0 MPRO_FG_| |Factor group: Position unit scaling factor|

Table 8.14: “Standardization / units - Custom” parameters

# 8 Motion profile

|ID|Index Name|Unit|Description|
|---|---|---|---|
|0290|MPRO_FG_AccUnit|[m/s²]|Acceleration unit|
| |PosScaleFac| |(profile independent)|
| | | |Feed constant: 0.1 mm = 1 rev|
|287|MPRO_FG_SpeedUnit| |Unit for speed values|
| | | |Gearing: 1 drive revolution = 3 motor revs|
|288|MPRO_FG_SpeedExp| |Factor group: Velocity unit exponent (profile independent)|
|289|MPRO_FG_SpeedScaleFac| |Factor group: Velocity unit scaling factor (profile independent)|
| | | |P 0284 MPRO_FG_PosUnit = 1 μm = 1/1000 mm = 10/1000 rev (output) = 30/1000 rev (motor)|
|290|MPRO_FG_AccUnit| |Unit for acceleration and deceleration values|
|291|MPRO_FG_AccExp| |Factor group: Acceleration unit exponent (profile independent)|
|292|MPRO_FG_AccScaleFac| |Factor group: Acceleration unit scaling factor (profile independent)|
| | | |P 0287 MPRO_FG_SpeedUnit = 1 m/s = 1000 mm/s = 10 000 rev/s (output) = 30 000 rev/s (motor)*60 (min) = 1 800 000 rev/min|
|293|MPRO_FG_TorqueUnit| |Unit for torque values|
|294|MPRO_FG_TorqueExp| |Factor group: Torque unit exponent (profile independent)|
|295|MPRO_FG_TorqueScaleFac| |Factor group: Torque unit scaling factor (profile independent)|
|298|MPRO_FG_UsrActPosDly|ms|Actual position delay (multiple of CON_PConTS)|

# Table 8.14: “Standardization / units - Custom” parameters (continue)

|ID|Name|Function|Standard rotary system|
|---|---|---|---|
|270|MPRO_FG_Nom|Numerator|1[rev]|
|271|PosNom|Increments per revolution|1048576 [incr/rev]|
|272|MPRO_FG_Den|Denominator|360° [POS]|
|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|274|MPRO_FG_SpeedFac|Speed factor|1[rpm]|
|275|MPRO_FG_AccFac|Acceleration factor|1/60 = 0.01667 [rpm/s]|

# Table 8.15: Parameters for user-defined scaling (rotary system)

1 motor revolution corresponds to 360° or 1048576 increments

Speed in [rpm]

Acceleration in [rpm/s]

Positioning in [°degrees]

Given

Position unit P 0284 MPRO_FG_PosUnit = [μm]

Speed unit P 0287 MPRO_FG_SpeedUnit = [m/s]

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 239

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 240

|ID|Name|Function|Standard|ID|Name|Function|Standard|
|---|---|---|---|---|---|---|---|
|284|MPRO_FG_PosUnit|Unit for position value|mdegree|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|287|MPRO_FG_SpeetUnit|Unit for speed value|rev/min|1.875 rps| | | |
| | |Unit for| |274|MPRO_FG_SpeedFac|Speed factor|mm/s, 1/32 mm = 0.03125 rps²|
| | | | | | | |s = 1.875 rps|
| | | | | | | |1/32 mm =|
|275|MPRO_FG_AccFac|Acceleration factor|0.03125 rps²| | | |corresponding to 1mm/s²|

# 8.2.3.2 Example of scaling of a linear motor

Presetting:

- One revolution corresponds to 32 mm pitch
- Travel in [μm]
- Speed in [mm/sec]
- Acceleration in [mm/s²]

|ID|Name|Function|Standard|
|---|---|---|---|
|270|MPRO_FG_PosNom|Increments per revolution|1048576 [incr/rev]|
|271|MPRO_FG_Nom|Numerator|1 [rev]|
|272|MPRO_FG_Den|Denominator|32000 μm|

# Table 8.16: Parameters for user-defined scaling (linear system)

# 8.3 Basic settings

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|144|0|MPRO_DRVCOM_AUTO_START| |DriveCom: Auto start of system|
|159|0|MPRO_CTRL_SEL| |Motion profile selection|
|165|0|MPRO_REF_SEL| |Motion profile selection|
|166|0|MPRO_REF_JTIME|ms|Motion profile jerk time|
|167|0|MPRO_REF_OVR|%|Motion profile override factor|
|223|0|MPRO_REF_Config| |Motion profile: Config of specific profiling behaviour|
|301|0|CON_REF_Mode| |Mode selection of setpoint profiling|
|306|0|CON_IpRefTS|ms|Sampling time (for interpolation)|
|335|0|CON_SCON_DirLock| |Direction lock for speed reference value|
|370|0|CON_IP| |Interpolation type|
|755|0|MPRO_FG_RefPosFilType| |Position reference filter type|
|756| |MPRO_FG_RefPosFilData| |Reference position filter data|
|756|0|RefFil_TimeConst|ms|Position reference filter time constant (PT1/PT2/AVG)|
|756|1|RefFil_DampConst| |Position reference filter damping constant|

Image 8.24: “Basic settings” screen

Interpolation

Table 8.17: “Motion profile - Basic settings” parameters

See Section ""Interpolation"" on page 246.

# 8.3.1 PG mode with speed control

NOTE

- The reference filters are initialized only after the control has been re-enabled or by a device restart.
- Select reference source
- Motion profile adaptation: scaling, ramps and smoothing time.
- In reference processing by way of the profile generator the fine interpolator is always in use.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 241

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 242

# Profile Generator with speed control:

- Control mode P 300[0] - CON_CfgCon = speed control
- Under Profile select the profile generator (PG) P 301[0] - CON_Ref_Mode = PG(0)
- Selection of reference source/>P 165[0] - MPRO_REF_SEL
- Scaling
- Select jerk conditions
- Set stop ramps, smoothing, filter, homing

# 8.3.2 PG mode with position control

Travel commands are transmitted to the internal profile generator (see Section ""Basic settings"" on page 241). It is composed of the following items:

- Target position
- Maximum travel speed
- Maximum acceleration
- Maximum deceleration

The profile generator uses the P 166[0] - MPRO_REF_JTIME jerk values and a P 167[0] - MPRO_REF_OVR override factor for the travel speed in order to generate the trajectory for the position setpoint that will take the least amount of time, taking all limitations into account.

The position references are then processed with the selected interpolation method.

# 8 Motion profile

# 8.3.2.1 Motion profile / Basic settings

The position references are used to generate pre-control values for speed Interpolation (IP) mode and acceleration. These are scanned at the sampling time of the position controller (normally 125 μs) and switched to the control loops.

Reference values are interpolated in linear mode before being switched to the control loops.

- The profile generator is inactive.
- Ramps and smoothing are inactive.
- The reference values are switched directly to the closed-loop control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# Speed control in IP mode:

- Control mode P 300[0] - CON_CfgCon = speed control or setting via Modes of Operation (CAN, EtherCAT®)
- Selection of reference source P 165[0] - MPRO_REF_SEL

Image 8.27: PG mode with position control

# 8.3.3 IP mode with speed control

In IP (Interpolation) mode the appropriate reference source and correct scaling of units are selected for the speed reference before the reference is passed via the interpolator to the control. Linear interpolation is always applied in this process.

",What is the effect of the 'infinite motion task' when using the indexing table function as described in the 'MSD ServoDrive - DeviceHelp' document?,"In infinite motion tasks, the drive moves at constant speed, ignoring any transmitted target position, until the mode is deactivated or overridden.","The document describes that infinite motion tasks maintain constant speed regardless of target positions, continuing until stopped or a new task is given.","According to 'MSD ServoDrive - DeviceHelp', infinite motion tasks with the indexing table function allow continuous movement at a set speed, bypassing preset path optimization.","The drive performs uninterrupted motion at a steady speed in infinite motion tasks, as outlined in the device's documentation.","The 'MSD ServoDrive - DeviceHelp' specifies that infinite motion tasks override normal targeting, focusing instead on sustained speed until a new command is received."
3,msd_servo_drive.txt,68,0ebe04756316c46352786c22f8d48336e344cbf35f5f17b182c6e17a12fed3eb,"The same applies to the negative direction. On reaching 0° the actual position is set to 360°.

Image 8.9: “‘Clockwise rotation’ process option” screen

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 227

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 228

# 8.2.1.3 Process option “Path - optimized”

Not path-optimized Optimized path

An absolute target position is always approached by the shortest path. Relative movements cannot be carried out with the “path – optimized” mode.

|Position range|Example|Effect|
|---|---|---|
|Target position < 120°< 360°|The drive moves to the target position|within 360°.|
|Target position = 120° = 120°|The drive remains in position.| |
|Target position > 600° - 360° =|The drive moves to the position within|240° (target position - (n x circumferential length))|

Table 8.3: Path-optimized movement

Table 8.4: Path optimization diagram

# 8.2.1.4 Infinite motion task when using indexing table function

In the case of infinite motion tasks the drive moves at constant speed, regardless of a transmitted target position, until the mode is deactivated or is overwritten by a new motion task. On switching to the next driving set (absolute or relative), the new target position is approached in the current direction of movement. A preset path optimization is ignored when the indexing table is active.

# 8.2.1.5 Relative motion task when using indexing table function

Relative driving jobs may relate to the current target position or to the actual position. For more information see ""Field Buses"" User Manuals. In the case of relative driving jobs greater travel distances than the circumferential length are possible.

Example without gear ratio:

- Circumferential length = 360°
- Relative target position = 800°
- Start position = 0°
- Movement: The drive will complete two motor revolutions (720°) and stop at the 3rd revolution at 80° (800° - 720°).

# 8.2.2 SERCOS

When using the SERCOS profile, scaling of the units is termed weighting. The weighting describes the physical unit and the exponent with which the numerical values of the parameters exchanged between the master control system and the drives are to be interpreted. The method of weighting is defined by the parameters for position, speed, force/torque and acceleration weighting.

**Table 8.5: “Standardization / units - SERCOS” parameter**
|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|MPRO_FG_Config| |Factor group configuration|
|10043|COM_SER_| |Speed polarity parameter|
|10044|PolaritySpeed| | |
|10045|COM_SER_| |Velocity data scaling type|
|10046|COM_SER_| |Velocity data scaling factor|
|10055|0| |ScaleExpSpeed|
|10076|COM_SER_| |Position data scaling type|
|10077|COM_SER_| |Linear position data scaling factor|
|10078|COM_SER_| |Linear position data scaling exponent|
|10085|COM_SER_| |Torque polarity parameter|

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 229

# 8 Motion profile

# 8 Motion profile

MOOG                          ID No.:CB40859-001 Date:11/2020                                                                                       MSD ServoDrive   - DeviceHelp     230

|ID|Index Name|Unit|Description|
|---|---|---|---|
|10086|COM_SER_| |Torque/force data scaling type|
|10093|COM_SER_| |Torque/force data scaling factor|
|10094|COM_SER_| |Torque/force data scaling exponent|
|10103|COM_SER_ModuloVal|mDegree|Modulo value|
|10121|COM_SER_| |Input revolutions of load gear|
|10122|COM_SER_| |Output revolutions of load gear|
|10123|COM_SER_FeedConst|um/rev|Feed constant|
|10160|COM_SER_| |Acceleration data scaling type|
|10161|COM_SER_| |Acceleration data scaling factor|
|10162|COM_SER_| |Acceleration data scaling exponent|

Table 8.5:  “Standardization / units - SERCOS” parameter (continue)

Image 8.11: “Standardization profile - SERCOS - Position unit (1)” screen

# Image 8.12: “Standardization profile - SERCOS - Position unit (2)” screen

# Image 8.13: Position data weighting method

# Position polarity

The polarity of the position data can be inverted according to the application. An increasing actual position value indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|m|1|E-7|

Table 8.6: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 231

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

232

# Rotary weighting

# 8.2.2.2 Speed

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|Degrees|3,600,000|0.0001 μm|

Table 8.7: Weighting for rotary motion (default setting)

Image 8.14: “Standardization profile - SERCOS - Speed (1)” screen

# Image 8.15: “Standardization profile - SERCOS - Speed (2)” screen

The “Speed data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.16: Speed data weighting method

# Speed polarity

The polarity of the speed data can be inverted according to the application. A positive speed reference indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|m/min|1|
| |0.001 m/min|

# Table 8.8: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 233

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

Rotary weighting

# 8.2.2.3 Unit of torque/power

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|Degrees|3,600,000|
| |0.001 m/min|

Table 8.9: Weighting for rotary motion (default setting)

Image 8.17: “Standardization profile - SERCOS torque/power(1)” screen

# Image 8.18: “Standardization profile - SERCOS torque/power(2)” screen

# Image 8.19: Force/torque weighting method

The “Power/torque weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here. In percentage weighting the permanently permissible standstill torque of the motor is used as the reference value. All torque/force data is given in [%] with one decimal place.

# Torque polarity

The polarity of the torque can be inverted according to the application. A positive torque reference indicates clockwise rotation (looking at the motor shaft).

**Table 8.10: Weighting for linear motion (default setting)**
|Unit|Weighting factor|
|---|---|
|Nm|1|

LSB = Unit * Exponent

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 235

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 236

# 8.2.2.4 Unit of acceleration

|Weighting|Preferential weighting|Parameter weighting|
|---|---|---|
|Unit|factor|(LSB)|
|Nm|1|0.01 Nm|
|LSB = Unit * Exponent|LSB = Unit * Exponent|LSB = Unit * Exponent|

Table 8.11: Weighting for rotary motion (default setting)

Image 8.20: “Standardization profile - SERCOS - Acceleration(1)” screen

# Image 8.21: “Standardization profile - SERCOS - Acceleration(2)” screen

The ""Acceleration data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.22: Acceleration weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|m/s2|1|E-6|

Table 8.12: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 237

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 238

# Rotary weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|rad/s2|3,600,000|E-3|

Table 8.13: Weighting for rotary motion (default setting)

# 8.2.2.5 Modulo weighting

If Modulo (indexing table application) is to be selected (see Section ""As linear"" process option"" on page 227), the number range of the position data (modulo value) must be entered. When the modulo value is exceeded the actual position is reset to 0.

Image 8.23: Schematic of user-defined scaling

# 8.2.3 User defined

|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|0 MPRO_FG_Config| |Factor group configuration|
|270|0 MPRO_FG_PosNorm|incr/rev|internal position resolution|
|271|0 MPRO_FG_Num|rev|Factor group: Numerator (profile independent)|
|272|0 MPRO_FG_Den|mDegree|Factor group: denominator (profile independent)|
|273|0 MPRO_FG_Reverse| |Factor group: Position and speed reverse (profile independent)|
|274|0 MPRO_FG_SpeedFac|rev/min/SPEED|Factor group: speed factor (profile independent)|
|275|0 MPRO_FG_AccFac|rev/s2/ACC|Factor group: acceleration factor (profile independent)|
|284|0 MPRO_FG_PosUnit| |Unit for position values|
|285|0 MPRO_FG_PosExp| |Factor group: Position unit exponent (profile independent)|
|286|0 MPRO_FG_| |Factor group: Position unit scaling factor|

Table 8.14: “Standardization / units - Custom” parameters

# 8 Motion profile

|ID|Index Name|Unit|Description|
|---|---|---|---|
|0290|MPRO_FG_AccUnit|[m/s²]|Acceleration unit|
| |PosScaleFac| |(profile independent)|
| | | |Feed constant: 0.1 mm = 1 rev|
|287|MPRO_FG_SpeedUnit| |Unit for speed values|
| | | |Gearing: 1 drive revolution = 3 motor revs|
|288|MPRO_FG_SpeedExp| |Factor group: Velocity unit exponent (profile independent)|
|289|MPRO_FG_SpeedScaleFac| |Factor group: Velocity unit scaling factor (profile independent)|
| | | |P 0284 MPRO_FG_PosUnit = 1 μm = 1/1000 mm = 10/1000 rev (output) = 30/1000 rev (motor)|
|290|MPRO_FG_AccUnit| |Unit for acceleration and deceleration values|
|291|MPRO_FG_AccExp| |Factor group: Acceleration unit exponent (profile independent)|
|292|MPRO_FG_AccScaleFac| |Factor group: Acceleration unit scaling factor (profile independent)|
| | | |P 0287 MPRO_FG_SpeedUnit = 1 m/s = 1000 mm/s = 10 000 rev/s (output) = 30 000 rev/s (motor)*60 (min) = 1 800 000 rev/min|
|293|MPRO_FG_TorqueUnit| |Unit for torque values|
|294|MPRO_FG_TorqueExp| |Factor group: Torque unit exponent (profile independent)|
|295|MPRO_FG_TorqueScaleFac| |Factor group: Torque unit scaling factor (profile independent)|
|298|MPRO_FG_UsrActPosDly|ms|Actual position delay (multiple of CON_PConTS)|

# Table 8.14: “Standardization / units - Custom” parameters (continue)

|ID|Name|Function|Standard rotary system|
|---|---|---|---|
|270|MPRO_FG_Nom|Numerator|1[rev]|
|271|PosNom|Increments per revolution|1048576 [incr/rev]|
|272|MPRO_FG_Den|Denominator|360° [POS]|
|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|274|MPRO_FG_SpeedFac|Speed factor|1[rpm]|
|275|MPRO_FG_AccFac|Acceleration factor|1/60 = 0.01667 [rpm/s]|

# Table 8.15: Parameters for user-defined scaling (rotary system)

1 motor revolution corresponds to 360° or 1048576 increments

Speed in [rpm]

Acceleration in [rpm/s]

Positioning in [°degrees]

Given

Position unit P 0284 MPRO_FG_PosUnit = [μm]

Speed unit P 0287 MPRO_FG_SpeedUnit = [m/s]

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 239

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 240

|ID|Name|Function|Standard|ID|Name|Function|Standard|
|---|---|---|---|---|---|---|---|
|284|MPRO_FG_PosUnit|Unit for position value|mdegree|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|287|MPRO_FG_SpeetUnit|Unit for speed value|rev/min|1.875 rps| | | |
| | |Unit for| |274|MPRO_FG_SpeedFac|Speed factor|mm/s, 1/32 mm = 0.03125 rps²|
| | | | | | | |s = 1.875 rps|
| | | | | | | |1/32 mm =|
|275|MPRO_FG_AccFac|Acceleration factor|0.03125 rps²| | | |corresponding to 1mm/s²|

# 8.2.3.2 Example of scaling of a linear motor

Presetting:

- One revolution corresponds to 32 mm pitch
- Travel in [μm]
- Speed in [mm/sec]
- Acceleration in [mm/s²]

|ID|Name|Function|Standard|
|---|---|---|---|
|270|MPRO_FG_PosNom|Increments per revolution|1048576 [incr/rev]|
|271|MPRO_FG_Nom|Numerator|1 [rev]|
|272|MPRO_FG_Den|Denominator|32000 μm|

# Table 8.16: Parameters for user-defined scaling (linear system)

# 8.3 Basic settings

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|144|0|MPRO_DRVCOM_AUTO_START| |DriveCom: Auto start of system|
|159|0|MPRO_CTRL_SEL| |Motion profile selection|
|165|0|MPRO_REF_SEL| |Motion profile selection|
|166|0|MPRO_REF_JTIME|ms|Motion profile jerk time|
|167|0|MPRO_REF_OVR|%|Motion profile override factor|
|223|0|MPRO_REF_Config| |Motion profile: Config of specific profiling behaviour|
|301|0|CON_REF_Mode| |Mode selection of setpoint profiling|
|306|0|CON_IpRefTS|ms|Sampling time (for interpolation)|
|335|0|CON_SCON_DirLock| |Direction lock for speed reference value|
|370|0|CON_IP| |Interpolation type|
|755|0|MPRO_FG_RefPosFilType| |Position reference filter type|
|756| |MPRO_FG_RefPosFilData| |Reference position filter data|
|756|0|RefFil_TimeConst|ms|Position reference filter time constant (PT1/PT2/AVG)|
|756|1|RefFil_DampConst| |Position reference filter damping constant|

Image 8.24: “Basic settings” screen

Interpolation

Table 8.17: “Motion profile - Basic settings” parameters

See Section ""Interpolation"" on page 246.

# 8.3.1 PG mode with speed control

NOTE

- The reference filters are initialized only after the control has been re-enabled or by a device restart.
- Select reference source
- Motion profile adaptation: scaling, ramps and smoothing time.
- In reference processing by way of the profile generator the fine interpolator is always in use.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 241

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 242

# Profile Generator with speed control:

- Control mode P 300[0] - CON_CfgCon = speed control
- Under Profile select the profile generator (PG) P 301[0] - CON_Ref_Mode = PG(0)
- Selection of reference source/>P 165[0] - MPRO_REF_SEL
- Scaling
- Select jerk conditions
- Set stop ramps, smoothing, filter, homing

# 8.3.2 PG mode with position control

Travel commands are transmitted to the internal profile generator (see Section ""Basic settings"" on page 241). It is composed of the following items:

- Target position
- Maximum travel speed
- Maximum acceleration
- Maximum deceleration

The profile generator uses the P 166[0] - MPRO_REF_JTIME jerk values and a P 167[0] - MPRO_REF_OVR override factor for the travel speed in order to generate the trajectory for the position setpoint that will take the least amount of time, taking all limitations into account.

The position references are then processed with the selected interpolation method.

# 8 Motion profile

# 8.3.2.1 Motion profile / Basic settings

The position references are used to generate pre-control values for speed Interpolation (IP) mode and acceleration. These are scanned at the sampling time of the position controller (normally 125 μs) and switched to the control loops.

Reference values are interpolated in linear mode before being switched to the control loops.

- The profile generator is inactive.
- Ramps and smoothing are inactive.
- The reference values are switched directly to the closed-loop control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# Speed control in IP mode:

- Control mode P 300[0] - CON_CfgCon = speed control or setting via Modes of Operation (CAN, EtherCAT®)
- Selection of reference source P 165[0] - MPRO_REF_SEL

Image 8.27: PG mode with position control

# 8.3.3 IP mode with speed control

In IP (Interpolation) mode the appropriate reference source and correct scaling of units are selected for the speed reference before the reference is passed via the interpolator to the control. Linear interpolation is always applied in this process.

",How are relative driving jobs handled when using the indexing table function in the 'MSD ServoDrive - DeviceHelp' document?,"Relative driving jobs may relate to the current target position or the actual position, allowing for travel distances greater than the circumferential length.","The document explains that relative movements can exceed the circumferential length, with the drive calculating the final position based on revolutions.","In 'MSD ServoDrive - DeviceHelp', relative driving jobs are shown to accommodate extended travel by completing full revolutions before stopping at the remainder.","Relative tasks enable the drive to move beyond a single rotation, adjusting the stop position based on the total angular distance specified.","The 'MSD ServoDrive - DeviceHelp' illustrates how relative movements account for multiple rotations, ending at the precise angle after completing full circles."
4,msd_servo_drive.txt,68,0ebe04756316c46352786c22f8d48336e344cbf35f5f17b182c6e17a12fed3eb,"The same applies to the negative direction. On reaching 0° the actual position is set to 360°.

Image 8.9: “‘Clockwise rotation’ process option” screen

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 227

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 228

# 8.2.1.3 Process option “Path - optimized”

Not path-optimized Optimized path

An absolute target position is always approached by the shortest path. Relative movements cannot be carried out with the “path – optimized” mode.

|Position range|Example|Effect|
|---|---|---|
|Target position < 120°< 360°|The drive moves to the target position|within 360°.|
|Target position = 120° = 120°|The drive remains in position.| |
|Target position > 600° - 360° =|The drive moves to the position within|240° (target position - (n x circumferential length))|

Table 8.3: Path-optimized movement

Table 8.4: Path optimization diagram

# 8.2.1.4 Infinite motion task when using indexing table function

In the case of infinite motion tasks the drive moves at constant speed, regardless of a transmitted target position, until the mode is deactivated or is overwritten by a new motion task. On switching to the next driving set (absolute or relative), the new target position is approached in the current direction of movement. A preset path optimization is ignored when the indexing table is active.

# 8.2.1.5 Relative motion task when using indexing table function

Relative driving jobs may relate to the current target position or to the actual position. For more information see ""Field Buses"" User Manuals. In the case of relative driving jobs greater travel distances than the circumferential length are possible.

Example without gear ratio:

- Circumferential length = 360°
- Relative target position = 800°
- Start position = 0°
- Movement: The drive will complete two motor revolutions (720°) and stop at the 3rd revolution at 80° (800° - 720°).

# 8.2.2 SERCOS

When using the SERCOS profile, scaling of the units is termed weighting. The weighting describes the physical unit and the exponent with which the numerical values of the parameters exchanged between the master control system and the drives are to be interpreted. The method of weighting is defined by the parameters for position, speed, force/torque and acceleration weighting.

**Table 8.5: “Standardization / units - SERCOS” parameter**
|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|MPRO_FG_Config| |Factor group configuration|
|10043|COM_SER_| |Speed polarity parameter|
|10044|PolaritySpeed| | |
|10045|COM_SER_| |Velocity data scaling type|
|10046|COM_SER_| |Velocity data scaling factor|
|10055|0| |ScaleExpSpeed|
|10076|COM_SER_| |Position data scaling type|
|10077|COM_SER_| |Linear position data scaling factor|
|10078|COM_SER_| |Linear position data scaling exponent|
|10085|COM_SER_| |Torque polarity parameter|

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 229

# 8 Motion profile

# 8 Motion profile

MOOG                          ID No.:CB40859-001 Date:11/2020                                                                                       MSD ServoDrive   - DeviceHelp     230

|ID|Index Name|Unit|Description|
|---|---|---|---|
|10086|COM_SER_| |Torque/force data scaling type|
|10093|COM_SER_| |Torque/force data scaling factor|
|10094|COM_SER_| |Torque/force data scaling exponent|
|10103|COM_SER_ModuloVal|mDegree|Modulo value|
|10121|COM_SER_| |Input revolutions of load gear|
|10122|COM_SER_| |Output revolutions of load gear|
|10123|COM_SER_FeedConst|um/rev|Feed constant|
|10160|COM_SER_| |Acceleration data scaling type|
|10161|COM_SER_| |Acceleration data scaling factor|
|10162|COM_SER_| |Acceleration data scaling exponent|

Table 8.5:  “Standardization / units - SERCOS” parameter (continue)

Image 8.11: “Standardization profile - SERCOS - Position unit (1)” screen

# Image 8.12: “Standardization profile - SERCOS - Position unit (2)” screen

# Image 8.13: Position data weighting method

# Position polarity

The polarity of the position data can be inverted according to the application. An increasing actual position value indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|m|1|E-7|

Table 8.6: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 231

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

232

# Rotary weighting

# 8.2.2.2 Speed

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|Degrees|3,600,000|0.0001 μm|

Table 8.7: Weighting for rotary motion (default setting)

Image 8.14: “Standardization profile - SERCOS - Speed (1)” screen

# Image 8.15: “Standardization profile - SERCOS - Speed (2)” screen

The “Speed data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.16: Speed data weighting method

# Speed polarity

The polarity of the speed data can be inverted according to the application. A positive speed reference indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|m/min|1|
| |0.001 m/min|

# Table 8.8: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 233

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

Rotary weighting

# 8.2.2.3 Unit of torque/power

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|Degrees|3,600,000|
| |0.001 m/min|

Table 8.9: Weighting for rotary motion (default setting)

Image 8.17: “Standardization profile - SERCOS torque/power(1)” screen

# Image 8.18: “Standardization profile - SERCOS torque/power(2)” screen

# Image 8.19: Force/torque weighting method

The “Power/torque weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here. In percentage weighting the permanently permissible standstill torque of the motor is used as the reference value. All torque/force data is given in [%] with one decimal place.

# Torque polarity

The polarity of the torque can be inverted according to the application. A positive torque reference indicates clockwise rotation (looking at the motor shaft).

**Table 8.10: Weighting for linear motion (default setting)**
|Unit|Weighting factor|
|---|---|
|Nm|1|

LSB = Unit * Exponent

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 235

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 236

# 8.2.2.4 Unit of acceleration

|Weighting|Preferential weighting|Parameter weighting|
|---|---|---|
|Unit|factor|(LSB)|
|Nm|1|0.01 Nm|
|LSB = Unit * Exponent|LSB = Unit * Exponent|LSB = Unit * Exponent|

Table 8.11: Weighting for rotary motion (default setting)

Image 8.20: “Standardization profile - SERCOS - Acceleration(1)” screen

# Image 8.21: “Standardization profile - SERCOS - Acceleration(2)” screen

The ""Acceleration data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.22: Acceleration weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|m/s2|1|E-6|

Table 8.12: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 237

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 238

# Rotary weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|rad/s2|3,600,000|E-3|

Table 8.13: Weighting for rotary motion (default setting)

# 8.2.2.5 Modulo weighting

If Modulo (indexing table application) is to be selected (see Section ""As linear"" process option"" on page 227), the number range of the position data (modulo value) must be entered. When the modulo value is exceeded the actual position is reset to 0.

Image 8.23: Schematic of user-defined scaling

# 8.2.3 User defined

|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|0 MPRO_FG_Config| |Factor group configuration|
|270|0 MPRO_FG_PosNorm|incr/rev|internal position resolution|
|271|0 MPRO_FG_Num|rev|Factor group: Numerator (profile independent)|
|272|0 MPRO_FG_Den|mDegree|Factor group: denominator (profile independent)|
|273|0 MPRO_FG_Reverse| |Factor group: Position and speed reverse (profile independent)|
|274|0 MPRO_FG_SpeedFac|rev/min/SPEED|Factor group: speed factor (profile independent)|
|275|0 MPRO_FG_AccFac|rev/s2/ACC|Factor group: acceleration factor (profile independent)|
|284|0 MPRO_FG_PosUnit| |Unit for position values|
|285|0 MPRO_FG_PosExp| |Factor group: Position unit exponent (profile independent)|
|286|0 MPRO_FG_| |Factor group: Position unit scaling factor|

Table 8.14: “Standardization / units - Custom” parameters

# 8 Motion profile

|ID|Index Name|Unit|Description|
|---|---|---|---|
|0290|MPRO_FG_AccUnit|[m/s²]|Acceleration unit|
| |PosScaleFac| |(profile independent)|
| | | |Feed constant: 0.1 mm = 1 rev|
|287|MPRO_FG_SpeedUnit| |Unit for speed values|
| | | |Gearing: 1 drive revolution = 3 motor revs|
|288|MPRO_FG_SpeedExp| |Factor group: Velocity unit exponent (profile independent)|
|289|MPRO_FG_SpeedScaleFac| |Factor group: Velocity unit scaling factor (profile independent)|
| | | |P 0284 MPRO_FG_PosUnit = 1 μm = 1/1000 mm = 10/1000 rev (output) = 30/1000 rev (motor)|
|290|MPRO_FG_AccUnit| |Unit for acceleration and deceleration values|
|291|MPRO_FG_AccExp| |Factor group: Acceleration unit exponent (profile independent)|
|292|MPRO_FG_AccScaleFac| |Factor group: Acceleration unit scaling factor (profile independent)|
| | | |P 0287 MPRO_FG_SpeedUnit = 1 m/s = 1000 mm/s = 10 000 rev/s (output) = 30 000 rev/s (motor)*60 (min) = 1 800 000 rev/min|
|293|MPRO_FG_TorqueUnit| |Unit for torque values|
|294|MPRO_FG_TorqueExp| |Factor group: Torque unit exponent (profile independent)|
|295|MPRO_FG_TorqueScaleFac| |Factor group: Torque unit scaling factor (profile independent)|
|298|MPRO_FG_UsrActPosDly|ms|Actual position delay (multiple of CON_PConTS)|

# Table 8.14: “Standardization / units - Custom” parameters (continue)

|ID|Name|Function|Standard rotary system|
|---|---|---|---|
|270|MPRO_FG_Nom|Numerator|1[rev]|
|271|PosNom|Increments per revolution|1048576 [incr/rev]|
|272|MPRO_FG_Den|Denominator|360° [POS]|
|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|274|MPRO_FG_SpeedFac|Speed factor|1[rpm]|
|275|MPRO_FG_AccFac|Acceleration factor|1/60 = 0.01667 [rpm/s]|

# Table 8.15: Parameters for user-defined scaling (rotary system)

1 motor revolution corresponds to 360° or 1048576 increments

Speed in [rpm]

Acceleration in [rpm/s]

Positioning in [°degrees]

Given

Position unit P 0284 MPRO_FG_PosUnit = [μm]

Speed unit P 0287 MPRO_FG_SpeedUnit = [m/s]

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 239

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 240

|ID|Name|Function|Standard|ID|Name|Function|Standard|
|---|---|---|---|---|---|---|---|
|284|MPRO_FG_PosUnit|Unit for position value|mdegree|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|287|MPRO_FG_SpeetUnit|Unit for speed value|rev/min|1.875 rps| | | |
| | |Unit for| |274|MPRO_FG_SpeedFac|Speed factor|mm/s, 1/32 mm = 0.03125 rps²|
| | | | | | | |s = 1.875 rps|
| | | | | | | |1/32 mm =|
|275|MPRO_FG_AccFac|Acceleration factor|0.03125 rps²| | | |corresponding to 1mm/s²|

# 8.2.3.2 Example of scaling of a linear motor

Presetting:

- One revolution corresponds to 32 mm pitch
- Travel in [μm]
- Speed in [mm/sec]
- Acceleration in [mm/s²]

|ID|Name|Function|Standard|
|---|---|---|---|
|270|MPRO_FG_PosNom|Increments per revolution|1048576 [incr/rev]|
|271|MPRO_FG_Nom|Numerator|1 [rev]|
|272|MPRO_FG_Den|Denominator|32000 μm|

# Table 8.16: Parameters for user-defined scaling (linear system)

# 8.3 Basic settings

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|144|0|MPRO_DRVCOM_AUTO_START| |DriveCom: Auto start of system|
|159|0|MPRO_CTRL_SEL| |Motion profile selection|
|165|0|MPRO_REF_SEL| |Motion profile selection|
|166|0|MPRO_REF_JTIME|ms|Motion profile jerk time|
|167|0|MPRO_REF_OVR|%|Motion profile override factor|
|223|0|MPRO_REF_Config| |Motion profile: Config of specific profiling behaviour|
|301|0|CON_REF_Mode| |Mode selection of setpoint profiling|
|306|0|CON_IpRefTS|ms|Sampling time (for interpolation)|
|335|0|CON_SCON_DirLock| |Direction lock for speed reference value|
|370|0|CON_IP| |Interpolation type|
|755|0|MPRO_FG_RefPosFilType| |Position reference filter type|
|756| |MPRO_FG_RefPosFilData| |Reference position filter data|
|756|0|RefFil_TimeConst|ms|Position reference filter time constant (PT1/PT2/AVG)|
|756|1|RefFil_DampConst| |Position reference filter damping constant|

Image 8.24: “Basic settings” screen

Interpolation

Table 8.17: “Motion profile - Basic settings” parameters

See Section ""Interpolation"" on page 246.

# 8.3.1 PG mode with speed control

NOTE

- The reference filters are initialized only after the control has been re-enabled or by a device restart.
- Select reference source
- Motion profile adaptation: scaling, ramps and smoothing time.
- In reference processing by way of the profile generator the fine interpolator is always in use.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 241

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 242

# Profile Generator with speed control:

- Control mode P 300[0] - CON_CfgCon = speed control
- Under Profile select the profile generator (PG) P 301[0] - CON_Ref_Mode = PG(0)
- Selection of reference source/>P 165[0] - MPRO_REF_SEL
- Scaling
- Select jerk conditions
- Set stop ramps, smoothing, filter, homing

# 8.3.2 PG mode with position control

Travel commands are transmitted to the internal profile generator (see Section ""Basic settings"" on page 241). It is composed of the following items:

- Target position
- Maximum travel speed
- Maximum acceleration
- Maximum deceleration

The profile generator uses the P 166[0] - MPRO_REF_JTIME jerk values and a P 167[0] - MPRO_REF_OVR override factor for the travel speed in order to generate the trajectory for the position setpoint that will take the least amount of time, taking all limitations into account.

The position references are then processed with the selected interpolation method.

# 8 Motion profile

# 8.3.2.1 Motion profile / Basic settings

The position references are used to generate pre-control values for speed Interpolation (IP) mode and acceleration. These are scanned at the sampling time of the position controller (normally 125 μs) and switched to the control loops.

Reference values are interpolated in linear mode before being switched to the control loops.

- The profile generator is inactive.
- Ramps and smoothing are inactive.
- The reference values are switched directly to the closed-loop control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# Speed control in IP mode:

- Control mode P 300[0] - CON_CfgCon = speed control or setting via Modes of Operation (CAN, EtherCAT®)
- Selection of reference source P 165[0] - MPRO_REF_SEL

Image 8.27: PG mode with position control

# 8.3.3 IP mode with speed control

In IP (Interpolation) mode the appropriate reference source and correct scaling of units are selected for the speed reference before the reference is passed via the interpolator to the control. Linear interpolation is always applied in this process.

",What is the purpose of weighting in the SERCOS profile according to the 'MSD ServoDrive - DeviceHelp' document?,"Weighting in the SERCOS profile scales the units, defining how numerical values of parameters are interpreted between the master control system and the drives.",The document states that weighting describes the physical unit and exponent for interpreting parameter values in SERCOS communications.,"According to 'MSD ServoDrive - DeviceHelp', weighting ensures accurate scaling and interpretation of position, speed, torque, and acceleration data.",SERCOS profile weighting adjusts the numerical values' representation to match the physical units required by the application.,The 'MSD ServoDrive - DeviceHelp' details how weighting factors translate parameter data into meaningful units for system operation.
5,msd_servo_drive.txt,68,0ebe04756316c46352786c22f8d48336e344cbf35f5f17b182c6e17a12fed3eb,"The same applies to the negative direction. On reaching 0° the actual position is set to 360°.

Image 8.9: “‘Clockwise rotation’ process option” screen

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 227

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 228

# 8.2.1.3 Process option “Path - optimized”

Not path-optimized Optimized path

An absolute target position is always approached by the shortest path. Relative movements cannot be carried out with the “path – optimized” mode.

|Position range|Example|Effect|
|---|---|---|
|Target position < 120°< 360°|The drive moves to the target position|within 360°.|
|Target position = 120° = 120°|The drive remains in position.| |
|Target position > 600° - 360° =|The drive moves to the position within|240° (target position - (n x circumferential length))|

Table 8.3: Path-optimized movement

Table 8.4: Path optimization diagram

# 8.2.1.4 Infinite motion task when using indexing table function

In the case of infinite motion tasks the drive moves at constant speed, regardless of a transmitted target position, until the mode is deactivated or is overwritten by a new motion task. On switching to the next driving set (absolute or relative), the new target position is approached in the current direction of movement. A preset path optimization is ignored when the indexing table is active.

# 8.2.1.5 Relative motion task when using indexing table function

Relative driving jobs may relate to the current target position or to the actual position. For more information see ""Field Buses"" User Manuals. In the case of relative driving jobs greater travel distances than the circumferential length are possible.

Example without gear ratio:

- Circumferential length = 360°
- Relative target position = 800°
- Start position = 0°
- Movement: The drive will complete two motor revolutions (720°) and stop at the 3rd revolution at 80° (800° - 720°).

# 8.2.2 SERCOS

When using the SERCOS profile, scaling of the units is termed weighting. The weighting describes the physical unit and the exponent with which the numerical values of the parameters exchanged between the master control system and the drives are to be interpreted. The method of weighting is defined by the parameters for position, speed, force/torque and acceleration weighting.

**Table 8.5: “Standardization / units - SERCOS” parameter**
|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|MPRO_FG_Config| |Factor group configuration|
|10043|COM_SER_| |Speed polarity parameter|
|10044|PolaritySpeed| | |
|10045|COM_SER_| |Velocity data scaling type|
|10046|COM_SER_| |Velocity data scaling factor|
|10055|0| |ScaleExpSpeed|
|10076|COM_SER_| |Position data scaling type|
|10077|COM_SER_| |Linear position data scaling factor|
|10078|COM_SER_| |Linear position data scaling exponent|
|10085|COM_SER_| |Torque polarity parameter|

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 229

# 8 Motion profile

# 8 Motion profile

MOOG                          ID No.:CB40859-001 Date:11/2020                                                                                       MSD ServoDrive   - DeviceHelp     230

|ID|Index Name|Unit|Description|
|---|---|---|---|
|10086|COM_SER_| |Torque/force data scaling type|
|10093|COM_SER_| |Torque/force data scaling factor|
|10094|COM_SER_| |Torque/force data scaling exponent|
|10103|COM_SER_ModuloVal|mDegree|Modulo value|
|10121|COM_SER_| |Input revolutions of load gear|
|10122|COM_SER_| |Output revolutions of load gear|
|10123|COM_SER_FeedConst|um/rev|Feed constant|
|10160|COM_SER_| |Acceleration data scaling type|
|10161|COM_SER_| |Acceleration data scaling factor|
|10162|COM_SER_| |Acceleration data scaling exponent|

Table 8.5:  “Standardization / units - SERCOS” parameter (continue)

Image 8.11: “Standardization profile - SERCOS - Position unit (1)” screen

# Image 8.12: “Standardization profile - SERCOS - Position unit (2)” screen

# Image 8.13: Position data weighting method

# Position polarity

The polarity of the position data can be inverted according to the application. An increasing actual position value indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|m|1|E-7|

Table 8.6: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 231

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

232

# Rotary weighting

# 8.2.2.2 Speed

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|Degrees|3,600,000|0.0001 μm|

Table 8.7: Weighting for rotary motion (default setting)

Image 8.14: “Standardization profile - SERCOS - Speed (1)” screen

# Image 8.15: “Standardization profile - SERCOS - Speed (2)” screen

The “Speed data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.16: Speed data weighting method

# Speed polarity

The polarity of the speed data can be inverted according to the application. A positive speed reference indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|m/min|1|
| |0.001 m/min|

# Table 8.8: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 233

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

Rotary weighting

# 8.2.2.3 Unit of torque/power

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|Degrees|3,600,000|
| |0.001 m/min|

Table 8.9: Weighting for rotary motion (default setting)

Image 8.17: “Standardization profile - SERCOS torque/power(1)” screen

# Image 8.18: “Standardization profile - SERCOS torque/power(2)” screen

# Image 8.19: Force/torque weighting method

The “Power/torque weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here. In percentage weighting the permanently permissible standstill torque of the motor is used as the reference value. All torque/force data is given in [%] with one decimal place.

# Torque polarity

The polarity of the torque can be inverted according to the application. A positive torque reference indicates clockwise rotation (looking at the motor shaft).

**Table 8.10: Weighting for linear motion (default setting)**
|Unit|Weighting factor|
|---|---|
|Nm|1|

LSB = Unit * Exponent

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 235

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 236

# 8.2.2.4 Unit of acceleration

|Weighting|Preferential weighting|Parameter weighting|
|---|---|---|
|Unit|factor|(LSB)|
|Nm|1|0.01 Nm|
|LSB = Unit * Exponent|LSB = Unit * Exponent|LSB = Unit * Exponent|

Table 8.11: Weighting for rotary motion (default setting)

Image 8.20: “Standardization profile - SERCOS - Acceleration(1)” screen

# Image 8.21: “Standardization profile - SERCOS - Acceleration(2)” screen

The ""Acceleration data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.22: Acceleration weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|m/s2|1|E-6|

Table 8.12: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 237

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 238

# Rotary weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|rad/s2|3,600,000|E-3|

Table 8.13: Weighting for rotary motion (default setting)

# 8.2.2.5 Modulo weighting

If Modulo (indexing table application) is to be selected (see Section ""As linear"" process option"" on page 227), the number range of the position data (modulo value) must be entered. When the modulo value is exceeded the actual position is reset to 0.

Image 8.23: Schematic of user-defined scaling

# 8.2.3 User defined

|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|0 MPRO_FG_Config| |Factor group configuration|
|270|0 MPRO_FG_PosNorm|incr/rev|internal position resolution|
|271|0 MPRO_FG_Num|rev|Factor group: Numerator (profile independent)|
|272|0 MPRO_FG_Den|mDegree|Factor group: denominator (profile independent)|
|273|0 MPRO_FG_Reverse| |Factor group: Position and speed reverse (profile independent)|
|274|0 MPRO_FG_SpeedFac|rev/min/SPEED|Factor group: speed factor (profile independent)|
|275|0 MPRO_FG_AccFac|rev/s2/ACC|Factor group: acceleration factor (profile independent)|
|284|0 MPRO_FG_PosUnit| |Unit for position values|
|285|0 MPRO_FG_PosExp| |Factor group: Position unit exponent (profile independent)|
|286|0 MPRO_FG_| |Factor group: Position unit scaling factor|

Table 8.14: “Standardization / units - Custom” parameters

# 8 Motion profile

|ID|Index Name|Unit|Description|
|---|---|---|---|
|0290|MPRO_FG_AccUnit|[m/s²]|Acceleration unit|
| |PosScaleFac| |(profile independent)|
| | | |Feed constant: 0.1 mm = 1 rev|
|287|MPRO_FG_SpeedUnit| |Unit for speed values|
| | | |Gearing: 1 drive revolution = 3 motor revs|
|288|MPRO_FG_SpeedExp| |Factor group: Velocity unit exponent (profile independent)|
|289|MPRO_FG_SpeedScaleFac| |Factor group: Velocity unit scaling factor (profile independent)|
| | | |P 0284 MPRO_FG_PosUnit = 1 μm = 1/1000 mm = 10/1000 rev (output) = 30/1000 rev (motor)|
|290|MPRO_FG_AccUnit| |Unit for acceleration and deceleration values|
|291|MPRO_FG_AccExp| |Factor group: Acceleration unit exponent (profile independent)|
|292|MPRO_FG_AccScaleFac| |Factor group: Acceleration unit scaling factor (profile independent)|
| | | |P 0287 MPRO_FG_SpeedUnit = 1 m/s = 1000 mm/s = 10 000 rev/s (output) = 30 000 rev/s (motor)*60 (min) = 1 800 000 rev/min|
|293|MPRO_FG_TorqueUnit| |Unit for torque values|
|294|MPRO_FG_TorqueExp| |Factor group: Torque unit exponent (profile independent)|
|295|MPRO_FG_TorqueScaleFac| |Factor group: Torque unit scaling factor (profile independent)|
|298|MPRO_FG_UsrActPosDly|ms|Actual position delay (multiple of CON_PConTS)|

# Table 8.14: “Standardization / units - Custom” parameters (continue)

|ID|Name|Function|Standard rotary system|
|---|---|---|---|
|270|MPRO_FG_Nom|Numerator|1[rev]|
|271|PosNom|Increments per revolution|1048576 [incr/rev]|
|272|MPRO_FG_Den|Denominator|360° [POS]|
|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|274|MPRO_FG_SpeedFac|Speed factor|1[rpm]|
|275|MPRO_FG_AccFac|Acceleration factor|1/60 = 0.01667 [rpm/s]|

# Table 8.15: Parameters for user-defined scaling (rotary system)

1 motor revolution corresponds to 360° or 1048576 increments

Speed in [rpm]

Acceleration in [rpm/s]

Positioning in [°degrees]

Given

Position unit P 0284 MPRO_FG_PosUnit = [μm]

Speed unit P 0287 MPRO_FG_SpeedUnit = [m/s]

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 239

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 240

|ID|Name|Function|Standard|ID|Name|Function|Standard|
|---|---|---|---|---|---|---|---|
|284|MPRO_FG_PosUnit|Unit for position value|mdegree|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|287|MPRO_FG_SpeetUnit|Unit for speed value|rev/min|1.875 rps| | | |
| | |Unit for| |274|MPRO_FG_SpeedFac|Speed factor|mm/s, 1/32 mm = 0.03125 rps²|
| | | | | | | |s = 1.875 rps|
| | | | | | | |1/32 mm =|
|275|MPRO_FG_AccFac|Acceleration factor|0.03125 rps²| | | |corresponding to 1mm/s²|

# 8.2.3.2 Example of scaling of a linear motor

Presetting:

- One revolution corresponds to 32 mm pitch
- Travel in [μm]
- Speed in [mm/sec]
- Acceleration in [mm/s²]

|ID|Name|Function|Standard|
|---|---|---|---|
|270|MPRO_FG_PosNom|Increments per revolution|1048576 [incr/rev]|
|271|MPRO_FG_Nom|Numerator|1 [rev]|
|272|MPRO_FG_Den|Denominator|32000 μm|

# Table 8.16: Parameters for user-defined scaling (linear system)

# 8.3 Basic settings

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|144|0|MPRO_DRVCOM_AUTO_START| |DriveCom: Auto start of system|
|159|0|MPRO_CTRL_SEL| |Motion profile selection|
|165|0|MPRO_REF_SEL| |Motion profile selection|
|166|0|MPRO_REF_JTIME|ms|Motion profile jerk time|
|167|0|MPRO_REF_OVR|%|Motion profile override factor|
|223|0|MPRO_REF_Config| |Motion profile: Config of specific profiling behaviour|
|301|0|CON_REF_Mode| |Mode selection of setpoint profiling|
|306|0|CON_IpRefTS|ms|Sampling time (for interpolation)|
|335|0|CON_SCON_DirLock| |Direction lock for speed reference value|
|370|0|CON_IP| |Interpolation type|
|755|0|MPRO_FG_RefPosFilType| |Position reference filter type|
|756| |MPRO_FG_RefPosFilData| |Reference position filter data|
|756|0|RefFil_TimeConst|ms|Position reference filter time constant (PT1/PT2/AVG)|
|756|1|RefFil_DampConst| |Position reference filter damping constant|

Image 8.24: “Basic settings” screen

Interpolation

Table 8.17: “Motion profile - Basic settings” parameters

See Section ""Interpolation"" on page 246.

# 8.3.1 PG mode with speed control

NOTE

- The reference filters are initialized only after the control has been re-enabled or by a device restart.
- Select reference source
- Motion profile adaptation: scaling, ramps and smoothing time.
- In reference processing by way of the profile generator the fine interpolator is always in use.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 241

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 242

# Profile Generator with speed control:

- Control mode P 300[0] - CON_CfgCon = speed control
- Under Profile select the profile generator (PG) P 301[0] - CON_Ref_Mode = PG(0)
- Selection of reference source/>P 165[0] - MPRO_REF_SEL
- Scaling
- Select jerk conditions
- Set stop ramps, smoothing, filter, homing

# 8.3.2 PG mode with position control

Travel commands are transmitted to the internal profile generator (see Section ""Basic settings"" on page 241). It is composed of the following items:

- Target position
- Maximum travel speed
- Maximum acceleration
- Maximum deceleration

The profile generator uses the P 166[0] - MPRO_REF_JTIME jerk values and a P 167[0] - MPRO_REF_OVR override factor for the travel speed in order to generate the trajectory for the position setpoint that will take the least amount of time, taking all limitations into account.

The position references are then processed with the selected interpolation method.

# 8 Motion profile

# 8.3.2.1 Motion profile / Basic settings

The position references are used to generate pre-control values for speed Interpolation (IP) mode and acceleration. These are scanned at the sampling time of the position controller (normally 125 μs) and switched to the control loops.

Reference values are interpolated in linear mode before being switched to the control loops.

- The profile generator is inactive.
- Ramps and smoothing are inactive.
- The reference values are switched directly to the closed-loop control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# Speed control in IP mode:

- Control mode P 300[0] - CON_CfgCon = speed control or setting via Modes of Operation (CAN, EtherCAT®)
- Selection of reference source P 165[0] - MPRO_REF_SEL

Image 8.27: PG mode with position control

# 8.3.3 IP mode with speed control

In IP (Interpolation) mode the appropriate reference source and correct scaling of units are selected for the speed reference before the reference is passed via the interpolator to the control. Linear interpolation is always applied in this process.

",How is the polarity of position data determined in the SERCOS profile as per the 'MSD ServoDrive - DeviceHelp' document?,"The polarity of position data can be inverted based on the application, with an increasing value indicating clockwise rotation when viewing the motor shaft.","The document specifies that position polarity is configurable, with positive values typically representing clockwise movement.","In 'MSD ServoDrive - DeviceHelp', position data polarity is adjustable to suit the motor's rotational direction requirements.","Clockwise rotation is associated with rising position values, but this can be reversed to match the application's needs.",The 'MSD ServoDrive - DeviceHelp' explains that position polarity settings align the data interpretation with the desired rotational direction.
6,msd_servo_drive.txt,68,0ebe04756316c46352786c22f8d48336e344cbf35f5f17b182c6e17a12fed3eb,"The same applies to the negative direction. On reaching 0° the actual position is set to 360°.

Image 8.9: “‘Clockwise rotation’ process option” screen

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 227

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 228

# 8.2.1.3 Process option “Path - optimized”

Not path-optimized Optimized path

An absolute target position is always approached by the shortest path. Relative movements cannot be carried out with the “path – optimized” mode.

|Position range|Example|Effect|
|---|---|---|
|Target position < 120°< 360°|The drive moves to the target position|within 360°.|
|Target position = 120° = 120°|The drive remains in position.| |
|Target position > 600° - 360° =|The drive moves to the position within|240° (target position - (n x circumferential length))|

Table 8.3: Path-optimized movement

Table 8.4: Path optimization diagram

# 8.2.1.4 Infinite motion task when using indexing table function

In the case of infinite motion tasks the drive moves at constant speed, regardless of a transmitted target position, until the mode is deactivated or is overwritten by a new motion task. On switching to the next driving set (absolute or relative), the new target position is approached in the current direction of movement. A preset path optimization is ignored when the indexing table is active.

# 8.2.1.5 Relative motion task when using indexing table function

Relative driving jobs may relate to the current target position or to the actual position. For more information see ""Field Buses"" User Manuals. In the case of relative driving jobs greater travel distances than the circumferential length are possible.

Example without gear ratio:

- Circumferential length = 360°
- Relative target position = 800°
- Start position = 0°
- Movement: The drive will complete two motor revolutions (720°) and stop at the 3rd revolution at 80° (800° - 720°).

# 8.2.2 SERCOS

When using the SERCOS profile, scaling of the units is termed weighting. The weighting describes the physical unit and the exponent with which the numerical values of the parameters exchanged between the master control system and the drives are to be interpreted. The method of weighting is defined by the parameters for position, speed, force/torque and acceleration weighting.

**Table 8.5: “Standardization / units - SERCOS” parameter**
|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|MPRO_FG_Config| |Factor group configuration|
|10043|COM_SER_| |Speed polarity parameter|
|10044|PolaritySpeed| | |
|10045|COM_SER_| |Velocity data scaling type|
|10046|COM_SER_| |Velocity data scaling factor|
|10055|0| |ScaleExpSpeed|
|10076|COM_SER_| |Position data scaling type|
|10077|COM_SER_| |Linear position data scaling factor|
|10078|COM_SER_| |Linear position data scaling exponent|
|10085|COM_SER_| |Torque polarity parameter|

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 229

# 8 Motion profile

# 8 Motion profile

MOOG                          ID No.:CB40859-001 Date:11/2020                                                                                       MSD ServoDrive   - DeviceHelp     230

|ID|Index Name|Unit|Description|
|---|---|---|---|
|10086|COM_SER_| |Torque/force data scaling type|
|10093|COM_SER_| |Torque/force data scaling factor|
|10094|COM_SER_| |Torque/force data scaling exponent|
|10103|COM_SER_ModuloVal|mDegree|Modulo value|
|10121|COM_SER_| |Input revolutions of load gear|
|10122|COM_SER_| |Output revolutions of load gear|
|10123|COM_SER_FeedConst|um/rev|Feed constant|
|10160|COM_SER_| |Acceleration data scaling type|
|10161|COM_SER_| |Acceleration data scaling factor|
|10162|COM_SER_| |Acceleration data scaling exponent|

Table 8.5:  “Standardization / units - SERCOS” parameter (continue)

Image 8.11: “Standardization profile - SERCOS - Position unit (1)” screen

# Image 8.12: “Standardization profile - SERCOS - Position unit (2)” screen

# Image 8.13: Position data weighting method

# Position polarity

The polarity of the position data can be inverted according to the application. An increasing actual position value indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|m|1|E-7|

Table 8.6: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 231

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

232

# Rotary weighting

# 8.2.2.2 Speed

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|Degrees|3,600,000|0.0001 μm|

Table 8.7: Weighting for rotary motion (default setting)

Image 8.14: “Standardization profile - SERCOS - Speed (1)” screen

# Image 8.15: “Standardization profile - SERCOS - Speed (2)” screen

The “Speed data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.16: Speed data weighting method

# Speed polarity

The polarity of the speed data can be inverted according to the application. A positive speed reference indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|m/min|1|
| |0.001 m/min|

# Table 8.8: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 233

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

Rotary weighting

# 8.2.2.3 Unit of torque/power

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|Degrees|3,600,000|
| |0.001 m/min|

Table 8.9: Weighting for rotary motion (default setting)

Image 8.17: “Standardization profile - SERCOS torque/power(1)” screen

# Image 8.18: “Standardization profile - SERCOS torque/power(2)” screen

# Image 8.19: Force/torque weighting method

The “Power/torque weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here. In percentage weighting the permanently permissible standstill torque of the motor is used as the reference value. All torque/force data is given in [%] with one decimal place.

# Torque polarity

The polarity of the torque can be inverted according to the application. A positive torque reference indicates clockwise rotation (looking at the motor shaft).

**Table 8.10: Weighting for linear motion (default setting)**
|Unit|Weighting factor|
|---|---|
|Nm|1|

LSB = Unit * Exponent

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 235

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 236

# 8.2.2.4 Unit of acceleration

|Weighting|Preferential weighting|Parameter weighting|
|---|---|---|
|Unit|factor|(LSB)|
|Nm|1|0.01 Nm|
|LSB = Unit * Exponent|LSB = Unit * Exponent|LSB = Unit * Exponent|

Table 8.11: Weighting for rotary motion (default setting)

Image 8.20: “Standardization profile - SERCOS - Acceleration(1)” screen

# Image 8.21: “Standardization profile - SERCOS - Acceleration(2)” screen

The ""Acceleration data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.22: Acceleration weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|m/s2|1|E-6|

Table 8.12: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 237

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 238

# Rotary weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|rad/s2|3,600,000|E-3|

Table 8.13: Weighting for rotary motion (default setting)

# 8.2.2.5 Modulo weighting

If Modulo (indexing table application) is to be selected (see Section ""As linear"" process option"" on page 227), the number range of the position data (modulo value) must be entered. When the modulo value is exceeded the actual position is reset to 0.

Image 8.23: Schematic of user-defined scaling

# 8.2.3 User defined

|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|0 MPRO_FG_Config| |Factor group configuration|
|270|0 MPRO_FG_PosNorm|incr/rev|internal position resolution|
|271|0 MPRO_FG_Num|rev|Factor group: Numerator (profile independent)|
|272|0 MPRO_FG_Den|mDegree|Factor group: denominator (profile independent)|
|273|0 MPRO_FG_Reverse| |Factor group: Position and speed reverse (profile independent)|
|274|0 MPRO_FG_SpeedFac|rev/min/SPEED|Factor group: speed factor (profile independent)|
|275|0 MPRO_FG_AccFac|rev/s2/ACC|Factor group: acceleration factor (profile independent)|
|284|0 MPRO_FG_PosUnit| |Unit for position values|
|285|0 MPRO_FG_PosExp| |Factor group: Position unit exponent (profile independent)|
|286|0 MPRO_FG_| |Factor group: Position unit scaling factor|

Table 8.14: “Standardization / units - Custom” parameters

# 8 Motion profile

|ID|Index Name|Unit|Description|
|---|---|---|---|
|0290|MPRO_FG_AccUnit|[m/s²]|Acceleration unit|
| |PosScaleFac| |(profile independent)|
| | | |Feed constant: 0.1 mm = 1 rev|
|287|MPRO_FG_SpeedUnit| |Unit for speed values|
| | | |Gearing: 1 drive revolution = 3 motor revs|
|288|MPRO_FG_SpeedExp| |Factor group: Velocity unit exponent (profile independent)|
|289|MPRO_FG_SpeedScaleFac| |Factor group: Velocity unit scaling factor (profile independent)|
| | | |P 0284 MPRO_FG_PosUnit = 1 μm = 1/1000 mm = 10/1000 rev (output) = 30/1000 rev (motor)|
|290|MPRO_FG_AccUnit| |Unit for acceleration and deceleration values|
|291|MPRO_FG_AccExp| |Factor group: Acceleration unit exponent (profile independent)|
|292|MPRO_FG_AccScaleFac| |Factor group: Acceleration unit scaling factor (profile independent)|
| | | |P 0287 MPRO_FG_SpeedUnit = 1 m/s = 1000 mm/s = 10 000 rev/s (output) = 30 000 rev/s (motor)*60 (min) = 1 800 000 rev/min|
|293|MPRO_FG_TorqueUnit| |Unit for torque values|
|294|MPRO_FG_TorqueExp| |Factor group: Torque unit exponent (profile independent)|
|295|MPRO_FG_TorqueScaleFac| |Factor group: Torque unit scaling factor (profile independent)|
|298|MPRO_FG_UsrActPosDly|ms|Actual position delay (multiple of CON_PConTS)|

# Table 8.14: “Standardization / units - Custom” parameters (continue)

|ID|Name|Function|Standard rotary system|
|---|---|---|---|
|270|MPRO_FG_Nom|Numerator|1[rev]|
|271|PosNom|Increments per revolution|1048576 [incr/rev]|
|272|MPRO_FG_Den|Denominator|360° [POS]|
|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|274|MPRO_FG_SpeedFac|Speed factor|1[rpm]|
|275|MPRO_FG_AccFac|Acceleration factor|1/60 = 0.01667 [rpm/s]|

# Table 8.15: Parameters for user-defined scaling (rotary system)

1 motor revolution corresponds to 360° or 1048576 increments

Speed in [rpm]

Acceleration in [rpm/s]

Positioning in [°degrees]

Given

Position unit P 0284 MPRO_FG_PosUnit = [μm]

Speed unit P 0287 MPRO_FG_SpeedUnit = [m/s]

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 239

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 240

|ID|Name|Function|Standard|ID|Name|Function|Standard|
|---|---|---|---|---|---|---|---|
|284|MPRO_FG_PosUnit|Unit for position value|mdegree|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|287|MPRO_FG_SpeetUnit|Unit for speed value|rev/min|1.875 rps| | | |
| | |Unit for| |274|MPRO_FG_SpeedFac|Speed factor|mm/s, 1/32 mm = 0.03125 rps²|
| | | | | | | |s = 1.875 rps|
| | | | | | | |1/32 mm =|
|275|MPRO_FG_AccFac|Acceleration factor|0.03125 rps²| | | |corresponding to 1mm/s²|

# 8.2.3.2 Example of scaling of a linear motor

Presetting:

- One revolution corresponds to 32 mm pitch
- Travel in [μm]
- Speed in [mm/sec]
- Acceleration in [mm/s²]

|ID|Name|Function|Standard|
|---|---|---|---|
|270|MPRO_FG_PosNom|Increments per revolution|1048576 [incr/rev]|
|271|MPRO_FG_Nom|Numerator|1 [rev]|
|272|MPRO_FG_Den|Denominator|32000 μm|

# Table 8.16: Parameters for user-defined scaling (linear system)

# 8.3 Basic settings

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|144|0|MPRO_DRVCOM_AUTO_START| |DriveCom: Auto start of system|
|159|0|MPRO_CTRL_SEL| |Motion profile selection|
|165|0|MPRO_REF_SEL| |Motion profile selection|
|166|0|MPRO_REF_JTIME|ms|Motion profile jerk time|
|167|0|MPRO_REF_OVR|%|Motion profile override factor|
|223|0|MPRO_REF_Config| |Motion profile: Config of specific profiling behaviour|
|301|0|CON_REF_Mode| |Mode selection of setpoint profiling|
|306|0|CON_IpRefTS|ms|Sampling time (for interpolation)|
|335|0|CON_SCON_DirLock| |Direction lock for speed reference value|
|370|0|CON_IP| |Interpolation type|
|755|0|MPRO_FG_RefPosFilType| |Position reference filter type|
|756| |MPRO_FG_RefPosFilData| |Reference position filter data|
|756|0|RefFil_TimeConst|ms|Position reference filter time constant (PT1/PT2/AVG)|
|756|1|RefFil_DampConst| |Position reference filter damping constant|

Image 8.24: “Basic settings” screen

Interpolation

Table 8.17: “Motion profile - Basic settings” parameters

See Section ""Interpolation"" on page 246.

# 8.3.1 PG mode with speed control

NOTE

- The reference filters are initialized only after the control has been re-enabled or by a device restart.
- Select reference source
- Motion profile adaptation: scaling, ramps and smoothing time.
- In reference processing by way of the profile generator the fine interpolator is always in use.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 241

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 242

# Profile Generator with speed control:

- Control mode P 300[0] - CON_CfgCon = speed control
- Under Profile select the profile generator (PG) P 301[0] - CON_Ref_Mode = PG(0)
- Selection of reference source/>P 165[0] - MPRO_REF_SEL
- Scaling
- Select jerk conditions
- Set stop ramps, smoothing, filter, homing

# 8.3.2 PG mode with position control

Travel commands are transmitted to the internal profile generator (see Section ""Basic settings"" on page 241). It is composed of the following items:

- Target position
- Maximum travel speed
- Maximum acceleration
- Maximum deceleration

The profile generator uses the P 166[0] - MPRO_REF_JTIME jerk values and a P 167[0] - MPRO_REF_OVR override factor for the travel speed in order to generate the trajectory for the position setpoint that will take the least amount of time, taking all limitations into account.

The position references are then processed with the selected interpolation method.

# 8 Motion profile

# 8.3.2.1 Motion profile / Basic settings

The position references are used to generate pre-control values for speed Interpolation (IP) mode and acceleration. These are scanned at the sampling time of the position controller (normally 125 μs) and switched to the control loops.

Reference values are interpolated in linear mode before being switched to the control loops.

- The profile generator is inactive.
- Ramps and smoothing are inactive.
- The reference values are switched directly to the closed-loop control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# Speed control in IP mode:

- Control mode P 300[0] - CON_CfgCon = speed control or setting via Modes of Operation (CAN, EtherCAT®)
- Selection of reference source P 165[0] - MPRO_REF_SEL

Image 8.27: PG mode with position control

# 8.3.3 IP mode with speed control

In IP (Interpolation) mode the appropriate reference source and correct scaling of units are selected for the speed reference before the reference is passed via the interpolator to the control. Linear interpolation is always applied in this process.

",What distinguishes linear weighting from rotary weighting in the SERCOS profile according to the 'MSD ServoDrive - DeviceHelp' document?,"Linear weighting applies to linear motion units like meters, while rotary weighting is for angular units such as degrees, each with specific scaling factors.",The document highlights that linear and rotary weighting use different units and scaling to accommodate their respective motion types.,"According to 'MSD ServoDrive - DeviceHelp', linear weighting factors are for straight-line movements, whereas rotary factors handle rotational dynamics.","Linear motion's weighting is based on distance units, and rotary motion's on angular units, as detailed in the device's documentation.",The 'MSD ServoDrive - DeviceHelp' delineates between linear and rotary weighting by their application to either translational or rotational parameters.
7,msd_servo_drive.txt,68,0ebe04756316c46352786c22f8d48336e344cbf35f5f17b182c6e17a12fed3eb,"The same applies to the negative direction. On reaching 0° the actual position is set to 360°.

Image 8.9: “‘Clockwise rotation’ process option” screen

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 227

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 228

# 8.2.1.3 Process option “Path - optimized”

Not path-optimized Optimized path

An absolute target position is always approached by the shortest path. Relative movements cannot be carried out with the “path – optimized” mode.

|Position range|Example|Effect|
|---|---|---|
|Target position < 120°< 360°|The drive moves to the target position|within 360°.|
|Target position = 120° = 120°|The drive remains in position.| |
|Target position > 600° - 360° =|The drive moves to the position within|240° (target position - (n x circumferential length))|

Table 8.3: Path-optimized movement

Table 8.4: Path optimization diagram

# 8.2.1.4 Infinite motion task when using indexing table function

In the case of infinite motion tasks the drive moves at constant speed, regardless of a transmitted target position, until the mode is deactivated or is overwritten by a new motion task. On switching to the next driving set (absolute or relative), the new target position is approached in the current direction of movement. A preset path optimization is ignored when the indexing table is active.

# 8.2.1.5 Relative motion task when using indexing table function

Relative driving jobs may relate to the current target position or to the actual position. For more information see ""Field Buses"" User Manuals. In the case of relative driving jobs greater travel distances than the circumferential length are possible.

Example without gear ratio:

- Circumferential length = 360°
- Relative target position = 800°
- Start position = 0°
- Movement: The drive will complete two motor revolutions (720°) and stop at the 3rd revolution at 80° (800° - 720°).

# 8.2.2 SERCOS

When using the SERCOS profile, scaling of the units is termed weighting. The weighting describes the physical unit and the exponent with which the numerical values of the parameters exchanged between the master control system and the drives are to be interpreted. The method of weighting is defined by the parameters for position, speed, force/torque and acceleration weighting.

**Table 8.5: “Standardization / units - SERCOS” parameter**
|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|MPRO_FG_Config| |Factor group configuration|
|10043|COM_SER_| |Speed polarity parameter|
|10044|PolaritySpeed| | |
|10045|COM_SER_| |Velocity data scaling type|
|10046|COM_SER_| |Velocity data scaling factor|
|10055|0| |ScaleExpSpeed|
|10076|COM_SER_| |Position data scaling type|
|10077|COM_SER_| |Linear position data scaling factor|
|10078|COM_SER_| |Linear position data scaling exponent|
|10085|COM_SER_| |Torque polarity parameter|

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 229

# 8 Motion profile

# 8 Motion profile

MOOG                          ID No.:CB40859-001 Date:11/2020                                                                                       MSD ServoDrive   - DeviceHelp     230

|ID|Index Name|Unit|Description|
|---|---|---|---|
|10086|COM_SER_| |Torque/force data scaling type|
|10093|COM_SER_| |Torque/force data scaling factor|
|10094|COM_SER_| |Torque/force data scaling exponent|
|10103|COM_SER_ModuloVal|mDegree|Modulo value|
|10121|COM_SER_| |Input revolutions of load gear|
|10122|COM_SER_| |Output revolutions of load gear|
|10123|COM_SER_FeedConst|um/rev|Feed constant|
|10160|COM_SER_| |Acceleration data scaling type|
|10161|COM_SER_| |Acceleration data scaling factor|
|10162|COM_SER_| |Acceleration data scaling exponent|

Table 8.5:  “Standardization / units - SERCOS” parameter (continue)

Image 8.11: “Standardization profile - SERCOS - Position unit (1)” screen

# Image 8.12: “Standardization profile - SERCOS - Position unit (2)” screen

# Image 8.13: Position data weighting method

# Position polarity

The polarity of the position data can be inverted according to the application. An increasing actual position value indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|m|1|E-7|

Table 8.6: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 231

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

232

# Rotary weighting

# 8.2.2.2 Speed

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|Degrees|3,600,000|0.0001 μm|

Table 8.7: Weighting for rotary motion (default setting)

Image 8.14: “Standardization profile - SERCOS - Speed (1)” screen

# Image 8.15: “Standardization profile - SERCOS - Speed (2)” screen

The “Speed data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.16: Speed data weighting method

# Speed polarity

The polarity of the speed data can be inverted according to the application. A positive speed reference indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|m/min|1|
| |0.001 m/min|

# Table 8.8: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 233

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

Rotary weighting

# 8.2.2.3 Unit of torque/power

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|Degrees|3,600,000|
| |0.001 m/min|

Table 8.9: Weighting for rotary motion (default setting)

Image 8.17: “Standardization profile - SERCOS torque/power(1)” screen

# Image 8.18: “Standardization profile - SERCOS torque/power(2)” screen

# Image 8.19: Force/torque weighting method

The “Power/torque weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here. In percentage weighting the permanently permissible standstill torque of the motor is used as the reference value. All torque/force data is given in [%] with one decimal place.

# Torque polarity

The polarity of the torque can be inverted according to the application. A positive torque reference indicates clockwise rotation (looking at the motor shaft).

**Table 8.10: Weighting for linear motion (default setting)**
|Unit|Weighting factor|
|---|---|
|Nm|1|

LSB = Unit * Exponent

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 235

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 236

# 8.2.2.4 Unit of acceleration

|Weighting|Preferential weighting|Parameter weighting|
|---|---|---|
|Unit|factor|(LSB)|
|Nm|1|0.01 Nm|
|LSB = Unit * Exponent|LSB = Unit * Exponent|LSB = Unit * Exponent|

Table 8.11: Weighting for rotary motion (default setting)

Image 8.20: “Standardization profile - SERCOS - Acceleration(1)” screen

# Image 8.21: “Standardization profile - SERCOS - Acceleration(2)” screen

The ""Acceleration data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.22: Acceleration weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|m/s2|1|E-6|

Table 8.12: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 237

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 238

# Rotary weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|rad/s2|3,600,000|E-3|

Table 8.13: Weighting for rotary motion (default setting)

# 8.2.2.5 Modulo weighting

If Modulo (indexing table application) is to be selected (see Section ""As linear"" process option"" on page 227), the number range of the position data (modulo value) must be entered. When the modulo value is exceeded the actual position is reset to 0.

Image 8.23: Schematic of user-defined scaling

# 8.2.3 User defined

|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|0 MPRO_FG_Config| |Factor group configuration|
|270|0 MPRO_FG_PosNorm|incr/rev|internal position resolution|
|271|0 MPRO_FG_Num|rev|Factor group: Numerator (profile independent)|
|272|0 MPRO_FG_Den|mDegree|Factor group: denominator (profile independent)|
|273|0 MPRO_FG_Reverse| |Factor group: Position and speed reverse (profile independent)|
|274|0 MPRO_FG_SpeedFac|rev/min/SPEED|Factor group: speed factor (profile independent)|
|275|0 MPRO_FG_AccFac|rev/s2/ACC|Factor group: acceleration factor (profile independent)|
|284|0 MPRO_FG_PosUnit| |Unit for position values|
|285|0 MPRO_FG_PosExp| |Factor group: Position unit exponent (profile independent)|
|286|0 MPRO_FG_| |Factor group: Position unit scaling factor|

Table 8.14: “Standardization / units - Custom” parameters

# 8 Motion profile

|ID|Index Name|Unit|Description|
|---|---|---|---|
|0290|MPRO_FG_AccUnit|[m/s²]|Acceleration unit|
| |PosScaleFac| |(profile independent)|
| | | |Feed constant: 0.1 mm = 1 rev|
|287|MPRO_FG_SpeedUnit| |Unit for speed values|
| | | |Gearing: 1 drive revolution = 3 motor revs|
|288|MPRO_FG_SpeedExp| |Factor group: Velocity unit exponent (profile independent)|
|289|MPRO_FG_SpeedScaleFac| |Factor group: Velocity unit scaling factor (profile independent)|
| | | |P 0284 MPRO_FG_PosUnit = 1 μm = 1/1000 mm = 10/1000 rev (output) = 30/1000 rev (motor)|
|290|MPRO_FG_AccUnit| |Unit for acceleration and deceleration values|
|291|MPRO_FG_AccExp| |Factor group: Acceleration unit exponent (profile independent)|
|292|MPRO_FG_AccScaleFac| |Factor group: Acceleration unit scaling factor (profile independent)|
| | | |P 0287 MPRO_FG_SpeedUnit = 1 m/s = 1000 mm/s = 10 000 rev/s (output) = 30 000 rev/s (motor)*60 (min) = 1 800 000 rev/min|
|293|MPRO_FG_TorqueUnit| |Unit for torque values|
|294|MPRO_FG_TorqueExp| |Factor group: Torque unit exponent (profile independent)|
|295|MPRO_FG_TorqueScaleFac| |Factor group: Torque unit scaling factor (profile independent)|
|298|MPRO_FG_UsrActPosDly|ms|Actual position delay (multiple of CON_PConTS)|

# Table 8.14: “Standardization / units - Custom” parameters (continue)

|ID|Name|Function|Standard rotary system|
|---|---|---|---|
|270|MPRO_FG_Nom|Numerator|1[rev]|
|271|PosNom|Increments per revolution|1048576 [incr/rev]|
|272|MPRO_FG_Den|Denominator|360° [POS]|
|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|274|MPRO_FG_SpeedFac|Speed factor|1[rpm]|
|275|MPRO_FG_AccFac|Acceleration factor|1/60 = 0.01667 [rpm/s]|

# Table 8.15: Parameters for user-defined scaling (rotary system)

1 motor revolution corresponds to 360° or 1048576 increments

Speed in [rpm]

Acceleration in [rpm/s]

Positioning in [°degrees]

Given

Position unit P 0284 MPRO_FG_PosUnit = [μm]

Speed unit P 0287 MPRO_FG_SpeedUnit = [m/s]

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 239

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 240

|ID|Name|Function|Standard|ID|Name|Function|Standard|
|---|---|---|---|---|---|---|---|
|284|MPRO_FG_PosUnit|Unit for position value|mdegree|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|287|MPRO_FG_SpeetUnit|Unit for speed value|rev/min|1.875 rps| | | |
| | |Unit for| |274|MPRO_FG_SpeedFac|Speed factor|mm/s, 1/32 mm = 0.03125 rps²|
| | | | | | | |s = 1.875 rps|
| | | | | | | |1/32 mm =|
|275|MPRO_FG_AccFac|Acceleration factor|0.03125 rps²| | | |corresponding to 1mm/s²|

# 8.2.3.2 Example of scaling of a linear motor

Presetting:

- One revolution corresponds to 32 mm pitch
- Travel in [μm]
- Speed in [mm/sec]
- Acceleration in [mm/s²]

|ID|Name|Function|Standard|
|---|---|---|---|
|270|MPRO_FG_PosNom|Increments per revolution|1048576 [incr/rev]|
|271|MPRO_FG_Nom|Numerator|1 [rev]|
|272|MPRO_FG_Den|Denominator|32000 μm|

# Table 8.16: Parameters for user-defined scaling (linear system)

# 8.3 Basic settings

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|144|0|MPRO_DRVCOM_AUTO_START| |DriveCom: Auto start of system|
|159|0|MPRO_CTRL_SEL| |Motion profile selection|
|165|0|MPRO_REF_SEL| |Motion profile selection|
|166|0|MPRO_REF_JTIME|ms|Motion profile jerk time|
|167|0|MPRO_REF_OVR|%|Motion profile override factor|
|223|0|MPRO_REF_Config| |Motion profile: Config of specific profiling behaviour|
|301|0|CON_REF_Mode| |Mode selection of setpoint profiling|
|306|0|CON_IpRefTS|ms|Sampling time (for interpolation)|
|335|0|CON_SCON_DirLock| |Direction lock for speed reference value|
|370|0|CON_IP| |Interpolation type|
|755|0|MPRO_FG_RefPosFilType| |Position reference filter type|
|756| |MPRO_FG_RefPosFilData| |Reference position filter data|
|756|0|RefFil_TimeConst|ms|Position reference filter time constant (PT1/PT2/AVG)|
|756|1|RefFil_DampConst| |Position reference filter damping constant|

Image 8.24: “Basic settings” screen

Interpolation

Table 8.17: “Motion profile - Basic settings” parameters

See Section ""Interpolation"" on page 246.

# 8.3.1 PG mode with speed control

NOTE

- The reference filters are initialized only after the control has been re-enabled or by a device restart.
- Select reference source
- Motion profile adaptation: scaling, ramps and smoothing time.
- In reference processing by way of the profile generator the fine interpolator is always in use.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 241

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 242

# Profile Generator with speed control:

- Control mode P 300[0] - CON_CfgCon = speed control
- Under Profile select the profile generator (PG) P 301[0] - CON_Ref_Mode = PG(0)
- Selection of reference source/>P 165[0] - MPRO_REF_SEL
- Scaling
- Select jerk conditions
- Set stop ramps, smoothing, filter, homing

# 8.3.2 PG mode with position control

Travel commands are transmitted to the internal profile generator (see Section ""Basic settings"" on page 241). It is composed of the following items:

- Target position
- Maximum travel speed
- Maximum acceleration
- Maximum deceleration

The profile generator uses the P 166[0] - MPRO_REF_JTIME jerk values and a P 167[0] - MPRO_REF_OVR override factor for the travel speed in order to generate the trajectory for the position setpoint that will take the least amount of time, taking all limitations into account.

The position references are then processed with the selected interpolation method.

# 8 Motion profile

# 8.3.2.1 Motion profile / Basic settings

The position references are used to generate pre-control values for speed Interpolation (IP) mode and acceleration. These are scanned at the sampling time of the position controller (normally 125 μs) and switched to the control loops.

Reference values are interpolated in linear mode before being switched to the control loops.

- The profile generator is inactive.
- Ramps and smoothing are inactive.
- The reference values are switched directly to the closed-loop control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# Speed control in IP mode:

- Control mode P 300[0] - CON_CfgCon = speed control or setting via Modes of Operation (CAN, EtherCAT®)
- Selection of reference source P 165[0] - MPRO_REF_SEL

Image 8.27: PG mode with position control

# 8.3.3 IP mode with speed control

In IP (Interpolation) mode the appropriate reference source and correct scaling of units are selected for the speed reference before the reference is passed via the interpolator to the control. Linear interpolation is always applied in this process.

",What is the significance of the modulo value in the 'Modulo weighting' section of the 'MSD ServoDrive - DeviceHelp' document?,"The modulo value defines the position data's number range in indexing table applications, resetting the actual position to 0 when exceeded.","The document explains that the modulo value sets the upper limit for position data, with overflow triggering a reset to zero.","In 'MSD ServoDrive - DeviceHelp', modulo weighting ensures position data wraps around after reaching the specified modulo value.",Modulo weighting's key role is to manage circular position tracking by resetting counts after the modulo threshold is passed.,The 'MSD ServoDrive - DeviceHelp' describes modulo weighting as a method to maintain position within a defined range for indexing applications.
8,msd_servo_drive.txt,68,0ebe04756316c46352786c22f8d48336e344cbf35f5f17b182c6e17a12fed3eb,"The same applies to the negative direction. On reaching 0° the actual position is set to 360°.

Image 8.9: “‘Clockwise rotation’ process option” screen

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 227

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 228

# 8.2.1.3 Process option “Path - optimized”

Not path-optimized Optimized path

An absolute target position is always approached by the shortest path. Relative movements cannot be carried out with the “path – optimized” mode.

|Position range|Example|Effect|
|---|---|---|
|Target position < 120°< 360°|The drive moves to the target position|within 360°.|
|Target position = 120° = 120°|The drive remains in position.| |
|Target position > 600° - 360° =|The drive moves to the position within|240° (target position - (n x circumferential length))|

Table 8.3: Path-optimized movement

Table 8.4: Path optimization diagram

# 8.2.1.4 Infinite motion task when using indexing table function

In the case of infinite motion tasks the drive moves at constant speed, regardless of a transmitted target position, until the mode is deactivated or is overwritten by a new motion task. On switching to the next driving set (absolute or relative), the new target position is approached in the current direction of movement. A preset path optimization is ignored when the indexing table is active.

# 8.2.1.5 Relative motion task when using indexing table function

Relative driving jobs may relate to the current target position or to the actual position. For more information see ""Field Buses"" User Manuals. In the case of relative driving jobs greater travel distances than the circumferential length are possible.

Example without gear ratio:

- Circumferential length = 360°
- Relative target position = 800°
- Start position = 0°
- Movement: The drive will complete two motor revolutions (720°) and stop at the 3rd revolution at 80° (800° - 720°).

# 8.2.2 SERCOS

When using the SERCOS profile, scaling of the units is termed weighting. The weighting describes the physical unit and the exponent with which the numerical values of the parameters exchanged between the master control system and the drives are to be interpreted. The method of weighting is defined by the parameters for position, speed, force/torque and acceleration weighting.

**Table 8.5: “Standardization / units - SERCOS” parameter**
|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|MPRO_FG_Config| |Factor group configuration|
|10043|COM_SER_| |Speed polarity parameter|
|10044|PolaritySpeed| | |
|10045|COM_SER_| |Velocity data scaling type|
|10046|COM_SER_| |Velocity data scaling factor|
|10055|0| |ScaleExpSpeed|
|10076|COM_SER_| |Position data scaling type|
|10077|COM_SER_| |Linear position data scaling factor|
|10078|COM_SER_| |Linear position data scaling exponent|
|10085|COM_SER_| |Torque polarity parameter|

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 229

# 8 Motion profile

# 8 Motion profile

MOOG                          ID No.:CB40859-001 Date:11/2020                                                                                       MSD ServoDrive   - DeviceHelp     230

|ID|Index Name|Unit|Description|
|---|---|---|---|
|10086|COM_SER_| |Torque/force data scaling type|
|10093|COM_SER_| |Torque/force data scaling factor|
|10094|COM_SER_| |Torque/force data scaling exponent|
|10103|COM_SER_ModuloVal|mDegree|Modulo value|
|10121|COM_SER_| |Input revolutions of load gear|
|10122|COM_SER_| |Output revolutions of load gear|
|10123|COM_SER_FeedConst|um/rev|Feed constant|
|10160|COM_SER_| |Acceleration data scaling type|
|10161|COM_SER_| |Acceleration data scaling factor|
|10162|COM_SER_| |Acceleration data scaling exponent|

Table 8.5:  “Standardization / units - SERCOS” parameter (continue)

Image 8.11: “Standardization profile - SERCOS - Position unit (1)” screen

# Image 8.12: “Standardization profile - SERCOS - Position unit (2)” screen

# Image 8.13: Position data weighting method

# Position polarity

The polarity of the position data can be inverted according to the application. An increasing actual position value indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|m|1|E-7|

Table 8.6: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 231

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

232

# Rotary weighting

# 8.2.2.2 Speed

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|Degrees|3,600,000|0.0001 μm|

Table 8.7: Weighting for rotary motion (default setting)

Image 8.14: “Standardization profile - SERCOS - Speed (1)” screen

# Image 8.15: “Standardization profile - SERCOS - Speed (2)” screen

The “Speed data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.16: Speed data weighting method

# Speed polarity

The polarity of the speed data can be inverted according to the application. A positive speed reference indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|m/min|1|
| |0.001 m/min|

# Table 8.8: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 233

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

Rotary weighting

# 8.2.2.3 Unit of torque/power

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|Degrees|3,600,000|
| |0.001 m/min|

Table 8.9: Weighting for rotary motion (default setting)

Image 8.17: “Standardization profile - SERCOS torque/power(1)” screen

# Image 8.18: “Standardization profile - SERCOS torque/power(2)” screen

# Image 8.19: Force/torque weighting method

The “Power/torque weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here. In percentage weighting the permanently permissible standstill torque of the motor is used as the reference value. All torque/force data is given in [%] with one decimal place.

# Torque polarity

The polarity of the torque can be inverted according to the application. A positive torque reference indicates clockwise rotation (looking at the motor shaft).

**Table 8.10: Weighting for linear motion (default setting)**
|Unit|Weighting factor|
|---|---|
|Nm|1|

LSB = Unit * Exponent

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 235

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 236

# 8.2.2.4 Unit of acceleration

|Weighting|Preferential weighting|Parameter weighting|
|---|---|---|
|Unit|factor|(LSB)|
|Nm|1|0.01 Nm|
|LSB = Unit * Exponent|LSB = Unit * Exponent|LSB = Unit * Exponent|

Table 8.11: Weighting for rotary motion (default setting)

Image 8.20: “Standardization profile - SERCOS - Acceleration(1)” screen

# Image 8.21: “Standardization profile - SERCOS - Acceleration(2)” screen

The ""Acceleration data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.22: Acceleration weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|m/s2|1|E-6|

Table 8.12: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 237

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 238

# Rotary weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|rad/s2|3,600,000|E-3|

Table 8.13: Weighting for rotary motion (default setting)

# 8.2.2.5 Modulo weighting

If Modulo (indexing table application) is to be selected (see Section ""As linear"" process option"" on page 227), the number range of the position data (modulo value) must be entered. When the modulo value is exceeded the actual position is reset to 0.

Image 8.23: Schematic of user-defined scaling

# 8.2.3 User defined

|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|0 MPRO_FG_Config| |Factor group configuration|
|270|0 MPRO_FG_PosNorm|incr/rev|internal position resolution|
|271|0 MPRO_FG_Num|rev|Factor group: Numerator (profile independent)|
|272|0 MPRO_FG_Den|mDegree|Factor group: denominator (profile independent)|
|273|0 MPRO_FG_Reverse| |Factor group: Position and speed reverse (profile independent)|
|274|0 MPRO_FG_SpeedFac|rev/min/SPEED|Factor group: speed factor (profile independent)|
|275|0 MPRO_FG_AccFac|rev/s2/ACC|Factor group: acceleration factor (profile independent)|
|284|0 MPRO_FG_PosUnit| |Unit for position values|
|285|0 MPRO_FG_PosExp| |Factor group: Position unit exponent (profile independent)|
|286|0 MPRO_FG_| |Factor group: Position unit scaling factor|

Table 8.14: “Standardization / units - Custom” parameters

# 8 Motion profile

|ID|Index Name|Unit|Description|
|---|---|---|---|
|0290|MPRO_FG_AccUnit|[m/s²]|Acceleration unit|
| |PosScaleFac| |(profile independent)|
| | | |Feed constant: 0.1 mm = 1 rev|
|287|MPRO_FG_SpeedUnit| |Unit for speed values|
| | | |Gearing: 1 drive revolution = 3 motor revs|
|288|MPRO_FG_SpeedExp| |Factor group: Velocity unit exponent (profile independent)|
|289|MPRO_FG_SpeedScaleFac| |Factor group: Velocity unit scaling factor (profile independent)|
| | | |P 0284 MPRO_FG_PosUnit = 1 μm = 1/1000 mm = 10/1000 rev (output) = 30/1000 rev (motor)|
|290|MPRO_FG_AccUnit| |Unit for acceleration and deceleration values|
|291|MPRO_FG_AccExp| |Factor group: Acceleration unit exponent (profile independent)|
|292|MPRO_FG_AccScaleFac| |Factor group: Acceleration unit scaling factor (profile independent)|
| | | |P 0287 MPRO_FG_SpeedUnit = 1 m/s = 1000 mm/s = 10 000 rev/s (output) = 30 000 rev/s (motor)*60 (min) = 1 800 000 rev/min|
|293|MPRO_FG_TorqueUnit| |Unit for torque values|
|294|MPRO_FG_TorqueExp| |Factor group: Torque unit exponent (profile independent)|
|295|MPRO_FG_TorqueScaleFac| |Factor group: Torque unit scaling factor (profile independent)|
|298|MPRO_FG_UsrActPosDly|ms|Actual position delay (multiple of CON_PConTS)|

# Table 8.14: “Standardization / units - Custom” parameters (continue)

|ID|Name|Function|Standard rotary system|
|---|---|---|---|
|270|MPRO_FG_Nom|Numerator|1[rev]|
|271|PosNom|Increments per revolution|1048576 [incr/rev]|
|272|MPRO_FG_Den|Denominator|360° [POS]|
|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|274|MPRO_FG_SpeedFac|Speed factor|1[rpm]|
|275|MPRO_FG_AccFac|Acceleration factor|1/60 = 0.01667 [rpm/s]|

# Table 8.15: Parameters for user-defined scaling (rotary system)

1 motor revolution corresponds to 360° or 1048576 increments

Speed in [rpm]

Acceleration in [rpm/s]

Positioning in [°degrees]

Given

Position unit P 0284 MPRO_FG_PosUnit = [μm]

Speed unit P 0287 MPRO_FG_SpeedUnit = [m/s]

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 239

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 240

|ID|Name|Function|Standard|ID|Name|Function|Standard|
|---|---|---|---|---|---|---|---|
|284|MPRO_FG_PosUnit|Unit for position value|mdegree|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|287|MPRO_FG_SpeetUnit|Unit for speed value|rev/min|1.875 rps| | | |
| | |Unit for| |274|MPRO_FG_SpeedFac|Speed factor|mm/s, 1/32 mm = 0.03125 rps²|
| | | | | | | |s = 1.875 rps|
| | | | | | | |1/32 mm =|
|275|MPRO_FG_AccFac|Acceleration factor|0.03125 rps²| | | |corresponding to 1mm/s²|

# 8.2.3.2 Example of scaling of a linear motor

Presetting:

- One revolution corresponds to 32 mm pitch
- Travel in [μm]
- Speed in [mm/sec]
- Acceleration in [mm/s²]

|ID|Name|Function|Standard|
|---|---|---|---|
|270|MPRO_FG_PosNom|Increments per revolution|1048576 [incr/rev]|
|271|MPRO_FG_Nom|Numerator|1 [rev]|
|272|MPRO_FG_Den|Denominator|32000 μm|

# Table 8.16: Parameters for user-defined scaling (linear system)

# 8.3 Basic settings

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|144|0|MPRO_DRVCOM_AUTO_START| |DriveCom: Auto start of system|
|159|0|MPRO_CTRL_SEL| |Motion profile selection|
|165|0|MPRO_REF_SEL| |Motion profile selection|
|166|0|MPRO_REF_JTIME|ms|Motion profile jerk time|
|167|0|MPRO_REF_OVR|%|Motion profile override factor|
|223|0|MPRO_REF_Config| |Motion profile: Config of specific profiling behaviour|
|301|0|CON_REF_Mode| |Mode selection of setpoint profiling|
|306|0|CON_IpRefTS|ms|Sampling time (for interpolation)|
|335|0|CON_SCON_DirLock| |Direction lock for speed reference value|
|370|0|CON_IP| |Interpolation type|
|755|0|MPRO_FG_RefPosFilType| |Position reference filter type|
|756| |MPRO_FG_RefPosFilData| |Reference position filter data|
|756|0|RefFil_TimeConst|ms|Position reference filter time constant (PT1/PT2/AVG)|
|756|1|RefFil_DampConst| |Position reference filter damping constant|

Image 8.24: “Basic settings” screen

Interpolation

Table 8.17: “Motion profile - Basic settings” parameters

See Section ""Interpolation"" on page 246.

# 8.3.1 PG mode with speed control

NOTE

- The reference filters are initialized only after the control has been re-enabled or by a device restart.
- Select reference source
- Motion profile adaptation: scaling, ramps and smoothing time.
- In reference processing by way of the profile generator the fine interpolator is always in use.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 241

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 242

# Profile Generator with speed control:

- Control mode P 300[0] - CON_CfgCon = speed control
- Under Profile select the profile generator (PG) P 301[0] - CON_Ref_Mode = PG(0)
- Selection of reference source/>P 165[0] - MPRO_REF_SEL
- Scaling
- Select jerk conditions
- Set stop ramps, smoothing, filter, homing

# 8.3.2 PG mode with position control

Travel commands are transmitted to the internal profile generator (see Section ""Basic settings"" on page 241). It is composed of the following items:

- Target position
- Maximum travel speed
- Maximum acceleration
- Maximum deceleration

The profile generator uses the P 166[0] - MPRO_REF_JTIME jerk values and a P 167[0] - MPRO_REF_OVR override factor for the travel speed in order to generate the trajectory for the position setpoint that will take the least amount of time, taking all limitations into account.

The position references are then processed with the selected interpolation method.

# 8 Motion profile

# 8.3.2.1 Motion profile / Basic settings

The position references are used to generate pre-control values for speed Interpolation (IP) mode and acceleration. These are scanned at the sampling time of the position controller (normally 125 μs) and switched to the control loops.

Reference values are interpolated in linear mode before being switched to the control loops.

- The profile generator is inactive.
- Ramps and smoothing are inactive.
- The reference values are switched directly to the closed-loop control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# Speed control in IP mode:

- Control mode P 300[0] - CON_CfgCon = speed control or setting via Modes of Operation (CAN, EtherCAT®)
- Selection of reference source P 165[0] - MPRO_REF_SEL

Image 8.27: PG mode with position control

# 8.3.3 IP mode with speed control

In IP (Interpolation) mode the appropriate reference source and correct scaling of units are selected for the speed reference before the reference is passed via the interpolator to the control. Linear interpolation is always applied in this process.

",How does the 'user defined' scaling option function in the 'MSD ServoDrive - DeviceHelp' document?,"User-defined scaling allows customization of position, speed, and acceleration units and scaling factors to fit specific application requirements.",The document indicates that user-defined scaling provides flexibility in setting how motion parameters are measured and interpreted.,"According to 'MSD ServoDrive - DeviceHelp', custom scaling tailors the drive's response to unique system configurations and units.",User-defined parameters enable precise adjustment of motion profiles to align with the mechanical and operational needs of the application.,The 'MSD ServoDrive - DeviceHelp' outlines how custom scaling parameters offer adaptability in motion control for specialized tasks.
9,msd_servo_drive.txt,68,0ebe04756316c46352786c22f8d48336e344cbf35f5f17b182c6e17a12fed3eb,"The same applies to the negative direction. On reaching 0° the actual position is set to 360°.

Image 8.9: “‘Clockwise rotation’ process option” screen

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 227

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 228

# 8.2.1.3 Process option “Path - optimized”

Not path-optimized Optimized path

An absolute target position is always approached by the shortest path. Relative movements cannot be carried out with the “path – optimized” mode.

|Position range|Example|Effect|
|---|---|---|
|Target position < 120°< 360°|The drive moves to the target position|within 360°.|
|Target position = 120° = 120°|The drive remains in position.| |
|Target position > 600° - 360° =|The drive moves to the position within|240° (target position - (n x circumferential length))|

Table 8.3: Path-optimized movement

Table 8.4: Path optimization diagram

# 8.2.1.4 Infinite motion task when using indexing table function

In the case of infinite motion tasks the drive moves at constant speed, regardless of a transmitted target position, until the mode is deactivated or is overwritten by a new motion task. On switching to the next driving set (absolute or relative), the new target position is approached in the current direction of movement. A preset path optimization is ignored when the indexing table is active.

# 8.2.1.5 Relative motion task when using indexing table function

Relative driving jobs may relate to the current target position or to the actual position. For more information see ""Field Buses"" User Manuals. In the case of relative driving jobs greater travel distances than the circumferential length are possible.

Example without gear ratio:

- Circumferential length = 360°
- Relative target position = 800°
- Start position = 0°
- Movement: The drive will complete two motor revolutions (720°) and stop at the 3rd revolution at 80° (800° - 720°).

# 8.2.2 SERCOS

When using the SERCOS profile, scaling of the units is termed weighting. The weighting describes the physical unit and the exponent with which the numerical values of the parameters exchanged between the master control system and the drives are to be interpreted. The method of weighting is defined by the parameters for position, speed, force/torque and acceleration weighting.

**Table 8.5: “Standardization / units - SERCOS” parameter**
|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|MPRO_FG_Config| |Factor group configuration|
|10043|COM_SER_| |Speed polarity parameter|
|10044|PolaritySpeed| | |
|10045|COM_SER_| |Velocity data scaling type|
|10046|COM_SER_| |Velocity data scaling factor|
|10055|0| |ScaleExpSpeed|
|10076|COM_SER_| |Position data scaling type|
|10077|COM_SER_| |Linear position data scaling factor|
|10078|COM_SER_| |Linear position data scaling exponent|
|10085|COM_SER_| |Torque polarity parameter|

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 229

# 8 Motion profile

# 8 Motion profile

MOOG                          ID No.:CB40859-001 Date:11/2020                                                                                       MSD ServoDrive   - DeviceHelp     230

|ID|Index Name|Unit|Description|
|---|---|---|---|
|10086|COM_SER_| |Torque/force data scaling type|
|10093|COM_SER_| |Torque/force data scaling factor|
|10094|COM_SER_| |Torque/force data scaling exponent|
|10103|COM_SER_ModuloVal|mDegree|Modulo value|
|10121|COM_SER_| |Input revolutions of load gear|
|10122|COM_SER_| |Output revolutions of load gear|
|10123|COM_SER_FeedConst|um/rev|Feed constant|
|10160|COM_SER_| |Acceleration data scaling type|
|10161|COM_SER_| |Acceleration data scaling factor|
|10162|COM_SER_| |Acceleration data scaling exponent|

Table 8.5:  “Standardization / units - SERCOS” parameter (continue)

Image 8.11: “Standardization profile - SERCOS - Position unit (1)” screen

# Image 8.12: “Standardization profile - SERCOS - Position unit (2)” screen

# Image 8.13: Position data weighting method

# Position polarity

The polarity of the position data can be inverted according to the application. An increasing actual position value indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|m|1|E-7|

Table 8.6: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 231

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

232

# Rotary weighting

# 8.2.2.2 Speed

|Unit|Weighting factor|Preferential weighting (LSB)|
|---|---|---|
|Degrees|3,600,000|0.0001 μm|

Table 8.7: Weighting for rotary motion (default setting)

Image 8.14: “Standardization profile - SERCOS - Speed (1)” screen

# Image 8.15: “Standardization profile - SERCOS - Speed (2)” screen

The “Speed data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.16: Speed data weighting method

# Speed polarity

The polarity of the speed data can be inverted according to the application. A positive speed reference indicates clockwise rotation (looking at the motor shaft).

# Linear weighting

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|m/min|1|
| |0.001 m/min|

# Table 8.8: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 233

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

Rotary weighting

# 8.2.2.3 Unit of torque/power

Preferential weighting

|Unit|Weighting factor (LSB)|
|---|---|
|Degrees|3,600,000|
| |0.001 m/min|

Table 8.9: Weighting for rotary motion (default setting)

Image 8.17: “Standardization profile - SERCOS torque/power(1)” screen

# Image 8.18: “Standardization profile - SERCOS torque/power(2)” screen

# Image 8.19: Force/torque weighting method

The “Power/torque weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here. In percentage weighting the permanently permissible standstill torque of the motor is used as the reference value. All torque/force data is given in [%] with one decimal place.

# Torque polarity

The polarity of the torque can be inverted according to the application. A positive torque reference indicates clockwise rotation (looking at the motor shaft).

**Table 8.10: Weighting for linear motion (default setting)**
|Unit|Weighting factor|
|---|---|
|Nm|1|

LSB = Unit * Exponent

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 235

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 236

# 8.2.2.4 Unit of acceleration

|Weighting|Preferential weighting|Parameter weighting|
|---|---|---|
|Unit|factor|(LSB)|
|Nm|1|0.01 Nm|
|LSB = Unit * Exponent|LSB = Unit * Exponent|LSB = Unit * Exponent|

Table 8.11: Weighting for rotary motion (default setting)

Image 8.20: “Standardization profile - SERCOS - Acceleration(1)” screen

# Image 8.21: “Standardization profile - SERCOS - Acceleration(2)” screen

The ""Acceleration data weighting method"" figure below shows the structure with which the acceleration is scaled using the SERCOS wizard. A distinction must be made between linear and rotary weighting here.

# Image 8.22: Acceleration weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|m/s2|1|E-6|

Table 8.12: Weighting for linear motion (default setting)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 237

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 238

# Rotary weighting

|Unit|Weighting factor|Factory setting (LSB)|
|---|---|---|
|rad/s2|3,600,000|E-3|

Table 8.13: Weighting for rotary motion (default setting)

# 8.2.2.5 Modulo weighting

If Modulo (indexing table application) is to be selected (see Section ""As linear"" process option"" on page 227), the number range of the position data (modulo value) must be entered. When the modulo value is exceeded the actual position is reset to 0.

Image 8.23: Schematic of user-defined scaling

# 8.2.3 User defined

|ID|Index Name|Unit|Description|
|---|---|---|---|
|163|0 MPRO_FG_Config| |Factor group configuration|
|270|0 MPRO_FG_PosNorm|incr/rev|internal position resolution|
|271|0 MPRO_FG_Num|rev|Factor group: Numerator (profile independent)|
|272|0 MPRO_FG_Den|mDegree|Factor group: denominator (profile independent)|
|273|0 MPRO_FG_Reverse| |Factor group: Position and speed reverse (profile independent)|
|274|0 MPRO_FG_SpeedFac|rev/min/SPEED|Factor group: speed factor (profile independent)|
|275|0 MPRO_FG_AccFac|rev/s2/ACC|Factor group: acceleration factor (profile independent)|
|284|0 MPRO_FG_PosUnit| |Unit for position values|
|285|0 MPRO_FG_PosExp| |Factor group: Position unit exponent (profile independent)|
|286|0 MPRO_FG_| |Factor group: Position unit scaling factor|

Table 8.14: “Standardization / units - Custom” parameters

# 8 Motion profile

|ID|Index Name|Unit|Description|
|---|---|---|---|
|0290|MPRO_FG_AccUnit|[m/s²]|Acceleration unit|
| |PosScaleFac| |(profile independent)|
| | | |Feed constant: 0.1 mm = 1 rev|
|287|MPRO_FG_SpeedUnit| |Unit for speed values|
| | | |Gearing: 1 drive revolution = 3 motor revs|
|288|MPRO_FG_SpeedExp| |Factor group: Velocity unit exponent (profile independent)|
|289|MPRO_FG_SpeedScaleFac| |Factor group: Velocity unit scaling factor (profile independent)|
| | | |P 0284 MPRO_FG_PosUnit = 1 μm = 1/1000 mm = 10/1000 rev (output) = 30/1000 rev (motor)|
|290|MPRO_FG_AccUnit| |Unit for acceleration and deceleration values|
|291|MPRO_FG_AccExp| |Factor group: Acceleration unit exponent (profile independent)|
|292|MPRO_FG_AccScaleFac| |Factor group: Acceleration unit scaling factor (profile independent)|
| | | |P 0287 MPRO_FG_SpeedUnit = 1 m/s = 1000 mm/s = 10 000 rev/s (output) = 30 000 rev/s (motor)*60 (min) = 1 800 000 rev/min|
|293|MPRO_FG_TorqueUnit| |Unit for torque values|
|294|MPRO_FG_TorqueExp| |Factor group: Torque unit exponent (profile independent)|
|295|MPRO_FG_TorqueScaleFac| |Factor group: Torque unit scaling factor (profile independent)|
|298|MPRO_FG_UsrActPosDly|ms|Actual position delay (multiple of CON_PConTS)|

# Table 8.14: “Standardization / units - Custom” parameters (continue)

|ID|Name|Function|Standard rotary system|
|---|---|---|---|
|270|MPRO_FG_Nom|Numerator|1[rev]|
|271|PosNom|Increments per revolution|1048576 [incr/rev]|
|272|MPRO_FG_Den|Denominator|360° [POS]|
|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|274|MPRO_FG_SpeedFac|Speed factor|1[rpm]|
|275|MPRO_FG_AccFac|Acceleration factor|1/60 = 0.01667 [rpm/s]|

# Table 8.15: Parameters for user-defined scaling (rotary system)

1 motor revolution corresponds to 360° or 1048576 increments

Speed in [rpm]

Acceleration in [rpm/s]

Positioning in [°degrees]

Given

Position unit P 0284 MPRO_FG_PosUnit = [μm]

Speed unit P 0287 MPRO_FG_SpeedUnit = [m/s]

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 239

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 240

|ID|Name|Function|Standard|ID|Name|Function|Standard|
|---|---|---|---|---|---|---|---|
|284|MPRO_FG_PosUnit|Unit for position value|mdegree|273|MPRO_FG_Reverse|Reverse direction|False = clockwise|
|287|MPRO_FG_SpeetUnit|Unit for speed value|rev/min|1.875 rps| | | |
| | |Unit for| |274|MPRO_FG_SpeedFac|Speed factor|mm/s, 1/32 mm = 0.03125 rps²|
| | | | | | | |s = 1.875 rps|
| | | | | | | |1/32 mm =|
|275|MPRO_FG_AccFac|Acceleration factor|0.03125 rps²| | | |corresponding to 1mm/s²|

# 8.2.3.2 Example of scaling of a linear motor

Presetting:

- One revolution corresponds to 32 mm pitch
- Travel in [μm]
- Speed in [mm/sec]
- Acceleration in [mm/s²]

|ID|Name|Function|Standard|
|---|---|---|---|
|270|MPRO_FG_PosNom|Increments per revolution|1048576 [incr/rev]|
|271|MPRO_FG_Nom|Numerator|1 [rev]|
|272|MPRO_FG_Den|Denominator|32000 μm|

# Table 8.16: Parameters for user-defined scaling (linear system)

# 8.3 Basic settings

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|144|0|MPRO_DRVCOM_AUTO_START| |DriveCom: Auto start of system|
|159|0|MPRO_CTRL_SEL| |Motion profile selection|
|165|0|MPRO_REF_SEL| |Motion profile selection|
|166|0|MPRO_REF_JTIME|ms|Motion profile jerk time|
|167|0|MPRO_REF_OVR|%|Motion profile override factor|
|223|0|MPRO_REF_Config| |Motion profile: Config of specific profiling behaviour|
|301|0|CON_REF_Mode| |Mode selection of setpoint profiling|
|306|0|CON_IpRefTS|ms|Sampling time (for interpolation)|
|335|0|CON_SCON_DirLock| |Direction lock for speed reference value|
|370|0|CON_IP| |Interpolation type|
|755|0|MPRO_FG_RefPosFilType| |Position reference filter type|
|756| |MPRO_FG_RefPosFilData| |Reference position filter data|
|756|0|RefFil_TimeConst|ms|Position reference filter time constant (PT1/PT2/AVG)|
|756|1|RefFil_DampConst| |Position reference filter damping constant|

Image 8.24: “Basic settings” screen

Interpolation

Table 8.17: “Motion profile - Basic settings” parameters

See Section ""Interpolation"" on page 246.

# 8.3.1 PG mode with speed control

NOTE

- The reference filters are initialized only after the control has been re-enabled or by a device restart.
- Select reference source
- Motion profile adaptation: scaling, ramps and smoothing time.
- In reference processing by way of the profile generator the fine interpolator is always in use.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 241

# 8 Motion profile

# 8 Motion profile

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 242

# Profile Generator with speed control:

- Control mode P 300[0] - CON_CfgCon = speed control
- Under Profile select the profile generator (PG) P 301[0] - CON_Ref_Mode = PG(0)
- Selection of reference source/>P 165[0] - MPRO_REF_SEL
- Scaling
- Select jerk conditions
- Set stop ramps, smoothing, filter, homing

# 8.3.2 PG mode with position control

Travel commands are transmitted to the internal profile generator (see Section ""Basic settings"" on page 241). It is composed of the following items:

- Target position
- Maximum travel speed
- Maximum acceleration
- Maximum deceleration

The profile generator uses the P 166[0] - MPRO_REF_JTIME jerk values and a P 167[0] - MPRO_REF_OVR override factor for the travel speed in order to generate the trajectory for the position setpoint that will take the least amount of time, taking all limitations into account.

The position references are then processed with the selected interpolation method.

# 8 Motion profile

# 8.3.2.1 Motion profile / Basic settings

The position references are used to generate pre-control values for speed Interpolation (IP) mode and acceleration. These are scanned at the sampling time of the position controller (normally 125 μs) and switched to the control loops.

Reference values are interpolated in linear mode before being switched to the control loops.

- The profile generator is inactive.
- Ramps and smoothing are inactive.
- The reference values are switched directly to the closed-loop control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# Speed control in IP mode:

- Control mode P 300[0] - CON_CfgCon = speed control or setting via Modes of Operation (CAN, EtherCAT®)
- Selection of reference source P 165[0] - MPRO_REF_SEL

Image 8.27: PG mode with position control

# 8.3.3 IP mode with speed control

In IP (Interpolation) mode the appropriate reference source and correct scaling of units are selected for the speed reference before the reference is passed via the interpolator to the control. Linear interpolation is always applied in this process.

",What are the key components of the profile generator in PG mode with position control as described in the 'MSD ServoDrive - DeviceHelp' document?,"The profile generator uses target position, maximum travel speed, maximum acceleration, and maximum deceleration to create efficient motion trajectories.",The document details that jerk values and an override factor for travel speed are also utilized to optimize motion profiles.,"In 'MSD ServoDrive - DeviceHelp', the profile generator is highlighted for its role in calculating the fastest possible path within set limits.",Key inputs to the profile generator include dynamic parameters like speed and acceleration to ensure smooth and timely movement.,The 'MSD ServoDrive - DeviceHelp' explains that the profile generator synthesizes motion commands into optimal trajectories for position control.
