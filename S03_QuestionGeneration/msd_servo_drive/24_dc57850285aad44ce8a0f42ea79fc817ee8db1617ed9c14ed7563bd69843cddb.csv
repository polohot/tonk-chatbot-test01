,NODE_FILE_NAME,NODE_NUMBER,NODE_HASH,NODE_TEXT,Q,A1,A2,A3,A4,A5
0,msd_servo_drive.txt,24,dc57850285aad44ce8a0f42ea79fc817ee8db1617ed9c14ed7563bd69843cddb,"The pseudo-standard described below has however been established for motor feedback interfaces. Moog supports this version first and foremost.

The following table lists the parameters for cyclical SSI operation on encoder channel Ch 1. It also points out possible differences between the use of the SSI interface with the “cyclical” method and “one-time reading” method when using Sin/Cos encoders with an SSI absolute value interface.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

SSI wire break monitoring (bit monitoring during monoflop time) The Sel, Lines, MultiT and SingleT parameters are self-explanatory. If monitoring is enabled, the controller, as the SSI clock master, will read data for one more clock cycle after the data bits (reading data after the data bits end is permissible). The bit that the master reads in addition to the data bits this way comes from the SSI encoder’s monoflop time. At the time corresponding to this bit, the SSI encoder must drive the data lines with a logic 0. If the data lines on connector X7 are open, a logic 1 will be read here. The bit monitoring at this point makes it possible to determine whether the SSI data lines are being actively driven with a logic 0 at this point (no “wire break”) or are not (“wire break”). SSI wire break monitoring can be disabled by setting P 546[0] - ENC_CH1_Mode to 0001h.

# Mode parameters and CycleCount parameters

P 546[0] - ENC_CH1_Mode can be used to run a parity evaluation after the data. In addition, ENC_CH1_Mode makes it possible to run special SSI encoders that deliver one or more special bits after the data. In this case, the MSD Servo Drive will not evaluate these bits – this mode is meant to make it possible to work with SSI encoders that require for these bits to be sampled. P 616[0] - ENC_CH1_CycleCount makes it possible to run slower SSI encoders that cannot handle the required cycle of 125 μs. The control characteristics will deteriorate when using this type of SSI encoder, which is why doing so is not recommended.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|505|0 ENC_CH1_Sel|=SSI(2)| |
|543|0 ENC_CH1_MultiT| |Number of MultiTurn bits (absolute encoder)|
|544|0 ENC_CH1_SingleT| |Number of SingleTurn bits (absolute encoder)|
|545|0 ENC_CH1_Code| |Code selection (SSI absolute encoder)|
|546|0 ENC_CH1_Mode| |Mode selection (SSI absolute encoder)|
|547|0 ENC_CH1_MTBase| |Minimum MultiTurn position (SSI absolute encoder)|
|548|0 ENC_CH1_MTEnable| |Channel 1: Multi-turn as single-turn|
|598|0 ENC_CH1_Position|inc|Position encoder channel 1|
|616|0 ENC_CH1_CycleCount| |Channel 1: Position encoder sampling cycle (n x 125 μsec)|

# NOTE

- Linear SSI encoders will be treated as rotary SSI encoders. In this case, it is impossible to determine that the system is a linear encoder system based on the encoder head.
- P 543[0] - ENC_CH1_MultiT = Number of multi-turn bits: 0..14 Due to the design of the cyclical SSI interface as a motor feedback interface, the number of multi-turn bits is limited to 14 (no limit to 14 bits in the case of a Sin/Cos interface with SSI one-time reading).
- P 545[0] - ENC_CH1_Code = SSI decoding: BINARY(0) or GRAY(1) Gray decoding will be selected by default. The other option is to use binary decoding.
- P 546[0] - ENC_CH1_Mode = Available SSI auxiliary settings This parameter has a 16-bit hex value. With the default setting (0000h), SSI wire break monitoring will be enabled. A value of 0001h will disable SSI wire break monitoring, meaning that one bit less will be read.

# Following is a list of what some of the terms in the table below stand for:

- Data = Sequence of all data bits
- EncObs = Wire break bit
- Nothing = No bit
- POdd = Odd parity bit
- PEven = Even parity bit
- Free = A free bit

# 6 Encoder

# 6.5.6 Encoder gearing

NOTE

- Please read the general information on encoder gearing found in Section ""Introduction"" on page 52 beforehand.

Encoder channels Ch1 to Ch3 each feature their own encoder gearing, while encoder channel Ch4 (virtual encoders) does not feature any encoder gearing. In the case of encoder channel Ch2, it is assumed that the resolver will always be used as a commutation encoder on the motor shaft. Because of this, the numerator adjustment range is limited to a value of (+1) or (-1), while the denominator is set at a fixed value of (+1), for the Ch2 encoder gearing ratio. This means that the only option available is to invert the encoder signal (direction reversal).

As a whole, the encoder gearing is a scaling factor in the encoder evaluation system and consists of numerator N (ENC_CHx_Num) for the motor side and denominator D (ENC_CHx_Denom) for the encoder side (output side).

The following are used to configure the encoder gearing...

- Ch1 with P 510[0] - ENC_CH1_Num and P 511[0] - ENC_CH1_Denom,
- Ch2 with P 512[0] - ENC_CH2_Num and P 513[0] - ENC_CH2_Denom,
- Ch3 with P 514[0] - ENC_CH3_Num and P 515[0] - ENC_CH3_Denom.

|P No.|Index|Name|Unit|Description|
|---|---|---|---|---|
|510|0|ENC_CH1_Num| |Denominator of channel 1|
|511|0|ENC_CH1_Denom| |Numerator of channel 1|
|512|0|ENC_CH2_Num| |Denominator of channel 2|
|513|0|ENC_CH2_Denom| |Numerator of channel 2|
|514|0|ENC_CH3_Num| |Denominator of channel 3|
|515|0|ENC_CH3_Denom| |Numerator of channel 3|

# Table 6.13: SSI mode parameters (all other values are reserved)

|ID|Value|Name|
|---|---|---|
|546| |ENC_CH1_Mode|
| |0000h|Data_EncObs|
| |0001h|Data_Nothing|
| |0002h|Data_POdd_EncObs|
| |0003h|Data_Free_POdd_EncObs|
| |0004h|Data_POdd|
| |0005h|Data_Free_POdd|
| |0006h|Data_Free_EncObs|
| |0007h|Data_Free_Free_EncObs|
| |000Ch|Data_PEven_EncObs|
| |000Dh|Data_Free_PEven_EncObs|
| |000Eh|Data_PEven|
| |000Fh|Data_Free_PEven|
| |001Fh|Data_Free|
| |0020h|Data_Free_Free|
| |0021h|Data_Free_Free_Free|
| |0022h|Data_Free_Free_Free_Free|

P 616[0] - ENC_CH1_CycleCount = Sampling cycle in: n x 125 μs (microseconds):

ENC_CH1_CycleCount can be used to slow down the timing for the cyclical SSI encoder evaluation. By default, ENC_CH1_CycleCount = 1, i.e. the default setting corresponds to 125 μs sampling and cycles for the encoder evaluation. Different settings must be viewed as special cases and must only be used when necessary.

Monitoring the position difference With SSI encoders, the position difference is monitored automatically. The limit value is based on the maximum speed with reference to one scanning step (125μs). The position difference between two scanning steps is restricted to this limit value. In the event of an EMC disturbance, this limits the (incorrectly detected) tracking error and the response of the controller.

MOOG ID No.:CB40859-001 Date:11/2020

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 72

# Parameters

l P 500[0] - ENC_CH1_ActVal[0].SingleTurn and

l P 500[1] - ENC_CH1_ActVal[1].MultiTurn

are used, for example, to indicate the current position value at the output for encoder channel Ch1. These parameters can also be used for checking purposes during commissioning.

# NOTE

l This value at the encoder channel output...

- Already contains the encoder gearing ratio factor (N/D)
- Will be passed into the system in this way (incl. the encoder gearing ratio)
- I.e. is “the value” from the encoder evaluation system

The encoder gearing ratio has a multiplicative effect on the position progress, i.e. either “expanding” or “compressing”.

A distinction can be drawn between an encoder’s motor mode and field mode:

- Motor mode: The encoder is the motor commutation encoder
- Field encoder: The encoder is not the motor commutation encoder (instead, it is an additional encoder in the “field”, e.g. used for position control purposes)

This screen is used to select the encoder for channel Ch2. This channel is used to measure position changes periodically and add them up cyclically – this is referred to as “cyclical evaluation”. Encoder channel Ch2 does not feature an absolute value interface. In addition to evaluating resolvers, this channel can also be used to capture “simple” Sin/Cos signals (up to a max. of 1 kHz and with no zero pulse).

Resolvers must always be evaluated using encoder channel Ch2 (P 506 - ENC_CH2_Sel = RES(1)). The resolver pole pairs are set via P 560[0] - ENC_CH2_Lines.

# Resolver basics and requirements

The connected resolver must meet the following criteria:

- Ccw (positive signal progress corresponds to an anticlockwise direction when looking at the shaft from above)
- No transformation phase shift
- Transformation ratio of approx. 0.5

GPOC is a special Moog online process for improving the quality of Sin/Cos signals before they are used to calculate a position. If Sel = RES(1) or Sel = SINCOS (2), this process may come in handy. For details see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74.

**Encoder configuration channel 2 (X6) parameters**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
|506|0|ENC_CH2_Sel| |OFF (0) No evaluation RES(1) Resolver evaluation SinCos(2) Resolver excitation shut-off; evaluation of a Sin/Cos encoder (max 1kHz) possible.|
|512|0|ENC_CH2_Num| |Numerator of encoder gearing [-1...+1]|
|513|0|ENC_CH2_Denom| |Denominator of encoder gearing [only +1]|
|560|0|ENC_CH2_Lines| |Number of pole pairs of resolver|
|561|0|ENC_CH2_Corr| |Encoder correction GPOC|
|562| |ENC_CH2_CorrVal| |0 Offset S2-S4 track 1 Offset S1-S3 track 2 Gain S2-S4 track 3 Gain S1-S3 track 4 Phase|
|563|0|ENC_CH2_EncObsMin| |Amplitude monitoring Minimum|
|564|0|ENC_CH2_Info| |Encoder name|
|565| |ENC_CH2_LineDelay|μs|Correction of phase shift for cable lengths > 50 m (only after consultation with Moog).|

MOOG ID No.:CB40859-001 Date:11/2020

# Encoder

**Encoder configuration channel 2 (X6) parameters (continue)**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
| |0|ResExc|us|Exciter signal phase shift|
| | |Delay|us|Compensation for commutation angle|
|566|0|ENC_CH2_Amplitude|±|Correction of amplitude for cable lengths > 50 m (only after consultation with Moog).|
|567|0|ENC_CH2_EncObsAct| |Amplitude of analog signal|

The Sel and Lines parameters are self-explanatory.

Other parameters, such as Num and Denom, are described elsewhere (see Section ""Encoder gearing X6"" on page 75).

- P 561[0] - ENC_CH2_Corr = Signal correction type
The GPOC routine used for track signal correction purposes for sine/cosine signals is used to compensate for systematic errors. The routine is controlled with the Corr and CorrVal parameters (see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74).
- P 563[0] - ENC_CH2_EncObsMin = Encoder monitoring minimum, sqrt (a²+b²)
This parameter is used to scale the resolver and Sin/Cos wire break monitoring and represents the “downwards threshold” for an error message. The default setting is 0.2, corresponding to approx. ",What is the purpose of SSI wire break monitoring in the MSD ServoDrive?,SSI wire break monitoring checks if the SSI data lines are actively driven with a logic 0 during the monoflop time to detect any breaks in the wires.,"The purpose is to detect wire breaks by ensuring the SSI encoder drives the data lines with a logic 0 at the monoflop time; if not, it indicates a break.","To determine wire integrity, the system reads an additional bit during the monoflop time, expecting a logic 0. A logic 1 suggests a wire break.","It enables the detection of SSI data line breaks by monitoring for a logic 0 during the encoder's monoflop time, with a logic 1 indicating a break.","SSI wire break monitoring ensures data line integrity by checking for a logic 0 at the monoflop time, with absence indicating a potential wire break."
1,msd_servo_drive.txt,24,dc57850285aad44ce8a0f42ea79fc817ee8db1617ed9c14ed7563bd69843cddb,"The pseudo-standard described below has however been established for motor feedback interfaces. Moog supports this version first and foremost.

The following table lists the parameters for cyclical SSI operation on encoder channel Ch 1. It also points out possible differences between the use of the SSI interface with the “cyclical” method and “one-time reading” method when using Sin/Cos encoders with an SSI absolute value interface.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

SSI wire break monitoring (bit monitoring during monoflop time) The Sel, Lines, MultiT and SingleT parameters are self-explanatory. If monitoring is enabled, the controller, as the SSI clock master, will read data for one more clock cycle after the data bits (reading data after the data bits end is permissible). The bit that the master reads in addition to the data bits this way comes from the SSI encoder’s monoflop time. At the time corresponding to this bit, the SSI encoder must drive the data lines with a logic 0. If the data lines on connector X7 are open, a logic 1 will be read here. The bit monitoring at this point makes it possible to determine whether the SSI data lines are being actively driven with a logic 0 at this point (no “wire break”) or are not (“wire break”). SSI wire break monitoring can be disabled by setting P 546[0] - ENC_CH1_Mode to 0001h.

# Mode parameters and CycleCount parameters

P 546[0] - ENC_CH1_Mode can be used to run a parity evaluation after the data. In addition, ENC_CH1_Mode makes it possible to run special SSI encoders that deliver one or more special bits after the data. In this case, the MSD Servo Drive will not evaluate these bits – this mode is meant to make it possible to work with SSI encoders that require for these bits to be sampled. P 616[0] - ENC_CH1_CycleCount makes it possible to run slower SSI encoders that cannot handle the required cycle of 125 μs. The control characteristics will deteriorate when using this type of SSI encoder, which is why doing so is not recommended.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|505|0 ENC_CH1_Sel|=SSI(2)| |
|543|0 ENC_CH1_MultiT| |Number of MultiTurn bits (absolute encoder)|
|544|0 ENC_CH1_SingleT| |Number of SingleTurn bits (absolute encoder)|
|545|0 ENC_CH1_Code| |Code selection (SSI absolute encoder)|
|546|0 ENC_CH1_Mode| |Mode selection (SSI absolute encoder)|
|547|0 ENC_CH1_MTBase| |Minimum MultiTurn position (SSI absolute encoder)|
|548|0 ENC_CH1_MTEnable| |Channel 1: Multi-turn as single-turn|
|598|0 ENC_CH1_Position|inc|Position encoder channel 1|
|616|0 ENC_CH1_CycleCount| |Channel 1: Position encoder sampling cycle (n x 125 μsec)|

# NOTE

- Linear SSI encoders will be treated as rotary SSI encoders. In this case, it is impossible to determine that the system is a linear encoder system based on the encoder head.
- P 543[0] - ENC_CH1_MultiT = Number of multi-turn bits: 0..14 Due to the design of the cyclical SSI interface as a motor feedback interface, the number of multi-turn bits is limited to 14 (no limit to 14 bits in the case of a Sin/Cos interface with SSI one-time reading).
- P 545[0] - ENC_CH1_Code = SSI decoding: BINARY(0) or GRAY(1) Gray decoding will be selected by default. The other option is to use binary decoding.
- P 546[0] - ENC_CH1_Mode = Available SSI auxiliary settings This parameter has a 16-bit hex value. With the default setting (0000h), SSI wire break monitoring will be enabled. A value of 0001h will disable SSI wire break monitoring, meaning that one bit less will be read.

# Following is a list of what some of the terms in the table below stand for:

- Data = Sequence of all data bits
- EncObs = Wire break bit
- Nothing = No bit
- POdd = Odd parity bit
- PEven = Even parity bit
- Free = A free bit

# 6 Encoder

# 6.5.6 Encoder gearing

NOTE

- Please read the general information on encoder gearing found in Section ""Introduction"" on page 52 beforehand.

Encoder channels Ch1 to Ch3 each feature their own encoder gearing, while encoder channel Ch4 (virtual encoders) does not feature any encoder gearing. In the case of encoder channel Ch2, it is assumed that the resolver will always be used as a commutation encoder on the motor shaft. Because of this, the numerator adjustment range is limited to a value of (+1) or (-1), while the denominator is set at a fixed value of (+1), for the Ch2 encoder gearing ratio. This means that the only option available is to invert the encoder signal (direction reversal).

As a whole, the encoder gearing is a scaling factor in the encoder evaluation system and consists of numerator N (ENC_CHx_Num) for the motor side and denominator D (ENC_CHx_Denom) for the encoder side (output side).

The following are used to configure the encoder gearing...

- Ch1 with P 510[0] - ENC_CH1_Num and P 511[0] - ENC_CH1_Denom,
- Ch2 with P 512[0] - ENC_CH2_Num and P 513[0] - ENC_CH2_Denom,
- Ch3 with P 514[0] - ENC_CH3_Num and P 515[0] - ENC_CH3_Denom.

|P No.|Index|Name|Unit|Description|
|---|---|---|---|---|
|510|0|ENC_CH1_Num| |Denominator of channel 1|
|511|0|ENC_CH1_Denom| |Numerator of channel 1|
|512|0|ENC_CH2_Num| |Denominator of channel 2|
|513|0|ENC_CH2_Denom| |Numerator of channel 2|
|514|0|ENC_CH3_Num| |Denominator of channel 3|
|515|0|ENC_CH3_Denom| |Numerator of channel 3|

# Table 6.13: SSI mode parameters (all other values are reserved)

|ID|Value|Name|
|---|---|---|
|546| |ENC_CH1_Mode|
| |0000h|Data_EncObs|
| |0001h|Data_Nothing|
| |0002h|Data_POdd_EncObs|
| |0003h|Data_Free_POdd_EncObs|
| |0004h|Data_POdd|
| |0005h|Data_Free_POdd|
| |0006h|Data_Free_EncObs|
| |0007h|Data_Free_Free_EncObs|
| |000Ch|Data_PEven_EncObs|
| |000Dh|Data_Free_PEven_EncObs|
| |000Eh|Data_PEven|
| |000Fh|Data_Free_PEven|
| |001Fh|Data_Free|
| |0020h|Data_Free_Free|
| |0021h|Data_Free_Free_Free|
| |0022h|Data_Free_Free_Free_Free|

P 616[0] - ENC_CH1_CycleCount = Sampling cycle in: n x 125 μs (microseconds):

ENC_CH1_CycleCount can be used to slow down the timing for the cyclical SSI encoder evaluation. By default, ENC_CH1_CycleCount = 1, i.e. the default setting corresponds to 125 μs sampling and cycles for the encoder evaluation. Different settings must be viewed as special cases and must only be used when necessary.

Monitoring the position difference With SSI encoders, the position difference is monitored automatically. The limit value is based on the maximum speed with reference to one scanning step (125μs). The position difference between two scanning steps is restricted to this limit value. In the event of an EMC disturbance, this limits the (incorrectly detected) tracking error and the response of the controller.

MOOG ID No.:CB40859-001 Date:11/2020

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 72

# Parameters

l P 500[0] - ENC_CH1_ActVal[0].SingleTurn and

l P 500[1] - ENC_CH1_ActVal[1].MultiTurn

are used, for example, to indicate the current position value at the output for encoder channel Ch1. These parameters can also be used for checking purposes during commissioning.

# NOTE

l This value at the encoder channel output...

- Already contains the encoder gearing ratio factor (N/D)
- Will be passed into the system in this way (incl. the encoder gearing ratio)
- I.e. is “the value” from the encoder evaluation system

The encoder gearing ratio has a multiplicative effect on the position progress, i.e. either “expanding” or “compressing”.

A distinction can be drawn between an encoder’s motor mode and field mode:

- Motor mode: The encoder is the motor commutation encoder
- Field encoder: The encoder is not the motor commutation encoder (instead, it is an additional encoder in the “field”, e.g. used for position control purposes)

This screen is used to select the encoder for channel Ch2. This channel is used to measure position changes periodically and add them up cyclically – this is referred to as “cyclical evaluation”. Encoder channel Ch2 does not feature an absolute value interface. In addition to evaluating resolvers, this channel can also be used to capture “simple” Sin/Cos signals (up to a max. of 1 kHz and with no zero pulse).

Resolvers must always be evaluated using encoder channel Ch2 (P 506 - ENC_CH2_Sel = RES(1)). The resolver pole pairs are set via P 560[0] - ENC_CH2_Lines.

# Resolver basics and requirements

The connected resolver must meet the following criteria:

- Ccw (positive signal progress corresponds to an anticlockwise direction when looking at the shaft from above)
- No transformation phase shift
- Transformation ratio of approx. 0.5

GPOC is a special Moog online process for improving the quality of Sin/Cos signals before they are used to calculate a position. If Sel = RES(1) or Sel = SINCOS (2), this process may come in handy. For details see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74.

**Encoder configuration channel 2 (X6) parameters**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
|506|0|ENC_CH2_Sel| |OFF (0) No evaluation RES(1) Resolver evaluation SinCos(2) Resolver excitation shut-off; evaluation of a Sin/Cos encoder (max 1kHz) possible.|
|512|0|ENC_CH2_Num| |Numerator of encoder gearing [-1...+1]|
|513|0|ENC_CH2_Denom| |Denominator of encoder gearing [only +1]|
|560|0|ENC_CH2_Lines| |Number of pole pairs of resolver|
|561|0|ENC_CH2_Corr| |Encoder correction GPOC|
|562| |ENC_CH2_CorrVal| |0 Offset S2-S4 track 1 Offset S1-S3 track 2 Gain S2-S4 track 3 Gain S1-S3 track 4 Phase|
|563|0|ENC_CH2_EncObsMin| |Amplitude monitoring Minimum|
|564|0|ENC_CH2_Info| |Encoder name|
|565| |ENC_CH2_LineDelay|μs|Correction of phase shift for cable lengths > 50 m (only after consultation with Moog).|

MOOG ID No.:CB40859-001 Date:11/2020

# Encoder

**Encoder configuration channel 2 (X6) parameters (continue)**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
| |0|ResExc|us|Exciter signal phase shift|
| | |Delay|us|Compensation for commutation angle|
|566|0|ENC_CH2_Amplitude|±|Correction of amplitude for cable lengths > 50 m (only after consultation with Moog).|
|567|0|ENC_CH2_EncObsAct| |Amplitude of analog signal|

The Sel and Lines parameters are self-explanatory.

Other parameters, such as Num and Denom, are described elsewhere (see Section ""Encoder gearing X6"" on page 75).

- P 561[0] - ENC_CH2_Corr = Signal correction type
The GPOC routine used for track signal correction purposes for sine/cosine signals is used to compensate for systematic errors. The routine is controlled with the Corr and CorrVal parameters (see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74).
- P 563[0] - ENC_CH2_EncObsMin = Encoder monitoring minimum, sqrt (a²+b²)
This parameter is used to scale the resolver and Sin/Cos wire break monitoring and represents the “downwards threshold” for an error message. The default setting is 0.2, corresponding to approx. ",How can SSI wire break monitoring be disabled in the MSD ServoDrive?,By setting P 546[0] - ENC_CH1_Mode to 0001h.,Disable it by configuring ENC_CH1_Mode parameter to 0001h.,Setting the ENC_CH1_Mode parameter to 0001h turns off SSI wire break monitoring.,"To disable, adjust the ENC_CH1_Mode to 0001h, which stops the monitoring feature.",SSI wire break monitoring is disabled when ENC_CH1_Mode is set to the hexadecimal value 0001h.
2,msd_servo_drive.txt,24,dc57850285aad44ce8a0f42ea79fc817ee8db1617ed9c14ed7563bd69843cddb,"The pseudo-standard described below has however been established for motor feedback interfaces. Moog supports this version first and foremost.

The following table lists the parameters for cyclical SSI operation on encoder channel Ch 1. It also points out possible differences between the use of the SSI interface with the “cyclical” method and “one-time reading” method when using Sin/Cos encoders with an SSI absolute value interface.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

SSI wire break monitoring (bit monitoring during monoflop time) The Sel, Lines, MultiT and SingleT parameters are self-explanatory. If monitoring is enabled, the controller, as the SSI clock master, will read data for one more clock cycle after the data bits (reading data after the data bits end is permissible). The bit that the master reads in addition to the data bits this way comes from the SSI encoder’s monoflop time. At the time corresponding to this bit, the SSI encoder must drive the data lines with a logic 0. If the data lines on connector X7 are open, a logic 1 will be read here. The bit monitoring at this point makes it possible to determine whether the SSI data lines are being actively driven with a logic 0 at this point (no “wire break”) or are not (“wire break”). SSI wire break monitoring can be disabled by setting P 546[0] - ENC_CH1_Mode to 0001h.

# Mode parameters and CycleCount parameters

P 546[0] - ENC_CH1_Mode can be used to run a parity evaluation after the data. In addition, ENC_CH1_Mode makes it possible to run special SSI encoders that deliver one or more special bits after the data. In this case, the MSD Servo Drive will not evaluate these bits – this mode is meant to make it possible to work with SSI encoders that require for these bits to be sampled. P 616[0] - ENC_CH1_CycleCount makes it possible to run slower SSI encoders that cannot handle the required cycle of 125 μs. The control characteristics will deteriorate when using this type of SSI encoder, which is why doing so is not recommended.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|505|0 ENC_CH1_Sel|=SSI(2)| |
|543|0 ENC_CH1_MultiT| |Number of MultiTurn bits (absolute encoder)|
|544|0 ENC_CH1_SingleT| |Number of SingleTurn bits (absolute encoder)|
|545|0 ENC_CH1_Code| |Code selection (SSI absolute encoder)|
|546|0 ENC_CH1_Mode| |Mode selection (SSI absolute encoder)|
|547|0 ENC_CH1_MTBase| |Minimum MultiTurn position (SSI absolute encoder)|
|548|0 ENC_CH1_MTEnable| |Channel 1: Multi-turn as single-turn|
|598|0 ENC_CH1_Position|inc|Position encoder channel 1|
|616|0 ENC_CH1_CycleCount| |Channel 1: Position encoder sampling cycle (n x 125 μsec)|

# NOTE

- Linear SSI encoders will be treated as rotary SSI encoders. In this case, it is impossible to determine that the system is a linear encoder system based on the encoder head.
- P 543[0] - ENC_CH1_MultiT = Number of multi-turn bits: 0..14 Due to the design of the cyclical SSI interface as a motor feedback interface, the number of multi-turn bits is limited to 14 (no limit to 14 bits in the case of a Sin/Cos interface with SSI one-time reading).
- P 545[0] - ENC_CH1_Code = SSI decoding: BINARY(0) or GRAY(1) Gray decoding will be selected by default. The other option is to use binary decoding.
- P 546[0] - ENC_CH1_Mode = Available SSI auxiliary settings This parameter has a 16-bit hex value. With the default setting (0000h), SSI wire break monitoring will be enabled. A value of 0001h will disable SSI wire break monitoring, meaning that one bit less will be read.

# Following is a list of what some of the terms in the table below stand for:

- Data = Sequence of all data bits
- EncObs = Wire break bit
- Nothing = No bit
- POdd = Odd parity bit
- PEven = Even parity bit
- Free = A free bit

# 6 Encoder

# 6.5.6 Encoder gearing

NOTE

- Please read the general information on encoder gearing found in Section ""Introduction"" on page 52 beforehand.

Encoder channels Ch1 to Ch3 each feature their own encoder gearing, while encoder channel Ch4 (virtual encoders) does not feature any encoder gearing. In the case of encoder channel Ch2, it is assumed that the resolver will always be used as a commutation encoder on the motor shaft. Because of this, the numerator adjustment range is limited to a value of (+1) or (-1), while the denominator is set at a fixed value of (+1), for the Ch2 encoder gearing ratio. This means that the only option available is to invert the encoder signal (direction reversal).

As a whole, the encoder gearing is a scaling factor in the encoder evaluation system and consists of numerator N (ENC_CHx_Num) for the motor side and denominator D (ENC_CHx_Denom) for the encoder side (output side).

The following are used to configure the encoder gearing...

- Ch1 with P 510[0] - ENC_CH1_Num and P 511[0] - ENC_CH1_Denom,
- Ch2 with P 512[0] - ENC_CH2_Num and P 513[0] - ENC_CH2_Denom,
- Ch3 with P 514[0] - ENC_CH3_Num and P 515[0] - ENC_CH3_Denom.

|P No.|Index|Name|Unit|Description|
|---|---|---|---|---|
|510|0|ENC_CH1_Num| |Denominator of channel 1|
|511|0|ENC_CH1_Denom| |Numerator of channel 1|
|512|0|ENC_CH2_Num| |Denominator of channel 2|
|513|0|ENC_CH2_Denom| |Numerator of channel 2|
|514|0|ENC_CH3_Num| |Denominator of channel 3|
|515|0|ENC_CH3_Denom| |Numerator of channel 3|

# Table 6.13: SSI mode parameters (all other values are reserved)

|ID|Value|Name|
|---|---|---|
|546| |ENC_CH1_Mode|
| |0000h|Data_EncObs|
| |0001h|Data_Nothing|
| |0002h|Data_POdd_EncObs|
| |0003h|Data_Free_POdd_EncObs|
| |0004h|Data_POdd|
| |0005h|Data_Free_POdd|
| |0006h|Data_Free_EncObs|
| |0007h|Data_Free_Free_EncObs|
| |000Ch|Data_PEven_EncObs|
| |000Dh|Data_Free_PEven_EncObs|
| |000Eh|Data_PEven|
| |000Fh|Data_Free_PEven|
| |001Fh|Data_Free|
| |0020h|Data_Free_Free|
| |0021h|Data_Free_Free_Free|
| |0022h|Data_Free_Free_Free_Free|

P 616[0] - ENC_CH1_CycleCount = Sampling cycle in: n x 125 μs (microseconds):

ENC_CH1_CycleCount can be used to slow down the timing for the cyclical SSI encoder evaluation. By default, ENC_CH1_CycleCount = 1, i.e. the default setting corresponds to 125 μs sampling and cycles for the encoder evaluation. Different settings must be viewed as special cases and must only be used when necessary.

Monitoring the position difference With SSI encoders, the position difference is monitored automatically. The limit value is based on the maximum speed with reference to one scanning step (125μs). The position difference between two scanning steps is restricted to this limit value. In the event of an EMC disturbance, this limits the (incorrectly detected) tracking error and the response of the controller.

MOOG ID No.:CB40859-001 Date:11/2020

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 72

# Parameters

l P 500[0] - ENC_CH1_ActVal[0].SingleTurn and

l P 500[1] - ENC_CH1_ActVal[1].MultiTurn

are used, for example, to indicate the current position value at the output for encoder channel Ch1. These parameters can also be used for checking purposes during commissioning.

# NOTE

l This value at the encoder channel output...

- Already contains the encoder gearing ratio factor (N/D)
- Will be passed into the system in this way (incl. the encoder gearing ratio)
- I.e. is “the value” from the encoder evaluation system

The encoder gearing ratio has a multiplicative effect on the position progress, i.e. either “expanding” or “compressing”.

A distinction can be drawn between an encoder’s motor mode and field mode:

- Motor mode: The encoder is the motor commutation encoder
- Field encoder: The encoder is not the motor commutation encoder (instead, it is an additional encoder in the “field”, e.g. used for position control purposes)

This screen is used to select the encoder for channel Ch2. This channel is used to measure position changes periodically and add them up cyclically – this is referred to as “cyclical evaluation”. Encoder channel Ch2 does not feature an absolute value interface. In addition to evaluating resolvers, this channel can also be used to capture “simple” Sin/Cos signals (up to a max. of 1 kHz and with no zero pulse).

Resolvers must always be evaluated using encoder channel Ch2 (P 506 - ENC_CH2_Sel = RES(1)). The resolver pole pairs are set via P 560[0] - ENC_CH2_Lines.

# Resolver basics and requirements

The connected resolver must meet the following criteria:

- Ccw (positive signal progress corresponds to an anticlockwise direction when looking at the shaft from above)
- No transformation phase shift
- Transformation ratio of approx. 0.5

GPOC is a special Moog online process for improving the quality of Sin/Cos signals before they are used to calculate a position. If Sel = RES(1) or Sel = SINCOS (2), this process may come in handy. For details see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74.

**Encoder configuration channel 2 (X6) parameters**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
|506|0|ENC_CH2_Sel| |OFF (0) No evaluation RES(1) Resolver evaluation SinCos(2) Resolver excitation shut-off; evaluation of a Sin/Cos encoder (max 1kHz) possible.|
|512|0|ENC_CH2_Num| |Numerator of encoder gearing [-1...+1]|
|513|0|ENC_CH2_Denom| |Denominator of encoder gearing [only +1]|
|560|0|ENC_CH2_Lines| |Number of pole pairs of resolver|
|561|0|ENC_CH2_Corr| |Encoder correction GPOC|
|562| |ENC_CH2_CorrVal| |0 Offset S2-S4 track 1 Offset S1-S3 track 2 Gain S2-S4 track 3 Gain S1-S3 track 4 Phase|
|563|0|ENC_CH2_EncObsMin| |Amplitude monitoring Minimum|
|564|0|ENC_CH2_Info| |Encoder name|
|565| |ENC_CH2_LineDelay|μs|Correction of phase shift for cable lengths > 50 m (only after consultation with Moog).|

MOOG ID No.:CB40859-001 Date:11/2020

# Encoder

**Encoder configuration channel 2 (X6) parameters (continue)**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
| |0|ResExc|us|Exciter signal phase shift|
| | |Delay|us|Compensation for commutation angle|
|566|0|ENC_CH2_Amplitude|±|Correction of amplitude for cable lengths > 50 m (only after consultation with Moog).|
|567|0|ENC_CH2_EncObsAct| |Amplitude of analog signal|

The Sel and Lines parameters are self-explanatory.

Other parameters, such as Num and Denom, are described elsewhere (see Section ""Encoder gearing X6"" on page 75).

- P 561[0] - ENC_CH2_Corr = Signal correction type
The GPOC routine used for track signal correction purposes for sine/cosine signals is used to compensate for systematic errors. The routine is controlled with the Corr and CorrVal parameters (see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74).
- P 563[0] - ENC_CH2_EncObsMin = Encoder monitoring minimum, sqrt (a²+b²)
This parameter is used to scale the resolver and Sin/Cos wire break monitoring and represents the “downwards threshold” for an error message. The default setting is 0.2, corresponding to approx. ",What are the limitations of using slower SSI encoders with the MSD ServoDrive?,Slower SSI encoders can degrade control characteristics and are not recommended due to their inability to handle the 125 μs cycle requirement.,"Using encoders that can't meet the 125 μs cycle slows down the system and worsens control performance, hence not advised.","Encoders unable to operate at 125 μs cycles may be used with ENC_CH1_CycleCount, but this compromises control quality.","The drive supports slower encoders via ENC_CH1_CycleCount, but this negatively impacts control dynamics and is discouraged.","While ENC_CH1_CycleCount accommodates slower SSI encoders, it leads to poorer control characteristics, making its use undesirable."
3,msd_servo_drive.txt,24,dc57850285aad44ce8a0f42ea79fc817ee8db1617ed9c14ed7563bd69843cddb,"The pseudo-standard described below has however been established for motor feedback interfaces. Moog supports this version first and foremost.

The following table lists the parameters for cyclical SSI operation on encoder channel Ch 1. It also points out possible differences between the use of the SSI interface with the “cyclical” method and “one-time reading” method when using Sin/Cos encoders with an SSI absolute value interface.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

SSI wire break monitoring (bit monitoring during monoflop time) The Sel, Lines, MultiT and SingleT parameters are self-explanatory. If monitoring is enabled, the controller, as the SSI clock master, will read data for one more clock cycle after the data bits (reading data after the data bits end is permissible). The bit that the master reads in addition to the data bits this way comes from the SSI encoder’s monoflop time. At the time corresponding to this bit, the SSI encoder must drive the data lines with a logic 0. If the data lines on connector X7 are open, a logic 1 will be read here. The bit monitoring at this point makes it possible to determine whether the SSI data lines are being actively driven with a logic 0 at this point (no “wire break”) or are not (“wire break”). SSI wire break monitoring can be disabled by setting P 546[0] - ENC_CH1_Mode to 0001h.

# Mode parameters and CycleCount parameters

P 546[0] - ENC_CH1_Mode can be used to run a parity evaluation after the data. In addition, ENC_CH1_Mode makes it possible to run special SSI encoders that deliver one or more special bits after the data. In this case, the MSD Servo Drive will not evaluate these bits – this mode is meant to make it possible to work with SSI encoders that require for these bits to be sampled. P 616[0] - ENC_CH1_CycleCount makes it possible to run slower SSI encoders that cannot handle the required cycle of 125 μs. The control characteristics will deteriorate when using this type of SSI encoder, which is why doing so is not recommended.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|505|0 ENC_CH1_Sel|=SSI(2)| |
|543|0 ENC_CH1_MultiT| |Number of MultiTurn bits (absolute encoder)|
|544|0 ENC_CH1_SingleT| |Number of SingleTurn bits (absolute encoder)|
|545|0 ENC_CH1_Code| |Code selection (SSI absolute encoder)|
|546|0 ENC_CH1_Mode| |Mode selection (SSI absolute encoder)|
|547|0 ENC_CH1_MTBase| |Minimum MultiTurn position (SSI absolute encoder)|
|548|0 ENC_CH1_MTEnable| |Channel 1: Multi-turn as single-turn|
|598|0 ENC_CH1_Position|inc|Position encoder channel 1|
|616|0 ENC_CH1_CycleCount| |Channel 1: Position encoder sampling cycle (n x 125 μsec)|

# NOTE

- Linear SSI encoders will be treated as rotary SSI encoders. In this case, it is impossible to determine that the system is a linear encoder system based on the encoder head.
- P 543[0] - ENC_CH1_MultiT = Number of multi-turn bits: 0..14 Due to the design of the cyclical SSI interface as a motor feedback interface, the number of multi-turn bits is limited to 14 (no limit to 14 bits in the case of a Sin/Cos interface with SSI one-time reading).
- P 545[0] - ENC_CH1_Code = SSI decoding: BINARY(0) or GRAY(1) Gray decoding will be selected by default. The other option is to use binary decoding.
- P 546[0] - ENC_CH1_Mode = Available SSI auxiliary settings This parameter has a 16-bit hex value. With the default setting (0000h), SSI wire break monitoring will be enabled. A value of 0001h will disable SSI wire break monitoring, meaning that one bit less will be read.

# Following is a list of what some of the terms in the table below stand for:

- Data = Sequence of all data bits
- EncObs = Wire break bit
- Nothing = No bit
- POdd = Odd parity bit
- PEven = Even parity bit
- Free = A free bit

# 6 Encoder

# 6.5.6 Encoder gearing

NOTE

- Please read the general information on encoder gearing found in Section ""Introduction"" on page 52 beforehand.

Encoder channels Ch1 to Ch3 each feature their own encoder gearing, while encoder channel Ch4 (virtual encoders) does not feature any encoder gearing. In the case of encoder channel Ch2, it is assumed that the resolver will always be used as a commutation encoder on the motor shaft. Because of this, the numerator adjustment range is limited to a value of (+1) or (-1), while the denominator is set at a fixed value of (+1), for the Ch2 encoder gearing ratio. This means that the only option available is to invert the encoder signal (direction reversal).

As a whole, the encoder gearing is a scaling factor in the encoder evaluation system and consists of numerator N (ENC_CHx_Num) for the motor side and denominator D (ENC_CHx_Denom) for the encoder side (output side).

The following are used to configure the encoder gearing...

- Ch1 with P 510[0] - ENC_CH1_Num and P 511[0] - ENC_CH1_Denom,
- Ch2 with P 512[0] - ENC_CH2_Num and P 513[0] - ENC_CH2_Denom,
- Ch3 with P 514[0] - ENC_CH3_Num and P 515[0] - ENC_CH3_Denom.

|P No.|Index|Name|Unit|Description|
|---|---|---|---|---|
|510|0|ENC_CH1_Num| |Denominator of channel 1|
|511|0|ENC_CH1_Denom| |Numerator of channel 1|
|512|0|ENC_CH2_Num| |Denominator of channel 2|
|513|0|ENC_CH2_Denom| |Numerator of channel 2|
|514|0|ENC_CH3_Num| |Denominator of channel 3|
|515|0|ENC_CH3_Denom| |Numerator of channel 3|

# Table 6.13: SSI mode parameters (all other values are reserved)

|ID|Value|Name|
|---|---|---|
|546| |ENC_CH1_Mode|
| |0000h|Data_EncObs|
| |0001h|Data_Nothing|
| |0002h|Data_POdd_EncObs|
| |0003h|Data_Free_POdd_EncObs|
| |0004h|Data_POdd|
| |0005h|Data_Free_POdd|
| |0006h|Data_Free_EncObs|
| |0007h|Data_Free_Free_EncObs|
| |000Ch|Data_PEven_EncObs|
| |000Dh|Data_Free_PEven_EncObs|
| |000Eh|Data_PEven|
| |000Fh|Data_Free_PEven|
| |001Fh|Data_Free|
| |0020h|Data_Free_Free|
| |0021h|Data_Free_Free_Free|
| |0022h|Data_Free_Free_Free_Free|

P 616[0] - ENC_CH1_CycleCount = Sampling cycle in: n x 125 μs (microseconds):

ENC_CH1_CycleCount can be used to slow down the timing for the cyclical SSI encoder evaluation. By default, ENC_CH1_CycleCount = 1, i.e. the default setting corresponds to 125 μs sampling and cycles for the encoder evaluation. Different settings must be viewed as special cases and must only be used when necessary.

Monitoring the position difference With SSI encoders, the position difference is monitored automatically. The limit value is based on the maximum speed with reference to one scanning step (125μs). The position difference between two scanning steps is restricted to this limit value. In the event of an EMC disturbance, this limits the (incorrectly detected) tracking error and the response of the controller.

MOOG ID No.:CB40859-001 Date:11/2020

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 72

# Parameters

l P 500[0] - ENC_CH1_ActVal[0].SingleTurn and

l P 500[1] - ENC_CH1_ActVal[1].MultiTurn

are used, for example, to indicate the current position value at the output for encoder channel Ch1. These parameters can also be used for checking purposes during commissioning.

# NOTE

l This value at the encoder channel output...

- Already contains the encoder gearing ratio factor (N/D)
- Will be passed into the system in this way (incl. the encoder gearing ratio)
- I.e. is “the value” from the encoder evaluation system

The encoder gearing ratio has a multiplicative effect on the position progress, i.e. either “expanding” or “compressing”.

A distinction can be drawn between an encoder’s motor mode and field mode:

- Motor mode: The encoder is the motor commutation encoder
- Field encoder: The encoder is not the motor commutation encoder (instead, it is an additional encoder in the “field”, e.g. used for position control purposes)

This screen is used to select the encoder for channel Ch2. This channel is used to measure position changes periodically and add them up cyclically – this is referred to as “cyclical evaluation”. Encoder channel Ch2 does not feature an absolute value interface. In addition to evaluating resolvers, this channel can also be used to capture “simple” Sin/Cos signals (up to a max. of 1 kHz and with no zero pulse).

Resolvers must always be evaluated using encoder channel Ch2 (P 506 - ENC_CH2_Sel = RES(1)). The resolver pole pairs are set via P 560[0] - ENC_CH2_Lines.

# Resolver basics and requirements

The connected resolver must meet the following criteria:

- Ccw (positive signal progress corresponds to an anticlockwise direction when looking at the shaft from above)
- No transformation phase shift
- Transformation ratio of approx. 0.5

GPOC is a special Moog online process for improving the quality of Sin/Cos signals before they are used to calculate a position. If Sel = RES(1) or Sel = SINCOS (2), this process may come in handy. For details see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74.

**Encoder configuration channel 2 (X6) parameters**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
|506|0|ENC_CH2_Sel| |OFF (0) No evaluation RES(1) Resolver evaluation SinCos(2) Resolver excitation shut-off; evaluation of a Sin/Cos encoder (max 1kHz) possible.|
|512|0|ENC_CH2_Num| |Numerator of encoder gearing [-1...+1]|
|513|0|ENC_CH2_Denom| |Denominator of encoder gearing [only +1]|
|560|0|ENC_CH2_Lines| |Number of pole pairs of resolver|
|561|0|ENC_CH2_Corr| |Encoder correction GPOC|
|562| |ENC_CH2_CorrVal| |0 Offset S2-S4 track 1 Offset S1-S3 track 2 Gain S2-S4 track 3 Gain S1-S3 track 4 Phase|
|563|0|ENC_CH2_EncObsMin| |Amplitude monitoring Minimum|
|564|0|ENC_CH2_Info| |Encoder name|
|565| |ENC_CH2_LineDelay|μs|Correction of phase shift for cable lengths > 50 m (only after consultation with Moog).|

MOOG ID No.:CB40859-001 Date:11/2020

# Encoder

**Encoder configuration channel 2 (X6) parameters (continue)**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
| |0|ResExc|us|Exciter signal phase shift|
| | |Delay|us|Compensation for commutation angle|
|566|0|ENC_CH2_Amplitude|±|Correction of amplitude for cable lengths > 50 m (only after consultation with Moog).|
|567|0|ENC_CH2_EncObsAct| |Amplitude of analog signal|

The Sel and Lines parameters are self-explanatory.

Other parameters, such as Num and Denom, are described elsewhere (see Section ""Encoder gearing X6"" on page 75).

- P 561[0] - ENC_CH2_Corr = Signal correction type
The GPOC routine used for track signal correction purposes for sine/cosine signals is used to compensate for systematic errors. The routine is controlled with the Corr and CorrVal parameters (see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74).
- P 563[0] - ENC_CH2_EncObsMin = Encoder monitoring minimum, sqrt (a²+b²)
This parameter is used to scale the resolver and Sin/Cos wire break monitoring and represents the “downwards threshold” for an error message. The default setting is 0.2, corresponding to approx. ",What is the default decoding method for SSI encoders in the MSD ServoDrive?,Gray decoding is selected by default.,The system defaults to Gray code decoding for SSI encoders.,"By default, the MSD ServoDrive uses Gray decoding for SSI encoder signals.",Gray decoding is the preset method for interpreting SSI encoder data.,"For SSI encoders, the default setting is to decode the signal using the Gray code method."
4,msd_servo_drive.txt,24,dc57850285aad44ce8a0f42ea79fc817ee8db1617ed9c14ed7563bd69843cddb,"The pseudo-standard described below has however been established for motor feedback interfaces. Moog supports this version first and foremost.

The following table lists the parameters for cyclical SSI operation on encoder channel Ch 1. It also points out possible differences between the use of the SSI interface with the “cyclical” method and “one-time reading” method when using Sin/Cos encoders with an SSI absolute value interface.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

SSI wire break monitoring (bit monitoring during monoflop time) The Sel, Lines, MultiT and SingleT parameters are self-explanatory. If monitoring is enabled, the controller, as the SSI clock master, will read data for one more clock cycle after the data bits (reading data after the data bits end is permissible). The bit that the master reads in addition to the data bits this way comes from the SSI encoder’s monoflop time. At the time corresponding to this bit, the SSI encoder must drive the data lines with a logic 0. If the data lines on connector X7 are open, a logic 1 will be read here. The bit monitoring at this point makes it possible to determine whether the SSI data lines are being actively driven with a logic 0 at this point (no “wire break”) or are not (“wire break”). SSI wire break monitoring can be disabled by setting P 546[0] - ENC_CH1_Mode to 0001h.

# Mode parameters and CycleCount parameters

P 546[0] - ENC_CH1_Mode can be used to run a parity evaluation after the data. In addition, ENC_CH1_Mode makes it possible to run special SSI encoders that deliver one or more special bits after the data. In this case, the MSD Servo Drive will not evaluate these bits – this mode is meant to make it possible to work with SSI encoders that require for these bits to be sampled. P 616[0] - ENC_CH1_CycleCount makes it possible to run slower SSI encoders that cannot handle the required cycle of 125 μs. The control characteristics will deteriorate when using this type of SSI encoder, which is why doing so is not recommended.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|505|0 ENC_CH1_Sel|=SSI(2)| |
|543|0 ENC_CH1_MultiT| |Number of MultiTurn bits (absolute encoder)|
|544|0 ENC_CH1_SingleT| |Number of SingleTurn bits (absolute encoder)|
|545|0 ENC_CH1_Code| |Code selection (SSI absolute encoder)|
|546|0 ENC_CH1_Mode| |Mode selection (SSI absolute encoder)|
|547|0 ENC_CH1_MTBase| |Minimum MultiTurn position (SSI absolute encoder)|
|548|0 ENC_CH1_MTEnable| |Channel 1: Multi-turn as single-turn|
|598|0 ENC_CH1_Position|inc|Position encoder channel 1|
|616|0 ENC_CH1_CycleCount| |Channel 1: Position encoder sampling cycle (n x 125 μsec)|

# NOTE

- Linear SSI encoders will be treated as rotary SSI encoders. In this case, it is impossible to determine that the system is a linear encoder system based on the encoder head.
- P 543[0] - ENC_CH1_MultiT = Number of multi-turn bits: 0..14 Due to the design of the cyclical SSI interface as a motor feedback interface, the number of multi-turn bits is limited to 14 (no limit to 14 bits in the case of a Sin/Cos interface with SSI one-time reading).
- P 545[0] - ENC_CH1_Code = SSI decoding: BINARY(0) or GRAY(1) Gray decoding will be selected by default. The other option is to use binary decoding.
- P 546[0] - ENC_CH1_Mode = Available SSI auxiliary settings This parameter has a 16-bit hex value. With the default setting (0000h), SSI wire break monitoring will be enabled. A value of 0001h will disable SSI wire break monitoring, meaning that one bit less will be read.

# Following is a list of what some of the terms in the table below stand for:

- Data = Sequence of all data bits
- EncObs = Wire break bit
- Nothing = No bit
- POdd = Odd parity bit
- PEven = Even parity bit
- Free = A free bit

# 6 Encoder

# 6.5.6 Encoder gearing

NOTE

- Please read the general information on encoder gearing found in Section ""Introduction"" on page 52 beforehand.

Encoder channels Ch1 to Ch3 each feature their own encoder gearing, while encoder channel Ch4 (virtual encoders) does not feature any encoder gearing. In the case of encoder channel Ch2, it is assumed that the resolver will always be used as a commutation encoder on the motor shaft. Because of this, the numerator adjustment range is limited to a value of (+1) or (-1), while the denominator is set at a fixed value of (+1), for the Ch2 encoder gearing ratio. This means that the only option available is to invert the encoder signal (direction reversal).

As a whole, the encoder gearing is a scaling factor in the encoder evaluation system and consists of numerator N (ENC_CHx_Num) for the motor side and denominator D (ENC_CHx_Denom) for the encoder side (output side).

The following are used to configure the encoder gearing...

- Ch1 with P 510[0] - ENC_CH1_Num and P 511[0] - ENC_CH1_Denom,
- Ch2 with P 512[0] - ENC_CH2_Num and P 513[0] - ENC_CH2_Denom,
- Ch3 with P 514[0] - ENC_CH3_Num and P 515[0] - ENC_CH3_Denom.

|P No.|Index|Name|Unit|Description|
|---|---|---|---|---|
|510|0|ENC_CH1_Num| |Denominator of channel 1|
|511|0|ENC_CH1_Denom| |Numerator of channel 1|
|512|0|ENC_CH2_Num| |Denominator of channel 2|
|513|0|ENC_CH2_Denom| |Numerator of channel 2|
|514|0|ENC_CH3_Num| |Denominator of channel 3|
|515|0|ENC_CH3_Denom| |Numerator of channel 3|

# Table 6.13: SSI mode parameters (all other values are reserved)

|ID|Value|Name|
|---|---|---|
|546| |ENC_CH1_Mode|
| |0000h|Data_EncObs|
| |0001h|Data_Nothing|
| |0002h|Data_POdd_EncObs|
| |0003h|Data_Free_POdd_EncObs|
| |0004h|Data_POdd|
| |0005h|Data_Free_POdd|
| |0006h|Data_Free_EncObs|
| |0007h|Data_Free_Free_EncObs|
| |000Ch|Data_PEven_EncObs|
| |000Dh|Data_Free_PEven_EncObs|
| |000Eh|Data_PEven|
| |000Fh|Data_Free_PEven|
| |001Fh|Data_Free|
| |0020h|Data_Free_Free|
| |0021h|Data_Free_Free_Free|
| |0022h|Data_Free_Free_Free_Free|

P 616[0] - ENC_CH1_CycleCount = Sampling cycle in: n x 125 μs (microseconds):

ENC_CH1_CycleCount can be used to slow down the timing for the cyclical SSI encoder evaluation. By default, ENC_CH1_CycleCount = 1, i.e. the default setting corresponds to 125 μs sampling and cycles for the encoder evaluation. Different settings must be viewed as special cases and must only be used when necessary.

Monitoring the position difference With SSI encoders, the position difference is monitored automatically. The limit value is based on the maximum speed with reference to one scanning step (125μs). The position difference between two scanning steps is restricted to this limit value. In the event of an EMC disturbance, this limits the (incorrectly detected) tracking error and the response of the controller.

MOOG ID No.:CB40859-001 Date:11/2020

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 72

# Parameters

l P 500[0] - ENC_CH1_ActVal[0].SingleTurn and

l P 500[1] - ENC_CH1_ActVal[1].MultiTurn

are used, for example, to indicate the current position value at the output for encoder channel Ch1. These parameters can also be used for checking purposes during commissioning.

# NOTE

l This value at the encoder channel output...

- Already contains the encoder gearing ratio factor (N/D)
- Will be passed into the system in this way (incl. the encoder gearing ratio)
- I.e. is “the value” from the encoder evaluation system

The encoder gearing ratio has a multiplicative effect on the position progress, i.e. either “expanding” or “compressing”.

A distinction can be drawn between an encoder’s motor mode and field mode:

- Motor mode: The encoder is the motor commutation encoder
- Field encoder: The encoder is not the motor commutation encoder (instead, it is an additional encoder in the “field”, e.g. used for position control purposes)

This screen is used to select the encoder for channel Ch2. This channel is used to measure position changes periodically and add them up cyclically – this is referred to as “cyclical evaluation”. Encoder channel Ch2 does not feature an absolute value interface. In addition to evaluating resolvers, this channel can also be used to capture “simple” Sin/Cos signals (up to a max. of 1 kHz and with no zero pulse).

Resolvers must always be evaluated using encoder channel Ch2 (P 506 - ENC_CH2_Sel = RES(1)). The resolver pole pairs are set via P 560[0] - ENC_CH2_Lines.

# Resolver basics and requirements

The connected resolver must meet the following criteria:

- Ccw (positive signal progress corresponds to an anticlockwise direction when looking at the shaft from above)
- No transformation phase shift
- Transformation ratio of approx. 0.5

GPOC is a special Moog online process for improving the quality of Sin/Cos signals before they are used to calculate a position. If Sel = RES(1) or Sel = SINCOS (2), this process may come in handy. For details see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74.

**Encoder configuration channel 2 (X6) parameters**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
|506|0|ENC_CH2_Sel| |OFF (0) No evaluation RES(1) Resolver evaluation SinCos(2) Resolver excitation shut-off; evaluation of a Sin/Cos encoder (max 1kHz) possible.|
|512|0|ENC_CH2_Num| |Numerator of encoder gearing [-1...+1]|
|513|0|ENC_CH2_Denom| |Denominator of encoder gearing [only +1]|
|560|0|ENC_CH2_Lines| |Number of pole pairs of resolver|
|561|0|ENC_CH2_Corr| |Encoder correction GPOC|
|562| |ENC_CH2_CorrVal| |0 Offset S2-S4 track 1 Offset S1-S3 track 2 Gain S2-S4 track 3 Gain S1-S3 track 4 Phase|
|563|0|ENC_CH2_EncObsMin| |Amplitude monitoring Minimum|
|564|0|ENC_CH2_Info| |Encoder name|
|565| |ENC_CH2_LineDelay|μs|Correction of phase shift for cable lengths > 50 m (only after consultation with Moog).|

MOOG ID No.:CB40859-001 Date:11/2020

# Encoder

**Encoder configuration channel 2 (X6) parameters (continue)**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
| |0|ResExc|us|Exciter signal phase shift|
| | |Delay|us|Compensation for commutation angle|
|566|0|ENC_CH2_Amplitude|±|Correction of amplitude for cable lengths > 50 m (only after consultation with Moog).|
|567|0|ENC_CH2_EncObsAct| |Amplitude of analog signal|

The Sel and Lines parameters are self-explanatory.

Other parameters, such as Num and Denom, are described elsewhere (see Section ""Encoder gearing X6"" on page 75).

- P 561[0] - ENC_CH2_Corr = Signal correction type
The GPOC routine used for track signal correction purposes for sine/cosine signals is used to compensate for systematic errors. The routine is controlled with the Corr and CorrVal parameters (see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74).
- P 563[0] - ENC_CH2_EncObsMin = Encoder monitoring minimum, sqrt (a²+b²)
This parameter is used to scale the resolver and Sin/Cos wire break monitoring and represents the “downwards threshold” for an error message. The default setting is 0.2, corresponding to approx. ",What is the function of encoder gearing in the MSD ServoDrive?,"Encoder gearing acts as a scaling factor in the encoder evaluation system, adjusting the position value with a numerator and denominator.","It scales encoder output values by applying a ratio of numerator to denominator, affecting position feedback.","The function is to scale the encoder's position data through a defined ratio, influencing the system's feedback.","Encoder gearing modifies position data by a factor of N/D, where N is the numerator and D the denominator.",It provides a means to adjust the encoder's output by scaling it with a specified numerator and denominator ratio.
5,msd_servo_drive.txt,24,dc57850285aad44ce8a0f42ea79fc817ee8db1617ed9c14ed7563bd69843cddb,"The pseudo-standard described below has however been established for motor feedback interfaces. Moog supports this version first and foremost.

The following table lists the parameters for cyclical SSI operation on encoder channel Ch 1. It also points out possible differences between the use of the SSI interface with the “cyclical” method and “one-time reading” method when using Sin/Cos encoders with an SSI absolute value interface.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

SSI wire break monitoring (bit monitoring during monoflop time) The Sel, Lines, MultiT and SingleT parameters are self-explanatory. If monitoring is enabled, the controller, as the SSI clock master, will read data for one more clock cycle after the data bits (reading data after the data bits end is permissible). The bit that the master reads in addition to the data bits this way comes from the SSI encoder’s monoflop time. At the time corresponding to this bit, the SSI encoder must drive the data lines with a logic 0. If the data lines on connector X7 are open, a logic 1 will be read here. The bit monitoring at this point makes it possible to determine whether the SSI data lines are being actively driven with a logic 0 at this point (no “wire break”) or are not (“wire break”). SSI wire break monitoring can be disabled by setting P 546[0] - ENC_CH1_Mode to 0001h.

# Mode parameters and CycleCount parameters

P 546[0] - ENC_CH1_Mode can be used to run a parity evaluation after the data. In addition, ENC_CH1_Mode makes it possible to run special SSI encoders that deliver one or more special bits after the data. In this case, the MSD Servo Drive will not evaluate these bits – this mode is meant to make it possible to work with SSI encoders that require for these bits to be sampled. P 616[0] - ENC_CH1_CycleCount makes it possible to run slower SSI encoders that cannot handle the required cycle of 125 μs. The control characteristics will deteriorate when using this type of SSI encoder, which is why doing so is not recommended.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|505|0 ENC_CH1_Sel|=SSI(2)| |
|543|0 ENC_CH1_MultiT| |Number of MultiTurn bits (absolute encoder)|
|544|0 ENC_CH1_SingleT| |Number of SingleTurn bits (absolute encoder)|
|545|0 ENC_CH1_Code| |Code selection (SSI absolute encoder)|
|546|0 ENC_CH1_Mode| |Mode selection (SSI absolute encoder)|
|547|0 ENC_CH1_MTBase| |Minimum MultiTurn position (SSI absolute encoder)|
|548|0 ENC_CH1_MTEnable| |Channel 1: Multi-turn as single-turn|
|598|0 ENC_CH1_Position|inc|Position encoder channel 1|
|616|0 ENC_CH1_CycleCount| |Channel 1: Position encoder sampling cycle (n x 125 μsec)|

# NOTE

- Linear SSI encoders will be treated as rotary SSI encoders. In this case, it is impossible to determine that the system is a linear encoder system based on the encoder head.
- P 543[0] - ENC_CH1_MultiT = Number of multi-turn bits: 0..14 Due to the design of the cyclical SSI interface as a motor feedback interface, the number of multi-turn bits is limited to 14 (no limit to 14 bits in the case of a Sin/Cos interface with SSI one-time reading).
- P 545[0] - ENC_CH1_Code = SSI decoding: BINARY(0) or GRAY(1) Gray decoding will be selected by default. The other option is to use binary decoding.
- P 546[0] - ENC_CH1_Mode = Available SSI auxiliary settings This parameter has a 16-bit hex value. With the default setting (0000h), SSI wire break monitoring will be enabled. A value of 0001h will disable SSI wire break monitoring, meaning that one bit less will be read.

# Following is a list of what some of the terms in the table below stand for:

- Data = Sequence of all data bits
- EncObs = Wire break bit
- Nothing = No bit
- POdd = Odd parity bit
- PEven = Even parity bit
- Free = A free bit

# 6 Encoder

# 6.5.6 Encoder gearing

NOTE

- Please read the general information on encoder gearing found in Section ""Introduction"" on page 52 beforehand.

Encoder channels Ch1 to Ch3 each feature their own encoder gearing, while encoder channel Ch4 (virtual encoders) does not feature any encoder gearing. In the case of encoder channel Ch2, it is assumed that the resolver will always be used as a commutation encoder on the motor shaft. Because of this, the numerator adjustment range is limited to a value of (+1) or (-1), while the denominator is set at a fixed value of (+1), for the Ch2 encoder gearing ratio. This means that the only option available is to invert the encoder signal (direction reversal).

As a whole, the encoder gearing is a scaling factor in the encoder evaluation system and consists of numerator N (ENC_CHx_Num) for the motor side and denominator D (ENC_CHx_Denom) for the encoder side (output side).

The following are used to configure the encoder gearing...

- Ch1 with P 510[0] - ENC_CH1_Num and P 511[0] - ENC_CH1_Denom,
- Ch2 with P 512[0] - ENC_CH2_Num and P 513[0] - ENC_CH2_Denom,
- Ch3 with P 514[0] - ENC_CH3_Num and P 515[0] - ENC_CH3_Denom.

|P No.|Index|Name|Unit|Description|
|---|---|---|---|---|
|510|0|ENC_CH1_Num| |Denominator of channel 1|
|511|0|ENC_CH1_Denom| |Numerator of channel 1|
|512|0|ENC_CH2_Num| |Denominator of channel 2|
|513|0|ENC_CH2_Denom| |Numerator of channel 2|
|514|0|ENC_CH3_Num| |Denominator of channel 3|
|515|0|ENC_CH3_Denom| |Numerator of channel 3|

# Table 6.13: SSI mode parameters (all other values are reserved)

|ID|Value|Name|
|---|---|---|
|546| |ENC_CH1_Mode|
| |0000h|Data_EncObs|
| |0001h|Data_Nothing|
| |0002h|Data_POdd_EncObs|
| |0003h|Data_Free_POdd_EncObs|
| |0004h|Data_POdd|
| |0005h|Data_Free_POdd|
| |0006h|Data_Free_EncObs|
| |0007h|Data_Free_Free_EncObs|
| |000Ch|Data_PEven_EncObs|
| |000Dh|Data_Free_PEven_EncObs|
| |000Eh|Data_PEven|
| |000Fh|Data_Free_PEven|
| |001Fh|Data_Free|
| |0020h|Data_Free_Free|
| |0021h|Data_Free_Free_Free|
| |0022h|Data_Free_Free_Free_Free|

P 616[0] - ENC_CH1_CycleCount = Sampling cycle in: n x 125 μs (microseconds):

ENC_CH1_CycleCount can be used to slow down the timing for the cyclical SSI encoder evaluation. By default, ENC_CH1_CycleCount = 1, i.e. the default setting corresponds to 125 μs sampling and cycles for the encoder evaluation. Different settings must be viewed as special cases and must only be used when necessary.

Monitoring the position difference With SSI encoders, the position difference is monitored automatically. The limit value is based on the maximum speed with reference to one scanning step (125μs). The position difference between two scanning steps is restricted to this limit value. In the event of an EMC disturbance, this limits the (incorrectly detected) tracking error and the response of the controller.

MOOG ID No.:CB40859-001 Date:11/2020

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 72

# Parameters

l P 500[0] - ENC_CH1_ActVal[0].SingleTurn and

l P 500[1] - ENC_CH1_ActVal[1].MultiTurn

are used, for example, to indicate the current position value at the output for encoder channel Ch1. These parameters can also be used for checking purposes during commissioning.

# NOTE

l This value at the encoder channel output...

- Already contains the encoder gearing ratio factor (N/D)
- Will be passed into the system in this way (incl. the encoder gearing ratio)
- I.e. is “the value” from the encoder evaluation system

The encoder gearing ratio has a multiplicative effect on the position progress, i.e. either “expanding” or “compressing”.

A distinction can be drawn between an encoder’s motor mode and field mode:

- Motor mode: The encoder is the motor commutation encoder
- Field encoder: The encoder is not the motor commutation encoder (instead, it is an additional encoder in the “field”, e.g. used for position control purposes)

This screen is used to select the encoder for channel Ch2. This channel is used to measure position changes periodically and add them up cyclically – this is referred to as “cyclical evaluation”. Encoder channel Ch2 does not feature an absolute value interface. In addition to evaluating resolvers, this channel can also be used to capture “simple” Sin/Cos signals (up to a max. of 1 kHz and with no zero pulse).

Resolvers must always be evaluated using encoder channel Ch2 (P 506 - ENC_CH2_Sel = RES(1)). The resolver pole pairs are set via P 560[0] - ENC_CH2_Lines.

# Resolver basics and requirements

The connected resolver must meet the following criteria:

- Ccw (positive signal progress corresponds to an anticlockwise direction when looking at the shaft from above)
- No transformation phase shift
- Transformation ratio of approx. 0.5

GPOC is a special Moog online process for improving the quality of Sin/Cos signals before they are used to calculate a position. If Sel = RES(1) or Sel = SINCOS (2), this process may come in handy. For details see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74.

**Encoder configuration channel 2 (X6) parameters**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
|506|0|ENC_CH2_Sel| |OFF (0) No evaluation RES(1) Resolver evaluation SinCos(2) Resolver excitation shut-off; evaluation of a Sin/Cos encoder (max 1kHz) possible.|
|512|0|ENC_CH2_Num| |Numerator of encoder gearing [-1...+1]|
|513|0|ENC_CH2_Denom| |Denominator of encoder gearing [only +1]|
|560|0|ENC_CH2_Lines| |Number of pole pairs of resolver|
|561|0|ENC_CH2_Corr| |Encoder correction GPOC|
|562| |ENC_CH2_CorrVal| |0 Offset S2-S4 track 1 Offset S1-S3 track 2 Gain S2-S4 track 3 Gain S1-S3 track 4 Phase|
|563|0|ENC_CH2_EncObsMin| |Amplitude monitoring Minimum|
|564|0|ENC_CH2_Info| |Encoder name|
|565| |ENC_CH2_LineDelay|μs|Correction of phase shift for cable lengths > 50 m (only after consultation with Moog).|

MOOG ID No.:CB40859-001 Date:11/2020

# Encoder

**Encoder configuration channel 2 (X6) parameters (continue)**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
| |0|ResExc|us|Exciter signal phase shift|
| | |Delay|us|Compensation for commutation angle|
|566|0|ENC_CH2_Amplitude|±|Correction of amplitude for cable lengths > 50 m (only after consultation with Moog).|
|567|0|ENC_CH2_EncObsAct| |Amplitude of analog signal|

The Sel and Lines parameters are self-explanatory.

Other parameters, such as Num and Denom, are described elsewhere (see Section ""Encoder gearing X6"" on page 75).

- P 561[0] - ENC_CH2_Corr = Signal correction type
The GPOC routine used for track signal correction purposes for sine/cosine signals is used to compensate for systematic errors. The routine is controlled with the Corr and CorrVal parameters (see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74).
- P 563[0] - ENC_CH2_EncObsMin = Encoder monitoring minimum, sqrt (a²+b²)
This parameter is used to scale the resolver and Sin/Cos wire break monitoring and represents the “downwards threshold” for an error message. The default setting is 0.2, corresponding to approx. ",How is the encoder gearing ratio configured for channel Ch1 in the MSD ServoDrive?,Using P 510[0] - ENC_CH1_Num for the numerator and P 511[0] - ENC_CH1_Denom for the denominator.,Configure the ratio with ENC_CH1_Num as the numerator and ENC_CH1_Denom as the denominator parameters.,The gearing ratio is set by specifying the numerator in ENC_CH1_Num and the denominator in ENC_CH1_Denom.,"For Ch1, adjust ENC_CH1_Num and ENC_CH1_Denom to define the encoder gearing ratio.","Set the scaling factor for Ch1 by defining the numerator and denominator in their respective parameters, ENC_CH1_Num and ENC_CH1_Denom."
6,msd_servo_drive.txt,24,dc57850285aad44ce8a0f42ea79fc817ee8db1617ed9c14ed7563bd69843cddb,"The pseudo-standard described below has however been established for motor feedback interfaces. Moog supports this version first and foremost.

The following table lists the parameters for cyclical SSI operation on encoder channel Ch 1. It also points out possible differences between the use of the SSI interface with the “cyclical” method and “one-time reading” method when using Sin/Cos encoders with an SSI absolute value interface.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

SSI wire break monitoring (bit monitoring during monoflop time) The Sel, Lines, MultiT and SingleT parameters are self-explanatory. If monitoring is enabled, the controller, as the SSI clock master, will read data for one more clock cycle after the data bits (reading data after the data bits end is permissible). The bit that the master reads in addition to the data bits this way comes from the SSI encoder’s monoflop time. At the time corresponding to this bit, the SSI encoder must drive the data lines with a logic 0. If the data lines on connector X7 are open, a logic 1 will be read here. The bit monitoring at this point makes it possible to determine whether the SSI data lines are being actively driven with a logic 0 at this point (no “wire break”) or are not (“wire break”). SSI wire break monitoring can be disabled by setting P 546[0] - ENC_CH1_Mode to 0001h.

# Mode parameters and CycleCount parameters

P 546[0] - ENC_CH1_Mode can be used to run a parity evaluation after the data. In addition, ENC_CH1_Mode makes it possible to run special SSI encoders that deliver one or more special bits after the data. In this case, the MSD Servo Drive will not evaluate these bits – this mode is meant to make it possible to work with SSI encoders that require for these bits to be sampled. P 616[0] - ENC_CH1_CycleCount makes it possible to run slower SSI encoders that cannot handle the required cycle of 125 μs. The control characteristics will deteriorate when using this type of SSI encoder, which is why doing so is not recommended.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|505|0 ENC_CH1_Sel|=SSI(2)| |
|543|0 ENC_CH1_MultiT| |Number of MultiTurn bits (absolute encoder)|
|544|0 ENC_CH1_SingleT| |Number of SingleTurn bits (absolute encoder)|
|545|0 ENC_CH1_Code| |Code selection (SSI absolute encoder)|
|546|0 ENC_CH1_Mode| |Mode selection (SSI absolute encoder)|
|547|0 ENC_CH1_MTBase| |Minimum MultiTurn position (SSI absolute encoder)|
|548|0 ENC_CH1_MTEnable| |Channel 1: Multi-turn as single-turn|
|598|0 ENC_CH1_Position|inc|Position encoder channel 1|
|616|0 ENC_CH1_CycleCount| |Channel 1: Position encoder sampling cycle (n x 125 μsec)|

# NOTE

- Linear SSI encoders will be treated as rotary SSI encoders. In this case, it is impossible to determine that the system is a linear encoder system based on the encoder head.
- P 543[0] - ENC_CH1_MultiT = Number of multi-turn bits: 0..14 Due to the design of the cyclical SSI interface as a motor feedback interface, the number of multi-turn bits is limited to 14 (no limit to 14 bits in the case of a Sin/Cos interface with SSI one-time reading).
- P 545[0] - ENC_CH1_Code = SSI decoding: BINARY(0) or GRAY(1) Gray decoding will be selected by default. The other option is to use binary decoding.
- P 546[0] - ENC_CH1_Mode = Available SSI auxiliary settings This parameter has a 16-bit hex value. With the default setting (0000h), SSI wire break monitoring will be enabled. A value of 0001h will disable SSI wire break monitoring, meaning that one bit less will be read.

# Following is a list of what some of the terms in the table below stand for:

- Data = Sequence of all data bits
- EncObs = Wire break bit
- Nothing = No bit
- POdd = Odd parity bit
- PEven = Even parity bit
- Free = A free bit

# 6 Encoder

# 6.5.6 Encoder gearing

NOTE

- Please read the general information on encoder gearing found in Section ""Introduction"" on page 52 beforehand.

Encoder channels Ch1 to Ch3 each feature their own encoder gearing, while encoder channel Ch4 (virtual encoders) does not feature any encoder gearing. In the case of encoder channel Ch2, it is assumed that the resolver will always be used as a commutation encoder on the motor shaft. Because of this, the numerator adjustment range is limited to a value of (+1) or (-1), while the denominator is set at a fixed value of (+1), for the Ch2 encoder gearing ratio. This means that the only option available is to invert the encoder signal (direction reversal).

As a whole, the encoder gearing is a scaling factor in the encoder evaluation system and consists of numerator N (ENC_CHx_Num) for the motor side and denominator D (ENC_CHx_Denom) for the encoder side (output side).

The following are used to configure the encoder gearing...

- Ch1 with P 510[0] - ENC_CH1_Num and P 511[0] - ENC_CH1_Denom,
- Ch2 with P 512[0] - ENC_CH2_Num and P 513[0] - ENC_CH2_Denom,
- Ch3 with P 514[0] - ENC_CH3_Num and P 515[0] - ENC_CH3_Denom.

|P No.|Index|Name|Unit|Description|
|---|---|---|---|---|
|510|0|ENC_CH1_Num| |Denominator of channel 1|
|511|0|ENC_CH1_Denom| |Numerator of channel 1|
|512|0|ENC_CH2_Num| |Denominator of channel 2|
|513|0|ENC_CH2_Denom| |Numerator of channel 2|
|514|0|ENC_CH3_Num| |Denominator of channel 3|
|515|0|ENC_CH3_Denom| |Numerator of channel 3|

# Table 6.13: SSI mode parameters (all other values are reserved)

|ID|Value|Name|
|---|---|---|
|546| |ENC_CH1_Mode|
| |0000h|Data_EncObs|
| |0001h|Data_Nothing|
| |0002h|Data_POdd_EncObs|
| |0003h|Data_Free_POdd_EncObs|
| |0004h|Data_POdd|
| |0005h|Data_Free_POdd|
| |0006h|Data_Free_EncObs|
| |0007h|Data_Free_Free_EncObs|
| |000Ch|Data_PEven_EncObs|
| |000Dh|Data_Free_PEven_EncObs|
| |000Eh|Data_PEven|
| |000Fh|Data_Free_PEven|
| |001Fh|Data_Free|
| |0020h|Data_Free_Free|
| |0021h|Data_Free_Free_Free|
| |0022h|Data_Free_Free_Free_Free|

P 616[0] - ENC_CH1_CycleCount = Sampling cycle in: n x 125 μs (microseconds):

ENC_CH1_CycleCount can be used to slow down the timing for the cyclical SSI encoder evaluation. By default, ENC_CH1_CycleCount = 1, i.e. the default setting corresponds to 125 μs sampling and cycles for the encoder evaluation. Different settings must be viewed as special cases and must only be used when necessary.

Monitoring the position difference With SSI encoders, the position difference is monitored automatically. The limit value is based on the maximum speed with reference to one scanning step (125μs). The position difference between two scanning steps is restricted to this limit value. In the event of an EMC disturbance, this limits the (incorrectly detected) tracking error and the response of the controller.

MOOG ID No.:CB40859-001 Date:11/2020

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 72

# Parameters

l P 500[0] - ENC_CH1_ActVal[0].SingleTurn and

l P 500[1] - ENC_CH1_ActVal[1].MultiTurn

are used, for example, to indicate the current position value at the output for encoder channel Ch1. These parameters can also be used for checking purposes during commissioning.

# NOTE

l This value at the encoder channel output...

- Already contains the encoder gearing ratio factor (N/D)
- Will be passed into the system in this way (incl. the encoder gearing ratio)
- I.e. is “the value” from the encoder evaluation system

The encoder gearing ratio has a multiplicative effect on the position progress, i.e. either “expanding” or “compressing”.

A distinction can be drawn between an encoder’s motor mode and field mode:

- Motor mode: The encoder is the motor commutation encoder
- Field encoder: The encoder is not the motor commutation encoder (instead, it is an additional encoder in the “field”, e.g. used for position control purposes)

This screen is used to select the encoder for channel Ch2. This channel is used to measure position changes periodically and add them up cyclically – this is referred to as “cyclical evaluation”. Encoder channel Ch2 does not feature an absolute value interface. In addition to evaluating resolvers, this channel can also be used to capture “simple” Sin/Cos signals (up to a max. of 1 kHz and with no zero pulse).

Resolvers must always be evaluated using encoder channel Ch2 (P 506 - ENC_CH2_Sel = RES(1)). The resolver pole pairs are set via P 560[0] - ENC_CH2_Lines.

# Resolver basics and requirements

The connected resolver must meet the following criteria:

- Ccw (positive signal progress corresponds to an anticlockwise direction when looking at the shaft from above)
- No transformation phase shift
- Transformation ratio of approx. 0.5

GPOC is a special Moog online process for improving the quality of Sin/Cos signals before they are used to calculate a position. If Sel = RES(1) or Sel = SINCOS (2), this process may come in handy. For details see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74.

**Encoder configuration channel 2 (X6) parameters**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
|506|0|ENC_CH2_Sel| |OFF (0) No evaluation RES(1) Resolver evaluation SinCos(2) Resolver excitation shut-off; evaluation of a Sin/Cos encoder (max 1kHz) possible.|
|512|0|ENC_CH2_Num| |Numerator of encoder gearing [-1...+1]|
|513|0|ENC_CH2_Denom| |Denominator of encoder gearing [only +1]|
|560|0|ENC_CH2_Lines| |Number of pole pairs of resolver|
|561|0|ENC_CH2_Corr| |Encoder correction GPOC|
|562| |ENC_CH2_CorrVal| |0 Offset S2-S4 track 1 Offset S1-S3 track 2 Gain S2-S4 track 3 Gain S1-S3 track 4 Phase|
|563|0|ENC_CH2_EncObsMin| |Amplitude monitoring Minimum|
|564|0|ENC_CH2_Info| |Encoder name|
|565| |ENC_CH2_LineDelay|μs|Correction of phase shift for cable lengths > 50 m (only after consultation with Moog).|

MOOG ID No.:CB40859-001 Date:11/2020

# Encoder

**Encoder configuration channel 2 (X6) parameters (continue)**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
| |0|ResExc|us|Exciter signal phase shift|
| | |Delay|us|Compensation for commutation angle|
|566|0|ENC_CH2_Amplitude|±|Correction of amplitude for cable lengths > 50 m (only after consultation with Moog).|
|567|0|ENC_CH2_EncObsAct| |Amplitude of analog signal|

The Sel and Lines parameters are self-explanatory.

Other parameters, such as Num and Denom, are described elsewhere (see Section ""Encoder gearing X6"" on page 75).

- P 561[0] - ENC_CH2_Corr = Signal correction type
The GPOC routine used for track signal correction purposes for sine/cosine signals is used to compensate for systematic errors. The routine is controlled with the Corr and CorrVal parameters (see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74).
- P 563[0] - ENC_CH2_EncObsMin = Encoder monitoring minimum, sqrt (a²+b²)
This parameter is used to scale the resolver and Sin/Cos wire break monitoring and represents the “downwards threshold” for an error message. The default setting is 0.2, corresponding to approx. ",What distinguishes motor mode from field mode in encoder operation within the MSD ServoDrive?,"Motor mode means the encoder serves as the motor commutation encoder, while field mode indicates it's an additional encoder for position control.","In motor mode, the encoder is used for motor commutation; in field mode, it's an extra encoder for position control purposes.","Motor mode involves the encoder in commutation, whereas field mode uses it as a supplementary position feedback device.","The encoder in motor mode is integral to motor commutation, unlike in field mode where it supports position control.","Motor mode designates the encoder for commutation, while field mode applies to additional encoders aiding in position control."
7,msd_servo_drive.txt,24,dc57850285aad44ce8a0f42ea79fc817ee8db1617ed9c14ed7563bd69843cddb,"The pseudo-standard described below has however been established for motor feedback interfaces. Moog supports this version first and foremost.

The following table lists the parameters for cyclical SSI operation on encoder channel Ch 1. It also points out possible differences between the use of the SSI interface with the “cyclical” method and “one-time reading” method when using Sin/Cos encoders with an SSI absolute value interface.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

SSI wire break monitoring (bit monitoring during monoflop time) The Sel, Lines, MultiT and SingleT parameters are self-explanatory. If monitoring is enabled, the controller, as the SSI clock master, will read data for one more clock cycle after the data bits (reading data after the data bits end is permissible). The bit that the master reads in addition to the data bits this way comes from the SSI encoder’s monoflop time. At the time corresponding to this bit, the SSI encoder must drive the data lines with a logic 0. If the data lines on connector X7 are open, a logic 1 will be read here. The bit monitoring at this point makes it possible to determine whether the SSI data lines are being actively driven with a logic 0 at this point (no “wire break”) or are not (“wire break”). SSI wire break monitoring can be disabled by setting P 546[0] - ENC_CH1_Mode to 0001h.

# Mode parameters and CycleCount parameters

P 546[0] - ENC_CH1_Mode can be used to run a parity evaluation after the data. In addition, ENC_CH1_Mode makes it possible to run special SSI encoders that deliver one or more special bits after the data. In this case, the MSD Servo Drive will not evaluate these bits – this mode is meant to make it possible to work with SSI encoders that require for these bits to be sampled. P 616[0] - ENC_CH1_CycleCount makes it possible to run slower SSI encoders that cannot handle the required cycle of 125 μs. The control characteristics will deteriorate when using this type of SSI encoder, which is why doing so is not recommended.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|505|0 ENC_CH1_Sel|=SSI(2)| |
|543|0 ENC_CH1_MultiT| |Number of MultiTurn bits (absolute encoder)|
|544|0 ENC_CH1_SingleT| |Number of SingleTurn bits (absolute encoder)|
|545|0 ENC_CH1_Code| |Code selection (SSI absolute encoder)|
|546|0 ENC_CH1_Mode| |Mode selection (SSI absolute encoder)|
|547|0 ENC_CH1_MTBase| |Minimum MultiTurn position (SSI absolute encoder)|
|548|0 ENC_CH1_MTEnable| |Channel 1: Multi-turn as single-turn|
|598|0 ENC_CH1_Position|inc|Position encoder channel 1|
|616|0 ENC_CH1_CycleCount| |Channel 1: Position encoder sampling cycle (n x 125 μsec)|

# NOTE

- Linear SSI encoders will be treated as rotary SSI encoders. In this case, it is impossible to determine that the system is a linear encoder system based on the encoder head.
- P 543[0] - ENC_CH1_MultiT = Number of multi-turn bits: 0..14 Due to the design of the cyclical SSI interface as a motor feedback interface, the number of multi-turn bits is limited to 14 (no limit to 14 bits in the case of a Sin/Cos interface with SSI one-time reading).
- P 545[0] - ENC_CH1_Code = SSI decoding: BINARY(0) or GRAY(1) Gray decoding will be selected by default. The other option is to use binary decoding.
- P 546[0] - ENC_CH1_Mode = Available SSI auxiliary settings This parameter has a 16-bit hex value. With the default setting (0000h), SSI wire break monitoring will be enabled. A value of 0001h will disable SSI wire break monitoring, meaning that one bit less will be read.

# Following is a list of what some of the terms in the table below stand for:

- Data = Sequence of all data bits
- EncObs = Wire break bit
- Nothing = No bit
- POdd = Odd parity bit
- PEven = Even parity bit
- Free = A free bit

# 6 Encoder

# 6.5.6 Encoder gearing

NOTE

- Please read the general information on encoder gearing found in Section ""Introduction"" on page 52 beforehand.

Encoder channels Ch1 to Ch3 each feature their own encoder gearing, while encoder channel Ch4 (virtual encoders) does not feature any encoder gearing. In the case of encoder channel Ch2, it is assumed that the resolver will always be used as a commutation encoder on the motor shaft. Because of this, the numerator adjustment range is limited to a value of (+1) or (-1), while the denominator is set at a fixed value of (+1), for the Ch2 encoder gearing ratio. This means that the only option available is to invert the encoder signal (direction reversal).

As a whole, the encoder gearing is a scaling factor in the encoder evaluation system and consists of numerator N (ENC_CHx_Num) for the motor side and denominator D (ENC_CHx_Denom) for the encoder side (output side).

The following are used to configure the encoder gearing...

- Ch1 with P 510[0] - ENC_CH1_Num and P 511[0] - ENC_CH1_Denom,
- Ch2 with P 512[0] - ENC_CH2_Num and P 513[0] - ENC_CH2_Denom,
- Ch3 with P 514[0] - ENC_CH3_Num and P 515[0] - ENC_CH3_Denom.

|P No.|Index|Name|Unit|Description|
|---|---|---|---|---|
|510|0|ENC_CH1_Num| |Denominator of channel 1|
|511|0|ENC_CH1_Denom| |Numerator of channel 1|
|512|0|ENC_CH2_Num| |Denominator of channel 2|
|513|0|ENC_CH2_Denom| |Numerator of channel 2|
|514|0|ENC_CH3_Num| |Denominator of channel 3|
|515|0|ENC_CH3_Denom| |Numerator of channel 3|

# Table 6.13: SSI mode parameters (all other values are reserved)

|ID|Value|Name|
|---|---|---|
|546| |ENC_CH1_Mode|
| |0000h|Data_EncObs|
| |0001h|Data_Nothing|
| |0002h|Data_POdd_EncObs|
| |0003h|Data_Free_POdd_EncObs|
| |0004h|Data_POdd|
| |0005h|Data_Free_POdd|
| |0006h|Data_Free_EncObs|
| |0007h|Data_Free_Free_EncObs|
| |000Ch|Data_PEven_EncObs|
| |000Dh|Data_Free_PEven_EncObs|
| |000Eh|Data_PEven|
| |000Fh|Data_Free_PEven|
| |001Fh|Data_Free|
| |0020h|Data_Free_Free|
| |0021h|Data_Free_Free_Free|
| |0022h|Data_Free_Free_Free_Free|

P 616[0] - ENC_CH1_CycleCount = Sampling cycle in: n x 125 μs (microseconds):

ENC_CH1_CycleCount can be used to slow down the timing for the cyclical SSI encoder evaluation. By default, ENC_CH1_CycleCount = 1, i.e. the default setting corresponds to 125 μs sampling and cycles for the encoder evaluation. Different settings must be viewed as special cases and must only be used when necessary.

Monitoring the position difference With SSI encoders, the position difference is monitored automatically. The limit value is based on the maximum speed with reference to one scanning step (125μs). The position difference between two scanning steps is restricted to this limit value. In the event of an EMC disturbance, this limits the (incorrectly detected) tracking error and the response of the controller.

MOOG ID No.:CB40859-001 Date:11/2020

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 72

# Parameters

l P 500[0] - ENC_CH1_ActVal[0].SingleTurn and

l P 500[1] - ENC_CH1_ActVal[1].MultiTurn

are used, for example, to indicate the current position value at the output for encoder channel Ch1. These parameters can also be used for checking purposes during commissioning.

# NOTE

l This value at the encoder channel output...

- Already contains the encoder gearing ratio factor (N/D)
- Will be passed into the system in this way (incl. the encoder gearing ratio)
- I.e. is “the value” from the encoder evaluation system

The encoder gearing ratio has a multiplicative effect on the position progress, i.e. either “expanding” or “compressing”.

A distinction can be drawn between an encoder’s motor mode and field mode:

- Motor mode: The encoder is the motor commutation encoder
- Field encoder: The encoder is not the motor commutation encoder (instead, it is an additional encoder in the “field”, e.g. used for position control purposes)

This screen is used to select the encoder for channel Ch2. This channel is used to measure position changes periodically and add them up cyclically – this is referred to as “cyclical evaluation”. Encoder channel Ch2 does not feature an absolute value interface. In addition to evaluating resolvers, this channel can also be used to capture “simple” Sin/Cos signals (up to a max. of 1 kHz and with no zero pulse).

Resolvers must always be evaluated using encoder channel Ch2 (P 506 - ENC_CH2_Sel = RES(1)). The resolver pole pairs are set via P 560[0] - ENC_CH2_Lines.

# Resolver basics and requirements

The connected resolver must meet the following criteria:

- Ccw (positive signal progress corresponds to an anticlockwise direction when looking at the shaft from above)
- No transformation phase shift
- Transformation ratio of approx. 0.5

GPOC is a special Moog online process for improving the quality of Sin/Cos signals before they are used to calculate a position. If Sel = RES(1) or Sel = SINCOS (2), this process may come in handy. For details see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74.

**Encoder configuration channel 2 (X6) parameters**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
|506|0|ENC_CH2_Sel| |OFF (0) No evaluation RES(1) Resolver evaluation SinCos(2) Resolver excitation shut-off; evaluation of a Sin/Cos encoder (max 1kHz) possible.|
|512|0|ENC_CH2_Num| |Numerator of encoder gearing [-1...+1]|
|513|0|ENC_CH2_Denom| |Denominator of encoder gearing [only +1]|
|560|0|ENC_CH2_Lines| |Number of pole pairs of resolver|
|561|0|ENC_CH2_Corr| |Encoder correction GPOC|
|562| |ENC_CH2_CorrVal| |0 Offset S2-S4 track 1 Offset S1-S3 track 2 Gain S2-S4 track 3 Gain S1-S3 track 4 Phase|
|563|0|ENC_CH2_EncObsMin| |Amplitude monitoring Minimum|
|564|0|ENC_CH2_Info| |Encoder name|
|565| |ENC_CH2_LineDelay|μs|Correction of phase shift for cable lengths > 50 m (only after consultation with Moog).|

MOOG ID No.:CB40859-001 Date:11/2020

# Encoder

**Encoder configuration channel 2 (X6) parameters (continue)**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
| |0|ResExc|us|Exciter signal phase shift|
| | |Delay|us|Compensation for commutation angle|
|566|0|ENC_CH2_Amplitude|±|Correction of amplitude for cable lengths > 50 m (only after consultation with Moog).|
|567|0|ENC_CH2_EncObsAct| |Amplitude of analog signal|

The Sel and Lines parameters are self-explanatory.

Other parameters, such as Num and Denom, are described elsewhere (see Section ""Encoder gearing X6"" on page 75).

- P 561[0] - ENC_CH2_Corr = Signal correction type
The GPOC routine used for track signal correction purposes for sine/cosine signals is used to compensate for systematic errors. The routine is controlled with the Corr and CorrVal parameters (see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74).
- P 563[0] - ENC_CH2_EncObsMin = Encoder monitoring minimum, sqrt (a²+b²)
This parameter is used to scale the resolver and Sin/Cos wire break monitoring and represents the “downwards threshold” for an error message. The default setting is 0.2, corresponding to approx. ",What are the criteria for a resolver connected to encoder channel Ch2 in the MSD ServoDrive?,"It must have a positive signal progress corresponding to an anticlockwise direction, no transformation phase shift, and a transformation ratio of about 0.5.","The resolver should exhibit anticlockwise signal progress, lack phase shift, and have a transformation ratio near 0.5.","Criteria include anticlockwise signal direction, absence of phase shift, and a transformation ratio approximately 0.5.","Required features are anticlockwise signal progression, no phase shift, and a 0.5 transformation ratio.","A resolver must match anticlockwise signal direction, zero phase shift, and a 0.5 transformation ratio for Ch2."
8,msd_servo_drive.txt,24,dc57850285aad44ce8a0f42ea79fc817ee8db1617ed9c14ed7563bd69843cddb,"The pseudo-standard described below has however been established for motor feedback interfaces. Moog supports this version first and foremost.

The following table lists the parameters for cyclical SSI operation on encoder channel Ch 1. It also points out possible differences between the use of the SSI interface with the “cyclical” method and “one-time reading” method when using Sin/Cos encoders with an SSI absolute value interface.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

SSI wire break monitoring (bit monitoring during monoflop time) The Sel, Lines, MultiT and SingleT parameters are self-explanatory. If monitoring is enabled, the controller, as the SSI clock master, will read data for one more clock cycle after the data bits (reading data after the data bits end is permissible). The bit that the master reads in addition to the data bits this way comes from the SSI encoder’s monoflop time. At the time corresponding to this bit, the SSI encoder must drive the data lines with a logic 0. If the data lines on connector X7 are open, a logic 1 will be read here. The bit monitoring at this point makes it possible to determine whether the SSI data lines are being actively driven with a logic 0 at this point (no “wire break”) or are not (“wire break”). SSI wire break monitoring can be disabled by setting P 546[0] - ENC_CH1_Mode to 0001h.

# Mode parameters and CycleCount parameters

P 546[0] - ENC_CH1_Mode can be used to run a parity evaluation after the data. In addition, ENC_CH1_Mode makes it possible to run special SSI encoders that deliver one or more special bits after the data. In this case, the MSD Servo Drive will not evaluate these bits – this mode is meant to make it possible to work with SSI encoders that require for these bits to be sampled. P 616[0] - ENC_CH1_CycleCount makes it possible to run slower SSI encoders that cannot handle the required cycle of 125 μs. The control characteristics will deteriorate when using this type of SSI encoder, which is why doing so is not recommended.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|505|0 ENC_CH1_Sel|=SSI(2)| |
|543|0 ENC_CH1_MultiT| |Number of MultiTurn bits (absolute encoder)|
|544|0 ENC_CH1_SingleT| |Number of SingleTurn bits (absolute encoder)|
|545|0 ENC_CH1_Code| |Code selection (SSI absolute encoder)|
|546|0 ENC_CH1_Mode| |Mode selection (SSI absolute encoder)|
|547|0 ENC_CH1_MTBase| |Minimum MultiTurn position (SSI absolute encoder)|
|548|0 ENC_CH1_MTEnable| |Channel 1: Multi-turn as single-turn|
|598|0 ENC_CH1_Position|inc|Position encoder channel 1|
|616|0 ENC_CH1_CycleCount| |Channel 1: Position encoder sampling cycle (n x 125 μsec)|

# NOTE

- Linear SSI encoders will be treated as rotary SSI encoders. In this case, it is impossible to determine that the system is a linear encoder system based on the encoder head.
- P 543[0] - ENC_CH1_MultiT = Number of multi-turn bits: 0..14 Due to the design of the cyclical SSI interface as a motor feedback interface, the number of multi-turn bits is limited to 14 (no limit to 14 bits in the case of a Sin/Cos interface with SSI one-time reading).
- P 545[0] - ENC_CH1_Code = SSI decoding: BINARY(0) or GRAY(1) Gray decoding will be selected by default. The other option is to use binary decoding.
- P 546[0] - ENC_CH1_Mode = Available SSI auxiliary settings This parameter has a 16-bit hex value. With the default setting (0000h), SSI wire break monitoring will be enabled. A value of 0001h will disable SSI wire break monitoring, meaning that one bit less will be read.

# Following is a list of what some of the terms in the table below stand for:

- Data = Sequence of all data bits
- EncObs = Wire break bit
- Nothing = No bit
- POdd = Odd parity bit
- PEven = Even parity bit
- Free = A free bit

# 6 Encoder

# 6.5.6 Encoder gearing

NOTE

- Please read the general information on encoder gearing found in Section ""Introduction"" on page 52 beforehand.

Encoder channels Ch1 to Ch3 each feature their own encoder gearing, while encoder channel Ch4 (virtual encoders) does not feature any encoder gearing. In the case of encoder channel Ch2, it is assumed that the resolver will always be used as a commutation encoder on the motor shaft. Because of this, the numerator adjustment range is limited to a value of (+1) or (-1), while the denominator is set at a fixed value of (+1), for the Ch2 encoder gearing ratio. This means that the only option available is to invert the encoder signal (direction reversal).

As a whole, the encoder gearing is a scaling factor in the encoder evaluation system and consists of numerator N (ENC_CHx_Num) for the motor side and denominator D (ENC_CHx_Denom) for the encoder side (output side).

The following are used to configure the encoder gearing...

- Ch1 with P 510[0] - ENC_CH1_Num and P 511[0] - ENC_CH1_Denom,
- Ch2 with P 512[0] - ENC_CH2_Num and P 513[0] - ENC_CH2_Denom,
- Ch3 with P 514[0] - ENC_CH3_Num and P 515[0] - ENC_CH3_Denom.

|P No.|Index|Name|Unit|Description|
|---|---|---|---|---|
|510|0|ENC_CH1_Num| |Denominator of channel 1|
|511|0|ENC_CH1_Denom| |Numerator of channel 1|
|512|0|ENC_CH2_Num| |Denominator of channel 2|
|513|0|ENC_CH2_Denom| |Numerator of channel 2|
|514|0|ENC_CH3_Num| |Denominator of channel 3|
|515|0|ENC_CH3_Denom| |Numerator of channel 3|

# Table 6.13: SSI mode parameters (all other values are reserved)

|ID|Value|Name|
|---|---|---|
|546| |ENC_CH1_Mode|
| |0000h|Data_EncObs|
| |0001h|Data_Nothing|
| |0002h|Data_POdd_EncObs|
| |0003h|Data_Free_POdd_EncObs|
| |0004h|Data_POdd|
| |0005h|Data_Free_POdd|
| |0006h|Data_Free_EncObs|
| |0007h|Data_Free_Free_EncObs|
| |000Ch|Data_PEven_EncObs|
| |000Dh|Data_Free_PEven_EncObs|
| |000Eh|Data_PEven|
| |000Fh|Data_Free_PEven|
| |001Fh|Data_Free|
| |0020h|Data_Free_Free|
| |0021h|Data_Free_Free_Free|
| |0022h|Data_Free_Free_Free_Free|

P 616[0] - ENC_CH1_CycleCount = Sampling cycle in: n x 125 μs (microseconds):

ENC_CH1_CycleCount can be used to slow down the timing for the cyclical SSI encoder evaluation. By default, ENC_CH1_CycleCount = 1, i.e. the default setting corresponds to 125 μs sampling and cycles for the encoder evaluation. Different settings must be viewed as special cases and must only be used when necessary.

Monitoring the position difference With SSI encoders, the position difference is monitored automatically. The limit value is based on the maximum speed with reference to one scanning step (125μs). The position difference between two scanning steps is restricted to this limit value. In the event of an EMC disturbance, this limits the (incorrectly detected) tracking error and the response of the controller.

MOOG ID No.:CB40859-001 Date:11/2020

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 72

# Parameters

l P 500[0] - ENC_CH1_ActVal[0].SingleTurn and

l P 500[1] - ENC_CH1_ActVal[1].MultiTurn

are used, for example, to indicate the current position value at the output for encoder channel Ch1. These parameters can also be used for checking purposes during commissioning.

# NOTE

l This value at the encoder channel output...

- Already contains the encoder gearing ratio factor (N/D)
- Will be passed into the system in this way (incl. the encoder gearing ratio)
- I.e. is “the value” from the encoder evaluation system

The encoder gearing ratio has a multiplicative effect on the position progress, i.e. either “expanding” or “compressing”.

A distinction can be drawn between an encoder’s motor mode and field mode:

- Motor mode: The encoder is the motor commutation encoder
- Field encoder: The encoder is not the motor commutation encoder (instead, it is an additional encoder in the “field”, e.g. used for position control purposes)

This screen is used to select the encoder for channel Ch2. This channel is used to measure position changes periodically and add them up cyclically – this is referred to as “cyclical evaluation”. Encoder channel Ch2 does not feature an absolute value interface. In addition to evaluating resolvers, this channel can also be used to capture “simple” Sin/Cos signals (up to a max. of 1 kHz and with no zero pulse).

Resolvers must always be evaluated using encoder channel Ch2 (P 506 - ENC_CH2_Sel = RES(1)). The resolver pole pairs are set via P 560[0] - ENC_CH2_Lines.

# Resolver basics and requirements

The connected resolver must meet the following criteria:

- Ccw (positive signal progress corresponds to an anticlockwise direction when looking at the shaft from above)
- No transformation phase shift
- Transformation ratio of approx. 0.5

GPOC is a special Moog online process for improving the quality of Sin/Cos signals before they are used to calculate a position. If Sel = RES(1) or Sel = SINCOS (2), this process may come in handy. For details see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74.

**Encoder configuration channel 2 (X6) parameters**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
|506|0|ENC_CH2_Sel| |OFF (0) No evaluation RES(1) Resolver evaluation SinCos(2) Resolver excitation shut-off; evaluation of a Sin/Cos encoder (max 1kHz) possible.|
|512|0|ENC_CH2_Num| |Numerator of encoder gearing [-1...+1]|
|513|0|ENC_CH2_Denom| |Denominator of encoder gearing [only +1]|
|560|0|ENC_CH2_Lines| |Number of pole pairs of resolver|
|561|0|ENC_CH2_Corr| |Encoder correction GPOC|
|562| |ENC_CH2_CorrVal| |0 Offset S2-S4 track 1 Offset S1-S3 track 2 Gain S2-S4 track 3 Gain S1-S3 track 4 Phase|
|563|0|ENC_CH2_EncObsMin| |Amplitude monitoring Minimum|
|564|0|ENC_CH2_Info| |Encoder name|
|565| |ENC_CH2_LineDelay|μs|Correction of phase shift for cable lengths > 50 m (only after consultation with Moog).|

MOOG ID No.:CB40859-001 Date:11/2020

# Encoder

**Encoder configuration channel 2 (X6) parameters (continue)**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
| |0|ResExc|us|Exciter signal phase shift|
| | |Delay|us|Compensation for commutation angle|
|566|0|ENC_CH2_Amplitude|±|Correction of amplitude for cable lengths > 50 m (only after consultation with Moog).|
|567|0|ENC_CH2_EncObsAct| |Amplitude of analog signal|

The Sel and Lines parameters are self-explanatory.

Other parameters, such as Num and Denom, are described elsewhere (see Section ""Encoder gearing X6"" on page 75).

- P 561[0] - ENC_CH2_Corr = Signal correction type
The GPOC routine used for track signal correction purposes for sine/cosine signals is used to compensate for systematic errors. The routine is controlled with the Corr and CorrVal parameters (see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74).
- P 563[0] - ENC_CH2_EncObsMin = Encoder monitoring minimum, sqrt (a²+b²)
This parameter is used to scale the resolver and Sin/Cos wire break monitoring and represents the “downwards threshold” for an error message. The default setting is 0.2, corresponding to approx. ",What is the purpose of the GPOC process in the MSD ServoDrive?,"GPOC improves Sin/Cos signal quality before position calculation, compensating for systematic errors in the signals.",It enhances the accuracy of Sin/Cos signals by correcting systematic errors prior to position determination.,The process optimizes Sin/Cos signals for better position calculation by addressing inherent signal inaccuracies.,"GPOC corrects Sin/Cos signal imperfections, ensuring more reliable position feedback from the encoder.","To refine Sin/Cos encoder signals, GPOC adjusts for errors, leading to improved position calculation accuracy."
9,msd_servo_drive.txt,24,dc57850285aad44ce8a0f42ea79fc817ee8db1617ed9c14ed7563bd69843cddb,"The pseudo-standard described below has however been established for motor feedback interfaces. Moog supports this version first and foremost.

The following table lists the parameters for cyclical SSI operation on encoder channel Ch 1. It also points out possible differences between the use of the SSI interface with the “cyclical” method and “one-time reading” method when using Sin/Cos encoders with an SSI absolute value interface.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp

SSI wire break monitoring (bit monitoring during monoflop time) The Sel, Lines, MultiT and SingleT parameters are self-explanatory. If monitoring is enabled, the controller, as the SSI clock master, will read data for one more clock cycle after the data bits (reading data after the data bits end is permissible). The bit that the master reads in addition to the data bits this way comes from the SSI encoder’s monoflop time. At the time corresponding to this bit, the SSI encoder must drive the data lines with a logic 0. If the data lines on connector X7 are open, a logic 1 will be read here. The bit monitoring at this point makes it possible to determine whether the SSI data lines are being actively driven with a logic 0 at this point (no “wire break”) or are not (“wire break”). SSI wire break monitoring can be disabled by setting P 546[0] - ENC_CH1_Mode to 0001h.

# Mode parameters and CycleCount parameters

P 546[0] - ENC_CH1_Mode can be used to run a parity evaluation after the data. In addition, ENC_CH1_Mode makes it possible to run special SSI encoders that deliver one or more special bits after the data. In this case, the MSD Servo Drive will not evaluate these bits – this mode is meant to make it possible to work with SSI encoders that require for these bits to be sampled. P 616[0] - ENC_CH1_CycleCount makes it possible to run slower SSI encoders that cannot handle the required cycle of 125 μs. The control characteristics will deteriorate when using this type of SSI encoder, which is why doing so is not recommended.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|505|0 ENC_CH1_Sel|=SSI(2)| |
|543|0 ENC_CH1_MultiT| |Number of MultiTurn bits (absolute encoder)|
|544|0 ENC_CH1_SingleT| |Number of SingleTurn bits (absolute encoder)|
|545|0 ENC_CH1_Code| |Code selection (SSI absolute encoder)|
|546|0 ENC_CH1_Mode| |Mode selection (SSI absolute encoder)|
|547|0 ENC_CH1_MTBase| |Minimum MultiTurn position (SSI absolute encoder)|
|548|0 ENC_CH1_MTEnable| |Channel 1: Multi-turn as single-turn|
|598|0 ENC_CH1_Position|inc|Position encoder channel 1|
|616|0 ENC_CH1_CycleCount| |Channel 1: Position encoder sampling cycle (n x 125 μsec)|

# NOTE

- Linear SSI encoders will be treated as rotary SSI encoders. In this case, it is impossible to determine that the system is a linear encoder system based on the encoder head.
- P 543[0] - ENC_CH1_MultiT = Number of multi-turn bits: 0..14 Due to the design of the cyclical SSI interface as a motor feedback interface, the number of multi-turn bits is limited to 14 (no limit to 14 bits in the case of a Sin/Cos interface with SSI one-time reading).
- P 545[0] - ENC_CH1_Code = SSI decoding: BINARY(0) or GRAY(1) Gray decoding will be selected by default. The other option is to use binary decoding.
- P 546[0] - ENC_CH1_Mode = Available SSI auxiliary settings This parameter has a 16-bit hex value. With the default setting (0000h), SSI wire break monitoring will be enabled. A value of 0001h will disable SSI wire break monitoring, meaning that one bit less will be read.

# Following is a list of what some of the terms in the table below stand for:

- Data = Sequence of all data bits
- EncObs = Wire break bit
- Nothing = No bit
- POdd = Odd parity bit
- PEven = Even parity bit
- Free = A free bit

# 6 Encoder

# 6.5.6 Encoder gearing

NOTE

- Please read the general information on encoder gearing found in Section ""Introduction"" on page 52 beforehand.

Encoder channels Ch1 to Ch3 each feature their own encoder gearing, while encoder channel Ch4 (virtual encoders) does not feature any encoder gearing. In the case of encoder channel Ch2, it is assumed that the resolver will always be used as a commutation encoder on the motor shaft. Because of this, the numerator adjustment range is limited to a value of (+1) or (-1), while the denominator is set at a fixed value of (+1), for the Ch2 encoder gearing ratio. This means that the only option available is to invert the encoder signal (direction reversal).

As a whole, the encoder gearing is a scaling factor in the encoder evaluation system and consists of numerator N (ENC_CHx_Num) for the motor side and denominator D (ENC_CHx_Denom) for the encoder side (output side).

The following are used to configure the encoder gearing...

- Ch1 with P 510[0] - ENC_CH1_Num and P 511[0] - ENC_CH1_Denom,
- Ch2 with P 512[0] - ENC_CH2_Num and P 513[0] - ENC_CH2_Denom,
- Ch3 with P 514[0] - ENC_CH3_Num and P 515[0] - ENC_CH3_Denom.

|P No.|Index|Name|Unit|Description|
|---|---|---|---|---|
|510|0|ENC_CH1_Num| |Denominator of channel 1|
|511|0|ENC_CH1_Denom| |Numerator of channel 1|
|512|0|ENC_CH2_Num| |Denominator of channel 2|
|513|0|ENC_CH2_Denom| |Numerator of channel 2|
|514|0|ENC_CH3_Num| |Denominator of channel 3|
|515|0|ENC_CH3_Denom| |Numerator of channel 3|

# Table 6.13: SSI mode parameters (all other values are reserved)

|ID|Value|Name|
|---|---|---|
|546| |ENC_CH1_Mode|
| |0000h|Data_EncObs|
| |0001h|Data_Nothing|
| |0002h|Data_POdd_EncObs|
| |0003h|Data_Free_POdd_EncObs|
| |0004h|Data_POdd|
| |0005h|Data_Free_POdd|
| |0006h|Data_Free_EncObs|
| |0007h|Data_Free_Free_EncObs|
| |000Ch|Data_PEven_EncObs|
| |000Dh|Data_Free_PEven_EncObs|
| |000Eh|Data_PEven|
| |000Fh|Data_Free_PEven|
| |001Fh|Data_Free|
| |0020h|Data_Free_Free|
| |0021h|Data_Free_Free_Free|
| |0022h|Data_Free_Free_Free_Free|

P 616[0] - ENC_CH1_CycleCount = Sampling cycle in: n x 125 μs (microseconds):

ENC_CH1_CycleCount can be used to slow down the timing for the cyclical SSI encoder evaluation. By default, ENC_CH1_CycleCount = 1, i.e. the default setting corresponds to 125 μs sampling and cycles for the encoder evaluation. Different settings must be viewed as special cases and must only be used when necessary.

Monitoring the position difference With SSI encoders, the position difference is monitored automatically. The limit value is based on the maximum speed with reference to one scanning step (125μs). The position difference between two scanning steps is restricted to this limit value. In the event of an EMC disturbance, this limits the (incorrectly detected) tracking error and the response of the controller.

MOOG ID No.:CB40859-001 Date:11/2020

# 6 Encoder

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 72

# Parameters

l P 500[0] - ENC_CH1_ActVal[0].SingleTurn and

l P 500[1] - ENC_CH1_ActVal[1].MultiTurn

are used, for example, to indicate the current position value at the output for encoder channel Ch1. These parameters can also be used for checking purposes during commissioning.

# NOTE

l This value at the encoder channel output...

- Already contains the encoder gearing ratio factor (N/D)
- Will be passed into the system in this way (incl. the encoder gearing ratio)
- I.e. is “the value” from the encoder evaluation system

The encoder gearing ratio has a multiplicative effect on the position progress, i.e. either “expanding” or “compressing”.

A distinction can be drawn between an encoder’s motor mode and field mode:

- Motor mode: The encoder is the motor commutation encoder
- Field encoder: The encoder is not the motor commutation encoder (instead, it is an additional encoder in the “field”, e.g. used for position control purposes)

This screen is used to select the encoder for channel Ch2. This channel is used to measure position changes periodically and add them up cyclically – this is referred to as “cyclical evaluation”. Encoder channel Ch2 does not feature an absolute value interface. In addition to evaluating resolvers, this channel can also be used to capture “simple” Sin/Cos signals (up to a max. of 1 kHz and with no zero pulse).

Resolvers must always be evaluated using encoder channel Ch2 (P 506 - ENC_CH2_Sel = RES(1)). The resolver pole pairs are set via P 560[0] - ENC_CH2_Lines.

# Resolver basics and requirements

The connected resolver must meet the following criteria:

- Ccw (positive signal progress corresponds to an anticlockwise direction when looking at the shaft from above)
- No transformation phase shift
- Transformation ratio of approx. 0.5

GPOC is a special Moog online process for improving the quality of Sin/Cos signals before they are used to calculate a position. If Sel = RES(1) or Sel = SINCOS (2), this process may come in handy. For details see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74.

**Encoder configuration channel 2 (X6) parameters**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
|506|0|ENC_CH2_Sel| |OFF (0) No evaluation RES(1) Resolver evaluation SinCos(2) Resolver excitation shut-off; evaluation of a Sin/Cos encoder (max 1kHz) possible.|
|512|0|ENC_CH2_Num| |Numerator of encoder gearing [-1...+1]|
|513|0|ENC_CH2_Denom| |Denominator of encoder gearing [only +1]|
|560|0|ENC_CH2_Lines| |Number of pole pairs of resolver|
|561|0|ENC_CH2_Corr| |Encoder correction GPOC|
|562| |ENC_CH2_CorrVal| |0 Offset S2-S4 track 1 Offset S1-S3 track 2 Gain S2-S4 track 3 Gain S1-S3 track 4 Phase|
|563|0|ENC_CH2_EncObsMin| |Amplitude monitoring Minimum|
|564|0|ENC_CH2_Info| |Encoder name|
|565| |ENC_CH2_LineDelay|μs|Correction of phase shift for cable lengths > 50 m (only after consultation with Moog).|

MOOG ID No.:CB40859-001 Date:11/2020

# Encoder

**Encoder configuration channel 2 (X6) parameters (continue)**
|P No.|Index|Name / Settings|Unit|Description|
|---|---|---|---|---|
| |0|ResExc|us|Exciter signal phase shift|
| | |Delay|us|Compensation for commutation angle|
|566|0|ENC_CH2_Amplitude|±|Correction of amplitude for cable lengths > 50 m (only after consultation with Moog).|
|567|0|ENC_CH2_EncObsAct| |Amplitude of analog signal|

The Sel and Lines parameters are self-explanatory.

Other parameters, such as Num and Denom, are described elsewhere (see Section ""Encoder gearing X6"" on page 75).

- P 561[0] - ENC_CH2_Corr = Signal correction type
The GPOC routine used for track signal correction purposes for sine/cosine signals is used to compensate for systematic errors. The routine is controlled with the Corr and CorrVal parameters (see Section ""Signal correction GPOC (Gain Phase Offset Correction)"" on page 74).
- P 563[0] - ENC_CH2_EncObsMin = Encoder monitoring minimum, sqrt (a²+b²)
This parameter is used to scale the resolver and Sin/Cos wire break monitoring and represents the “downwards threshold” for an error message. The default setting is 0.2, corresponding to approx. ",How is the resolver pole pairs setting configured in the MSD ServoDrive?,Via P 560[0] - ENC_CH2_Lines parameter.,Configure the number of pole pairs using the ENC_CH2_Lines parameter.,The setting is adjusted through the ENC_CH2_Lines parameter for the resolver.,P 560[0] - ENC_CH2_Lines is used to set the resolver's pole pairs.,Resolver pole pairs are defined by the value entered in the ENC_CH2_Lines parameter.
