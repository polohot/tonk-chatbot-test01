,NODE_FILE_NAME,NODE_NUMBER,NODE_HASH,NODE_TEXT,Q,A1,A2,A3,A4,A5
0,pcs7_compendium_part_b_en-US_en-US.txt,12,6e23c51c0032b37d2f675e7f010284bfdb1409ea602c735f7c49c17c40cd1942,": Pressure measurement|
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB 40 should be changed from Prio16 to Prio18.

The following figure shows how the individual cyclic interrupt OBs from Example 1 are processed over a period of 1280 ms, starting from the point in time (t) at which the CPU begins program processing. In this example, the CPU utilization is at approximately 65%.

# Processing of the cyclic interrupt OBs by the CPU

|Time (ms)|OB|
|---|---|
|0|OB38|
|30|OB37|
|50|OB36|
|10|OB35|
|25|OB34|
|320|OB33|
| |OB32|
| |OB31|
| |OB30|
| |OB1|

t+500ms t+1000ms

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# Example 2: Reconfiguration/migration, for which the hardware present must be connected via serial communication (Modbus)

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|18|50 ms|Serial communication|Ex.: Modbus|
|OB 37|17|300 ms|Fast F-application| |
|OB 36|16|1000 ms|F application| |
|OB 35|12|100 ms|Fast standard application|Ex.: Control|
|OB 34|11|200 ms|Standard application|Ex.: Pressure measurement|
|OB 33|10|500 ms| | |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping, the setting for OB 40 should be changed from Prio16 to Prio19.

# Example 3: Reconfiguration/migration, for which the Quadlog hardware present must be connected via DP/IO bus link

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|17|10 ms|Quadlog connection| |
|OB 37|16|300 ms|F application| |
|OB 36|13|50 ms|Empty| |
|OB 35|12|100 ms|Empty| |
|OB 34|11|200 ms|Empty| |
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB40 should be changed from Prio16 to Prio18.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

27

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# CPU utilization

The cycle utilization of the system should never be above 75%, regardless of whether it involves a standard AS or an H system.

Note

To help you determine the processing times of the individual cyclic interrupt OBs, please refer to the FAQ ""How can you calculate the cycle load of the automation system (AS) online?"" (https://support.industry.siemens.com/cs/ww/en/view/22000962)

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times of the cyclic interrupt OBs and the total load of the AS can be read at the CPU_RT block.

As of PCS 7 V7.0 with PCS 7 Library V7.0, the block CPU_RT will be installed in each CPU. This block prevents a CPU STOP as a result of cycle overload, thanks to a two-stage ""load-shedding"" process:

- In the first stage of load shedding, all cyclic interrupt OBs that have not been disabled for the function by the project engineer are not processed for one cycle.
- In the second stage, none of the cyclic interrupt OBs are processed for one cycle (even the ones that were excluded previously). If this does not have a steadying effect, whenever cyclic interrupt OBs are processed their processing will be suspended again for one cycle.

Note

In order to prevent F-cycle-time monitoring in the CPU and the F-monitoring time on the F-signal modules from being triggered, and the system response time from being extended, you must disable the cyclic interrupt OBs with the F-program during the stage 1 of stop prevention.

Alternatively, you can disable stop prevention altogether by setting the parameter for input Max_RTRG of block CPU_RT to 0. You can find this block in the @CPU_RT chart.

For more information on the subject of CPU stop prevention, please refer to the help section for the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.4 Diagnostics/Clock

For process data to be compatible for evaluation, all components of the process control system must work with the same time of day so that messages – regardless of the time zone in which they are generated – can be assigned correctly in terms of temporal sequence. This usually involves an OS server or an external clock (SICLOCK) taking on the role of the time master. All other operator stations and automation systems on the plant bus then have the time from this time master and, therefore, identical time.

You can find additional information about configuring the time synchronization in the manual ""SIMATIC Process Control System PCS 7 Time Synchronization"" (https://support.industry.siemens.com/cs/ww/en/view/109746544).

Check that the correction factor is set to 0 ms under ""Time"" on the ""Diagnostics/Clock"" tab in a CPU with safety program.

|Properties CPU 410-SH (R0/53)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Intenupts|
|---|---|---|---|---|---|---|---|
|Time -of-Day|Intenupts|Cyclic Irtenupts|Diagnostics /Clock|Protection|Parameters|System Diagnostics| |
|Extended functions|Report cause of STOP|Acknowledgment-triggered reporting SFB33-35|Number of messages the diagnostics buffer:|3200|3200|3200|3200|
|Clock|Synchronization|Synchronization Type|Time Interval|ELC:|In the|As slave|None|
|On the MPI:|None|None|On the MEI:|(None|(None|Correction factor:| |

Note

See also Compendium Part A ""Configuration of the Hardware > General CPU Settings > Diagnostics/Clock"".

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.5 H parameters

Self-test (advanced CPU test)

The CPU tests the following during the self-test:

- Processor
- Internal memory
- I/O bus

If the test detects any faults, they are reported and the CPU goes to STOP.

# Test cycle time

The test cycle time (default setting: 90 minutes) indicates the time taken for a complete background self-test.

Note

For S7 F/FH systems, this parameter can be increased up to a maximum of 12 hours (720 minutes).

In S7 F/FH systems, the test may not be modified by calling SFC 90, ""H_CTRL"". Otherwise, the safety program will go to F-STOP after a maximum of 24 hours. Switching test components on or off is prohibited.

In the event of a STOP, the self-test enters the following diagnostics event in the diagnostic buffer of the F CPU: ""Safety program: Error detected"" (event ID 16#75E1).

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

|Properties|CPU 410-SH (R0/53)| | | | | |
|---|---|---|---|---|---|---|
|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Interrupts|
|Time-of-Day|Interrupts|Cyclic Interrupts|Diagnostics /Clock|Protection|Parameters| |
|Parameters for Expanded CPU Test|Test scan time [min]:|sc| | | | |
|Reaction E|RAM/IPIQ comparison error:|TROUBLESHOOTING| | | | |
|Update the Standby CPU|Maximum number of attempts;| | | | | |
|Cyclic interrupt OB special handling;|Waiting time between two attempts [s];| | | | | |
|Monitoring times|Max scan cycle time extension [ms]:|Calculate| | | | |
|Max communication delay [ms];|Max disabling time for priority classes 15 [ms]:|Use only| | | | |
|Min I/O retention time [ms];:|calculated values| | | | | |
|Redundant I/O|Data block no:|and 2| | | | |
|Passivation behavior|channels|Cancel|Help| | | |

Note

If you are using redundant standard signal modules, the system will generate two data blocks in the AS: DB 1, with the number specified, and DB 2, with the number following this. Make sure that these blocks are not used twice (e.g. ",What is the purpose of OB 38 in the context of serial communication as described in the 'Compendium Part B - Process Safety (V9.0)'?,"OB 38 is used for serial communication, specifically for protocols like Modbus.","In the 'Compendium Part B - Process Safety (V9.0)', OB 38's purpose is to handle serial communication tasks, such as Modbus connections.","The purpose of OB 38, with a priority of 18 and a call interval of 50 ms, is to manage serial communication, including Modbus, as outlined in the manual.","As per the operating manual, OB 38 serves the role of facilitating serial communication, exemplified by Modbus, within the system.","Serial communication, notably Modbus, is the designated function of OB 38, according to the 'Compendium Part B - Process Safety (V9.0)'."
1,pcs7_compendium_part_b_en-US_en-US.txt,12,6e23c51c0032b37d2f675e7f010284bfdb1409ea602c735f7c49c17c40cd1942,": Pressure measurement|
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB 40 should be changed from Prio16 to Prio18.

The following figure shows how the individual cyclic interrupt OBs from Example 1 are processed over a period of 1280 ms, starting from the point in time (t) at which the CPU begins program processing. In this example, the CPU utilization is at approximately 65%.

# Processing of the cyclic interrupt OBs by the CPU

|Time (ms)|OB|
|---|---|
|0|OB38|
|30|OB37|
|50|OB36|
|10|OB35|
|25|OB34|
|320|OB33|
| |OB32|
| |OB31|
| |OB30|
| |OB1|

t+500ms t+1000ms

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# Example 2: Reconfiguration/migration, for which the hardware present must be connected via serial communication (Modbus)

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|18|50 ms|Serial communication|Ex.: Modbus|
|OB 37|17|300 ms|Fast F-application| |
|OB 36|16|1000 ms|F application| |
|OB 35|12|100 ms|Fast standard application|Ex.: Control|
|OB 34|11|200 ms|Standard application|Ex.: Pressure measurement|
|OB 33|10|500 ms| | |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping, the setting for OB 40 should be changed from Prio16 to Prio19.

# Example 3: Reconfiguration/migration, for which the Quadlog hardware present must be connected via DP/IO bus link

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|17|10 ms|Quadlog connection| |
|OB 37|16|300 ms|F application| |
|OB 36|13|50 ms|Empty| |
|OB 35|12|100 ms|Empty| |
|OB 34|11|200 ms|Empty| |
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB40 should be changed from Prio16 to Prio18.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

27

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# CPU utilization

The cycle utilization of the system should never be above 75%, regardless of whether it involves a standard AS or an H system.

Note

To help you determine the processing times of the individual cyclic interrupt OBs, please refer to the FAQ ""How can you calculate the cycle load of the automation system (AS) online?"" (https://support.industry.siemens.com/cs/ww/en/view/22000962)

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times of the cyclic interrupt OBs and the total load of the AS can be read at the CPU_RT block.

As of PCS 7 V7.0 with PCS 7 Library V7.0, the block CPU_RT will be installed in each CPU. This block prevents a CPU STOP as a result of cycle overload, thanks to a two-stage ""load-shedding"" process:

- In the first stage of load shedding, all cyclic interrupt OBs that have not been disabled for the function by the project engineer are not processed for one cycle.
- In the second stage, none of the cyclic interrupt OBs are processed for one cycle (even the ones that were excluded previously). If this does not have a steadying effect, whenever cyclic interrupt OBs are processed their processing will be suspended again for one cycle.

Note

In order to prevent F-cycle-time monitoring in the CPU and the F-monitoring time on the F-signal modules from being triggered, and the system response time from being extended, you must disable the cyclic interrupt OBs with the F-program during the stage 1 of stop prevention.

Alternatively, you can disable stop prevention altogether by setting the parameter for input Max_RTRG of block CPU_RT to 0. You can find this block in the @CPU_RT chart.

For more information on the subject of CPU stop prevention, please refer to the help section for the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.4 Diagnostics/Clock

For process data to be compatible for evaluation, all components of the process control system must work with the same time of day so that messages – regardless of the time zone in which they are generated – can be assigned correctly in terms of temporal sequence. This usually involves an OS server or an external clock (SICLOCK) taking on the role of the time master. All other operator stations and automation systems on the plant bus then have the time from this time master and, therefore, identical time.

You can find additional information about configuring the time synchronization in the manual ""SIMATIC Process Control System PCS 7 Time Synchronization"" (https://support.industry.siemens.com/cs/ww/en/view/109746544).

Check that the correction factor is set to 0 ms under ""Time"" on the ""Diagnostics/Clock"" tab in a CPU with safety program.

|Properties CPU 410-SH (R0/53)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Intenupts|
|---|---|---|---|---|---|---|---|
|Time -of-Day|Intenupts|Cyclic Irtenupts|Diagnostics /Clock|Protection|Parameters|System Diagnostics| |
|Extended functions|Report cause of STOP|Acknowledgment-triggered reporting SFB33-35|Number of messages the diagnostics buffer:|3200|3200|3200|3200|
|Clock|Synchronization|Synchronization Type|Time Interval|ELC:|In the|As slave|None|
|On the MPI:|None|None|On the MEI:|(None|(None|Correction factor:| |

Note

See also Compendium Part A ""Configuration of the Hardware > General CPU Settings > Diagnostics/Clock"".

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.5 H parameters

Self-test (advanced CPU test)

The CPU tests the following during the self-test:

- Processor
- Internal memory
- I/O bus

If the test detects any faults, they are reported and the CPU goes to STOP.

# Test cycle time

The test cycle time (default setting: 90 minutes) indicates the time taken for a complete background self-test.

Note

For S7 F/FH systems, this parameter can be increased up to a maximum of 12 hours (720 minutes).

In S7 F/FH systems, the test may not be modified by calling SFC 90, ""H_CTRL"". Otherwise, the safety program will go to F-STOP after a maximum of 24 hours. Switching test components on or off is prohibited.

In the event of a STOP, the self-test enters the following diagnostics event in the diagnostic buffer of the F CPU: ""Safety program: Error detected"" (event ID 16#75E1).

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

|Properties|CPU 410-SH (R0/53)| | | | | |
|---|---|---|---|---|---|---|
|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Interrupts|
|Time-of-Day|Interrupts|Cyclic Interrupts|Diagnostics /Clock|Protection|Parameters| |
|Parameters for Expanded CPU Test|Test scan time [min]:|sc| | | | |
|Reaction E|RAM/IPIQ comparison error:|TROUBLESHOOTING| | | | |
|Update the Standby CPU|Maximum number of attempts;| | | | | |
|Cyclic interrupt OB special handling;|Waiting time between two attempts [s];| | | | | |
|Monitoring times|Max scan cycle time extension [ms]:|Calculate| | | | |
|Max communication delay [ms];|Max disabling time for priority classes 15 [ms]:|Use only| | | | |
|Min I/O retention time [ms];:|calculated values| | | | | |
|Redundant I/O|Data block no:|and 2| | | | |
|Passivation behavior|channels|Cancel|Help| | | |

Note

If you are using redundant standard signal modules, the system will generate two data blocks in the AS: DB 1, with the number specified, and DB 2, with the number following this. Make sure that these blocks are not used twice (e.g. ",How does the CPU_RT block prevent a CPU STOP due to cycle overload in systems as of PCS 7 V7.0?,The CPU_RT block implements a two-stage 'load-shedding' process to prevent CPU STOP by temporarily suspending the processing of cyclic interrupt OBs.,"In systems from PCS 7 V7.0 onwards, the CPU_RT block avoids CPU STOP by first skipping non-essential cyclic interrupt OBs and then all OBs if necessary.","Prevention of CPU STOP is achieved through the CPU_RT block's two-stage approach: initially bypassing certain cyclic interrupt OBs and, if needed, all OBs for a cycle.","The CPU_RT block, introduced in PCS 7 V7.0, safeguards against CPU STOP by selectively or fully suspending cyclic interrupt OB processing during overload.","By employing a two-stage load-shedding mechanism, the CPU_RT block in PCS 7 V7.0 systems prevents CPU STOP by managing cyclic interrupt OB execution during high load."
2,pcs7_compendium_part_b_en-US_en-US.txt,12,6e23c51c0032b37d2f675e7f010284bfdb1409ea602c735f7c49c17c40cd1942,": Pressure measurement|
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB 40 should be changed from Prio16 to Prio18.

The following figure shows how the individual cyclic interrupt OBs from Example 1 are processed over a period of 1280 ms, starting from the point in time (t) at which the CPU begins program processing. In this example, the CPU utilization is at approximately 65%.

# Processing of the cyclic interrupt OBs by the CPU

|Time (ms)|OB|
|---|---|
|0|OB38|
|30|OB37|
|50|OB36|
|10|OB35|
|25|OB34|
|320|OB33|
| |OB32|
| |OB31|
| |OB30|
| |OB1|

t+500ms t+1000ms

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# Example 2: Reconfiguration/migration, for which the hardware present must be connected via serial communication (Modbus)

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|18|50 ms|Serial communication|Ex.: Modbus|
|OB 37|17|300 ms|Fast F-application| |
|OB 36|16|1000 ms|F application| |
|OB 35|12|100 ms|Fast standard application|Ex.: Control|
|OB 34|11|200 ms|Standard application|Ex.: Pressure measurement|
|OB 33|10|500 ms| | |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping, the setting for OB 40 should be changed from Prio16 to Prio19.

# Example 3: Reconfiguration/migration, for which the Quadlog hardware present must be connected via DP/IO bus link

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|17|10 ms|Quadlog connection| |
|OB 37|16|300 ms|F application| |
|OB 36|13|50 ms|Empty| |
|OB 35|12|100 ms|Empty| |
|OB 34|11|200 ms|Empty| |
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB40 should be changed from Prio16 to Prio18.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

27

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# CPU utilization

The cycle utilization of the system should never be above 75%, regardless of whether it involves a standard AS or an H system.

Note

To help you determine the processing times of the individual cyclic interrupt OBs, please refer to the FAQ ""How can you calculate the cycle load of the automation system (AS) online?"" (https://support.industry.siemens.com/cs/ww/en/view/22000962)

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times of the cyclic interrupt OBs and the total load of the AS can be read at the CPU_RT block.

As of PCS 7 V7.0 with PCS 7 Library V7.0, the block CPU_RT will be installed in each CPU. This block prevents a CPU STOP as a result of cycle overload, thanks to a two-stage ""load-shedding"" process:

- In the first stage of load shedding, all cyclic interrupt OBs that have not been disabled for the function by the project engineer are not processed for one cycle.
- In the second stage, none of the cyclic interrupt OBs are processed for one cycle (even the ones that were excluded previously). If this does not have a steadying effect, whenever cyclic interrupt OBs are processed their processing will be suspended again for one cycle.

Note

In order to prevent F-cycle-time monitoring in the CPU and the F-monitoring time on the F-signal modules from being triggered, and the system response time from being extended, you must disable the cyclic interrupt OBs with the F-program during the stage 1 of stop prevention.

Alternatively, you can disable stop prevention altogether by setting the parameter for input Max_RTRG of block CPU_RT to 0. You can find this block in the @CPU_RT chart.

For more information on the subject of CPU stop prevention, please refer to the help section for the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.4 Diagnostics/Clock

For process data to be compatible for evaluation, all components of the process control system must work with the same time of day so that messages – regardless of the time zone in which they are generated – can be assigned correctly in terms of temporal sequence. This usually involves an OS server or an external clock (SICLOCK) taking on the role of the time master. All other operator stations and automation systems on the plant bus then have the time from this time master and, therefore, identical time.

You can find additional information about configuring the time synchronization in the manual ""SIMATIC Process Control System PCS 7 Time Synchronization"" (https://support.industry.siemens.com/cs/ww/en/view/109746544).

Check that the correction factor is set to 0 ms under ""Time"" on the ""Diagnostics/Clock"" tab in a CPU with safety program.

|Properties CPU 410-SH (R0/53)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Intenupts|
|---|---|---|---|---|---|---|---|
|Time -of-Day|Intenupts|Cyclic Irtenupts|Diagnostics /Clock|Protection|Parameters|System Diagnostics| |
|Extended functions|Report cause of STOP|Acknowledgment-triggered reporting SFB33-35|Number of messages the diagnostics buffer:|3200|3200|3200|3200|
|Clock|Synchronization|Synchronization Type|Time Interval|ELC:|In the|As slave|None|
|On the MPI:|None|None|On the MEI:|(None|(None|Correction factor:| |

Note

See also Compendium Part A ""Configuration of the Hardware > General CPU Settings > Diagnostics/Clock"".

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.5 H parameters

Self-test (advanced CPU test)

The CPU tests the following during the self-test:

- Processor
- Internal memory
- I/O bus

If the test detects any faults, they are reported and the CPU goes to STOP.

# Test cycle time

The test cycle time (default setting: 90 minutes) indicates the time taken for a complete background self-test.

Note

For S7 F/FH systems, this parameter can be increased up to a maximum of 12 hours (720 minutes).

In S7 F/FH systems, the test may not be modified by calling SFC 90, ""H_CTRL"". Otherwise, the safety program will go to F-STOP after a maximum of 24 hours. Switching test components on or off is prohibited.

In the event of a STOP, the self-test enters the following diagnostics event in the diagnostic buffer of the F CPU: ""Safety program: Error detected"" (event ID 16#75E1).

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

|Properties|CPU 410-SH (R0/53)| | | | | |
|---|---|---|---|---|---|---|
|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Interrupts|
|Time-of-Day|Interrupts|Cyclic Interrupts|Diagnostics /Clock|Protection|Parameters| |
|Parameters for Expanded CPU Test|Test scan time [min]:|sc| | | | |
|Reaction E|RAM/IPIQ comparison error:|TROUBLESHOOTING| | | | |
|Update the Standby CPU|Maximum number of attempts;| | | | | |
|Cyclic interrupt OB special handling;|Waiting time between two attempts [s];| | | | | |
|Monitoring times|Max scan cycle time extension [ms]:|Calculate| | | | |
|Max communication delay [ms];|Max disabling time for priority classes 15 [ms]:|Use only| | | | |
|Min I/O retention time [ms];:|calculated values| | | | | |
|Redundant I/O|Data block no:|and 2| | | | |
|Passivation behavior|channels|Cancel|Help| | | |

Note

If you are using redundant standard signal modules, the system will generate two data blocks in the AS: DB 1, with the number specified, and DB 2, with the number following this. Make sure that these blocks are not used twice (e.g. ","What is the maximum recommended cycle utilization for a system, according to the 'Compendium Part B - Process Safety (V9.0)'?","The cycle utilization should not exceed 75%, whether it's a standard AS or an H system.","According to the manual, systems should maintain cycle utilization below 75% to ensure proper operation.","For both standard AS and H systems, the 'Compendium Part B - Process Safety (V9.0)' advises keeping cycle utilization under 75%.","The recommended maximum cycle utilization, as per the manual, is 75% for all system types.","75% is the threshold for cycle utilization in any system, standard AS or H, as specified in the 'Compendium Part B - Process Safety (V9.0)'."
3,pcs7_compendium_part_b_en-US_en-US.txt,12,6e23c51c0032b37d2f675e7f010284bfdb1409ea602c735f7c49c17c40cd1942,": Pressure measurement|
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB 40 should be changed from Prio16 to Prio18.

The following figure shows how the individual cyclic interrupt OBs from Example 1 are processed over a period of 1280 ms, starting from the point in time (t) at which the CPU begins program processing. In this example, the CPU utilization is at approximately 65%.

# Processing of the cyclic interrupt OBs by the CPU

|Time (ms)|OB|
|---|---|
|0|OB38|
|30|OB37|
|50|OB36|
|10|OB35|
|25|OB34|
|320|OB33|
| |OB32|
| |OB31|
| |OB30|
| |OB1|

t+500ms t+1000ms

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# Example 2: Reconfiguration/migration, for which the hardware present must be connected via serial communication (Modbus)

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|18|50 ms|Serial communication|Ex.: Modbus|
|OB 37|17|300 ms|Fast F-application| |
|OB 36|16|1000 ms|F application| |
|OB 35|12|100 ms|Fast standard application|Ex.: Control|
|OB 34|11|200 ms|Standard application|Ex.: Pressure measurement|
|OB 33|10|500 ms| | |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping, the setting for OB 40 should be changed from Prio16 to Prio19.

# Example 3: Reconfiguration/migration, for which the Quadlog hardware present must be connected via DP/IO bus link

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|17|10 ms|Quadlog connection| |
|OB 37|16|300 ms|F application| |
|OB 36|13|50 ms|Empty| |
|OB 35|12|100 ms|Empty| |
|OB 34|11|200 ms|Empty| |
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB40 should be changed from Prio16 to Prio18.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

27

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# CPU utilization

The cycle utilization of the system should never be above 75%, regardless of whether it involves a standard AS or an H system.

Note

To help you determine the processing times of the individual cyclic interrupt OBs, please refer to the FAQ ""How can you calculate the cycle load of the automation system (AS) online?"" (https://support.industry.siemens.com/cs/ww/en/view/22000962)

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times of the cyclic interrupt OBs and the total load of the AS can be read at the CPU_RT block.

As of PCS 7 V7.0 with PCS 7 Library V7.0, the block CPU_RT will be installed in each CPU. This block prevents a CPU STOP as a result of cycle overload, thanks to a two-stage ""load-shedding"" process:

- In the first stage of load shedding, all cyclic interrupt OBs that have not been disabled for the function by the project engineer are not processed for one cycle.
- In the second stage, none of the cyclic interrupt OBs are processed for one cycle (even the ones that were excluded previously). If this does not have a steadying effect, whenever cyclic interrupt OBs are processed their processing will be suspended again for one cycle.

Note

In order to prevent F-cycle-time monitoring in the CPU and the F-monitoring time on the F-signal modules from being triggered, and the system response time from being extended, you must disable the cyclic interrupt OBs with the F-program during the stage 1 of stop prevention.

Alternatively, you can disable stop prevention altogether by setting the parameter for input Max_RTRG of block CPU_RT to 0. You can find this block in the @CPU_RT chart.

For more information on the subject of CPU stop prevention, please refer to the help section for the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.4 Diagnostics/Clock

For process data to be compatible for evaluation, all components of the process control system must work with the same time of day so that messages – regardless of the time zone in which they are generated – can be assigned correctly in terms of temporal sequence. This usually involves an OS server or an external clock (SICLOCK) taking on the role of the time master. All other operator stations and automation systems on the plant bus then have the time from this time master and, therefore, identical time.

You can find additional information about configuring the time synchronization in the manual ""SIMATIC Process Control System PCS 7 Time Synchronization"" (https://support.industry.siemens.com/cs/ww/en/view/109746544).

Check that the correction factor is set to 0 ms under ""Time"" on the ""Diagnostics/Clock"" tab in a CPU with safety program.

|Properties CPU 410-SH (R0/53)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Intenupts|
|---|---|---|---|---|---|---|---|
|Time -of-Day|Intenupts|Cyclic Irtenupts|Diagnostics /Clock|Protection|Parameters|System Diagnostics| |
|Extended functions|Report cause of STOP|Acknowledgment-triggered reporting SFB33-35|Number of messages the diagnostics buffer:|3200|3200|3200|3200|
|Clock|Synchronization|Synchronization Type|Time Interval|ELC:|In the|As slave|None|
|On the MPI:|None|None|On the MEI:|(None|(None|Correction factor:| |

Note

See also Compendium Part A ""Configuration of the Hardware > General CPU Settings > Diagnostics/Clock"".

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.5 H parameters

Self-test (advanced CPU test)

The CPU tests the following during the self-test:

- Processor
- Internal memory
- I/O bus

If the test detects any faults, they are reported and the CPU goes to STOP.

# Test cycle time

The test cycle time (default setting: 90 minutes) indicates the time taken for a complete background self-test.

Note

For S7 F/FH systems, this parameter can be increased up to a maximum of 12 hours (720 minutes).

In S7 F/FH systems, the test may not be modified by calling SFC 90, ""H_CTRL"". Otherwise, the safety program will go to F-STOP after a maximum of 24 hours. Switching test components on or off is prohibited.

In the event of a STOP, the self-test enters the following diagnostics event in the diagnostic buffer of the F CPU: ""Safety program: Error detected"" (event ID 16#75E1).

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

|Properties|CPU 410-SH (R0/53)| | | | | |
|---|---|---|---|---|---|---|
|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Interrupts|
|Time-of-Day|Interrupts|Cyclic Interrupts|Diagnostics /Clock|Protection|Parameters| |
|Parameters for Expanded CPU Test|Test scan time [min]:|sc| | | | |
|Reaction E|RAM/IPIQ comparison error:|TROUBLESHOOTING| | | | |
|Update the Standby CPU|Maximum number of attempts;| | | | | |
|Cyclic interrupt OB special handling;|Waiting time between two attempts [s];| | | | | |
|Monitoring times|Max scan cycle time extension [ms]:|Calculate| | | | |
|Max communication delay [ms];|Max disabling time for priority classes 15 [ms]:|Use only| | | | |
|Min I/O retention time [ms];:|calculated values| | | | | |
|Redundant I/O|Data block no:|and 2| | | | |
|Passivation behavior|channels|Cancel|Help| | | |

Note

If you are using redundant standard signal modules, the system will generate two data blocks in the AS: DB 1, with the number specified, and DB 2, with the number following this. Make sure that these blocks are not used twice (e.g. ",What must be done to prevent F-cycle-time monitoring in the CPU and F-monitoring time on the F-signal modules from being triggered?,Disable the cyclic interrupt OBs with the F-program during the first stage of stop prevention.,"To avoid triggering, the cyclic interrupt OBs containing the F-program should be disabled in stage 1 of stop prevention.",Prevention involves disabling F-program cyclic interrupt OBs during the initial load-shedding phase.,The manual specifies disabling F-program related cyclic interrupt OBs in stage 1 to prevent monitoring triggers.,Ensuring cyclic interrupt OBs with F-programs are disabled during the first stop prevention stage is key to avoiding monitoring triggers.
4,pcs7_compendium_part_b_en-US_en-US.txt,12,6e23c51c0032b37d2f675e7f010284bfdb1409ea602c735f7c49c17c40cd1942,": Pressure measurement|
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB 40 should be changed from Prio16 to Prio18.

The following figure shows how the individual cyclic interrupt OBs from Example 1 are processed over a period of 1280 ms, starting from the point in time (t) at which the CPU begins program processing. In this example, the CPU utilization is at approximately 65%.

# Processing of the cyclic interrupt OBs by the CPU

|Time (ms)|OB|
|---|---|
|0|OB38|
|30|OB37|
|50|OB36|
|10|OB35|
|25|OB34|
|320|OB33|
| |OB32|
| |OB31|
| |OB30|
| |OB1|

t+500ms t+1000ms

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# Example 2: Reconfiguration/migration, for which the hardware present must be connected via serial communication (Modbus)

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|18|50 ms|Serial communication|Ex.: Modbus|
|OB 37|17|300 ms|Fast F-application| |
|OB 36|16|1000 ms|F application| |
|OB 35|12|100 ms|Fast standard application|Ex.: Control|
|OB 34|11|200 ms|Standard application|Ex.: Pressure measurement|
|OB 33|10|500 ms| | |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping, the setting for OB 40 should be changed from Prio16 to Prio19.

# Example 3: Reconfiguration/migration, for which the Quadlog hardware present must be connected via DP/IO bus link

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|17|10 ms|Quadlog connection| |
|OB 37|16|300 ms|F application| |
|OB 36|13|50 ms|Empty| |
|OB 35|12|100 ms|Empty| |
|OB 34|11|200 ms|Empty| |
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB40 should be changed from Prio16 to Prio18.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

27

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# CPU utilization

The cycle utilization of the system should never be above 75%, regardless of whether it involves a standard AS or an H system.

Note

To help you determine the processing times of the individual cyclic interrupt OBs, please refer to the FAQ ""How can you calculate the cycle load of the automation system (AS) online?"" (https://support.industry.siemens.com/cs/ww/en/view/22000962)

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times of the cyclic interrupt OBs and the total load of the AS can be read at the CPU_RT block.

As of PCS 7 V7.0 with PCS 7 Library V7.0, the block CPU_RT will be installed in each CPU. This block prevents a CPU STOP as a result of cycle overload, thanks to a two-stage ""load-shedding"" process:

- In the first stage of load shedding, all cyclic interrupt OBs that have not been disabled for the function by the project engineer are not processed for one cycle.
- In the second stage, none of the cyclic interrupt OBs are processed for one cycle (even the ones that were excluded previously). If this does not have a steadying effect, whenever cyclic interrupt OBs are processed their processing will be suspended again for one cycle.

Note

In order to prevent F-cycle-time monitoring in the CPU and the F-monitoring time on the F-signal modules from being triggered, and the system response time from being extended, you must disable the cyclic interrupt OBs with the F-program during the stage 1 of stop prevention.

Alternatively, you can disable stop prevention altogether by setting the parameter for input Max_RTRG of block CPU_RT to 0. You can find this block in the @CPU_RT chart.

For more information on the subject of CPU stop prevention, please refer to the help section for the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.4 Diagnostics/Clock

For process data to be compatible for evaluation, all components of the process control system must work with the same time of day so that messages – regardless of the time zone in which they are generated – can be assigned correctly in terms of temporal sequence. This usually involves an OS server or an external clock (SICLOCK) taking on the role of the time master. All other operator stations and automation systems on the plant bus then have the time from this time master and, therefore, identical time.

You can find additional information about configuring the time synchronization in the manual ""SIMATIC Process Control System PCS 7 Time Synchronization"" (https://support.industry.siemens.com/cs/ww/en/view/109746544).

Check that the correction factor is set to 0 ms under ""Time"" on the ""Diagnostics/Clock"" tab in a CPU with safety program.

|Properties CPU 410-SH (R0/53)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Intenupts|
|---|---|---|---|---|---|---|---|
|Time -of-Day|Intenupts|Cyclic Irtenupts|Diagnostics /Clock|Protection|Parameters|System Diagnostics| |
|Extended functions|Report cause of STOP|Acknowledgment-triggered reporting SFB33-35|Number of messages the diagnostics buffer:|3200|3200|3200|3200|
|Clock|Synchronization|Synchronization Type|Time Interval|ELC:|In the|As slave|None|
|On the MPI:|None|None|On the MEI:|(None|(None|Correction factor:| |

Note

See also Compendium Part A ""Configuration of the Hardware > General CPU Settings > Diagnostics/Clock"".

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.5 H parameters

Self-test (advanced CPU test)

The CPU tests the following during the self-test:

- Processor
- Internal memory
- I/O bus

If the test detects any faults, they are reported and the CPU goes to STOP.

# Test cycle time

The test cycle time (default setting: 90 minutes) indicates the time taken for a complete background self-test.

Note

For S7 F/FH systems, this parameter can be increased up to a maximum of 12 hours (720 minutes).

In S7 F/FH systems, the test may not be modified by calling SFC 90, ""H_CTRL"". Otherwise, the safety program will go to F-STOP after a maximum of 24 hours. Switching test components on or off is prohibited.

In the event of a STOP, the self-test enters the following diagnostics event in the diagnostic buffer of the F CPU: ""Safety program: Error detected"" (event ID 16#75E1).

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

|Properties|CPU 410-SH (R0/53)| | | | | |
|---|---|---|---|---|---|---|
|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Interrupts|
|Time-of-Day|Interrupts|Cyclic Interrupts|Diagnostics /Clock|Protection|Parameters| |
|Parameters for Expanded CPU Test|Test scan time [min]:|sc| | | | |
|Reaction E|RAM/IPIQ comparison error:|TROUBLESHOOTING| | | | |
|Update the Standby CPU|Maximum number of attempts;| | | | | |
|Cyclic interrupt OB special handling;|Waiting time between two attempts [s];| | | | | |
|Monitoring times|Max scan cycle time extension [ms]:|Calculate| | | | |
|Max communication delay [ms];|Max disabling time for priority classes 15 [ms]:|Use only| | | | |
|Min I/O retention time [ms];:|calculated values| | | | | |
|Redundant I/O|Data block no:|and 2| | | | |
|Passivation behavior|channels|Cancel|Help| | | |

Note

If you are using redundant standard signal modules, the system will generate two data blocks in the AS: DB 1, with the number specified, and DB 2, with the number following this. Make sure that these blocks are not used twice (e.g. ",What role does the time master play in the process control system according to the 'Compendium Part B - Process Safety (V9.0)'?,The time master ensures all system components operate on the same time for correct temporal sequence assignment of messages.,"In the process control system, the time master synchronizes the time across all components to align message timestamps.",The time master's role is to provide a unified time reference for all operator stations and automation systems on the plant bus.,"As per the manual, the time master, typically an OS server or external clock, guarantees synchronized time across the system for accurate message sequencing.","Synchronizing the time of day across all process control system components is the primary function of the time master, ensuring consistent message timing."
5,pcs7_compendium_part_b_en-US_en-US.txt,12,6e23c51c0032b37d2f675e7f010284bfdb1409ea602c735f7c49c17c40cd1942,": Pressure measurement|
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB 40 should be changed from Prio16 to Prio18.

The following figure shows how the individual cyclic interrupt OBs from Example 1 are processed over a period of 1280 ms, starting from the point in time (t) at which the CPU begins program processing. In this example, the CPU utilization is at approximately 65%.

# Processing of the cyclic interrupt OBs by the CPU

|Time (ms)|OB|
|---|---|
|0|OB38|
|30|OB37|
|50|OB36|
|10|OB35|
|25|OB34|
|320|OB33|
| |OB32|
| |OB31|
| |OB30|
| |OB1|

t+500ms t+1000ms

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# Example 2: Reconfiguration/migration, for which the hardware present must be connected via serial communication (Modbus)

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|18|50 ms|Serial communication|Ex.: Modbus|
|OB 37|17|300 ms|Fast F-application| |
|OB 36|16|1000 ms|F application| |
|OB 35|12|100 ms|Fast standard application|Ex.: Control|
|OB 34|11|200 ms|Standard application|Ex.: Pressure measurement|
|OB 33|10|500 ms| | |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping, the setting for OB 40 should be changed from Prio16 to Prio19.

# Example 3: Reconfiguration/migration, for which the Quadlog hardware present must be connected via DP/IO bus link

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|17|10 ms|Quadlog connection| |
|OB 37|16|300 ms|F application| |
|OB 36|13|50 ms|Empty| |
|OB 35|12|100 ms|Empty| |
|OB 34|11|200 ms|Empty| |
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB40 should be changed from Prio16 to Prio18.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

27

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# CPU utilization

The cycle utilization of the system should never be above 75%, regardless of whether it involves a standard AS or an H system.

Note

To help you determine the processing times of the individual cyclic interrupt OBs, please refer to the FAQ ""How can you calculate the cycle load of the automation system (AS) online?"" (https://support.industry.siemens.com/cs/ww/en/view/22000962)

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times of the cyclic interrupt OBs and the total load of the AS can be read at the CPU_RT block.

As of PCS 7 V7.0 with PCS 7 Library V7.0, the block CPU_RT will be installed in each CPU. This block prevents a CPU STOP as a result of cycle overload, thanks to a two-stage ""load-shedding"" process:

- In the first stage of load shedding, all cyclic interrupt OBs that have not been disabled for the function by the project engineer are not processed for one cycle.
- In the second stage, none of the cyclic interrupt OBs are processed for one cycle (even the ones that were excluded previously). If this does not have a steadying effect, whenever cyclic interrupt OBs are processed their processing will be suspended again for one cycle.

Note

In order to prevent F-cycle-time monitoring in the CPU and the F-monitoring time on the F-signal modules from being triggered, and the system response time from being extended, you must disable the cyclic interrupt OBs with the F-program during the stage 1 of stop prevention.

Alternatively, you can disable stop prevention altogether by setting the parameter for input Max_RTRG of block CPU_RT to 0. You can find this block in the @CPU_RT chart.

For more information on the subject of CPU stop prevention, please refer to the help section for the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.4 Diagnostics/Clock

For process data to be compatible for evaluation, all components of the process control system must work with the same time of day so that messages – regardless of the time zone in which they are generated – can be assigned correctly in terms of temporal sequence. This usually involves an OS server or an external clock (SICLOCK) taking on the role of the time master. All other operator stations and automation systems on the plant bus then have the time from this time master and, therefore, identical time.

You can find additional information about configuring the time synchronization in the manual ""SIMATIC Process Control System PCS 7 Time Synchronization"" (https://support.industry.siemens.com/cs/ww/en/view/109746544).

Check that the correction factor is set to 0 ms under ""Time"" on the ""Diagnostics/Clock"" tab in a CPU with safety program.

|Properties CPU 410-SH (R0/53)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Intenupts|
|---|---|---|---|---|---|---|---|
|Time -of-Day|Intenupts|Cyclic Irtenupts|Diagnostics /Clock|Protection|Parameters|System Diagnostics| |
|Extended functions|Report cause of STOP|Acknowledgment-triggered reporting SFB33-35|Number of messages the diagnostics buffer:|3200|3200|3200|3200|
|Clock|Synchronization|Synchronization Type|Time Interval|ELC:|In the|As slave|None|
|On the MPI:|None|None|On the MEI:|(None|(None|Correction factor:| |

Note

See also Compendium Part A ""Configuration of the Hardware > General CPU Settings > Diagnostics/Clock"".

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.5 H parameters

Self-test (advanced CPU test)

The CPU tests the following during the self-test:

- Processor
- Internal memory
- I/O bus

If the test detects any faults, they are reported and the CPU goes to STOP.

# Test cycle time

The test cycle time (default setting: 90 minutes) indicates the time taken for a complete background self-test.

Note

For S7 F/FH systems, this parameter can be increased up to a maximum of 12 hours (720 minutes).

In S7 F/FH systems, the test may not be modified by calling SFC 90, ""H_CTRL"". Otherwise, the safety program will go to F-STOP after a maximum of 24 hours. Switching test components on or off is prohibited.

In the event of a STOP, the self-test enters the following diagnostics event in the diagnostic buffer of the F CPU: ""Safety program: Error detected"" (event ID 16#75E1).

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

|Properties|CPU 410-SH (R0/53)| | | | | |
|---|---|---|---|---|---|---|
|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Interrupts|
|Time-of-Day|Interrupts|Cyclic Interrupts|Diagnostics /Clock|Protection|Parameters| |
|Parameters for Expanded CPU Test|Test scan time [min]:|sc| | | | |
|Reaction E|RAM/IPIQ comparison error:|TROUBLESHOOTING| | | | |
|Update the Standby CPU|Maximum number of attempts;| | | | | |
|Cyclic interrupt OB special handling;|Waiting time between two attempts [s];| | | | | |
|Monitoring times|Max scan cycle time extension [ms]:|Calculate| | | | |
|Max communication delay [ms];|Max disabling time for priority classes 15 [ms]:|Use only| | | | |
|Min I/O retention time [ms];:|calculated values| | | | | |
|Redundant I/O|Data block no:|and 2| | | | |
|Passivation behavior|channels|Cancel|Help| | | |

Note

If you are using redundant standard signal modules, the system will generate two data blocks in the AS: DB 1, with the number specified, and DB 2, with the number following this. Make sure that these blocks are not used twice (e.g. ","What is the default test cycle time for the CPU self-test in S7 F/FH systems, and what is its maximum allowable value?","The default test cycle time is 90 minutes, extendable up to a maximum of 12 hours (720 minutes).","In S7 F/FH systems, the self-test's default duration is 90 minutes, with a maximum permissible extension to 720 minutes.","Default setting for the CPU self-test cycle time is 90 minutes, but it can be increased to no more than 12 hours in S7 F/FH systems.","The manual states the self-test initially runs every 90 minutes, with an option to extend this interval up to 720 minutes for S7 F/FH systems.","For S7 F/FH systems, the CPU self-test's default cycle time is 90 minutes, adjustable up to a 12-hour maximum as specified."
6,pcs7_compendium_part_b_en-US_en-US.txt,12,6e23c51c0032b37d2f675e7f010284bfdb1409ea602c735f7c49c17c40cd1942,": Pressure measurement|
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB 40 should be changed from Prio16 to Prio18.

The following figure shows how the individual cyclic interrupt OBs from Example 1 are processed over a period of 1280 ms, starting from the point in time (t) at which the CPU begins program processing. In this example, the CPU utilization is at approximately 65%.

# Processing of the cyclic interrupt OBs by the CPU

|Time (ms)|OB|
|---|---|
|0|OB38|
|30|OB37|
|50|OB36|
|10|OB35|
|25|OB34|
|320|OB33|
| |OB32|
| |OB31|
| |OB30|
| |OB1|

t+500ms t+1000ms

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# Example 2: Reconfiguration/migration, for which the hardware present must be connected via serial communication (Modbus)

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|18|50 ms|Serial communication|Ex.: Modbus|
|OB 37|17|300 ms|Fast F-application| |
|OB 36|16|1000 ms|F application| |
|OB 35|12|100 ms|Fast standard application|Ex.: Control|
|OB 34|11|200 ms|Standard application|Ex.: Pressure measurement|
|OB 33|10|500 ms| | |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping, the setting for OB 40 should be changed from Prio16 to Prio19.

# Example 3: Reconfiguration/migration, for which the Quadlog hardware present must be connected via DP/IO bus link

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|17|10 ms|Quadlog connection| |
|OB 37|16|300 ms|F application| |
|OB 36|13|50 ms|Empty| |
|OB 35|12|100 ms|Empty| |
|OB 34|11|200 ms|Empty| |
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB40 should be changed from Prio16 to Prio18.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

27

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# CPU utilization

The cycle utilization of the system should never be above 75%, regardless of whether it involves a standard AS or an H system.

Note

To help you determine the processing times of the individual cyclic interrupt OBs, please refer to the FAQ ""How can you calculate the cycle load of the automation system (AS) online?"" (https://support.industry.siemens.com/cs/ww/en/view/22000962)

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times of the cyclic interrupt OBs and the total load of the AS can be read at the CPU_RT block.

As of PCS 7 V7.0 with PCS 7 Library V7.0, the block CPU_RT will be installed in each CPU. This block prevents a CPU STOP as a result of cycle overload, thanks to a two-stage ""load-shedding"" process:

- In the first stage of load shedding, all cyclic interrupt OBs that have not been disabled for the function by the project engineer are not processed for one cycle.
- In the second stage, none of the cyclic interrupt OBs are processed for one cycle (even the ones that were excluded previously). If this does not have a steadying effect, whenever cyclic interrupt OBs are processed their processing will be suspended again for one cycle.

Note

In order to prevent F-cycle-time monitoring in the CPU and the F-monitoring time on the F-signal modules from being triggered, and the system response time from being extended, you must disable the cyclic interrupt OBs with the F-program during the stage 1 of stop prevention.

Alternatively, you can disable stop prevention altogether by setting the parameter for input Max_RTRG of block CPU_RT to 0. You can find this block in the @CPU_RT chart.

For more information on the subject of CPU stop prevention, please refer to the help section for the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.4 Diagnostics/Clock

For process data to be compatible for evaluation, all components of the process control system must work with the same time of day so that messages – regardless of the time zone in which they are generated – can be assigned correctly in terms of temporal sequence. This usually involves an OS server or an external clock (SICLOCK) taking on the role of the time master. All other operator stations and automation systems on the plant bus then have the time from this time master and, therefore, identical time.

You can find additional information about configuring the time synchronization in the manual ""SIMATIC Process Control System PCS 7 Time Synchronization"" (https://support.industry.siemens.com/cs/ww/en/view/109746544).

Check that the correction factor is set to 0 ms under ""Time"" on the ""Diagnostics/Clock"" tab in a CPU with safety program.

|Properties CPU 410-SH (R0/53)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Intenupts|
|---|---|---|---|---|---|---|---|
|Time -of-Day|Intenupts|Cyclic Irtenupts|Diagnostics /Clock|Protection|Parameters|System Diagnostics| |
|Extended functions|Report cause of STOP|Acknowledgment-triggered reporting SFB33-35|Number of messages the diagnostics buffer:|3200|3200|3200|3200|
|Clock|Synchronization|Synchronization Type|Time Interval|ELC:|In the|As slave|None|
|On the MPI:|None|None|On the MEI:|(None|(None|Correction factor:| |

Note

See also Compendium Part A ""Configuration of the Hardware > General CPU Settings > Diagnostics/Clock"".

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.5 H parameters

Self-test (advanced CPU test)

The CPU tests the following during the self-test:

- Processor
- Internal memory
- I/O bus

If the test detects any faults, they are reported and the CPU goes to STOP.

# Test cycle time

The test cycle time (default setting: 90 minutes) indicates the time taken for a complete background self-test.

Note

For S7 F/FH systems, this parameter can be increased up to a maximum of 12 hours (720 minutes).

In S7 F/FH systems, the test may not be modified by calling SFC 90, ""H_CTRL"". Otherwise, the safety program will go to F-STOP after a maximum of 24 hours. Switching test components on or off is prohibited.

In the event of a STOP, the self-test enters the following diagnostics event in the diagnostic buffer of the F CPU: ""Safety program: Error detected"" (event ID 16#75E1).

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

|Properties|CPU 410-SH (R0/53)| | | | | |
|---|---|---|---|---|---|---|
|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Interrupts|
|Time-of-Day|Interrupts|Cyclic Interrupts|Diagnostics /Clock|Protection|Parameters| |
|Parameters for Expanded CPU Test|Test scan time [min]:|sc| | | | |
|Reaction E|RAM/IPIQ comparison error:|TROUBLESHOOTING| | | | |
|Update the Standby CPU|Maximum number of attempts;| | | | | |
|Cyclic interrupt OB special handling;|Waiting time between two attempts [s];| | | | | |
|Monitoring times|Max scan cycle time extension [ms]:|Calculate| | | | |
|Max communication delay [ms];|Max disabling time for priority classes 15 [ms]:|Use only| | | | |
|Min I/O retention time [ms];:|calculated values| | | | | |
|Redundant I/O|Data block no:|and 2| | | | |
|Passivation behavior|channels|Cancel|Help| | | |

Note

If you are using redundant standard signal modules, the system will generate two data blocks in the AS: DB 1, with the number specified, and DB 2, with the number following this. Make sure that these blocks are not used twice (e.g. ",What happens if the CPU self-test detects any faults during its execution in an S7 F/FH system?,"Detected faults are reported, and the CPU enters STOP mode.","Upon fault detection, the CPU stops operation and logs the event in its diagnostic buffer.","The CPU will transition to STOP state and record the fault in the diagnostics buffer, specifically noting 'Safety program: Error detected'.","If the self-test finds faults, the CPU halts, triggering a STOP and documenting the error with event ID 16#75E1.","In case of faults during the self-test, the CPU stops functioning, reports the issue, and marks it in the diagnostic buffer as a safety program error."
7,pcs7_compendium_part_b_en-US_en-US.txt,12,6e23c51c0032b37d2f675e7f010284bfdb1409ea602c735f7c49c17c40cd1942,": Pressure measurement|
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB 40 should be changed from Prio16 to Prio18.

The following figure shows how the individual cyclic interrupt OBs from Example 1 are processed over a period of 1280 ms, starting from the point in time (t) at which the CPU begins program processing. In this example, the CPU utilization is at approximately 65%.

# Processing of the cyclic interrupt OBs by the CPU

|Time (ms)|OB|
|---|---|
|0|OB38|
|30|OB37|
|50|OB36|
|10|OB35|
|25|OB34|
|320|OB33|
| |OB32|
| |OB31|
| |OB30|
| |OB1|

t+500ms t+1000ms

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# Example 2: Reconfiguration/migration, for which the hardware present must be connected via serial communication (Modbus)

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|18|50 ms|Serial communication|Ex.: Modbus|
|OB 37|17|300 ms|Fast F-application| |
|OB 36|16|1000 ms|F application| |
|OB 35|12|100 ms|Fast standard application|Ex.: Control|
|OB 34|11|200 ms|Standard application|Ex.: Pressure measurement|
|OB 33|10|500 ms| | |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping, the setting for OB 40 should be changed from Prio16 to Prio19.

# Example 3: Reconfiguration/migration, for which the Quadlog hardware present must be connected via DP/IO bus link

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|17|10 ms|Quadlog connection| |
|OB 37|16|300 ms|F application| |
|OB 36|13|50 ms|Empty| |
|OB 35|12|100 ms|Empty| |
|OB 34|11|200 ms|Empty| |
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB40 should be changed from Prio16 to Prio18.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

27

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# CPU utilization

The cycle utilization of the system should never be above 75%, regardless of whether it involves a standard AS or an H system.

Note

To help you determine the processing times of the individual cyclic interrupt OBs, please refer to the FAQ ""How can you calculate the cycle load of the automation system (AS) online?"" (https://support.industry.siemens.com/cs/ww/en/view/22000962)

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times of the cyclic interrupt OBs and the total load of the AS can be read at the CPU_RT block.

As of PCS 7 V7.0 with PCS 7 Library V7.0, the block CPU_RT will be installed in each CPU. This block prevents a CPU STOP as a result of cycle overload, thanks to a two-stage ""load-shedding"" process:

- In the first stage of load shedding, all cyclic interrupt OBs that have not been disabled for the function by the project engineer are not processed for one cycle.
- In the second stage, none of the cyclic interrupt OBs are processed for one cycle (even the ones that were excluded previously). If this does not have a steadying effect, whenever cyclic interrupt OBs are processed their processing will be suspended again for one cycle.

Note

In order to prevent F-cycle-time monitoring in the CPU and the F-monitoring time on the F-signal modules from being triggered, and the system response time from being extended, you must disable the cyclic interrupt OBs with the F-program during the stage 1 of stop prevention.

Alternatively, you can disable stop prevention altogether by setting the parameter for input Max_RTRG of block CPU_RT to 0. You can find this block in the @CPU_RT chart.

For more information on the subject of CPU stop prevention, please refer to the help section for the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.4 Diagnostics/Clock

For process data to be compatible for evaluation, all components of the process control system must work with the same time of day so that messages – regardless of the time zone in which they are generated – can be assigned correctly in terms of temporal sequence. This usually involves an OS server or an external clock (SICLOCK) taking on the role of the time master. All other operator stations and automation systems on the plant bus then have the time from this time master and, therefore, identical time.

You can find additional information about configuring the time synchronization in the manual ""SIMATIC Process Control System PCS 7 Time Synchronization"" (https://support.industry.siemens.com/cs/ww/en/view/109746544).

Check that the correction factor is set to 0 ms under ""Time"" on the ""Diagnostics/Clock"" tab in a CPU with safety program.

|Properties CPU 410-SH (R0/53)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Intenupts|
|---|---|---|---|---|---|---|---|
|Time -of-Day|Intenupts|Cyclic Irtenupts|Diagnostics /Clock|Protection|Parameters|System Diagnostics| |
|Extended functions|Report cause of STOP|Acknowledgment-triggered reporting SFB33-35|Number of messages the diagnostics buffer:|3200|3200|3200|3200|
|Clock|Synchronization|Synchronization Type|Time Interval|ELC:|In the|As slave|None|
|On the MPI:|None|None|On the MEI:|(None|(None|Correction factor:| |

Note

See also Compendium Part A ""Configuration of the Hardware > General CPU Settings > Diagnostics/Clock"".

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.5 H parameters

Self-test (advanced CPU test)

The CPU tests the following during the self-test:

- Processor
- Internal memory
- I/O bus

If the test detects any faults, they are reported and the CPU goes to STOP.

# Test cycle time

The test cycle time (default setting: 90 minutes) indicates the time taken for a complete background self-test.

Note

For S7 F/FH systems, this parameter can be increased up to a maximum of 12 hours (720 minutes).

In S7 F/FH systems, the test may not be modified by calling SFC 90, ""H_CTRL"". Otherwise, the safety program will go to F-STOP after a maximum of 24 hours. Switching test components on or off is prohibited.

In the event of a STOP, the self-test enters the following diagnostics event in the diagnostic buffer of the F CPU: ""Safety program: Error detected"" (event ID 16#75E1).

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

|Properties|CPU 410-SH (R0/53)| | | | | |
|---|---|---|---|---|---|---|
|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Interrupts|
|Time-of-Day|Interrupts|Cyclic Interrupts|Diagnostics /Clock|Protection|Parameters| |
|Parameters for Expanded CPU Test|Test scan time [min]:|sc| | | | |
|Reaction E|RAM/IPIQ comparison error:|TROUBLESHOOTING| | | | |
|Update the Standby CPU|Maximum number of attempts;| | | | | |
|Cyclic interrupt OB special handling;|Waiting time between two attempts [s];| | | | | |
|Monitoring times|Max scan cycle time extension [ms]:|Calculate| | | | |
|Max communication delay [ms];|Max disabling time for priority classes 15 [ms]:|Use only| | | | |
|Min I/O retention time [ms];:|calculated values| | | | | |
|Redundant I/O|Data block no:|and 2| | | | |
|Passivation behavior|channels|Cancel|Help| | | |

Note

If you are using redundant standard signal modules, the system will generate two data blocks in the AS: DB 1, with the number specified, and DB 2, with the number following this. Make sure that these blocks are not used twice (e.g. ",What is the significance of the correction factor being set to 0 ms under 'Time' on the 'Diagnostics/Clock' tab in a CPU with safety program?,Setting the correction factor to 0 ms ensures accurate time synchronization without adjustments.,A correction factor of 0 ms is crucial for maintaining precise time synchronization in CPUs running safety programs.,The manual emphasizes the importance of a 0 ms correction factor for correct time synchronization in safety-programmed CPUs.,"For CPUs with safety programs, a 0 ms correction factor under 'Time' guarantees that time synchronization remains unaltered.",Ensuring the correction factor is 0 ms is vital for accurate and unmodified time synchronization in safety-program-equipped CPUs.
8,pcs7_compendium_part_b_en-US_en-US.txt,12,6e23c51c0032b37d2f675e7f010284bfdb1409ea602c735f7c49c17c40cd1942,": Pressure measurement|
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB 40 should be changed from Prio16 to Prio18.

The following figure shows how the individual cyclic interrupt OBs from Example 1 are processed over a period of 1280 ms, starting from the point in time (t) at which the CPU begins program processing. In this example, the CPU utilization is at approximately 65%.

# Processing of the cyclic interrupt OBs by the CPU

|Time (ms)|OB|
|---|---|
|0|OB38|
|30|OB37|
|50|OB36|
|10|OB35|
|25|OB34|
|320|OB33|
| |OB32|
| |OB31|
| |OB30|
| |OB1|

t+500ms t+1000ms

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# Example 2: Reconfiguration/migration, for which the hardware present must be connected via serial communication (Modbus)

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|18|50 ms|Serial communication|Ex.: Modbus|
|OB 37|17|300 ms|Fast F-application| |
|OB 36|16|1000 ms|F application| |
|OB 35|12|100 ms|Fast standard application|Ex.: Control|
|OB 34|11|200 ms|Standard application|Ex.: Pressure measurement|
|OB 33|10|500 ms| | |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping, the setting for OB 40 should be changed from Prio16 to Prio19.

# Example 3: Reconfiguration/migration, for which the Quadlog hardware present must be connected via DP/IO bus link

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|17|10 ms|Quadlog connection| |
|OB 37|16|300 ms|F application| |
|OB 36|13|50 ms|Empty| |
|OB 35|12|100 ms|Empty| |
|OB 34|11|200 ms|Empty| |
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB40 should be changed from Prio16 to Prio18.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

27

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# CPU utilization

The cycle utilization of the system should never be above 75%, regardless of whether it involves a standard AS or an H system.

Note

To help you determine the processing times of the individual cyclic interrupt OBs, please refer to the FAQ ""How can you calculate the cycle load of the automation system (AS) online?"" (https://support.industry.siemens.com/cs/ww/en/view/22000962)

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times of the cyclic interrupt OBs and the total load of the AS can be read at the CPU_RT block.

As of PCS 7 V7.0 with PCS 7 Library V7.0, the block CPU_RT will be installed in each CPU. This block prevents a CPU STOP as a result of cycle overload, thanks to a two-stage ""load-shedding"" process:

- In the first stage of load shedding, all cyclic interrupt OBs that have not been disabled for the function by the project engineer are not processed for one cycle.
- In the second stage, none of the cyclic interrupt OBs are processed for one cycle (even the ones that were excluded previously). If this does not have a steadying effect, whenever cyclic interrupt OBs are processed their processing will be suspended again for one cycle.

Note

In order to prevent F-cycle-time monitoring in the CPU and the F-monitoring time on the F-signal modules from being triggered, and the system response time from being extended, you must disable the cyclic interrupt OBs with the F-program during the stage 1 of stop prevention.

Alternatively, you can disable stop prevention altogether by setting the parameter for input Max_RTRG of block CPU_RT to 0. You can find this block in the @CPU_RT chart.

For more information on the subject of CPU stop prevention, please refer to the help section for the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.4 Diagnostics/Clock

For process data to be compatible for evaluation, all components of the process control system must work with the same time of day so that messages – regardless of the time zone in which they are generated – can be assigned correctly in terms of temporal sequence. This usually involves an OS server or an external clock (SICLOCK) taking on the role of the time master. All other operator stations and automation systems on the plant bus then have the time from this time master and, therefore, identical time.

You can find additional information about configuring the time synchronization in the manual ""SIMATIC Process Control System PCS 7 Time Synchronization"" (https://support.industry.siemens.com/cs/ww/en/view/109746544).

Check that the correction factor is set to 0 ms under ""Time"" on the ""Diagnostics/Clock"" tab in a CPU with safety program.

|Properties CPU 410-SH (R0/53)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Intenupts|
|---|---|---|---|---|---|---|---|
|Time -of-Day|Intenupts|Cyclic Irtenupts|Diagnostics /Clock|Protection|Parameters|System Diagnostics| |
|Extended functions|Report cause of STOP|Acknowledgment-triggered reporting SFB33-35|Number of messages the diagnostics buffer:|3200|3200|3200|3200|
|Clock|Synchronization|Synchronization Type|Time Interval|ELC:|In the|As slave|None|
|On the MPI:|None|None|On the MEI:|(None|(None|Correction factor:| |

Note

See also Compendium Part A ""Configuration of the Hardware > General CPU Settings > Diagnostics/Clock"".

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.5 H parameters

Self-test (advanced CPU test)

The CPU tests the following during the self-test:

- Processor
- Internal memory
- I/O bus

If the test detects any faults, they are reported and the CPU goes to STOP.

# Test cycle time

The test cycle time (default setting: 90 minutes) indicates the time taken for a complete background self-test.

Note

For S7 F/FH systems, this parameter can be increased up to a maximum of 12 hours (720 minutes).

In S7 F/FH systems, the test may not be modified by calling SFC 90, ""H_CTRL"". Otherwise, the safety program will go to F-STOP after a maximum of 24 hours. Switching test components on or off is prohibited.

In the event of a STOP, the self-test enters the following diagnostics event in the diagnostic buffer of the F CPU: ""Safety program: Error detected"" (event ID 16#75E1).

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

|Properties|CPU 410-SH (R0/53)| | | | | |
|---|---|---|---|---|---|---|
|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Interrupts|
|Time-of-Day|Interrupts|Cyclic Interrupts|Diagnostics /Clock|Protection|Parameters| |
|Parameters for Expanded CPU Test|Test scan time [min]:|sc| | | | |
|Reaction E|RAM/IPIQ comparison error:|TROUBLESHOOTING| | | | |
|Update the Standby CPU|Maximum number of attempts;| | | | | |
|Cyclic interrupt OB special handling;|Waiting time between two attempts [s];| | | | | |
|Monitoring times|Max scan cycle time extension [ms]:|Calculate| | | | |
|Max communication delay [ms];|Max disabling time for priority classes 15 [ms]:|Use only| | | | |
|Min I/O retention time [ms];:|calculated values| | | | | |
|Redundant I/O|Data block no:|and 2| | | | |
|Passivation behavior|channels|Cancel|Help| | | |

Note

If you are using redundant standard signal modules, the system will generate two data blocks in the AS: DB 1, with the number specified, and DB 2, with the number following this. Make sure that these blocks are not used twice (e.g. ",What are the components tested by the CPU during its self-test in S7 F/FH systems?,"The CPU tests the processor, internal memory, and I/O bus during the self-test.","During the self-test, the CPU examines its processor, internal memory, and the I/O bus for faults.","The self-test procedure includes checks on the CPU's processor, its internal memory, and the I/O bus connectivity.","Processor functionality, internal memory integrity, and I/O bus operation are all verified during the CPU's self-test.","Key components like the processor, internal memory, and I/O bus are scrutinized for errors during the CPU's self-test in S7 F/FH systems."
9,pcs7_compendium_part_b_en-US_en-US.txt,12,6e23c51c0032b37d2f675e7f010284bfdb1409ea602c735f7c49c17c40cd1942,": Pressure measurement|
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB 40 should be changed from Prio16 to Prio18.

The following figure shows how the individual cyclic interrupt OBs from Example 1 are processed over a period of 1280 ms, starting from the point in time (t) at which the CPU begins program processing. In this example, the CPU utilization is at approximately 65%.

# Processing of the cyclic interrupt OBs by the CPU

|Time (ms)|OB|
|---|---|
|0|OB38|
|30|OB37|
|50|OB36|
|10|OB35|
|25|OB34|
|320|OB33|
| |OB32|
| |OB31|
| |OB30|
| |OB1|

t+500ms t+1000ms

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# Example 2: Reconfiguration/migration, for which the hardware present must be connected via serial communication (Modbus)

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|18|50 ms|Serial communication|Ex.: Modbus|
|OB 37|17|300 ms|Fast F-application| |
|OB 36|16|1000 ms|F application| |
|OB 35|12|100 ms|Fast standard application|Ex.: Control|
|OB 34|11|200 ms|Standard application|Ex.: Pressure measurement|
|OB 33|10|500 ms| | |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping, the setting for OB 40 should be changed from Prio16 to Prio19.

# Example 3: Reconfiguration/migration, for which the Quadlog hardware present must be connected via DP/IO bus link

|OB|Prio|Call interval|Purpose|Comment|
|---|---|---|---|---|
|OB 38|17|10 ms|Quadlog connection| |
|OB 37|16|300 ms|F application| |
|OB 36|13|50 ms|Empty| |
|OB 35|12|100 ms|Empty| |
|OB 34|11|200 ms|Empty| |
|OB 33|10|500 ms|Empty| |
|OB 32|9|1000 ms|Slow standard application|Ex.: Temperature measurement, visualization function, enable function|
|OB 31|8|2000 ms|Empty| |
|OB 30|7|5000 ms|Empty| |

Note: If you are using time stamping of the IM module, the setting for OB40 should be changed from Prio16 to Prio18.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

27

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# CPU utilization

The cycle utilization of the system should never be above 75%, regardless of whether it involves a standard AS or an H system.

Note

To help you determine the processing times of the individual cyclic interrupt OBs, please refer to the FAQ ""How can you calculate the cycle load of the automation system (AS) online?"" (https://support.industry.siemens.com/cs/ww/en/view/22000962)

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times of the cyclic interrupt OBs and the total load of the AS can be read at the CPU_RT block.

As of PCS 7 V7.0 with PCS 7 Library V7.0, the block CPU_RT will be installed in each CPU. This block prevents a CPU STOP as a result of cycle overload, thanks to a two-stage ""load-shedding"" process:

- In the first stage of load shedding, all cyclic interrupt OBs that have not been disabled for the function by the project engineer are not processed for one cycle.
- In the second stage, none of the cyclic interrupt OBs are processed for one cycle (even the ones that were excluded previously). If this does not have a steadying effect, whenever cyclic interrupt OBs are processed their processing will be suspended again for one cycle.

Note

In order to prevent F-cycle-time monitoring in the CPU and the F-monitoring time on the F-signal modules from being triggered, and the system response time from being extended, you must disable the cyclic interrupt OBs with the F-program during the stage 1 of stop prevention.

Alternatively, you can disable stop prevention altogether by setting the parameter for input Max_RTRG of block CPU_RT to 0. You can find this block in the @CPU_RT chart.

For more information on the subject of CPU stop prevention, please refer to the help section for the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.4 Diagnostics/Clock

For process data to be compatible for evaluation, all components of the process control system must work with the same time of day so that messages – regardless of the time zone in which they are generated – can be assigned correctly in terms of temporal sequence. This usually involves an OS server or an external clock (SICLOCK) taking on the role of the time master. All other operator stations and automation systems on the plant bus then have the time from this time master and, therefore, identical time.

You can find additional information about configuring the time synchronization in the manual ""SIMATIC Process Control System PCS 7 Time Synchronization"" (https://support.industry.siemens.com/cs/ww/en/view/109746544).

Check that the correction factor is set to 0 ms under ""Time"" on the ""Diagnostics/Clock"" tab in a CPU with safety program.

|Properties CPU 410-SH (R0/53)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Intenupts|
|---|---|---|---|---|---|---|---|
|Time -of-Day|Intenupts|Cyclic Irtenupts|Diagnostics /Clock|Protection|Parameters|System Diagnostics| |
|Extended functions|Report cause of STOP|Acknowledgment-triggered reporting SFB33-35|Number of messages the diagnostics buffer:|3200|3200|3200|3200|
|Clock|Synchronization|Synchronization Type|Time Interval|ELC:|In the|As slave|None|
|On the MPI:|None|None|On the MEI:|(None|(None|Correction factor:| |

Note

See also Compendium Part A ""Configuration of the Hardware > General CPU Settings > Diagnostics/Clock"".

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

# 6.1.5 H parameters

Self-test (advanced CPU test)

The CPU tests the following during the self-test:

- Processor
- Internal memory
- I/O bus

If the test detects any faults, they are reported and the CPU goes to STOP.

# Test cycle time

The test cycle time (default setting: 90 minutes) indicates the time taken for a complete background self-test.

Note

For S7 F/FH systems, this parameter can be increased up to a maximum of 12 hours (720 minutes).

In S7 F/FH systems, the test may not be modified by calling SFC 90, ""H_CTRL"". Otherwise, the safety program will go to F-STOP after a maximum of 24 hours. Switching test components on or off is prohibited.

In the event of a STOP, the self-test enters the following diagnostics event in the diagnostic buffer of the F CPU: ""Safety program: Error detected"" (event ID 16#75E1).

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.1 Adapting CPU parameters (single F-system)

|Properties|CPU 410-SH (R0/53)| | | | | |
|---|---|---|---|---|---|---|
|General|Startup|Cycle/Clock|Memory|Retentive Memory|Memory|Interrupts|
|Time-of-Day|Interrupts|Cyclic Interrupts|Diagnostics /Clock|Protection|Parameters| |
|Parameters for Expanded CPU Test|Test scan time [min]:|sc| | | | |
|Reaction E|RAM/IPIQ comparison error:|TROUBLESHOOTING| | | | |
|Update the Standby CPU|Maximum number of attempts;| | | | | |
|Cyclic interrupt OB special handling;|Waiting time between two attempts [s];| | | | | |
|Monitoring times|Max scan cycle time extension [ms]:|Calculate| | | | |
|Max communication delay [ms];|Max disabling time for priority classes 15 [ms]:|Use only| | | | |
|Min I/O retention time [ms];:|calculated values| | | | | |
|Redundant I/O|Data block no:|and 2| | | | |
|Passivation behavior|channels|Cancel|Help| | | |

Note

If you are using redundant standard signal modules, the system will generate two data blocks in the AS: DB 1, with the number specified, and DB 2, with the number following this. Make sure that these blocks are not used twice (e.g. ",How can the total load of the AS and the run times of the cyclic interrupt OBs be monitored in systems as of PCS 7 V7.0?,They can be monitored at the CPU_RT block in systems with PCS 7 V7.0 and an S7-400H CPU as of FW V4.5.,"Monitoring is facilitated by the CPU_RT block, available in PCS 7 V7.0 systems with S7-400H CPUs from FW V4.5 onwards.",The CPU_RT block provides insights into the AS's total load and cyclic interrupt OB run times in compatible systems.,"For systems running PCS 7 V7.0 with specific hardware, the CPU_RT block enables observation of AS load and OB run times.","In PCS 7 V7.0 environments with certain CPUs, the CPU_RT block is the tool for tracking AS load and cyclic interrupt OB durations."
