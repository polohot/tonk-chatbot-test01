,NODE_FILE_NAME,NODE_NUMBER,NODE_HASH,NODE_TEXT,Q,A1,A2,A3,A4,A5
0,pcs7_compendium_part_b_en-US_en-US.txt,78,3d844115ab99f4b14b08acbcaef443ffc46c14b429bf0235623f4b117033f9d6,"Note
You can find more information in section Access protection (Page 14).

If changes are to be downloaded during operation, safety mode must be deactivated on the AS and then reactivated once downloading is complete.

Note
You can find more information in section Safety mode and downloading the safety program (Page 115).

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

# Offline/online comparison

Before each CFC change, make sure that the offline and online programs are identical.

- To do this, open a chart from the AS in the CFC editor and switch to online mode.
- If there are differences between the offline and online versions, a message with an additional system prompt will appear; otherwise, the system will switch to online mode without prompting.

In the case of fail-safe functions in the AS, you must also check whether the signature from the last compilation matches the online signature in the AS (see Section Tracking changes in the safety program (Page 180)).

- If the signatures are not identical, or a prompt indicating that there are differences between the programs appears when you switch to online mode, you must determine what has changed and whether these changes can be downloaded.

# Version Cross Manager

The ""Version Cross Manager"" can be used as a tool for comparing two project versions, as well as the current project with a backed-up version of it (see Section Tracking changes in the safety program (Page 180)).

- The comparison function in S7 F-Systems can be used to list the differences in the safety program. You can access this comparison function by clicking the ""Compare..."" button in the ""Edit Safety Program"" window.
- The next window enables you to choose the versions to be compared.

Do not make any other changes if the offline and online versions are different and you do not know what the differences are.

# CPU utilization

Before making any changes, check the CPU utilization with regard to memory and cycle time. You can query how much memory has been allocated using the ""Module Information..."" function in the CPU.

- To do this, open ""Module Information..."" in the CPU and check how much memory is allocated at present on the ""Memory"" tab.
- To determine the cycle utilization, blocks TIME_BEG and TIME_ENG must be installed in the OBs in use and interconnected with one another. In the relevant CFC, check the runtimes of the OBs at output TM_DIFF_TI of the respective TIME_END block. Note that the run times of higher-priority OBs are also measured when this method of measuring the run times of lower-priority OBs is used, and will need to be subtracted accordingly. As of PCS V7.0 and an S7-400H CPU as of FW V4.5, the gross and net run times of the cyclic interrupt OBs can also be read at the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

Note: You can find more information in section Cyclic interrupts (Page 23).

# Checking the H parameters

In fault-tolerant systems, you must check the H parameters of the CPU.

- To do this, open the Object Properties of the CPU and switch to the ""H Parameters"" tab.
- If a ""Cyclic interrupt OB with special handling"" has been specified here, and the option ""Use only calculated values"" has been activated, use the ""Calculate..."" button to open the ""Update Reserve: Calculation of Monitoring Times"" window.
- Here, check the values in the entry fields ""Runtime of the watchdog interrupt concerned [ms]"" and ""Work memory used for all data blocks in the user program [Kbyte]"".
- Compare the runtime entered in the ""Runtime of the watchdog interrupt concerned [ms]"" field, for the cyclic interrupt OB with special handling, with the measured runtime (TIME_BEG, TIME_END of OB) or the runtime read at the CPU_RT block. The value entered should be approximately 10% greater than the measured one.
- Compare the value for ""Work memory used for all data blocks in the user program [Kbyte]"" with the object properties of the CPU block folder. There, in the ""Blocks"" register under ""Size in work memory: Data"", you will find the amount of memory that is occupied by data blocks (in bytes). This value (expressed in Kbytes), plus some reserve, must be entered in the ""Work memory used for all data blocks in the user program [Kbyte]"" field.
- If the values in the entry fields do not match the actual values, you must enter the current values and determine the H parameters using the ""Calculate..."" button.

Note: You can find more information in section Calculating monitoring times (Page 36).

# Checking the hardware before downloading

Before downloading the changes - and in particular, before downloading hardware configuration changes with HCiR - make sure that no errors are present in the system.

- The HCiR procedure involves stopping a CPU, performing the download, and then restarting the CPU.
- Immediately after the transition to RUN Redundant, the other CPU is stopped and restarted, during which time it is updated to the current configuration.
- If there is an error in a redundant component (e.g. the interface module of the ET 200M), this can cause the connection to a PROFIBUS slave to fail and input/output modules to be passivated.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

177

# Changes, tracking changes, and acceptance

# 9.3 Changes in CFC

# Changing the user program

Before you make changes to the standard or fail-safe program of an S7 F/FH systems, make sure that you can also download and check these changes. Changes to the standard or fail-safe program cannot be compiled or downloaded as part of a separate process. Therefore, you must follow the sequence below in full to make changes:

- Change CFC
- Check
- Compile
- Download
- Offline/online comparison
- Test
- Document

To change or add a fail-safe function, open the relevant CFC or add a new one.

# Runtime groups

When a new CFC is added, the system creates a new runtime group with the same name. Check whether its insert position in the editor is the position you require. When deleting safety functions, empty F-runtime groups may arise, which also have to be deleted. To do this with PCS 7 V7.0 and higher, execute the following command in the CFC editor: ""Edit > Delete Empty Runtime Groups"". With PCS 7 V6.1, activate the option ""Delete Empty Runtime Groups"" when compiling. Before inserting blocks, establish the predecessor block. ",What must be done before downloading changes during operation according to the 'Compendium Part B - Process Safety (V9.0)'?,Safety mode must be deactivated on the AS before downloading changes and then reactivated once downloading is complete.,"Before downloading changes, deactivate safety mode on the AS, and reactivate it after the download is finished.",The 'Compendium Part B - Process Safety (V9.0)' specifies that safety mode on the AS should be turned off for downloading changes and turned back on post-download.,"Deactivating safety mode on the AS is a prerequisite for downloading changes, with reactivation required afterwards, as per the manual.","For downloading changes during operation, the manual advises to first deactivate and then reactivate safety mode on the AS."
1,pcs7_compendium_part_b_en-US_en-US.txt,78,3d844115ab99f4b14b08acbcaef443ffc46c14b429bf0235623f4b117033f9d6,"Note
You can find more information in section Access protection (Page 14).

If changes are to be downloaded during operation, safety mode must be deactivated on the AS and then reactivated once downloading is complete.

Note
You can find more information in section Safety mode and downloading the safety program (Page 115).

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

# Offline/online comparison

Before each CFC change, make sure that the offline and online programs are identical.

- To do this, open a chart from the AS in the CFC editor and switch to online mode.
- If there are differences between the offline and online versions, a message with an additional system prompt will appear; otherwise, the system will switch to online mode without prompting.

In the case of fail-safe functions in the AS, you must also check whether the signature from the last compilation matches the online signature in the AS (see Section Tracking changes in the safety program (Page 180)).

- If the signatures are not identical, or a prompt indicating that there are differences between the programs appears when you switch to online mode, you must determine what has changed and whether these changes can be downloaded.

# Version Cross Manager

The ""Version Cross Manager"" can be used as a tool for comparing two project versions, as well as the current project with a backed-up version of it (see Section Tracking changes in the safety program (Page 180)).

- The comparison function in S7 F-Systems can be used to list the differences in the safety program. You can access this comparison function by clicking the ""Compare..."" button in the ""Edit Safety Program"" window.
- The next window enables you to choose the versions to be compared.

Do not make any other changes if the offline and online versions are different and you do not know what the differences are.

# CPU utilization

Before making any changes, check the CPU utilization with regard to memory and cycle time. You can query how much memory has been allocated using the ""Module Information..."" function in the CPU.

- To do this, open ""Module Information..."" in the CPU and check how much memory is allocated at present on the ""Memory"" tab.
- To determine the cycle utilization, blocks TIME_BEG and TIME_ENG must be installed in the OBs in use and interconnected with one another. In the relevant CFC, check the runtimes of the OBs at output TM_DIFF_TI of the respective TIME_END block. Note that the run times of higher-priority OBs are also measured when this method of measuring the run times of lower-priority OBs is used, and will need to be subtracted accordingly. As of PCS V7.0 and an S7-400H CPU as of FW V4.5, the gross and net run times of the cyclic interrupt OBs can also be read at the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

Note: You can find more information in section Cyclic interrupts (Page 23).

# Checking the H parameters

In fault-tolerant systems, you must check the H parameters of the CPU.

- To do this, open the Object Properties of the CPU and switch to the ""H Parameters"" tab.
- If a ""Cyclic interrupt OB with special handling"" has been specified here, and the option ""Use only calculated values"" has been activated, use the ""Calculate..."" button to open the ""Update Reserve: Calculation of Monitoring Times"" window.
- Here, check the values in the entry fields ""Runtime of the watchdog interrupt concerned [ms]"" and ""Work memory used for all data blocks in the user program [Kbyte]"".
- Compare the runtime entered in the ""Runtime of the watchdog interrupt concerned [ms]"" field, for the cyclic interrupt OB with special handling, with the measured runtime (TIME_BEG, TIME_END of OB) or the runtime read at the CPU_RT block. The value entered should be approximately 10% greater than the measured one.
- Compare the value for ""Work memory used for all data blocks in the user program [Kbyte]"" with the object properties of the CPU block folder. There, in the ""Blocks"" register under ""Size in work memory: Data"", you will find the amount of memory that is occupied by data blocks (in bytes). This value (expressed in Kbytes), plus some reserve, must be entered in the ""Work memory used for all data blocks in the user program [Kbyte]"" field.
- If the values in the entry fields do not match the actual values, you must enter the current values and determine the H parameters using the ""Calculate..."" button.

Note: You can find more information in section Calculating monitoring times (Page 36).

# Checking the hardware before downloading

Before downloading the changes - and in particular, before downloading hardware configuration changes with HCiR - make sure that no errors are present in the system.

- The HCiR procedure involves stopping a CPU, performing the download, and then restarting the CPU.
- Immediately after the transition to RUN Redundant, the other CPU is stopped and restarted, during which time it is updated to the current configuration.
- If there is an error in a redundant component (e.g. the interface module of the ET 200M), this can cause the connection to a PROFIBUS slave to fail and input/output modules to be passivated.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

177

# Changes, tracking changes, and acceptance

# 9.3 Changes in CFC

# Changing the user program

Before you make changes to the standard or fail-safe program of an S7 F/FH systems, make sure that you can also download and check these changes. Changes to the standard or fail-safe program cannot be compiled or downloaded as part of a separate process. Therefore, you must follow the sequence below in full to make changes:

- Change CFC
- Check
- Compile
- Download
- Offline/online comparison
- Test
- Document

To change or add a fail-safe function, open the relevant CFC or add a new one.

# Runtime groups

When a new CFC is added, the system creates a new runtime group with the same name. Check whether its insert position in the editor is the position you require. When deleting safety functions, empty F-runtime groups may arise, which also have to be deleted. To do this with PCS 7 V7.0 and higher, execute the following command in the CFC editor: ""Edit > Delete Empty Runtime Groups"". With PCS 7 V6.1, activate the option ""Delete Empty Runtime Groups"" when compiling. Before inserting blocks, establish the predecessor block. ",How can you ensure the offline and online programs are identical before a CFC change in 'Compendium Part B - Process Safety (V9.0)'?,Open a chart from the AS in the CFC editor and switch to online mode to check for differences.,"By switching to online mode in the CFC editor with an AS chart open, you can verify if offline and online versions match.",The manual suggests opening an AS chart in the CFC editor and entering online mode to compare offline and online programs.,Ensure program identity by examining the online mode response in the CFC editor after opening an AS chart.,"A message will indicate differences if any, when attempting to switch to online mode with an AS chart open in the CFC editor."
2,pcs7_compendium_part_b_en-US_en-US.txt,78,3d844115ab99f4b14b08acbcaef443ffc46c14b429bf0235623f4b117033f9d6,"Note
You can find more information in section Access protection (Page 14).

If changes are to be downloaded during operation, safety mode must be deactivated on the AS and then reactivated once downloading is complete.

Note
You can find more information in section Safety mode and downloading the safety program (Page 115).

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

# Offline/online comparison

Before each CFC change, make sure that the offline and online programs are identical.

- To do this, open a chart from the AS in the CFC editor and switch to online mode.
- If there are differences between the offline and online versions, a message with an additional system prompt will appear; otherwise, the system will switch to online mode without prompting.

In the case of fail-safe functions in the AS, you must also check whether the signature from the last compilation matches the online signature in the AS (see Section Tracking changes in the safety program (Page 180)).

- If the signatures are not identical, or a prompt indicating that there are differences between the programs appears when you switch to online mode, you must determine what has changed and whether these changes can be downloaded.

# Version Cross Manager

The ""Version Cross Manager"" can be used as a tool for comparing two project versions, as well as the current project with a backed-up version of it (see Section Tracking changes in the safety program (Page 180)).

- The comparison function in S7 F-Systems can be used to list the differences in the safety program. You can access this comparison function by clicking the ""Compare..."" button in the ""Edit Safety Program"" window.
- The next window enables you to choose the versions to be compared.

Do not make any other changes if the offline and online versions are different and you do not know what the differences are.

# CPU utilization

Before making any changes, check the CPU utilization with regard to memory and cycle time. You can query how much memory has been allocated using the ""Module Information..."" function in the CPU.

- To do this, open ""Module Information..."" in the CPU and check how much memory is allocated at present on the ""Memory"" tab.
- To determine the cycle utilization, blocks TIME_BEG and TIME_ENG must be installed in the OBs in use and interconnected with one another. In the relevant CFC, check the runtimes of the OBs at output TM_DIFF_TI of the respective TIME_END block. Note that the run times of higher-priority OBs are also measured when this method of measuring the run times of lower-priority OBs is used, and will need to be subtracted accordingly. As of PCS V7.0 and an S7-400H CPU as of FW V4.5, the gross and net run times of the cyclic interrupt OBs can also be read at the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

Note: You can find more information in section Cyclic interrupts (Page 23).

# Checking the H parameters

In fault-tolerant systems, you must check the H parameters of the CPU.

- To do this, open the Object Properties of the CPU and switch to the ""H Parameters"" tab.
- If a ""Cyclic interrupt OB with special handling"" has been specified here, and the option ""Use only calculated values"" has been activated, use the ""Calculate..."" button to open the ""Update Reserve: Calculation of Monitoring Times"" window.
- Here, check the values in the entry fields ""Runtime of the watchdog interrupt concerned [ms]"" and ""Work memory used for all data blocks in the user program [Kbyte]"".
- Compare the runtime entered in the ""Runtime of the watchdog interrupt concerned [ms]"" field, for the cyclic interrupt OB with special handling, with the measured runtime (TIME_BEG, TIME_END of OB) or the runtime read at the CPU_RT block. The value entered should be approximately 10% greater than the measured one.
- Compare the value for ""Work memory used for all data blocks in the user program [Kbyte]"" with the object properties of the CPU block folder. There, in the ""Blocks"" register under ""Size in work memory: Data"", you will find the amount of memory that is occupied by data blocks (in bytes). This value (expressed in Kbytes), plus some reserve, must be entered in the ""Work memory used for all data blocks in the user program [Kbyte]"" field.
- If the values in the entry fields do not match the actual values, you must enter the current values and determine the H parameters using the ""Calculate..."" button.

Note: You can find more information in section Calculating monitoring times (Page 36).

# Checking the hardware before downloading

Before downloading the changes - and in particular, before downloading hardware configuration changes with HCiR - make sure that no errors are present in the system.

- The HCiR procedure involves stopping a CPU, performing the download, and then restarting the CPU.
- Immediately after the transition to RUN Redundant, the other CPU is stopped and restarted, during which time it is updated to the current configuration.
- If there is an error in a redundant component (e.g. the interface module of the ET 200M), this can cause the connection to a PROFIBUS slave to fail and input/output modules to be passivated.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

177

# Changes, tracking changes, and acceptance

# 9.3 Changes in CFC

# Changing the user program

Before you make changes to the standard or fail-safe program of an S7 F/FH systems, make sure that you can also download and check these changes. Changes to the standard or fail-safe program cannot be compiled or downloaded as part of a separate process. Therefore, you must follow the sequence below in full to make changes:

- Change CFC
- Check
- Compile
- Download
- Offline/online comparison
- Test
- Document

To change or add a fail-safe function, open the relevant CFC or add a new one.

# Runtime groups

When a new CFC is added, the system creates a new runtime group with the same name. Check whether its insert position in the editor is the position you require. When deleting safety functions, empty F-runtime groups may arise, which also have to be deleted. To do this with PCS 7 V7.0 and higher, execute the following command in the CFC editor: ""Edit > Delete Empty Runtime Groups"". With PCS 7 V6.1, activate the option ""Delete Empty Runtime Groups"" when compiling. Before inserting blocks, establish the predecessor block. ",What tool is recommended for comparing two project versions in 'Compendium Part B - Process Safety (V9.0)'?,The 'Version Cross Manager' is recommended for comparing project versions.,Use the 'Version Cross Manager' to compare different versions of a project.,"For version comparison, the manual points to the 'Version Cross Manager' tool.","Comparing project versions can be efficiently done with the 'Version Cross Manager', as mentioned.",The 'Version Cross Manager' serves as a tool for comparing current and backed-up project versions.
3,pcs7_compendium_part_b_en-US_en-US.txt,78,3d844115ab99f4b14b08acbcaef443ffc46c14b429bf0235623f4b117033f9d6,"Note
You can find more information in section Access protection (Page 14).

If changes are to be downloaded during operation, safety mode must be deactivated on the AS and then reactivated once downloading is complete.

Note
You can find more information in section Safety mode and downloading the safety program (Page 115).

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

# Offline/online comparison

Before each CFC change, make sure that the offline and online programs are identical.

- To do this, open a chart from the AS in the CFC editor and switch to online mode.
- If there are differences between the offline and online versions, a message with an additional system prompt will appear; otherwise, the system will switch to online mode without prompting.

In the case of fail-safe functions in the AS, you must also check whether the signature from the last compilation matches the online signature in the AS (see Section Tracking changes in the safety program (Page 180)).

- If the signatures are not identical, or a prompt indicating that there are differences between the programs appears when you switch to online mode, you must determine what has changed and whether these changes can be downloaded.

# Version Cross Manager

The ""Version Cross Manager"" can be used as a tool for comparing two project versions, as well as the current project with a backed-up version of it (see Section Tracking changes in the safety program (Page 180)).

- The comparison function in S7 F-Systems can be used to list the differences in the safety program. You can access this comparison function by clicking the ""Compare..."" button in the ""Edit Safety Program"" window.
- The next window enables you to choose the versions to be compared.

Do not make any other changes if the offline and online versions are different and you do not know what the differences are.

# CPU utilization

Before making any changes, check the CPU utilization with regard to memory and cycle time. You can query how much memory has been allocated using the ""Module Information..."" function in the CPU.

- To do this, open ""Module Information..."" in the CPU and check how much memory is allocated at present on the ""Memory"" tab.
- To determine the cycle utilization, blocks TIME_BEG and TIME_ENG must be installed in the OBs in use and interconnected with one another. In the relevant CFC, check the runtimes of the OBs at output TM_DIFF_TI of the respective TIME_END block. Note that the run times of higher-priority OBs are also measured when this method of measuring the run times of lower-priority OBs is used, and will need to be subtracted accordingly. As of PCS V7.0 and an S7-400H CPU as of FW V4.5, the gross and net run times of the cyclic interrupt OBs can also be read at the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

Note: You can find more information in section Cyclic interrupts (Page 23).

# Checking the H parameters

In fault-tolerant systems, you must check the H parameters of the CPU.

- To do this, open the Object Properties of the CPU and switch to the ""H Parameters"" tab.
- If a ""Cyclic interrupt OB with special handling"" has been specified here, and the option ""Use only calculated values"" has been activated, use the ""Calculate..."" button to open the ""Update Reserve: Calculation of Monitoring Times"" window.
- Here, check the values in the entry fields ""Runtime of the watchdog interrupt concerned [ms]"" and ""Work memory used for all data blocks in the user program [Kbyte]"".
- Compare the runtime entered in the ""Runtime of the watchdog interrupt concerned [ms]"" field, for the cyclic interrupt OB with special handling, with the measured runtime (TIME_BEG, TIME_END of OB) or the runtime read at the CPU_RT block. The value entered should be approximately 10% greater than the measured one.
- Compare the value for ""Work memory used for all data blocks in the user program [Kbyte]"" with the object properties of the CPU block folder. There, in the ""Blocks"" register under ""Size in work memory: Data"", you will find the amount of memory that is occupied by data blocks (in bytes). This value (expressed in Kbytes), plus some reserve, must be entered in the ""Work memory used for all data blocks in the user program [Kbyte]"" field.
- If the values in the entry fields do not match the actual values, you must enter the current values and determine the H parameters using the ""Calculate..."" button.

Note: You can find more information in section Calculating monitoring times (Page 36).

# Checking the hardware before downloading

Before downloading the changes - and in particular, before downloading hardware configuration changes with HCiR - make sure that no errors are present in the system.

- The HCiR procedure involves stopping a CPU, performing the download, and then restarting the CPU.
- Immediately after the transition to RUN Redundant, the other CPU is stopped and restarted, during which time it is updated to the current configuration.
- If there is an error in a redundant component (e.g. the interface module of the ET 200M), this can cause the connection to a PROFIBUS slave to fail and input/output modules to be passivated.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

177

# Changes, tracking changes, and acceptance

# 9.3 Changes in CFC

# Changing the user program

Before you make changes to the standard or fail-safe program of an S7 F/FH systems, make sure that you can also download and check these changes. Changes to the standard or fail-safe program cannot be compiled or downloaded as part of a separate process. Therefore, you must follow the sequence below in full to make changes:

- Change CFC
- Check
- Compile
- Download
- Offline/online comparison
- Test
- Document

To change or add a fail-safe function, open the relevant CFC or add a new one.

# Runtime groups

When a new CFC is added, the system creates a new runtime group with the same name. Check whether its insert position in the editor is the position you require. When deleting safety functions, empty F-runtime groups may arise, which also have to be deleted. To do this with PCS 7 V7.0 and higher, execute the following command in the CFC editor: ""Edit > Delete Empty Runtime Groups"". With PCS 7 V6.1, activate the option ""Delete Empty Runtime Groups"" when compiling. Before inserting blocks, establish the predecessor block. ",What must be checked before making changes to ensure CPU utilization is optimal according to 'Compendium Part B - Process Safety (V9.0)'?,Check the CPU utilization regarding memory and cycle time before changes.,"Before changes, verify CPU memory allocation and cycle time utilization.",The manual advises checking CPU memory and cycle time utilization prior to making changes.,Ensure optimal CPU performance by assessing memory and cycle time usage before modifications.,Memory allocation and cycle time should be evaluated to confirm CPU can handle upcoming changes.
4,pcs7_compendium_part_b_en-US_en-US.txt,78,3d844115ab99f4b14b08acbcaef443ffc46c14b429bf0235623f4b117033f9d6,"Note
You can find more information in section Access protection (Page 14).

If changes are to be downloaded during operation, safety mode must be deactivated on the AS and then reactivated once downloading is complete.

Note
You can find more information in section Safety mode and downloading the safety program (Page 115).

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

# Offline/online comparison

Before each CFC change, make sure that the offline and online programs are identical.

- To do this, open a chart from the AS in the CFC editor and switch to online mode.
- If there are differences between the offline and online versions, a message with an additional system prompt will appear; otherwise, the system will switch to online mode without prompting.

In the case of fail-safe functions in the AS, you must also check whether the signature from the last compilation matches the online signature in the AS (see Section Tracking changes in the safety program (Page 180)).

- If the signatures are not identical, or a prompt indicating that there are differences between the programs appears when you switch to online mode, you must determine what has changed and whether these changes can be downloaded.

# Version Cross Manager

The ""Version Cross Manager"" can be used as a tool for comparing two project versions, as well as the current project with a backed-up version of it (see Section Tracking changes in the safety program (Page 180)).

- The comparison function in S7 F-Systems can be used to list the differences in the safety program. You can access this comparison function by clicking the ""Compare..."" button in the ""Edit Safety Program"" window.
- The next window enables you to choose the versions to be compared.

Do not make any other changes if the offline and online versions are different and you do not know what the differences are.

# CPU utilization

Before making any changes, check the CPU utilization with regard to memory and cycle time. You can query how much memory has been allocated using the ""Module Information..."" function in the CPU.

- To do this, open ""Module Information..."" in the CPU and check how much memory is allocated at present on the ""Memory"" tab.
- To determine the cycle utilization, blocks TIME_BEG and TIME_ENG must be installed in the OBs in use and interconnected with one another. In the relevant CFC, check the runtimes of the OBs at output TM_DIFF_TI of the respective TIME_END block. Note that the run times of higher-priority OBs are also measured when this method of measuring the run times of lower-priority OBs is used, and will need to be subtracted accordingly. As of PCS V7.0 and an S7-400H CPU as of FW V4.5, the gross and net run times of the cyclic interrupt OBs can also be read at the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

Note: You can find more information in section Cyclic interrupts (Page 23).

# Checking the H parameters

In fault-tolerant systems, you must check the H parameters of the CPU.

- To do this, open the Object Properties of the CPU and switch to the ""H Parameters"" tab.
- If a ""Cyclic interrupt OB with special handling"" has been specified here, and the option ""Use only calculated values"" has been activated, use the ""Calculate..."" button to open the ""Update Reserve: Calculation of Monitoring Times"" window.
- Here, check the values in the entry fields ""Runtime of the watchdog interrupt concerned [ms]"" and ""Work memory used for all data blocks in the user program [Kbyte]"".
- Compare the runtime entered in the ""Runtime of the watchdog interrupt concerned [ms]"" field, for the cyclic interrupt OB with special handling, with the measured runtime (TIME_BEG, TIME_END of OB) or the runtime read at the CPU_RT block. The value entered should be approximately 10% greater than the measured one.
- Compare the value for ""Work memory used for all data blocks in the user program [Kbyte]"" with the object properties of the CPU block folder. There, in the ""Blocks"" register under ""Size in work memory: Data"", you will find the amount of memory that is occupied by data blocks (in bytes). This value (expressed in Kbytes), plus some reserve, must be entered in the ""Work memory used for all data blocks in the user program [Kbyte]"" field.
- If the values in the entry fields do not match the actual values, you must enter the current values and determine the H parameters using the ""Calculate..."" button.

Note: You can find more information in section Calculating monitoring times (Page 36).

# Checking the hardware before downloading

Before downloading the changes - and in particular, before downloading hardware configuration changes with HCiR - make sure that no errors are present in the system.

- The HCiR procedure involves stopping a CPU, performing the download, and then restarting the CPU.
- Immediately after the transition to RUN Redundant, the other CPU is stopped and restarted, during which time it is updated to the current configuration.
- If there is an error in a redundant component (e.g. the interface module of the ET 200M), this can cause the connection to a PROFIBUS slave to fail and input/output modules to be passivated.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

177

# Changes, tracking changes, and acceptance

# 9.3 Changes in CFC

# Changing the user program

Before you make changes to the standard or fail-safe program of an S7 F/FH systems, make sure that you can also download and check these changes. Changes to the standard or fail-safe program cannot be compiled or downloaded as part of a separate process. Therefore, you must follow the sequence below in full to make changes:

- Change CFC
- Check
- Compile
- Download
- Offline/online comparison
- Test
- Document

To change or add a fail-safe function, open the relevant CFC or add a new one.

# Runtime groups

When a new CFC is added, the system creates a new runtime group with the same name. Check whether its insert position in the editor is the position you require. When deleting safety functions, empty F-runtime groups may arise, which also have to be deleted. To do this with PCS 7 V7.0 and higher, execute the following command in the CFC editor: ""Edit > Delete Empty Runtime Groups"". With PCS 7 V6.1, activate the option ""Delete Empty Runtime Groups"" when compiling. Before inserting blocks, establish the predecessor block. ",How can you measure the runtimes of OBs in 'Compendium Part B - Process Safety (V9.0)'?,Install blocks TIME_BEG and TIME_END in the OBs and check TM_DIFF_TI at TIME_END block.,Measure OB runtimes by interconnecting TIME_BEG and TIME_END blocks and observing TM_DIFF_TI.,The manual details measuring OB runtimes using TIME_BEG and TIME_END blocks' TM_DIFF_TI output.,"For runtime measurement, place TIME_BEG and TIME_END in OBs and monitor TM_DIFF_TI.",OB runtimes are measured via the difference time output (TM_DIFF_TI) from TIME_END blocks.
5,pcs7_compendium_part_b_en-US_en-US.txt,78,3d844115ab99f4b14b08acbcaef443ffc46c14b429bf0235623f4b117033f9d6,"Note
You can find more information in section Access protection (Page 14).

If changes are to be downloaded during operation, safety mode must be deactivated on the AS and then reactivated once downloading is complete.

Note
You can find more information in section Safety mode and downloading the safety program (Page 115).

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

# Offline/online comparison

Before each CFC change, make sure that the offline and online programs are identical.

- To do this, open a chart from the AS in the CFC editor and switch to online mode.
- If there are differences between the offline and online versions, a message with an additional system prompt will appear; otherwise, the system will switch to online mode without prompting.

In the case of fail-safe functions in the AS, you must also check whether the signature from the last compilation matches the online signature in the AS (see Section Tracking changes in the safety program (Page 180)).

- If the signatures are not identical, or a prompt indicating that there are differences between the programs appears when you switch to online mode, you must determine what has changed and whether these changes can be downloaded.

# Version Cross Manager

The ""Version Cross Manager"" can be used as a tool for comparing two project versions, as well as the current project with a backed-up version of it (see Section Tracking changes in the safety program (Page 180)).

- The comparison function in S7 F-Systems can be used to list the differences in the safety program. You can access this comparison function by clicking the ""Compare..."" button in the ""Edit Safety Program"" window.
- The next window enables you to choose the versions to be compared.

Do not make any other changes if the offline and online versions are different and you do not know what the differences are.

# CPU utilization

Before making any changes, check the CPU utilization with regard to memory and cycle time. You can query how much memory has been allocated using the ""Module Information..."" function in the CPU.

- To do this, open ""Module Information..."" in the CPU and check how much memory is allocated at present on the ""Memory"" tab.
- To determine the cycle utilization, blocks TIME_BEG and TIME_ENG must be installed in the OBs in use and interconnected with one another. In the relevant CFC, check the runtimes of the OBs at output TM_DIFF_TI of the respective TIME_END block. Note that the run times of higher-priority OBs are also measured when this method of measuring the run times of lower-priority OBs is used, and will need to be subtracted accordingly. As of PCS V7.0 and an S7-400H CPU as of FW V4.5, the gross and net run times of the cyclic interrupt OBs can also be read at the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

Note: You can find more information in section Cyclic interrupts (Page 23).

# Checking the H parameters

In fault-tolerant systems, you must check the H parameters of the CPU.

- To do this, open the Object Properties of the CPU and switch to the ""H Parameters"" tab.
- If a ""Cyclic interrupt OB with special handling"" has been specified here, and the option ""Use only calculated values"" has been activated, use the ""Calculate..."" button to open the ""Update Reserve: Calculation of Monitoring Times"" window.
- Here, check the values in the entry fields ""Runtime of the watchdog interrupt concerned [ms]"" and ""Work memory used for all data blocks in the user program [Kbyte]"".
- Compare the runtime entered in the ""Runtime of the watchdog interrupt concerned [ms]"" field, for the cyclic interrupt OB with special handling, with the measured runtime (TIME_BEG, TIME_END of OB) or the runtime read at the CPU_RT block. The value entered should be approximately 10% greater than the measured one.
- Compare the value for ""Work memory used for all data blocks in the user program [Kbyte]"" with the object properties of the CPU block folder. There, in the ""Blocks"" register under ""Size in work memory: Data"", you will find the amount of memory that is occupied by data blocks (in bytes). This value (expressed in Kbytes), plus some reserve, must be entered in the ""Work memory used for all data blocks in the user program [Kbyte]"" field.
- If the values in the entry fields do not match the actual values, you must enter the current values and determine the H parameters using the ""Calculate..."" button.

Note: You can find more information in section Calculating monitoring times (Page 36).

# Checking the hardware before downloading

Before downloading the changes - and in particular, before downloading hardware configuration changes with HCiR - make sure that no errors are present in the system.

- The HCiR procedure involves stopping a CPU, performing the download, and then restarting the CPU.
- Immediately after the transition to RUN Redundant, the other CPU is stopped and restarted, during which time it is updated to the current configuration.
- If there is an error in a redundant component (e.g. the interface module of the ET 200M), this can cause the connection to a PROFIBUS slave to fail and input/output modules to be passivated.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

177

# Changes, tracking changes, and acceptance

# 9.3 Changes in CFC

# Changing the user program

Before you make changes to the standard or fail-safe program of an S7 F/FH systems, make sure that you can also download and check these changes. Changes to the standard or fail-safe program cannot be compiled or downloaded as part of a separate process. Therefore, you must follow the sequence below in full to make changes:

- Change CFC
- Check
- Compile
- Download
- Offline/online comparison
- Test
- Document

To change or add a fail-safe function, open the relevant CFC or add a new one.

# Runtime groups

When a new CFC is added, the system creates a new runtime group with the same name. Check whether its insert position in the editor is the position you require. When deleting safety functions, empty F-runtime groups may arise, which also have to be deleted. To do this with PCS 7 V7.0 and higher, execute the following command in the CFC editor: ""Edit > Delete Empty Runtime Groups"". With PCS 7 V6.1, activate the option ""Delete Empty Runtime Groups"" when compiling. Before inserting blocks, establish the predecessor block. ",What is the procedure for checking H parameters in fault-tolerant systems as per 'Compendium Part B - Process Safety (V9.0)'?,"Open CPU Object Properties, switch to 'H Parameters' tab, and verify specified values.",Check H parameters by examining the 'H Parameters' tab in CPU Object Properties.,The manual outlines verifying H parameters through the CPU's Object Properties under the 'H Parameters' tab.,Inspect the 'H Parameters' tab within CPU Object Properties to assess fault-tolerant system settings.,Fault-tolerant system checks involve the 'H Parameters' tab in CPU Object Properties for validation.
6,pcs7_compendium_part_b_en-US_en-US.txt,78,3d844115ab99f4b14b08acbcaef443ffc46c14b429bf0235623f4b117033f9d6,"Note
You can find more information in section Access protection (Page 14).

If changes are to be downloaded during operation, safety mode must be deactivated on the AS and then reactivated once downloading is complete.

Note
You can find more information in section Safety mode and downloading the safety program (Page 115).

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

# Offline/online comparison

Before each CFC change, make sure that the offline and online programs are identical.

- To do this, open a chart from the AS in the CFC editor and switch to online mode.
- If there are differences between the offline and online versions, a message with an additional system prompt will appear; otherwise, the system will switch to online mode without prompting.

In the case of fail-safe functions in the AS, you must also check whether the signature from the last compilation matches the online signature in the AS (see Section Tracking changes in the safety program (Page 180)).

- If the signatures are not identical, or a prompt indicating that there are differences between the programs appears when you switch to online mode, you must determine what has changed and whether these changes can be downloaded.

# Version Cross Manager

The ""Version Cross Manager"" can be used as a tool for comparing two project versions, as well as the current project with a backed-up version of it (see Section Tracking changes in the safety program (Page 180)).

- The comparison function in S7 F-Systems can be used to list the differences in the safety program. You can access this comparison function by clicking the ""Compare..."" button in the ""Edit Safety Program"" window.
- The next window enables you to choose the versions to be compared.

Do not make any other changes if the offline and online versions are different and you do not know what the differences are.

# CPU utilization

Before making any changes, check the CPU utilization with regard to memory and cycle time. You can query how much memory has been allocated using the ""Module Information..."" function in the CPU.

- To do this, open ""Module Information..."" in the CPU and check how much memory is allocated at present on the ""Memory"" tab.
- To determine the cycle utilization, blocks TIME_BEG and TIME_ENG must be installed in the OBs in use and interconnected with one another. In the relevant CFC, check the runtimes of the OBs at output TM_DIFF_TI of the respective TIME_END block. Note that the run times of higher-priority OBs are also measured when this method of measuring the run times of lower-priority OBs is used, and will need to be subtracted accordingly. As of PCS V7.0 and an S7-400H CPU as of FW V4.5, the gross and net run times of the cyclic interrupt OBs can also be read at the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

Note: You can find more information in section Cyclic interrupts (Page 23).

# Checking the H parameters

In fault-tolerant systems, you must check the H parameters of the CPU.

- To do this, open the Object Properties of the CPU and switch to the ""H Parameters"" tab.
- If a ""Cyclic interrupt OB with special handling"" has been specified here, and the option ""Use only calculated values"" has been activated, use the ""Calculate..."" button to open the ""Update Reserve: Calculation of Monitoring Times"" window.
- Here, check the values in the entry fields ""Runtime of the watchdog interrupt concerned [ms]"" and ""Work memory used for all data blocks in the user program [Kbyte]"".
- Compare the runtime entered in the ""Runtime of the watchdog interrupt concerned [ms]"" field, for the cyclic interrupt OB with special handling, with the measured runtime (TIME_BEG, TIME_END of OB) or the runtime read at the CPU_RT block. The value entered should be approximately 10% greater than the measured one.
- Compare the value for ""Work memory used for all data blocks in the user program [Kbyte]"" with the object properties of the CPU block folder. There, in the ""Blocks"" register under ""Size in work memory: Data"", you will find the amount of memory that is occupied by data blocks (in bytes). This value (expressed in Kbytes), plus some reserve, must be entered in the ""Work memory used for all data blocks in the user program [Kbyte]"" field.
- If the values in the entry fields do not match the actual values, you must enter the current values and determine the H parameters using the ""Calculate..."" button.

Note: You can find more information in section Calculating monitoring times (Page 36).

# Checking the hardware before downloading

Before downloading the changes - and in particular, before downloading hardware configuration changes with HCiR - make sure that no errors are present in the system.

- The HCiR procedure involves stopping a CPU, performing the download, and then restarting the CPU.
- Immediately after the transition to RUN Redundant, the other CPU is stopped and restarted, during which time it is updated to the current configuration.
- If there is an error in a redundant component (e.g. the interface module of the ET 200M), this can cause the connection to a PROFIBUS slave to fail and input/output modules to be passivated.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

177

# Changes, tracking changes, and acceptance

# 9.3 Changes in CFC

# Changing the user program

Before you make changes to the standard or fail-safe program of an S7 F/FH systems, make sure that you can also download and check these changes. Changes to the standard or fail-safe program cannot be compiled or downloaded as part of a separate process. Therefore, you must follow the sequence below in full to make changes:

- Change CFC
- Check
- Compile
- Download
- Offline/online comparison
- Test
- Document

To change or add a fail-safe function, open the relevant CFC or add a new one.

# Runtime groups

When a new CFC is added, the system creates a new runtime group with the same name. Check whether its insert position in the editor is the position you require. When deleting safety functions, empty F-runtime groups may arise, which also have to be deleted. To do this with PCS 7 V7.0 and higher, execute the following command in the CFC editor: ""Edit > Delete Empty Runtime Groups"". With PCS 7 V6.1, activate the option ""Delete Empty Runtime Groups"" when compiling. Before inserting blocks, establish the predecessor block. ",What precaution should be taken before downloading hardware configuration changes with HCiR in 'Compendium Part B - Process Safety (V9.0)'?,Ensure no system errors are present before downloading hardware configuration changes with HCiR.,"Before HCiR downloads, confirm the system is error-free to avoid issues.",The manual stresses the importance of a error-free system prior to HCiR hardware configuration downloads.,Pre-HCiR download checks must include a thorough system error review.,Avoiding system errors is crucial before proceeding with HCiR hardware configuration downloads.
7,pcs7_compendium_part_b_en-US_en-US.txt,78,3d844115ab99f4b14b08acbcaef443ffc46c14b429bf0235623f4b117033f9d6,"Note
You can find more information in section Access protection (Page 14).

If changes are to be downloaded during operation, safety mode must be deactivated on the AS and then reactivated once downloading is complete.

Note
You can find more information in section Safety mode and downloading the safety program (Page 115).

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

# Offline/online comparison

Before each CFC change, make sure that the offline and online programs are identical.

- To do this, open a chart from the AS in the CFC editor and switch to online mode.
- If there are differences between the offline and online versions, a message with an additional system prompt will appear; otherwise, the system will switch to online mode without prompting.

In the case of fail-safe functions in the AS, you must also check whether the signature from the last compilation matches the online signature in the AS (see Section Tracking changes in the safety program (Page 180)).

- If the signatures are not identical, or a prompt indicating that there are differences between the programs appears when you switch to online mode, you must determine what has changed and whether these changes can be downloaded.

# Version Cross Manager

The ""Version Cross Manager"" can be used as a tool for comparing two project versions, as well as the current project with a backed-up version of it (see Section Tracking changes in the safety program (Page 180)).

- The comparison function in S7 F-Systems can be used to list the differences in the safety program. You can access this comparison function by clicking the ""Compare..."" button in the ""Edit Safety Program"" window.
- The next window enables you to choose the versions to be compared.

Do not make any other changes if the offline and online versions are different and you do not know what the differences are.

# CPU utilization

Before making any changes, check the CPU utilization with regard to memory and cycle time. You can query how much memory has been allocated using the ""Module Information..."" function in the CPU.

- To do this, open ""Module Information..."" in the CPU and check how much memory is allocated at present on the ""Memory"" tab.
- To determine the cycle utilization, blocks TIME_BEG and TIME_ENG must be installed in the OBs in use and interconnected with one another. In the relevant CFC, check the runtimes of the OBs at output TM_DIFF_TI of the respective TIME_END block. Note that the run times of higher-priority OBs are also measured when this method of measuring the run times of lower-priority OBs is used, and will need to be subtracted accordingly. As of PCS V7.0 and an S7-400H CPU as of FW V4.5, the gross and net run times of the cyclic interrupt OBs can also be read at the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

Note: You can find more information in section Cyclic interrupts (Page 23).

# Checking the H parameters

In fault-tolerant systems, you must check the H parameters of the CPU.

- To do this, open the Object Properties of the CPU and switch to the ""H Parameters"" tab.
- If a ""Cyclic interrupt OB with special handling"" has been specified here, and the option ""Use only calculated values"" has been activated, use the ""Calculate..."" button to open the ""Update Reserve: Calculation of Monitoring Times"" window.
- Here, check the values in the entry fields ""Runtime of the watchdog interrupt concerned [ms]"" and ""Work memory used for all data blocks in the user program [Kbyte]"".
- Compare the runtime entered in the ""Runtime of the watchdog interrupt concerned [ms]"" field, for the cyclic interrupt OB with special handling, with the measured runtime (TIME_BEG, TIME_END of OB) or the runtime read at the CPU_RT block. The value entered should be approximately 10% greater than the measured one.
- Compare the value for ""Work memory used for all data blocks in the user program [Kbyte]"" with the object properties of the CPU block folder. There, in the ""Blocks"" register under ""Size in work memory: Data"", you will find the amount of memory that is occupied by data blocks (in bytes). This value (expressed in Kbytes), plus some reserve, must be entered in the ""Work memory used for all data blocks in the user program [Kbyte]"" field.
- If the values in the entry fields do not match the actual values, you must enter the current values and determine the H parameters using the ""Calculate..."" button.

Note: You can find more information in section Calculating monitoring times (Page 36).

# Checking the hardware before downloading

Before downloading the changes - and in particular, before downloading hardware configuration changes with HCiR - make sure that no errors are present in the system.

- The HCiR procedure involves stopping a CPU, performing the download, and then restarting the CPU.
- Immediately after the transition to RUN Redundant, the other CPU is stopped and restarted, during which time it is updated to the current configuration.
- If there is an error in a redundant component (e.g. the interface module of the ET 200M), this can cause the connection to a PROFIBUS slave to fail and input/output modules to be passivated.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

177

# Changes, tracking changes, and acceptance

# 9.3 Changes in CFC

# Changing the user program

Before you make changes to the standard or fail-safe program of an S7 F/FH systems, make sure that you can also download and check these changes. Changes to the standard or fail-safe program cannot be compiled or downloaded as part of a separate process. Therefore, you must follow the sequence below in full to make changes:

- Change CFC
- Check
- Compile
- Download
- Offline/online comparison
- Test
- Document

To change or add a fail-safe function, open the relevant CFC or add a new one.

# Runtime groups

When a new CFC is added, the system creates a new runtime group with the same name. Check whether its insert position in the editor is the position you require. When deleting safety functions, empty F-runtime groups may arise, which also have to be deleted. To do this with PCS 7 V7.0 and higher, execute the following command in the CFC editor: ""Edit > Delete Empty Runtime Groups"". With PCS 7 V6.1, activate the option ""Delete Empty Runtime Groups"" when compiling. Before inserting blocks, establish the predecessor block. ",What sequence must be followed to make changes to the standard or fail-safe program in 'Compendium Part B - Process Safety (V9.0)'?,"Change CFC, check, compile, download, perform offline/online comparison, test, and document.","The sequence involves modifying CFC, checking, compiling, downloading, comparing, testing, and documenting.","Follow a strict sequence: alter CFC, verify, compile, download, compare offline/online, test, then document.",Making changes requires a step-by-step process from CFC modification through to documentation.,"The manual specifies a comprehensive sequence for program changes, ending with documentation."
8,pcs7_compendium_part_b_en-US_en-US.txt,78,3d844115ab99f4b14b08acbcaef443ffc46c14b429bf0235623f4b117033f9d6,"Note
You can find more information in section Access protection (Page 14).

If changes are to be downloaded during operation, safety mode must be deactivated on the AS and then reactivated once downloading is complete.

Note
You can find more information in section Safety mode and downloading the safety program (Page 115).

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

# Offline/online comparison

Before each CFC change, make sure that the offline and online programs are identical.

- To do this, open a chart from the AS in the CFC editor and switch to online mode.
- If there are differences between the offline and online versions, a message with an additional system prompt will appear; otherwise, the system will switch to online mode without prompting.

In the case of fail-safe functions in the AS, you must also check whether the signature from the last compilation matches the online signature in the AS (see Section Tracking changes in the safety program (Page 180)).

- If the signatures are not identical, or a prompt indicating that there are differences between the programs appears when you switch to online mode, you must determine what has changed and whether these changes can be downloaded.

# Version Cross Manager

The ""Version Cross Manager"" can be used as a tool for comparing two project versions, as well as the current project with a backed-up version of it (see Section Tracking changes in the safety program (Page 180)).

- The comparison function in S7 F-Systems can be used to list the differences in the safety program. You can access this comparison function by clicking the ""Compare..."" button in the ""Edit Safety Program"" window.
- The next window enables you to choose the versions to be compared.

Do not make any other changes if the offline and online versions are different and you do not know what the differences are.

# CPU utilization

Before making any changes, check the CPU utilization with regard to memory and cycle time. You can query how much memory has been allocated using the ""Module Information..."" function in the CPU.

- To do this, open ""Module Information..."" in the CPU and check how much memory is allocated at present on the ""Memory"" tab.
- To determine the cycle utilization, blocks TIME_BEG and TIME_ENG must be installed in the OBs in use and interconnected with one another. In the relevant CFC, check the runtimes of the OBs at output TM_DIFF_TI of the respective TIME_END block. Note that the run times of higher-priority OBs are also measured when this method of measuring the run times of lower-priority OBs is used, and will need to be subtracted accordingly. As of PCS V7.0 and an S7-400H CPU as of FW V4.5, the gross and net run times of the cyclic interrupt OBs can also be read at the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

Note: You can find more information in section Cyclic interrupts (Page 23).

# Checking the H parameters

In fault-tolerant systems, you must check the H parameters of the CPU.

- To do this, open the Object Properties of the CPU and switch to the ""H Parameters"" tab.
- If a ""Cyclic interrupt OB with special handling"" has been specified here, and the option ""Use only calculated values"" has been activated, use the ""Calculate..."" button to open the ""Update Reserve: Calculation of Monitoring Times"" window.
- Here, check the values in the entry fields ""Runtime of the watchdog interrupt concerned [ms]"" and ""Work memory used for all data blocks in the user program [Kbyte]"".
- Compare the runtime entered in the ""Runtime of the watchdog interrupt concerned [ms]"" field, for the cyclic interrupt OB with special handling, with the measured runtime (TIME_BEG, TIME_END of OB) or the runtime read at the CPU_RT block. The value entered should be approximately 10% greater than the measured one.
- Compare the value for ""Work memory used for all data blocks in the user program [Kbyte]"" with the object properties of the CPU block folder. There, in the ""Blocks"" register under ""Size in work memory: Data"", you will find the amount of memory that is occupied by data blocks (in bytes). This value (expressed in Kbytes), plus some reserve, must be entered in the ""Work memory used for all data blocks in the user program [Kbyte]"" field.
- If the values in the entry fields do not match the actual values, you must enter the current values and determine the H parameters using the ""Calculate..."" button.

Note: You can find more information in section Calculating monitoring times (Page 36).

# Checking the hardware before downloading

Before downloading the changes - and in particular, before downloading hardware configuration changes with HCiR - make sure that no errors are present in the system.

- The HCiR procedure involves stopping a CPU, performing the download, and then restarting the CPU.
- Immediately after the transition to RUN Redundant, the other CPU is stopped and restarted, during which time it is updated to the current configuration.
- If there is an error in a redundant component (e.g. the interface module of the ET 200M), this can cause the connection to a PROFIBUS slave to fail and input/output modules to be passivated.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

177

# Changes, tracking changes, and acceptance

# 9.3 Changes in CFC

# Changing the user program

Before you make changes to the standard or fail-safe program of an S7 F/FH systems, make sure that you can also download and check these changes. Changes to the standard or fail-safe program cannot be compiled or downloaded as part of a separate process. Therefore, you must follow the sequence below in full to make changes:

- Change CFC
- Check
- Compile
- Download
- Offline/online comparison
- Test
- Document

To change or add a fail-safe function, open the relevant CFC or add a new one.

# Runtime groups

When a new CFC is added, the system creates a new runtime group with the same name. Check whether its insert position in the editor is the position you require. When deleting safety functions, empty F-runtime groups may arise, which also have to be deleted. To do this with PCS 7 V7.0 and higher, execute the following command in the CFC editor: ""Edit > Delete Empty Runtime Groups"". With PCS 7 V6.1, activate the option ""Delete Empty Runtime Groups"" when compiling. Before inserting blocks, establish the predecessor block. ",How are new runtime groups handled when adding a new CFC in 'Compendium Part B - Process Safety (V9.0)'?,A new runtime group with the same name as the new CFC is automatically created.,Adding a new CFC results in an eponymous runtime group being generated.,The system auto-generates a runtime group matching the new CFC's name upon addition.,New CFC additions trigger the creation of corresponding runtime groups by the system.,Each new CFC addition is accompanied by a runtime group of the same name.
9,pcs7_compendium_part_b_en-US_en-US.txt,78,3d844115ab99f4b14b08acbcaef443ffc46c14b429bf0235623f4b117033f9d6,"Note
You can find more information in section Access protection (Page 14).

If changes are to be downloaded during operation, safety mode must be deactivated on the AS and then reactivated once downloading is complete.

Note
You can find more information in section Safety mode and downloading the safety program (Page 115).

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

# Offline/online comparison

Before each CFC change, make sure that the offline and online programs are identical.

- To do this, open a chart from the AS in the CFC editor and switch to online mode.
- If there are differences between the offline and online versions, a message with an additional system prompt will appear; otherwise, the system will switch to online mode without prompting.

In the case of fail-safe functions in the AS, you must also check whether the signature from the last compilation matches the online signature in the AS (see Section Tracking changes in the safety program (Page 180)).

- If the signatures are not identical, or a prompt indicating that there are differences between the programs appears when you switch to online mode, you must determine what has changed and whether these changes can be downloaded.

# Version Cross Manager

The ""Version Cross Manager"" can be used as a tool for comparing two project versions, as well as the current project with a backed-up version of it (see Section Tracking changes in the safety program (Page 180)).

- The comparison function in S7 F-Systems can be used to list the differences in the safety program. You can access this comparison function by clicking the ""Compare..."" button in the ""Edit Safety Program"" window.
- The next window enables you to choose the versions to be compared.

Do not make any other changes if the offline and online versions are different and you do not know what the differences are.

# CPU utilization

Before making any changes, check the CPU utilization with regard to memory and cycle time. You can query how much memory has been allocated using the ""Module Information..."" function in the CPU.

- To do this, open ""Module Information..."" in the CPU and check how much memory is allocated at present on the ""Memory"" tab.
- To determine the cycle utilization, blocks TIME_BEG and TIME_ENG must be installed in the OBs in use and interconnected with one another. In the relevant CFC, check the runtimes of the OBs at output TM_DIFF_TI of the respective TIME_END block. Note that the run times of higher-priority OBs are also measured when this method of measuring the run times of lower-priority OBs is used, and will need to be subtracted accordingly. As of PCS V7.0 and an S7-400H CPU as of FW V4.5, the gross and net run times of the cyclic interrupt OBs can also be read at the CPU_RT block.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Changes, tracking changes, and acceptance

# 9.2 Preparing for changes

Note: You can find more information in section Cyclic interrupts (Page 23).

# Checking the H parameters

In fault-tolerant systems, you must check the H parameters of the CPU.

- To do this, open the Object Properties of the CPU and switch to the ""H Parameters"" tab.
- If a ""Cyclic interrupt OB with special handling"" has been specified here, and the option ""Use only calculated values"" has been activated, use the ""Calculate..."" button to open the ""Update Reserve: Calculation of Monitoring Times"" window.
- Here, check the values in the entry fields ""Runtime of the watchdog interrupt concerned [ms]"" and ""Work memory used for all data blocks in the user program [Kbyte]"".
- Compare the runtime entered in the ""Runtime of the watchdog interrupt concerned [ms]"" field, for the cyclic interrupt OB with special handling, with the measured runtime (TIME_BEG, TIME_END of OB) or the runtime read at the CPU_RT block. The value entered should be approximately 10% greater than the measured one.
- Compare the value for ""Work memory used for all data blocks in the user program [Kbyte]"" with the object properties of the CPU block folder. There, in the ""Blocks"" register under ""Size in work memory: Data"", you will find the amount of memory that is occupied by data blocks (in bytes). This value (expressed in Kbytes), plus some reserve, must be entered in the ""Work memory used for all data blocks in the user program [Kbyte]"" field.
- If the values in the entry fields do not match the actual values, you must enter the current values and determine the H parameters using the ""Calculate..."" button.

Note: You can find more information in section Calculating monitoring times (Page 36).

# Checking the hardware before downloading

Before downloading the changes - and in particular, before downloading hardware configuration changes with HCiR - make sure that no errors are present in the system.

- The HCiR procedure involves stopping a CPU, performing the download, and then restarting the CPU.
- Immediately after the transition to RUN Redundant, the other CPU is stopped and restarted, during which time it is updated to the current configuration.
- If there is an error in a redundant component (e.g. the interface module of the ET 200M), this can cause the connection to a PROFIBUS slave to fail and input/output modules to be passivated.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

177

# Changes, tracking changes, and acceptance

# 9.3 Changes in CFC

# Changing the user program

Before you make changes to the standard or fail-safe program of an S7 F/FH systems, make sure that you can also download and check these changes. Changes to the standard or fail-safe program cannot be compiled or downloaded as part of a separate process. Therefore, you must follow the sequence below in full to make changes:

- Change CFC
- Check
- Compile
- Download
- Offline/online comparison
- Test
- Document

To change or add a fail-safe function, open the relevant CFC or add a new one.

# Runtime groups

When a new CFC is added, the system creates a new runtime group with the same name. Check whether its insert position in the editor is the position you require. When deleting safety functions, empty F-runtime groups may arise, which also have to be deleted. To do this with PCS 7 V7.0 and higher, execute the following command in the CFC editor: ""Edit > Delete Empty Runtime Groups"". With PCS 7 V6.1, activate the option ""Delete Empty Runtime Groups"" when compiling. Before inserting blocks, establish the predecessor block. ",What action is required for empty F-runtime groups in 'Compendium Part B - Process Safety (V9.0)'?,"Empty F-runtime groups must be deleted, using the 'Delete Empty Runtime Groups' command in the CFC editor.",Remove empty F-runtime groups via the CFC editor's 'Delete Empty Runtime Groups' option.,The manual instructs to delete any empty F-runtime groups found during editing.,"For PCS 7 V7.0 and higher, use the 'Edit > Delete Empty Runtime Groups' command to remove them.",Empty F-runtime groups should be eliminated to maintain program cleanliness and efficiency.
