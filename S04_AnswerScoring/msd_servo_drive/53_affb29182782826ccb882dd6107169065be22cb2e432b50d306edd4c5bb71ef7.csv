,NODE_FILE_NAME,NODE_NUMBER,NODE_HASH,NODE_TEXT,Q,A_NUMBER,A,helpfulness,correctness,coherence,complexity,verbosity
0,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",How can a table be deleted from the RAM cells according to the 'MSD ServoDrive - DeviceHelp' document?,A1,"First, select the table to be deleted using Parameter P 421[2], then proceed to delete it from the RAM cells.",1.6953125,1.6328125,3.46875,1.2265625,0.466796875
1,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",How can a table be deleted from the RAM cells according to the 'MSD ServoDrive - DeviceHelp' document?,A2,Deleting a table from RAM involves selecting it via CON_FM_FW_TabIdx[2].Table select and then removing it.,1.484375,1.53125,3.296875,1.4140625,0.53125
2,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",How can a table be deleted from the RAM cells according to the 'MSD ServoDrive - DeviceHelp' document?,A3,"The process requires selecting the table with P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1] before deletion.",1.234375,1.3359375,3.078125,1.3046875,0.42578125
3,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",How can a table be deleted from the RAM cells according to the 'MSD ServoDrive - DeviceHelp' document?,A4,"To delete a table, it must be initially selected, followed by the deletion action in the RAM cells.",1.5546875,1.46875,3.3125,1.2734375,0.388671875
4,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",How can a table be deleted from the RAM cells according to the 'MSD ServoDrive - DeviceHelp' document?,A5,"Selection through Parameter P 421[2] is the first step, after which the selected table can be deleted from RAM.",2.140625,2.28125,3.625,1.3828125,0.455078125
5,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",How is the CRC redundancy check performed for the large table?,A1,"A single checksum is calculated for the entire table using Parameter P 1965[2] for calculation and monitoring, with the result stored in P 1965[3].",1.515625,1.5546875,3.4375,1.390625,0.53515625
6,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",How is the CRC redundancy check performed for the large table?,A2,"Perform a checksum calculation with P 1965[2] set to Tab-Crc-NewCalculation(2), then monitor with Tab-Crc-Monitoring(1), storing the checksum in P 1965[3].",0.8828125,0.8046875,2.828125,1.3828125,0.6640625
7,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",How is the CRC redundancy check performed for the large table?,A3,"Initiate checksum calculation via P 1965[2], which then switches to monitoring mode, with the checksum saved in P 1965[3].",0.69921875,0.482421875,2.671875,1.1875,0.466796875
8,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",How is the CRC redundancy check performed for the large table?,A4,"The process involves calculating a checksum with P 1965[2], automatically switching to monitoring, and storing the result in P 1965[3].",0.6640625,0.44140625,2.6875,1.25,0.59375
9,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",How is the CRC redundancy check performed for the large table?,A5,"For CRC check, calculate using P 1965[2], monitor the checksum, and store it persistently in P 1965[3].",0.72265625,0.51953125,2.75,1.2421875,0.5234375
10,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What are the specifications for the CRC16 algorithm used in checksum calculation?,A1,"It uses CRC-CCITT with polynomial x16 + x12 + x5 + 1 (1021h), starting value FFFFh, and final XOR A55Ah.",1.421875,1.5,3.453125,1.4921875,0.306640625
11,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What are the specifications for the CRC16 algorithm used in checksum calculation?,A2,"The algorithm is CRC16 over a byte stream, polynomial 1021h, initial value FFFFh, and final XOR A55Ah.",2.21875,2.34375,3.640625,1.59375,0.51953125
12,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What are the specifications for the CRC16 algorithm used in checksum calculation?,A3,"Specifications include polynomial 1021h, starting at FFFFh, and applying a final XOR of A55Ah.",1.7421875,1.7421875,3.46875,1.4296875,0.365234375
13,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What are the specifications for the CRC16 algorithm used in checksum calculation?,A4,"CRC16 algorithm details: polynomial 1021h, initial FFFFh, and final XOR A55Ah for checksum calculation.",0.984375,0.9609375,3.1875,1.34375,0.314453125
14,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What are the specifications for the CRC16 algorithm used in checksum calculation?,A5,"For checksum, apply CRC16 with polynomial 1021h, start with FFFFh, and end with XOR A55Ah.",2.34375,2.46875,3.703125,1.546875,0.5078125
15,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What happens if the checksum comparison during the CRC redundancy check fails?,A1,"A negative checksum comparison results in error 30-7, as detailed in the 'Error list' on page 328.",0.28125,0.0869140625,3.234375,0.9609375,0.318359375
16,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What happens if the checksum comparison during the CRC redundancy check fails?,A2,"Failure in checksum comparison triggers error 30-7, referenced in the document's error list.",0.1171875,0.038818359375,3.234375,0.921875,0.1875
17,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What happens if the checksum comparison during the CRC redundancy check fails?,A3,"Error 30-7 is displayed if the checksum does not match, indicating a failure in the CRC check.",0.99609375,0.78125,3.34375,0.921875,0.365234375
18,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What happens if the checksum comparison during the CRC redundancy check fails?,A4,The system reports error 30-7 when the checksum comparison is unsuccessful.,0.294921875,0.1640625,3.234375,0.63671875,0.205078125
19,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What happens if the checksum comparison during the CRC redundancy check fails?,A5,Unsuccessful checksum monitoring leads to the appearance of error code 30-7.,0.34375,0.2431640625,3.03125,0.76953125,0.1142578125
20,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What is the command for transferring the large table from the controller’s file system to the RAM cells of the large LUT?,A1,Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) is used to read the lookup table data file from the RAM disk.,1.1171875,0.91015625,2.984375,1.3359375,0.48828125
21,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What is the command for transferring the large table from the controller’s file system to the RAM cells of the large LUT?,A2,The 'special command' is setting Parameter P 2009[0] to READ_LUT(15) for transferring the table to RAM.,2.171875,2.03125,3.328125,1.3359375,0.56640625
22,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What is the command for transferring the large table from the controller’s file system to the RAM cells of the large LUT?,A3,READ_LUT(15) in Parameter P 2009[0] facilitates the transfer of the large table from the file system to RAM.,2.703125,2.6875,3.375,1.546875,0.60546875
23,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What is the command for transferring the large table from the controller’s file system to the RAM cells of the large LUT?,A4,"To move the large table into RAM, execute the command READ_LUT(15) via Parameter P 2009[0].",2.046875,2.140625,3.28125,1.375,0.55078125
24,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What is the command for transferring the large table from the controller’s file system to the RAM cells of the large LUT?,A5,Transferring the large table to RAM requires the READ_LUT(15) command in Parameter P 2009[0].,1.7890625,1.7265625,3.21875,1.3125,0.458984375
25,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What is the role of the voltage controller in the field-weakening of synchronous motor voltage controller?,A1,"It is superimposed onto the selected characteristic curve, using part of the available voltage as a control reserve.",2.078125,1.9921875,3.171875,1.6171875,0.4296875
26,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What is the role of the voltage controller in the field-weakening of synchronous motor voltage controller?,A2,"The voltage controller overlays the characteristic curve, allocating some voltage for control purposes.",1.8984375,1.8046875,3.125,1.5703125,0.3828125
27,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What is the role of the voltage controller in the field-weakening of synchronous motor voltage controller?,A3,"Superimposed on the curve, it reserves a portion of the voltage for control in field-weakening scenarios.",1.9296875,1.8046875,3.15625,1.5078125,0.52734375
28,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What is the role of the voltage controller in the field-weakening of synchronous motor voltage controller?,A4,"It acts above the characteristic curve, utilizing available voltage partly as a reserve for control.",2.578125,2.609375,3.421875,1.65625,0.4765625
29,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What is the role of the voltage controller in the field-weakening of synchronous motor voltage controller?,A5,"In field-weakening, it's added to the curve, setting aside voltage for control reserve.",1.8203125,1.828125,3.1875,1.5625,0.52734375
30,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What is the special use case for loading the large LookUp Table (LUT) via the controller’s file system?,A1,"It is designed for scenarios where the large LUT needs continuous changes during operation in RAM memory, requiring quick transfer procedures.",2.703125,2.5,3.546875,1.46875,0.55859375
31,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What is the special use case for loading the large LookUp Table (LUT) via the controller’s file system?,A2,"This method is intended for rapidly changing the large LUT in RAM during active operation, bypassing slower parameter interface transfers.",2.90625,2.859375,3.734375,1.5390625,0.53125
32,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What is the special use case for loading the large LookUp Table (LUT) via the controller’s file system?,A3,"For operations demanding frequent updates to the large LUT in RAM, this procedure ensures swift data transfer.",2.34375,2.234375,3.53125,1.4375,0.42578125
33,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What is the special use case for loading the large LookUp Table (LUT) via the controller’s file system?,A4,"The special use case involves modifying the large LUT continuously in RAM, necessitating fast transfer via the controller’s file system.",0.86328125,0.6640625,3.1875,1.265625,0.515625
34,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What is the special use case for loading the large LookUp Table (LUT) via the controller’s file system?,A5,"When the large LUT must be altered often during operation, this approach allows for quick loading directly into RAM.",2.25,2.109375,3.546875,1.3984375,0.53515625
35,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What precautions must be taken when developing a project to avoid damaging the servo drive's flash memory?,A1,Ensure the function 'Save the large table to ROM' is not executed repeatedly or cyclically to prevent exceeding the flash memory's save operation limit.,2.5625,2.671875,3.640625,1.3359375,0.48046875
36,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What precautions must be taken when developing a project to avoid damaging the servo drive's flash memory?,A2,"Avoid repeated or cyclic execution of saving to the flash memory, as it has a limited number of possible save operations.",2.78125,2.71875,3.71875,1.234375,0.55859375
37,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What precautions must be taken when developing a project to avoid damaging the servo drive's flash memory?,A3,"To protect the flash memory, the project development must never repeatedly or cyclically perform the 'Save the large table to ROM' function.",2.28125,2.375,3.546875,1.25,0.3359375
38,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What precautions must be taken when developing a project to avoid damaging the servo drive's flash memory?,A4,"The flash memory's durability can be compromised if 'Save the large table to ROM' is done repeatedly; hence, such actions must be avoided during project development.",2.796875,2.828125,3.6875,1.3203125,0.69140625
39,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What precautions must be taken when developing a project to avoid damaging the servo drive's flash memory?,A5,"Project developers should note that the servo drive's flash memory has a finite number of save operations, making it crucial to avoid repetitive or cyclic saves of large tables to ROM.",3.1875,3.21875,3.90625,1.3828125,0.71875
40,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What scope signals does the Moog DRIVEADMINISTRATOR 5 offer for LUT monitoring?,A1,It provides scope signals like the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).,1.765625,1.8671875,3.53125,1.296875,0.51171875
41,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What scope signals does the Moog DRIVEADMINISTRATOR 5 offer for LUT monitoring?,A2,"Scope signals include IDs 150 and 151 for monitoring the current LUT index for speed and torque, respectively.",1.5859375,1.59375,3.390625,1.2265625,0.52734375
42,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What scope signals does the Moog DRIVEADMINISTRATOR 5 offer for LUT monitoring?,A3,"For diagnostics, Scope ID 150 tracks speed LUT index, and Scope ID 151 tracks torque LUT index.",1.65625,1.8203125,3.65625,1.2265625,0.53515625
43,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What scope signals does the Moog DRIVEADMINISTRATOR 5 offer for LUT monitoring?,A4,"The tool offers diagnostic signals, specifically Scope IDs 150 and 151, for LUT index monitoring.",1.5546875,1.6953125,3.53125,1.2890625,0.447265625
44,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",What scope signals does the Moog DRIVEADMINISTRATOR 5 offer for LUT monitoring?,A5,Monitoring LUT indices for speed and torque is facilitated through Scope IDs 150 and 151 in Moog DRIVEADMINISTRATOR 5.,2.453125,2.625,3.828125,1.484375,0.703125
45,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",Where can one find more information about the special function of transferring the large table to RAM?,A1,Contact the manufacturer for additional details on the special function of loading the large table to RAM.,2.234375,2.28125,3.484375,1.0078125,0.38671875
46,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",Where can one find more information about the special function of transferring the large table to RAM?,A2,"For further information regarding this special function, reaching out to the manufacturer is recommended.",1.7734375,1.796875,3.375,0.765625,0.21484375
47,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",Where can one find more information about the special function of transferring the large table to RAM?,A3,The manufacturer is the source for more information on the large table transfer to RAM.,1.5625,1.46875,3.296875,0.734375,0.051025390625
48,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",Where can one find more information about the special function of transferring the large table to RAM?,A4,Additional details about this functionality can be obtained directly from the manufacturer.,1.671875,1.8671875,3.28125,0.85546875,0.0703125
49,msd_servo_drive.txt,53,affb29182782826ccb882dd6107169065be22cb2e432b50d306edd4c5bb71ef7,"CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

- When developing the project, care must be taken to ensure that the function “Save the large table to ROM"" is never carried out repeatedly or cyclically.
- The reason is that saving to the flash memory of the servo drive is subject to a limitation of the overall number of possible save operations.

MOOG ID No.:CB40859-001 Date:11/2020

# 7 Control

# 7.7.5.4 Deleting a table RAM

The table to be deleted must first be selected and can subsequently be deleted in your RAM cells.

1. Select the table:
2. Parameter P 421[2] - CON_FM_FW_TabIdx[2].Table select = [0, 1]

Delete the table:

# 7.7.5.5 Loading the large table via the controller’s file system

This procedure is only conceived for a special use case: the large LookUp Table (LUT) must be changed continuously during operation (in the RAM memory!). Consequently, the transfer procedure needs to run quickly.

The transfer of an individual LUT can then no longer be carried out via the parameter interface (see 2 sections ago) because that would take too long during the actively running process. The solution that has been created for this is the option of first transferring the entire large table via ftp as a *.bin file to the file system of the servo drive in its entirety and then to load it to the RAM cells of the large LUT by means of a “special command.""

The map fields for the LUT can be transferred from one or several .CSV files via a converter (PC program) to the target, which is the *.bin file. The proper formatting of the *.bin file can be obtained from the manufacturer.

The manufacturer may be able to provide one example of a PC converter program of this nature (“LookUpTabConverter.exe”). At the end of the preparation process, you will then have the targeted amount of different *.bin files for the process which will run later on.

MSD ServoDrive - DeviceHelp 154

# 7 Control

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 155

The ‘special command’ for transferring the data of the large table from the controller’s file system to the RAM cells of the large LUT is:

Parameter P 2009[0] - COM_CFG_File = READ_LUT(15) (Read lookup table data file from RAM disk)

NOTE

Please contact the manufacturer for more information on this special function.

# 7.7.5.6 CRC redundancy check

One single checksum can be calculated for the entire large table.

Command for one-time calculation and saving of the checksum:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control = Tab-Crc-NewCalculation(2).

After successful calculation, the parameter automatically switches to the monitoring mode:

Parameter P 1965[2] - CON_FM_LUT_Para[2].LUT: Tab CRC control == Tab-Crc-Monitoring(1).

The calculated checksum is stored in:

Parameter P 1965[3] - CON_FM_LUT_Para[3].LUT: Tab CRC value

Now parameter P1965 should be stored persistently in the device.

The checksum monitoring is carried out one time for each initialization, e.g. when the servo drive is started up.

If the checksum comparison returns a negative response, error 30-7 appears, see also section ""Error list"" on page 328.

# 7.7.5.7 Important scope variables in the Moog DRIVEADMINISTRATOR 5

The Moog DRIVEADMINISTRATOR 5 offers a series of useful scope signals for diagnosis and monitoring of the calculated or externally specified values, such as the LUT index currently in use for speed (Scope ID 150) or torque (Scope ID 151).

# 7.7.5.8 CRC algorithm and C functionality

Checksum calculation

The checksum should be of the type CRC16 generation related to CRC-CCITT.

- Type: CRC16 over one byte stream
- Polynomial: x16 + x12 + x5 + 1 which equals 1021h
- Starting value: FFFFh
- final XOR: A55Ah

# 7.7.6 Field-weakening of synchronous motor voltage controller

The voltage controller is superimposed onto the selected characteristic curve. When the voltage controller is used, a part of the available voltage is used as a control reserve. ",Where can one find more information about the special function of transferring the large table to RAM?,A5,Manufacturer consultation is advised for comprehensive understanding of the large table RAM transfer feature.,1.6640625,1.7265625,3.234375,0.86328125,0.2119140625
