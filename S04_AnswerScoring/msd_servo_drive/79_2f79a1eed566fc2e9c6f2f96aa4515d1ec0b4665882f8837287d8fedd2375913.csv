,NODE_FILE_NAME,NODE_NUMBER,NODE_HASH,NODE_TEXT,Q,A_NUMBER,A,helpfulness,correctness,coherence,complexity,verbosity
0,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How can the control location be switched in the MSD ServoDrive?,A1,"In the MSD ServoDrive, the control location can be switched via a digital input set to 'MAN(14)=Switch control location selector', enabling fast switching to manual control.",2.140625,2.09375,3.59375,1.5859375,0.51953125
1,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How can the control location be switched in the MSD ServoDrive?,A2,"Switching the control location in the MSD ServoDrive is achieved by configuring a digital input with the 'MAN(14)' setting, facilitating quick manual control activation.",1.9609375,1.9453125,3.4375,1.6796875,0.64453125
2,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How can the control location be switched in the MSD ServoDrive?,A3,"The MSD ServoDrive allows for control location switching through a specially configured digital input, streamlining the transition to manual operation when needed.",1.9453125,1.9375,3.421875,1.3984375,0.4921875
3,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How can the control location be switched in the MSD ServoDrive?,A4,"By assigning the 'MAN(14)' function to a digital input, the MSD ServoDrive enables efficient switching between control locations for setup or emergency scenarios.",2.03125,2.078125,3.46875,1.515625,0.55859375
4,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How can the control location be switched in the MSD ServoDrive?,A5,"Control location switching in the MSD ServoDrive is facilitated by the 'MAN(14)' function on a digital input, offering a quick manual control option.",1.7578125,1.7109375,3.390625,1.4921875,0.50390625
5,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How can the function of digital standard inputs be configured in the MSD ServoDrive?,A1,"The function of digital standard inputs in the MSD ServoDrive can be configured using function selectors, allowing a wide range of special device functionalities to be assigned.",2.171875,2.1875,3.546875,1.4921875,0.44140625
6,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How can the function of digital standard inputs be configured in the MSD ServoDrive?,A2,"Each digital standard input's functionality in the MSD ServoDrive is customizable via function selectors, with certain functions available only for specific inputs or with particular function packages.",1.890625,1.9765625,3.3125,1.4765625,0.43359375
7,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How can the function of digital standard inputs be configured in the MSD ServoDrive?,A3,"Configuration of digital standard inputs in the MSD ServoDrive involves selecting a function via function selectors, with the 'Options...' button enabling further behavior definition for some functions.",1.8828125,1.8046875,3.375,1.4609375,0.546875
8,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How can the function of digital standard inputs be configured in the MSD ServoDrive?,A4,"In the MSD ServoDrive, digital standard inputs are assigned functionalities through function selectors, offering flexibility in device operation and control.",1.8671875,1.9453125,3.328125,1.34375,0.365234375
9,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How can the function of digital standard inputs be configured in the MSD ServoDrive?,A5,"The MSD ServoDrive allows for the assignment of various functions to digital standard inputs through function selectors, enhancing the device's adaptability to different operational needs.",1.6875,1.8203125,3.28125,1.515625,0.40234375
10,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How does the MSD ServoDrive handle analog input scaling?,A1,"The MSD ServoDrive performs analog input scaling by converting input values to process variables using gain factors, offsets, and backlash, customizable for each input.",2.046875,2.203125,3.546875,1.5546875,0.421875
11,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How does the MSD ServoDrive handle analog input scaling?,A2,Analog input scaling in the MSD ServoDrive involves adjusting input signals through gain and offset parameters to match desired operational ranges.,1.5546875,1.6796875,3.15625,1.546875,0.349609375
12,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How does the MSD ServoDrive handle analog input scaling?,A3,"In the MSD ServoDrive, analog inputs are scaled by applying user-defined gain and offset values, ensuring accurate signal interpretation for control purposes.",2.609375,2.5625,3.59375,1.578125,0.55078125
13,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How does the MSD ServoDrive handle analog input scaling?,A4,"The MSD ServoDrive allows for precise analog input scaling, enabling the customization of input signal ranges to suit specific application requirements.",1.4296875,1.5,3.046875,1.4765625,0.1650390625
14,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How does the MSD ServoDrive handle analog input scaling?,A5,"Through analog input scaling, the MSD ServoDrive ensures that input signals are accurately translated into meaningful control variables, enhancing system performance.",1.5078125,1.4921875,3.21875,1.3984375,0.33984375
15,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How is the 'Safe Torque Off' (STO) function supported in the MSD ServoDrive?,A1,"The MSD ServoDrive supports the 'Safe Torque Off' (STO) function in accordance with EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508 standards, ensuring safety in torque control.",2.53125,2.625,3.5,1.8359375,0.73828125
16,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How is the 'Safe Torque Off' (STO) function supported in the MSD ServoDrive?,A2,"Safety is enhanced in the MSD ServoDrive through the STO function, which complies with international safety standards for servo drives.",1.546875,1.390625,3.0,1.484375,0.2578125
17,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How is the 'Safe Torque Off' (STO) function supported in the MSD ServoDrive?,A3,"The STO function in the MSD ServoDrive provides a safe torque off capability, meeting rigorous safety requirements for industrial applications.",1.734375,1.53125,3.046875,1.4453125,0.291015625
18,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How is the 'Safe Torque Off' (STO) function supported in the MSD ServoDrive?,A4,"In compliance with safety standards, the MSD ServoDrive incorporates the STO function to safely disable torque in emergency situations.",1.7421875,1.7109375,3.140625,1.5078125,0.322265625
19,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",How is the 'Safe Torque Off' (STO) function supported in the MSD ServoDrive?,A5,"The MSD ServoDrive's STO function is designed to meet EN ISO 13849-1 and other relevant standards, offering reliable safety for torque-related operations.",1.9140625,1.9921875,3.25,1.65625,0.3671875
20,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ","What are the digital virtual inputs in the MSD ServoDrive, and how are they used?",A1,"Digital virtual inputs in the MSD ServoDrive are software-based inputs actuated via MSD PLC or field bus, capable of using all digital functions available to real digital inputs.",2.453125,2.4375,3.5625,1.640625,0.466796875
21,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ","What are the digital virtual inputs in the MSD ServoDrive, and how are they used?",A2,"The MSD ServoDrive features virtual inputs like ISV00 and ISV01, which mimic the functionality of physical digital inputs for flexible control options.",1.6328125,1.75,3.28125,1.4765625,0.42578125
22,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ","What are the digital virtual inputs in the MSD ServoDrive, and how are they used?",A3,"Virtual inputs in the MSD ServoDrive, such as ISV00 and ISV01, provide a software alternative to physical inputs, expanding the device's control capabilities.",1.8046875,1.9296875,3.28125,1.6171875,0.318359375
23,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ","What are the digital virtual inputs in the MSD ServoDrive, and how are they used?",A4,"ISV00 and ISV01 in the MSD ServoDrive represent digital virtual inputs, offering the same range of functions as their physical counterparts for enhanced operational flexibility.",2.203125,2.328125,3.40625,1.765625,0.451171875
24,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ","What are the digital virtual inputs in the MSD ServoDrive, and how are they used?",A5,"The MSD ServoDrive utilizes digital virtual inputs to extend its input capabilities, allowing for control and monitoring without additional physical connections.",1.3828125,1.34375,3.03125,1.4375,0.125
25,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What are the options for wire break monitoring in the MSD ServoDrive's analog inputs?,A1,"Wire break monitoring in the MSD ServoDrive's analog inputs is configured via P 399 - CON_ANA_WireBrk_Th, setting voltage thresholds for error detection.",1.421875,1.640625,3.296875,1.5390625,0.361328125
26,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What are the options for wire break monitoring in the MSD ServoDrive's analog inputs?,A2,"The MSD ServoDrive monitors for wire breaks in analog inputs by checking if the voltage falls below a specified threshold, triggering an error if so.",1.6640625,1.875,3.359375,1.40625,0.404296875
27,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What are the options for wire break monitoring in the MSD ServoDrive's analog inputs?,A3,"In the MSD ServoDrive, analog input wire break detection is enabled by defining a minimum voltage level, below which an error is generated.",1.8984375,2.109375,3.515625,1.515625,0.33984375
28,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What are the options for wire break monitoring in the MSD ServoDrive's analog inputs?,A4,Wire break monitoring for the MSD ServoDrive's analog inputs involves setting detection limits to identify and respond to connection failures.,1.4453125,1.640625,3.15625,1.34375,0.2734375
29,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What are the options for wire break monitoring in the MSD ServoDrive's analog inputs?,A5,"The MSD ServoDrive provides wire break monitoring for analog inputs through configurable voltage thresholds, ensuring reliable operation by detecting and signaling connection issues.",2.1875,2.359375,3.578125,1.6484375,0.53125
30,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What are the touch probe inputs on the MSD ServoDrive device?,A1,The touch probe inputs on the MSD ServoDrive device are two digital standard inputs that are faster than the other inputs.,2.28125,2.15625,3.5625,1.28125,0.431640625
31,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What are the touch probe inputs on the MSD ServoDrive device?,A2,"Specifically, ISD05 and ISD06 are referred to as touch probe inputs, known for their higher speed compared to other inputs.",1.828125,1.8515625,3.390625,1.3046875,0.404296875
32,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What are the touch probe inputs on the MSD ServoDrive device?,A3,"In the MSD ServoDrive device, touch probe functionality is exclusively available at ISD05 and ISD06, making them the fastest digital inputs.",1.9765625,1.953125,3.5625,1.3359375,0.421875
33,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What are the touch probe inputs on the MSD ServoDrive device?,A4,"Touch probe inputs, identified as ISD05 and ISD06 in the MSD ServoDrive, offer superior speed for specific applications requiring quick response.",1.96875,2.078125,3.390625,1.421875,0.3125
34,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What are the touch probe inputs on the MSD ServoDrive device?,A5,"The MSD ServoDrive features two high-speed digital inputs, ISD05 and ISD06, designated as touch probe inputs for rapid signal processing.",2.21875,2.15625,3.5625,1.5390625,0.353515625
35,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What functionalities can be assigned to the analog inputs in the MSD ServoDrive?,A1,"Analog inputs in the MSD ServoDrive can be assigned various functionalities such as process controller reference value, analog encoder, and hydraulic actual flow, among others.",2.828125,2.859375,3.765625,1.453125,0.765625
36,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What functionalities can be assigned to the analog inputs in the MSD ServoDrive?,A2,"The MSD ServoDrive allows analog inputs to be configured for multiple purposes, including serving as analog torque limits or speed override inputs.",2.3125,2.4375,3.515625,1.375,0.310546875
37,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What functionalities can be assigned to the analog inputs in the MSD ServoDrive?,A3,Functionalities like motor potentiometer control and analog reference inputs can be assigned to the analog inputs in the MSD ServoDrive.,2.5625,2.328125,3.546875,1.40625,0.52734375
38,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What functionalities can be assigned to the analog inputs in the MSD ServoDrive?,A4,"In the MSD ServoDrive, analog inputs are versatile, capable of being set up for tasks ranging from hydraulic pressure monitoring to speed override functions.",2.0625,2.03125,3.4375,1.296875,0.328125
39,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What functionalities can be assigned to the analog inputs in the MSD ServoDrive?,A5,"The MSD ServoDrive's analog inputs support a broad spectrum of functions, enabling their use in diverse control and monitoring applications.",1.8984375,2.1875,3.3125,1.359375,0.08447265625
40,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What is the purpose of the 'Reference reached REF(6)' function in the MSD ServoDrive?,A1,"The 'Reference reached REF(6)' function in the MSD ServoDrive signals when a setpoint has been achieved, indicating that the actual value is within a defined range of the reference.",2.96875,2.96875,3.71875,1.6171875,0.73828125
41,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What is the purpose of the 'Reference reached REF(6)' function in the MSD ServoDrive?,A2,"In the MSD ServoDrive, the REF(6) function provides feedback that a target or reference value has been reached, within specified tolerance limits.",2.8125,2.796875,3.609375,1.5390625,0.62890625
42,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What is the purpose of the 'Reference reached REF(6)' function in the MSD ServoDrive?,A3,The MSD ServoDrive uses the REF(6) function to monitor and indicate when the system's actual performance matches the desired reference values.,1.8671875,1.8515625,3.421875,1.359375,0.60546875
43,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What is the purpose of the 'Reference reached REF(6)' function in the MSD ServoDrive?,A4,"Achievement of setpoints in the MSD ServoDrive is communicated through the REF(6) function, ensuring operators are aware of target attainment.",2.734375,2.71875,3.65625,1.6015625,0.76953125
44,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What is the purpose of the 'Reference reached REF(6)' function in the MSD ServoDrive?,A5,"REF(6) in the MSD ServoDrive serves as a confirmation mechanism, alerting when operational targets are met within predefined parameters.",1.90625,1.796875,3.359375,1.4453125,0.6171875
45,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What is the purpose of the motor brake output in the MSD ServoDrive?,A1,"The motor brake output in the MSD ServoDrive is a digital output with special hardware designed to drive a motor brake, typically located inside the motor casing.",1.9453125,1.859375,3.3125,1.515625,0.484375
46,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What is the purpose of the motor brake output in the MSD ServoDrive?,A2,"Specifically designed for motor brakes, the motor brake output in the MSD ServoDrive facilitates the control of brakes housed within the motor casing.",2.8125,2.734375,3.53125,1.5546875,0.6015625
47,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What is the purpose of the motor brake output in the MSD ServoDrive?,A3,"In the MSD ServoDrive, the motor brake output serves to operate the motor's internal brake, ensuring precise control over motor movement.",2.765625,2.84375,3.78125,1.53125,0.7109375
48,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What is the purpose of the motor brake output in the MSD ServoDrive?,A4,"The MSD ServoDrive includes a dedicated digital output for motor brakes, enabling efficient management of braking mechanisms inside the motor.",2.484375,2.265625,3.5,1.46875,0.412109375
49,msd_servo_drive.txt,79,2f79a1eed566fc2e9c6f2f96aa4515d1ec0b4665882f8837287d8fedd2375913,"- Likewise, before using the analog inputs, these are normally associated with a special device functionality for analog inputs. The corresponding function selectors also make it possible to select a special digital functionality instead.
- Two of the digital standard inputs on the device are what are referred to as “touch probe inputs”. These inputs are faster than the other inputs.

MOOG &nbsp;&nbsp;&nbsp;&nbsp;ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp;MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp;289

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 290

# Outputs

# 9.2 Digital inputs

- While function selectors can be used to assign digital outputs a wide range of special device functionalities for digital outputs, the special device functionality for analog outputs is considerably more limited and does not overlap with the digital outputs’ functionality. Moreover, analog outputs are only available when using X8 option modules!
- The motor brake output is a digital output with special hardware for driving a motor brake, which is normally found inside the motor casing.

Image 9.2: “Function selectors of the digital inputs” screen

# Digital inputs can be:

- The touch probe function is only available at ISD05 (P 106[0] - MPRO_INPUT_FS_ISD05) and ISD06 (P 107[0] - MPRO_INPUT_FS_ISD06).
- ISD0x
- Digital standard inputs on the outside of the device with a functionality that can be freely configured to the greatest extent possible (“S” standard inputs)
- ENPO
- A digital input (EnablePower) on the outside of the device that is used to enable/lock the power stage with hardware and that has a functionality that can be configured, albeit with very strict limitations
- ISDSH
- A digital input (Safe Stop) on the outside of the device that is used for an enable/lock signal by the safety stop circuit and that has a functionality that cannot be changed
- ISV0x
- “Virtual inputs” on the inside of the device with a freely configurable functionality much like that available for the ISD0x inputs
- IED0x
- In addition, there can be additional digital inputs if the X8 option is used (“E” expansion inputs)

# Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states (see Section ""Status of the digital inputs"" on page 294).

# 9.2.1 Digital standard inputs

There is a selector that can be used to assign a function to each digital standard input. Certain functions will only be available for certain inputs or with specific function packages. Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|101|MPRO_INPUT_FS_ISD00| |Function of digital input ISD00|
|102|MPRO_INPUT_FS_ISD01| |Function of digital input ISD01|
|103|MPRO_INPUT_FS_ISD02| |Function of digital input ISD02|
|104|MPRO_INPUT_FS_ISD03| |Function of digital input ISD03|
|105|MPRO_INPUT_FS_ISD04| |Function of digital input ISD04|
|106|MPRO_INPUT_FS_ISD05| |Function of digital input ISD05|
|107|MPRO_INPUT_FS_ISD06| |Function of digital input ISD06|
|108|MPRO_INPUT_FS_ISDSH| |Function of digital input ISDSH|
|113|MPRO_INPUT_FS_IEDxx| |Inputs extended digital: Function of digital inputs|
|113|IED00| |Function of digital input IED00|
|113|IED01| |Function of digital input IED01|
|113|IED02| |Function of digital input IED02|
|113|IED03| |Function of digital input IED03|

|118|MPRO_INPUT_FILTER|ms|for ENPO|
|---|---|---|---|
|118|MPRO_INPUT_FILTER|ms|for ISD00|
|118|MPRO_INPUT_FILTER|ms|for ISD01|
|118|MPRO_INPUT_FILTER|ms|for ISD02|
|118|MPRO_INPUT_FILTER|ms|for ISD03|
|118|MPRO_INPUT_FILTER|ms|for ISD04|
|118|MPRO_INPUT_FILTER|ms|for ISD05|
|118|MPRO_INPUT_FILTER|ms|for ISD06|
|118|MPRO_INPUT_FILTER|ms|for ISA00|
|118|MPRO_INPUT_FILTER|ms|for ISA01|
|118|MPRO_INPUT_FILTER|ms|for ISDSH|
|118|MPRO_INPUT_FILTER|ms|for IED00|
|118|MPRO_INPUT_FILTER|ms|for IED01|
|118|MPRO_INPUT_FILTER|ms|for IED02|

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 291

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 292

|ID|Index|Name|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
|118|14|MPRO_INPUT_FILTER|ms|for IED03|HOMST (9)| |Start homing according to the homing method parameterized in P 02261 MPRO_402_| | |
|119|0|MPRO_INPUT_STATE_FIL| |States of filtered and inverted digital inputs|Homing Method| | | | |
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|HOMSW (10)| |Homing switch to determine the zero for positioning| | |

Table 9.1: “Digital standard inputs” parameters (continue)

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|101 - 107|0|MPRO_INPUT_FS_ISDxx| |Function selectors for the digital inputs|
| | |Off (0)| |Input without function|
| | |START (1)| |Start of control: Motor is energized. The direction of rotation depends on the reference.|
| | |INV (2)| |Inverse reference value|
| | |STOP (3)| |Carries out a quick stop as per the quick stop response (active-low)|
| | |HALT (4)| |Disable feed: The ongoing axis movement is interrupted and resumed as per the ""HALT"" reaction following resetting.|
| | |LCW (5)| |Limit switch positive direction: Limit switch evaluation without overrun protection, positive direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |LCCW (6)| |Limit switch negative direction: Limit switch evaluation without overrun protection, negative direction. The reaction to limit switch overrun and to interchanged limit switches can be preset.|
| | |INCH_P (7)| |Jog in positive direction|
| | |INCH_N (8)| |Jog in negative direction|

Table 9.2: Function selectors “Digital inputs”

HALT_PC (20): Disable feed with following position control (from V1.35-06)

TBEN (21): Import and execution of selected table driving set

TBTEA (22): Write actual position into selected table index: Teach-in for position references. The current position is stored in the specified table index on a rising edge. The index can be defined via the inputs in binary format (setting 23-26) or set via P 207[0] - MPRO_TAB_ActIdx. The teach-in

# 9.2.3 Hardware enable – power stage

function can also be activated by parameter P 269[0] - MPRO_TAB_Ctrl bit 0.

MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact support the ""STO"" (Safe Torque Off) safety function in accordance with the requirements of EN ISO 13849-1 and EN 61800-5-2 / IEC/EN 62061 / IEC/EN 61508.

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|TAB0|(23)|Binary table index|2^0| |
|TAB1|(24)|Binary table index|2^1| |
|TAB2|(25)|Binary table index|2^2| |
|TAB3|(26)|Binary table index|2^3| |
|EGEAR|(27)|Start/Stop electronic gearing| | |
|REFANAEN|(28)|Enable analog reference| | |
|ENC|(29)|Use of ISD05 / ISD06 as encoder input (pulse count, pulse/direction).| | |
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge of DC link (using a braking resistor)| | |
|LIM_OFF|(37)|Limits off (torque and speed): Torque scaling (P 332[0] - CON_SCON_TmaxScale) and speed limiting (P 337[0] - CON_SCON_SmaxScale) will be disabled (ISDxx = ""high""). If the function is not parameterized to an input (ISDxx = ""low"") the limits are always active.| | |
|LOCK_POS|(38)|Lock positive direction: Reversing lock, positive direction (access also via MSD PLC).| | |
|LOCK_NEG|(39)|Lock negative direction: Reversing lock, negative direction (access also via MSD PLC).| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Used to manually switch the precharge relay (with 1000 ms delay) Use only after consultation with Moog.| | |
|SPINDLECLAMP_S1|(42)|Switch 1 input| | |
|SPINDLECLAMP_S2|(43)|Switch 2 input| | |
|SPINDLECLAMP_S3|(44)|Switch 3 input| | |
|SPINDLECLAMP_P|(45)|Clamping Pressurized input| | |
|SlaveBC|(46)|Brake chopper synchronization only on ISD05 and ISD06| | |
|USER2|(47)|Test case 47| | |
|START_PRC|(48)|Start process controller| | |

Table 9.2: Function selectors “Digital inputs” (continue)

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 293

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 294

# 9.2.4 Digital virtual inputs

Virtual inputs are digital software inputs actuated via MSD PLC or field bus. The virtual inputs P 111[0] - MPRO_INPUT_FS_ISV00 and P 112[0] - MPRO_INPUT_FS_ISV01 can use all digital functions which are also available to the real digital inputs.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|111|0|MPRO_INPUT_FS_ISV00| |Function selector ISV00|
|112|0|MPRO_INPUT_FS_ISV01| |Function selector ISV01|
|120|0|MPRO_INPUT_INV| |Digital input inversion: ENPO[0], ISD00..05[1..6], SH[7], ISD06[16]|

Table 9.4: “Digital virtual inputs” parameters

# 9.2.5 Status of the digital inputs

Clicking on the “Status of digital inputs” field on the input screen for the digital inputs will open a visualization showing the digital inputs’ states.

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|121|0|MPRO_INPUT_STATE| |Status of digital inputs|

Table 9.5: “Status of digital inputs” parameters

# 9.2.6 Control selector switching

The function selector (MPRO_INPUT_FS_ISDxx) assigns the digital inputs their functionality. Using the setting “MAN(14)=Switch control location selector"" here will make it possible to switch the control location via a terminal to the setpoint source selected in P 164[0] - MPRO_REF_SEL_MAN. This enables fast switching to manual control for setup or emergency running mode, for example.

When a digital input set to ""MAN(14)"" is activated, the control location P 159[0] - MPRO_REF_SEL = ""TERM"" switches (switch to ""TERM"" is not displayed in the Moog DRIVEADMINISTRATOR 5). In parallel, the reference source is set to the reference selected via parameter P 164[0] - MPRO_REF_SEL_MAN. The start signal must be connected to a digital input (ISD0x = Start). The control mode P 300[0] - CON_CfgCon cannot be switched. The ""MAN(14)"" mode is displayed in the field bus control word. It is not possible to switch to ""MAN"" mode

- when the power stage is active
- when the drive in the Moog DRIVEADMINISTRATOR 5 is operated via the manual mode window.

A level-triggered START P 144[0] - MPRO_DRVCOM_AUTO_START=LEVEL (1) is ignored in ""MAN"" mode. After activation of ""MAN"" mode, the START input must be reset. When ""MAN"" mode is ended the motor control also stops.

|P No.|Index|P Name / Setting|Unit|Function|
|---|---|---|---|---|
|164|0|MPRO_REF_Sel_MAN|Selection of motion profile| |
| | |OFF (0)|No profile selected| |
| | |ANA0(1)|Reference value of analog input ISA0| |
| | |ANA1(2)|Reference value of analog input ISA1| |
| | |TAB(3)|Reference from table| |
| | |PLC_BASIC(4)|Profile via PLC definition| |
| | |PLC(5)|Reference from PLC| |
| | |PARA(6)|Reference via parameter| |
| | |DS402(7)|Reference via CiA 402 IEC1131| |
| | |Sercos(8)|Reference via SERCOS| |
| | |PROFI(9)|Reference via PROFIBUS| |
| | |VARAN(10)|Reference via VARAN| |
| | |TWIN(11)|Reference via external option ""TWINsync""| |
| | |HYD(12)|Hydraulic profile (software-specific)| |

Image 9.4: Time diagram of sequences

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 295

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 296

|Command|System state|
|---|---|
|① Starting lockout|ISDSH Safe Standstill (STO)|
|② Ready for start|ENPO EnablePower|
|③ On|Bit (0) = START(1)|
|④ Active control|Active control|

NOTE

l The electrical connection is made via terminals X4/20 (ISD05) and X4/21 (ISD06).

# 9.2.8 Pulse direction

Pulse direction can be realized using the MSD PLC or EGEAR (electrical gearing). With EGEAR, control is carried out in the control mode “Term (1) via terminals” as follows.

# Setting the control mode

Setting of the manner in which the control is to be carried out. Invoke Motion profile -> Basic setting. Set “Term (1) = set via terminals” under “Control via.” The setting for the reference under “Reference via” is irrelevant.

# Parameter setting for speed/direction

Set parameter P 1400 (MPRO_TP_config) to “PC_PC(4)” (= TP0, pulse counter, TP1, pulse counter). The speed, but not the direction, can be changed.

Setting P 1400 (MPRO_TP_config) to “PD_UP(2)” (TP0, TP1 as encoder; pulse (TP0) / direction (TP1), count up on direction high) means both the speed and the direction can be changed. To find out which setting is possible, see the description of the parameter. Parameter P 1404 (MPRO_TP_Lines) is used to set the resolution (pulses/revolution).

# Setting the digital standard inputs ISD05 and ISD06

NOTE

l If P 1404 (MPRO_TP_Lines) is not set [factory setting is 1 pulse = 1 revolution], then the gear ratio is important for the speed of the rotor.

# 9 Inputs/Outputs settings

Set the synchronization mode to “EGEAR_PARA(4) = Electronic gearing via

Image 9.7: Pulse direction master configuration parameters.”

In the screen, select “Electric gearing.”

Set the gear ratio.

Image 9.6: Set the EGEAR pulse direction

Select “Master configuration” in the screen.

Image 9.8: Selecting the electric gearing pulse direction

Set the channel selection and anti-reverse mode.

Enable the function with “Start E-Gear.”

# Selection options:

|TP0(6)|Pulse counter on probe channel 1 (TP0)|
|---|---|
|TP1(7)|Pulse counter on probe channel 1 (TP1)|

NOTE

l  The signals ISD06 and ISD05 are HTL signals, which is why the voltage level must be greater than 20 V. The frequency must not be higher than 300 kHz.

MOOG                        ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp    297

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 298

# 9.3 Digital Outputs

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|122|0|MPRO_OUTPUT_FS_OSD00| |Function of digital output OSD00|
|123|0|MPRO_OUTPUT_FS_OSD01| |Function of digital output OSD01|
|124|0|MPRO_OUTPUT_FS_OSD02| |Function of digital output OSD02|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

Table 9.7: “Digital standard outputs” parameters

# 9.3.2 Function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|122-124|0|MPRO_OUTPUT_FS_OSDxx| |Function selectors for digital outputs|
| | |Off (0)| |No function|
| | |ERR (1)| |Collective error message|
| | |BRAKE (2)| |Motor brake: Output activated according to holding brake function|
| | |ACTIV (3)| |Power stage and control active|
| | |S_RDY (4)| |Device initialized: Output is activated when the device is initialized after power-on.|
| | |C_RDY (5)| |Control initialized: Output is activated when the device is ""Ready to switch on"" based on setting of the ""ENPO"" signal and no error message has occurred. Device ready - ReadyToSwitchOn flag in DriveCom status word set (in states 3, 4, 5, 6, 7)|
| | |REF (6)| |Target reached / Reference reached: The preset reference has been reached (dependent on control mode)|
| | |HOMATD (7)| |Homing point reached|
| | |E_FLW (8)| |Tracking error|
| | |ROT_R (9)| |Motor in standstill window when running right|
| | |ROT_L (10)| |Motor in standstill window when running left|
| | |ROT_0 (11)| |Motor in standstill window, depending on actual value|
| | |STOP (12)| |Drive in quickstop state|

Table 9.8: “Digital outputs” function selectors

# Table 9.8: “Digital outputs” function selectors (continue)

|ID|Index|Name / Setting|Unit|Description|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|---|---|---|---|---|
| |HALT (13)| | |The drive is in the HALT state: activated via CiA 402 profile, input or PROFIBUS IntermediateStop, SERCOS. Reaction according to HALT option code (P 2221[0] - MPRO_402_HaltOC).|COM_NC (40)| |Set output via field bus in NC cycle| | |
| |LIMIT (14)| | |Output is set when a reference value reaches its limit.|USER (41)| |Firmware-specific function| | |
| |T_GT_TX (15)| | |Torque greater than P 741[0]|TBREF (42)| |Selected table index executed (target reached)| | |
| |N_GT_NX (16)| | |Speed greater than P 740[0]|DS-TRIGGER (43)| |Digital Oscilloscope Trigger Event| | |
| |P_LIM_ACTIV (17)| | |Position reference limited (e.g. with parameterized software limit switches)|SM_REF (44)| |Target reached at synchronized motion| | |
| |N_LIM_ACTIV (18)| | |Speed reference limited|CAM_LINE_A (45)| |Cam switch track A| | |
| |T_LIM_ACTIV (19)| | |Torque reference limited|CAM_LINE_B (46)| |Cam switch track B| | |
| |(20)| | |Not defined|(47)| |Not defined| | |
| |ENMO (21)| | |Motor contactor output (if the motor is wired through a contactor)|(48)| |Not defined| | |
| |PLC (22)| | | |(49)| |Not defined| | |
| |WARN (23)| | |PLC sets output|(50)| |Not defined| | |
| |WUV (24)| | |Warning (Collective warning message) Warning: undervoltage in DC link|(51)| |Not defined| | |
| |WOV (25)| | |Warning: voltage overload in DC link|(52)| |Not defined| | |
| |WIIT (26)| | |Warning I2t power stage|(53)| |Not defined| | |
| |WOTM (27)| | |Warning overtemperature motor (only with KTY84-130, NTC, PT100 and PT1000)|(54)| |Brake chopper active state| | |
| |WOTI (28)| | |Servo Drive heat sink temperature warning|(55)| |Safe torque off (STO) active| | |
| |WOTD (29)| | |Servo Drive internal temperature warning|(56)| |Brake chopper error; triggered with negative edge| | |
| |WLIS (30)| | |Warning: current threshold reached|(57)| |Synchronous function of electronic gearing or cam active| | |
| |WLS (31)| | |Warning: speed threshold reached|(58)| |Logic link of “motor standstill” and ""Not Ready to Switch on"" state| | |
| |WIT (32)| | |Warning I2t motor protection|(59)| |Ready to switch on| | |
| |WLTQ (33)| | |Warning torque/force threshold reached|(60)| |Not defined| | |
| |TBACT (34)| | |Table positioning in ""AUTO"" and activated state|(61)| |Not defined| | |
| |TAB0 (35)| | |Actual table index 2^0|(62)| |Not defined| | |
| |TAB1 (36)| | |Actual table index 2^1|(63)| |Not defined| | |
| |TAB2 (37)| | |Actual table index 2^2|(64)| |Not defined| | |
| |TAB3 (38)| | |Actual table index 2^2|(65)| |Not defined| | |
| |COM_1MS (39)| | |Set output via field bus in 1 ms cycle|(70)| |Not defined| | |

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 299

# 9 Inputs/Outputs settings

MOOG                          ID No.:CB40859-001 Date:11/2020

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
| |(71)| | |Not defined|
| |(72)| | |Not defined|
| |(73)| | |Not defined|
|HYD_VAL_OPT1|(74)|Hydraulic control option 1|(software specific)| |
|HYD_VAL_OPT2|(75)|Hydraulic control option 2|(software specific)| |
|HYD_CYL_POS|(76)|Drive signal, extend hydraulic valve cylinder| | |
|HYD_CYL_NEG|(77)|Drive signal, retract hydraulic valve cylinder| | |
|HYD_LEAK_BYP|(78)|Drive signal, hydraulic valve bypass| | |
|HYD_VALVE_CD|(79)|Drive signal, hydraulic valve direction| | |
|DIS_ACT|(80)|switchover| |Fast discharge active|
|WBRC|(81)|Warning brake chopper overload| | |
|FR_ACT|(82)|Status “Fault reaction active”| | |
|F_ACT|(83)|Error active| | |
|ISD00|(84)|Status of ISD00| | |
|ISD01|(85)|Status of ISD01| | |
|ISD02|(86)|Status of ISD02| | |
|ISD03|(87)|Status of ISD03| | |
|ISD04|(88)|Status of ISD04| | |
|ISD05|(89)|Status of ISD05| | |
|ISD06|(90)|Status of ISD06| | |
|ISA00|(91)|Status of ISA00|(digital)| |
|ISA01|(92)|Status of ISA01|(digital)| |

# Table 9.8: “Digital outputs” function selectors (continue)

# 9.3.3 Relay outputs

- Relay output RELOUT1 is freely available, while the function of the second relay output, RELOUT2, is set and cannot be changed.
- There is a selector that can be used to assign a function to the relay output.
- Certain functions will only be available with specific function packages.

Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.

The relay output can be switched from “active-high” to “active-low” (bit 8 in P 142[0] - MPRO_OUTPUT_INV).

# NOTE

- Relay output RELOUT2 (P 127[0] - MPRO_OUTPUT_FS_RELOUT2) outputs the status of the STO function. Accordingly, it is set to ""SH_S"" and cannot be changed. Because of this, this output will not be shown on the screen.
- For basic information, as well as mandatory planning, wiring, commissioning and testing requirements for the STO function, see the “STO safety function description” for the MSD Servo Drive Single-Axis System, MSD Servo Drive Multi-Axis System and MSD Single-Axis Servo Drive Compact (ID No.: CB19388).

|ID|Index|Name|Unit|Description|
|---|---|---|---|---|
|126|0|MPRO_OUTPUT_FS_RELOUT1| |Function of digital output RELOUT1|
|127|0|MPRO_OUTPUT_FS_RELOUT2| |Function of dig. output RELOUT2 is fixed at 'Safety Hold'|
|142|0|MPRO_OUTPUT_INV| |Output inv. OSD0-2(0-2),MBRK(6),REL1/2(7/15),OED0-7(16-23)|

# Table 9.9: “Relay outputs” parameters

# 9.3.4 Digital input states

Clicking on the “Status of digital outputs” field on the input screen for the digital outputs will open a visualization showing the digital outputs’ states.

# 9 Inputs/Outputs settings

# Image 9.10: “Status of digital outputs” screen

# Image 9.11: Threshold definition

|ID|Index Name|Unit Description| |
|---|---|---|---|
|143|0|MPRO_OUTPUT_STATE|Status of digital outputs|

# Table 9.10: “Status of digital outputs” parameters

The ""LIMIT(14)"" function for a digital output signals when a setpoint has reached its limit. In this case the output is set. The limit values for maximum torque and maximum speed depend on the preset control system.

# 9.3.5 Reference reached REF(6)

If a digital output is set to “REF(6) = Target reached / Reference reached” for torque and speed control as well as positioning, a range can be defined in which the actual value may deviate from the reference without the ""Reference reached REF(6)"" message becoming inactive. Reference value fluctuations caused by reference input are thus taken into account.

# Torque control

Limit value monitoring becomes active when the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

# Speed control

Limit value monitoring becomes active when the speed reference value exceeds the maximum speed (see Section ""Limitations / Thresholds"" on page 310).

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 301

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020

# MSD ServoDrive - DeviceHelp 302

# Positioning

NOTE

Limit value monitoring becomes active when the speed reference exceeds the maximum speed or the torque reference exceeds the maximum torque (see Section ""Limitations / Thresholds"" on page 310).

Additional times for the typical contact chatter on a contactor must be taken into account when specifying the time for timer P 148[0] - MPRO_DRVCOM_ENMO_Time. They may be several hundred ms, depending on contactor.

# Infinite positioning/speed mode

Monitoring is activated in infinite positioning (speed mode) when the speed reference has been reached. If an ongoing positioning operation is interrupted with ""HALT"", the ""Reference reached"" message is not sent in this phase. The message only appears after the actual target position has been reached.

# 9.3.7 Switching with motor contactor

Switching in the power cable should only be carried out in a de-energized state. Failure to follow this requirement may result in problems and damage (e.g. overvoltage or overcurrent shutdowns, pitted contacts). To ensure currentless switching, the contacts of the motor contactor must be closed before enabling the power stage. In the opposite case the contacts must remain closed until the power stage has been switched off.

Corresponding safety time periods for the motor contactor switching must be implemented in the control sequence of the machine or else the special ""ENMO"" software function of the servo drive must be employed.

A power contactor in the motor supply line can be directly controlled by the servo drive via parameter P 125[0] - MPRO_OUTPUT_FS_MOTOR_BRAKE = ENMO(21).

The timer P 148[0] - MPRO_DRVCOM_ENMO_Time defines the on-and-off delay of the power contactor. Based on the time delay, the reference value is applied after the power contactor is active. If the power stage is switched off, the power contactor isolates the motor from the controller.

# 9.4 Analog Inputs

- P 428[0] - ISA00 and P 428[1] - ISA01 can be used to assign an offset to each analog input separately. For more details on how to use offsets, see Section ""Analog input scaling"" on page 305.
- P 429[0] - ISA00_gain and P 429[1] - ISA01_gain can be used to assign a gain factor to each analog input separately. For more details on how to use gain factors, see Section ""Analog input scaling"" on page 305.
- P 429[2] - ISA00_limMin and P 429[3] - ISA01_limMin can be used to assign a lower limit to each analog input separately.
- P 429[4] - ISA00_limMax and P 429[5] - ISA01_limMax can be used to assign an upper limit to each analog input separately.
- The analog inputs’ compensated, filtered, and normalized values will be available in P 407 - CON_ANA_Isaf.
- P 665[0] - DV_CAL_IsaType can be used to configure the analog inputs as voltage or current inputs. This setting will apply to both inputs.

Image 9.12: “Function selector of the analog inputs” screen

# NOTE

# 9.4.1 Standard analog inputs

- The parameters are reinitialized only after the control has been re-enabled or by a device restart.
- There is a selector that can be used to assign a function to each analog standard input (P 109[0] - MPRO_INPUT_FS_ISA00 and P 110[0] - MPRO_INPUT_FS_ISA01). Certain functions will only be available with specific function packages.
- Depending on the configured function, the “Options...” button may become enabled. If it is, this button can be used to switch to a different screen directly and define the function’s exact behaviour there.
- Every analog input can be smoothed with a freely configurable filter time (P 405[0] - CON_ANA_Filt0 and P 406[0] - CON_ANA_Filt1).
- P 427[0] - CON_ANA_CalibZero can be used to trigger a zero correction routine for both analog inputs. If you use this routine, there must not be any voltage at the inputs.

|ID|Index Name|Unit|Description|
|---|---|---|---|
|109|0|MPRO_INPUT_FS_ISA00|Function of analog input ISA00|
|110|0|MPRO_INPUT_FS_ISA01|Function of analog input ISA01|
|405|0|CON_ANA_Filt0|ms Analog input ISA00: Filter time constant|
|406|0|CON_ANA_Filt1|ms Analog input ISA01: Filter time constant|
|407| |CON_ANA_Isaf|Analog inputs: Values (filt, norm, comp)|
|407|0|ISA00|Compensated, filtered, normalized value|
|407|1|ISA01|Compensated, filtered, normalized value|
|427|0|CON_ANA_CalibZero|Analog inputs: Calibration of analog channel|
|428| |CON_ANA_Offset|offset @zero input Analog inputs: Offset|
|428|0|ISA00|V Voltage offset for input ISA00|
|428|1|ISA01|V Voltage offset for input ISA01|
|429| |CON_ANA_Gain|Analog inputs: Gain scaling|

Table 9.11: “Analog inputs” parameters

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 303

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG                             ID No.:CB40859-001 Date:11/2020                                                                                                 MSD ServoDrive    - DeviceHelp       304

|ID|Index Name|Unit Description|ID|Index Name / Setting|Unit Description|
|---|---|---|---|---|---|
|429|0|ISA00_gain|Gain scaling for input ISA00|REFV (-2)|Analog reference|
|429|1|ISA01_gain|Gain scaling for input ISA01|(-1)|Not defined|
|429|2|ISA00_limMin|Minimum value for input ISA00|Off (0)|No function|
|429|3|ISA01_limMin|Minimum value for input ISA01|START (1)|Start motor control|
|429|4|ISA00_limMax|Maximum value for input ISA00|INV (2)|Inverse reference value|
|429|5|ISA01_limMax|Maximum value for input ISA01| | |
|665|0|DV_CAL_IsaType|Analog inputs: Switch between current/voltage|STOP (3)|Execute quickstop|
| | | | |HALT (4)|Disable feed|
| | | | |LCW (5)|Limit switch positive direction|
| | | | |LCCW (6)|Limit switch negative direction|
| | | | |INCH_P (7)|Jog Positive|
| | | | |INCH_N (8)|Jog Negative|
| | | | |HOMST (9)|Start homing|
| | | | |HOMSW (10)|Reference switch|
| | | | |E_EXT (11)|External error|
| | | | |WARN (12)|External warning|
| | | | |RSERR (13)|Reset alarm|
| | | | |MAN (14)|Switch control location selector|
|109-110|0|MPRO_INPUT_FS_|“Analog inputs” “function selectors”|(15)|Not defined|
| | |PRC_REF (-14)|Process controller reference value|PLC (16)|Used in PLC|
| | |PRC_ACT (-13)|Process controller actual value|PLC_IR (17)|PLC interrupt|
| | |ENC_ANA (-12)|Analog encoder (on channel 4)|MP_UP (18)|Motor potentiometer Negative|
| | |MP_DOWN (19)|Motor potentiometer Positive|(20) - (20)|Not defined|
| | |HYD_Q_ACT (-10)|Hydraulic actual flow (software specific)|TBEN (21)|Enable selected table index|
| | |HYD_P_ACT2 (-9)|Hydraulic actual pressure on 2nd sensor|TBTEA (22)|Write actual position into selected table index|
| | |HYD_Q_REF (-8)|Hydraulic reference flow (software specific)|TAB0 (23)|Binary table index 2^0|
| | |HYD_P_ACT (-7)|Hydraulic actual pressure (software specific)|TAB1 (24)|Binary table index 2^1|
| | |HYD_P_REF (-6)|Hydraulic reference pressure (software specific)|TAB2 (25)|Binary table index 2^2|
| | |VFC_REF_SCALE (-5)|VFC reference scaling 0-100% (software specific)|TAB3 (26)|Binary table index 2^3|
| | |TLIM (-4)|Analog torque limit 0-100%|EGEAR (27)|Start / stop Egear|
| | |OVR (-3)|Speed override 0-100% at positioning|(30)|Not defined|

# Table 9.11: “Analog inputs” parameters (continue)

# Table 9.12: “Analog inputs” function selectors

|ID|Index|Name / Setting|Unit|Description|
|---|---|---|---|---|
|(31)| |Not defined| |Change to input voltage range of analog torque scaling|
|(32)| |Not defined| |Change to input voltage range of speed override function|
|(33)| |Not defined| |Change to switching threshold of a digital input function|
|JOG_EXT_POS|(34)|Jog Positive (extended mode)| | |
|JOG_EXT_NEG|(35)|Jog Negative (extended mode)| | |
|FAST_DISC|(36)|Fast discharge| | |
|LIM_OFF|(37)|Limits (torque and velocity) off| | |
|LOCK_POS|(38)|Lock positive direction| | |
|LOCK_NEG|(39)|Lock negative direction| | |
|BRAKE_ON|(40)|Switch off motor break at once| | |
|PWR_REL_DIRECT|(41)|Direct activation of power relay (with 1000ms delay)| | |
|(42)| |Undocumented value| | |
|(43)| |Undocumented value| | |
|(44)| |Undocumented value| | |
|(45)| |Undocumented value| | |
|(46)| |Undocumented value| | |
|(47)| |Undocumented value| | |
|(48)| |Undocumented value| | |

# Table 9.12: “Analog inputs” function selectors (continue)

# 9.4.3 Analog input scaling

Analog input scaling makes it possible to convert the analog input value to the process variable by using a gain factor, offset and backlash. The illustration shows how the scaling function works. Entering the desired voltage ranges will yield the values for the offset (P 428 - CON_ANA_Offset) and gain (P 429 - CON_ANA_Gain).

Example: Analog torque scaling:

The standard setting for the controller is an input voltage range of 0 V to +10 V, corresponding to 0% to 100%. With this setting, any value between -10 V and 0 V corresponds to 0%.

Depending on the function selected for the ISAxx analog input with the function selector, it will be possible to use the “Options...” button to configure additional process variables such as “the backlash in rev/min” (when using an analog setpoint, REFV).

Say that you want an input voltage range of -10 V to +10 V, in which case -10 V would correspond to 0% of the torque and +10 V to 100% of the torque.

Inmin = -10 V, Outmin = 0 V

Inmax = +10 V, OUTmax = +10 V

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 305

# 9 Inputs/Outputs settings

# 9 Inputs/Outputs settings

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 306

# 9.4.4 Profile mode and analog inputs

Parameter P 301[0] - CON_REF_Mode determines whether the reference values are processed via the profile generator (setting “PG(0)”) or directly (setting “IP(1)”). If direct input via IP mode is selected, only the input filters are active. The analog values are scanned and filtered in the torque control cycle and then directly transferred as references for the speed or torque control.

CAUTION! Your system/motor may be damaged if put into operation in an uncontrolled or inappropriate manner. Improper conduct can cause damage to your system/machine.

Before the “Start” step, make absolutely sure that a valid setpoint has been entered, as the configured setpoint will be immediately transmitted to the motor after the motor control function starts, which may result in the motor accelerating unexpectedly.

# 9.4.5 Wire Break Monitoring

P 399 - CON_ANA_WireBrk_Th is used to define the wire break monitoring threshold (in V) (parameter index [0] for ISA00, parameter index [1] for ISA01). If the voltage falls below this limit an error message is generated. The error response can be configured using P 30[52] - Reac_Ana (see Section ""Error reactions"" on page 325).

|ID|Index Name|Unit|Description|
|---|---|---|---|
|399|CON_ANA_WireBrk_Th| |Analog inputs: Cable break detection limits|
|399|ISA00|V|Cable break detection limit for analog input ISA00|
|399|ISA01|V|Cable break detection limit for analog input ISA01|

NOTE

- If the analog inputs are used as feedback for control circuits, they will be sampled every 125 μs.
- If functions are assigned to the analog inputs using P 109[0]/P 110[0], the inputs will be sampled every 1 ms.
- By switching parameter P 301[0] - CON_REF_Mode from PG(0) to IP(1) mode, an analog input can be used as a ""fast input"" (e.g. Touch probe). ",What is the purpose of the motor brake output in the MSD ServoDrive?,A5,"A key feature of the MSD ServoDrive is its motor brake output, which provides the necessary interface for controlling the motor's built-in brake system.",2.28125,2.421875,3.421875,1.515625,0.369140625
