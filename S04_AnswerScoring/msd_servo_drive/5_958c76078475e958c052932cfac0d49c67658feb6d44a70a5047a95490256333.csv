,NODE_FILE_NAME,NODE_NUMBER,NODE_HASH,NODE_TEXT,Q,A_NUMBER,A,helpfulness,correctness,coherence,complexity,verbosity
0,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",How can the encoder be configured during the initial commissioning of the MSD ServoDrive?,A1,By selecting from a database of standard models or manually configuring additional settings via the 'Settings...' button.,1.1875,1.1484375,3.140625,1.1875,0.251953125
1,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",How can the encoder be configured during the initial commissioning of the MSD ServoDrive?,A2,Configuring the encoder involves choosing from a predefined database or manually adjusting settings for non-standard models.,1.5859375,1.6640625,3.328125,1.3828125,0.291015625
2,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",How can the encoder be configured during the initial commissioning of the MSD ServoDrive?,A3,Users can either pick an encoder from the available database or manually set up configurations for unique requirements.,1.8125,1.8046875,3.4375,1.21875,0.294921875
3,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",How can the encoder be configured during the initial commissioning of the MSD ServoDrive?,A4,The encoder is configured by selecting a model from the database or by manually entering settings for custom configurations.,1.9609375,2.0,3.40625,1.453125,0.271484375
4,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",How can the encoder be configured during the initial commissioning of the MSD ServoDrive?,A5,Options include database selection for standard encoders or manual configuration for specialized needs through the settings button.,1.5078125,1.46875,3.203125,1.34375,0.455078125
5,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",How can the initial commissioning wizard be manually started in Moog DRIVEADMINISTRATOR 5?,A1,By double-clicking on the pictogram in the chapter overview or via ►Project tree ►Device setup ►Initial commissioning.,1.453125,1.4609375,3.265625,1.2578125,0.6953125
6,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",How can the initial commissioning wizard be manually started in Moog DRIVEADMINISTRATOR 5?,A2,"Manually start the wizard by accessing it through the project tree under Device setup and Initial commissioning, or by double-clicking its pictogram.",2.4375,2.390625,3.53125,1.484375,0.71875
7,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",How can the initial commissioning wizard be manually started in Moog DRIVEADMINISTRATOR 5?,A3,"If not automatically prompted, the wizard can be initiated manually from the project tree or by double-clicking its designated pictogram.",1.8203125,1.921875,3.453125,1.4921875,0.625
8,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",How can the initial commissioning wizard be manually started in Moog DRIVEADMINISTRATOR 5?,A4,"Start the wizard manually by navigating through the project tree to Device setup and Initial commissioning, or by double-clicking its icon.",2.40625,2.46875,3.53125,1.3828125,0.71484375
9,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",How can the initial commissioning wizard be manually started in Moog DRIVEADMINISTRATOR 5?,A5,The wizard can be manually launched either by double-clicking its pictogram or through the project tree under Device setup and Initial commissioning.,2.8125,2.859375,3.609375,1.5703125,0.72265625
10,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",How is the encoder offset determined in the MSD ServoDrive initial commissioning?,A1,"After confirming the safety notice, the wizard activates to determine the encoder offset, indicating success with a green tick.",0.671875,0.5078125,2.828125,0.96484375,0.53515625
11,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",How is the encoder offset determined in the MSD ServoDrive initial commissioning?,A2,"The process involves acknowledging safety information before the wizard proceeds to find the encoder offset, marked by a green check upon completion.",0.95703125,0.8359375,3.015625,1.1875,0.5859375
12,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",How is the encoder offset determined in the MSD ServoDrive initial commissioning?,A3,"Determining the encoder offset requires safety confirmation, after which the wizard executes the process, signaling completion with a green tick.",1.0625,1.0078125,3.046875,1.265625,0.578125
13,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",How is the encoder offset determined in the MSD ServoDrive initial commissioning?,A4,"Following safety prompts, the wizard calculates the encoder offset, with successful determination shown by a green check-mark.",1.1796875,1.171875,3.0625,1.2265625,0.5703125
14,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",How is the encoder offset determined in the MSD ServoDrive initial commissioning?,A5,"The encoder offset is identified post-safety notice confirmation, with a green tick displayed once successfully determined.",1.34375,1.375,3.203125,1.15625,0.423828125
15,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What are the hardware requirements for initial commissioning of the MSD ServoDrive?,A1,"Correct assembly and installation, 24 V control voltage, mains voltage, hardware enable for Safe Standstill (ISDSH), and Enable Power (ENPO).",2.4375,2.484375,3.578125,1.4453125,0.6015625
16,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What are the hardware requirements for initial commissioning of the MSD ServoDrive?,A2,"Requirements include proper installation, 24V control and mains voltage supplies, and enabling Safe Standstill and Power.",1.75,1.7109375,3.375,1.3671875,0.34765625
17,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What are the hardware requirements for initial commissioning of the MSD ServoDrive?,A3,"Necessary hardware includes correct installation, two voltage supplies (24V control and mains), and two hardware enables (ISDSH and ENPO).",2.03125,1.96875,3.359375,1.390625,0.478515625
18,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What are the hardware requirements for initial commissioning of the MSD ServoDrive?,A4,"For initial commissioning, ensure the drive is correctly installed, has 24V and mains power, and Safe Standstill and Enable Power are activated.",1.9140625,2.015625,3.46875,1.2265625,0.62890625
19,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What are the hardware requirements for initial commissioning of the MSD ServoDrive?,A5,"The drive must be properly installed with 24V control and mains voltage available, and Safe Standstill and Enable Power hardware enables set.",1.71875,1.671875,3.28125,1.2890625,0.474609375
20,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What control modes can be selected for the MSD ServoDrive during initial commissioning?,A1,"The device offers various control modes selectable via the 'Initial Commissioning - Control' screen, with options for basic and advanced settings.",1.046875,1.078125,2.953125,1.1953125,0.2041015625
21,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What control modes can be selected for the MSD ServoDrive during initial commissioning?,A2,"During commissioning, users can choose from multiple control modes, accessible through the control screen for both basic and advanced configurations.",1.1875,1.2265625,3.046875,1.1796875,0.1572265625
22,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What control modes can be selected for the MSD ServoDrive during initial commissioning?,A3,"Selection of control modes is available in the control screen, offering choices from basic to advanced operational settings.",0.5859375,0.54296875,2.984375,0.9453125,0.220703125
23,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What control modes can be selected for the MSD ServoDrive during initial commissioning?,A4,"The commissioning process includes selecting desired control modes from the control screen, catering to both simple and complex setup needs.",0.87890625,0.93359375,3.03125,1.1796875,0.58203125
24,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What control modes can be selected for the MSD ServoDrive during initial commissioning?,A5,"Users have the flexibility to select from a range of control modes during commissioning, with options tailored to various application requirements.",1.1640625,1.3515625,3.125,1.1953125,0.298828125
25,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What is the purpose of the 'Enhanced >>' button in the motor commissioning screen?,A1,"It provides advanced support for setting up current, torque, speed, and position controllers, with options for further optimization.",2.296875,2.421875,3.75,1.2578125,0.58984375
26,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What is the purpose of the 'Enhanced >>' button in the motor commissioning screen?,A2,The button offers additional assistance in configuring various controllers and accessing detailed screens for further adjustments.,1.65625,1.578125,3.359375,1.09375,0.45703125
27,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What is the purpose of the 'Enhanced >>' button in the motor commissioning screen?,A3,"Enables access to advanced settings for controllers, allowing for detailed configuration and optimization.",2.515625,2.5625,3.65625,1.140625,0.5859375
28,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What is the purpose of the 'Enhanced >>' button in the motor commissioning screen?,A4,"Facilitates deeper configuration of motor controls, including current, torque, speed, and position, with links to more detailed screens.",2.625,2.796875,3.78125,1.328125,0.625
29,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What is the purpose of the 'Enhanced >>' button in the motor commissioning screen?,A5,"Activates advanced features for controller setup, providing pathways to more comprehensive configuration options.",2.6875,2.765625,3.796875,1.1796875,0.43359375
30,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What is the purpose of the initial commissioning wizard in the MSD ServoDrive?,A1,The initial commissioning wizard guides users through setting up the initial configuration for the MSD ServoDrive to enable controlled movement of the connected motor.,2.828125,2.921875,3.59375,1.4140625,0.53515625
31,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What is the purpose of the initial commissioning wizard in the MSD ServoDrive?,A2,"Its purpose is to ensure the drive is correctly configured for operation, including parameter settings that allow for motor movement via manual mode.",2.484375,2.5,3.578125,1.390625,0.68359375
32,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What is the purpose of the initial commissioning wizard in the MSD ServoDrive?,A3,"To facilitate the initial setup of the MSD ServoDrive by presenting configuration options in a clear, step-by-step manner.",2.90625,2.984375,3.65625,1.3359375,0.6328125
33,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What is the purpose of the initial commissioning wizard in the MSD ServoDrive?,A4,The wizard is designed to make the initial commissioning process manageable by systematically guiding through necessary configurations.,2.578125,2.765625,3.609375,1.203125,0.458984375
34,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What is the purpose of the initial commissioning wizard in the MSD ServoDrive?,A5,For enabling the MSD ServoDrive to move the connected motor by correctly setting initial parameters and configurations.,2.390625,2.5,3.46875,1.1953125,0.50390625
35,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What is the purpose of the motor phase test during initial commissioning?,A1,To monitor motor wiring and verify that encoder and resolver settings match the motor's pole pairs.,1.5703125,1.8203125,3.34375,1.1484375,0.291015625
36,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What is the purpose of the motor phase test during initial commissioning?,A2,The test checks motor wiring and ensures encoder/resolver parameter settings align with the motor's pole pairs.,1.9765625,2.0625,3.453125,1.296875,0.44140625
37,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What is the purpose of the motor phase test during initial commissioning?,A3,It verifies correct motor wiring and that the encoder pulses per revolution and resolver pole pairs match the motor's configuration.,2.28125,2.46875,3.609375,1.3671875,0.482421875
38,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What is the purpose of the motor phase test during initial commissioning?,A4,Ensuring motor wiring is correct and that encoder and resolver settings are properly matched to the motor's specifications.,2.28125,2.375,3.5,1.25,0.58984375
39,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What is the purpose of the motor phase test during initial commissioning?,A5,To confirm motor wiring integrity and that encoder and resolver parameters correctly correspond to the motor's pole pairs.,2.296875,2.546875,3.578125,1.3203125,0.44140625
40,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What options are available for motor configuration during initial commissioning?,A1,"Options include selecting a motor from Moog's database, manual motor settings, configuring motor protection, and setting up a motor brake.",2.46875,2.6875,3.75,1.3203125,0.6796875
41,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What options are available for motor configuration during initial commissioning?,A2,"Users can choose a Moog motor, manually configure a different motor, set up motor protection, or configure a motor brake.",2.546875,2.546875,3.765625,1.1953125,0.6484375
42,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What options are available for motor configuration during initial commissioning?,A3,"Configuration choices encompass selecting from Moog motors, manual settings for other motors, protection mechanisms, and brake configuration.",2.40625,2.484375,3.609375,1.265625,0.546875
43,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What options are available for motor configuration during initial commissioning?,A4,"Available configurations involve database motor selection, manual motor setup, protection settings adjustment, and brake output configuration.",2.4375,2.546875,3.65625,1.1875,0.51171875
44,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What options are available for motor configuration during initial commissioning?,A5,"Motor setup options range from selecting predefined models to manual configuration, including protection and brake settings.",2.03125,2.21875,3.515625,1.1953125,0.314453125
45,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What steps are involved in the commissioning wizard for the MSD ServoDrive?,A1,"Steps include setting switching frequency and voltage supply, selecting motor type, setting motor movement, identification, data set calculation, and more.",1.7109375,1.8203125,3.53125,1.2734375,0.640625
46,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What steps are involved in the commissioning wizard for the MSD ServoDrive?,A2,"The wizard involves configuring power stage settings, motor type and movement, performing identification and data set calculation, among other steps.",1.6953125,1.875,3.5625,1.2734375,0.54296875
47,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What steps are involved in the commissioning wizard for the MSD ServoDrive?,A3,"Commissioning steps cover power stage configuration, motor setup, electrical parameter measurement, and control settings calculation.",1.765625,1.90625,3.375,1.2890625,0.474609375
48,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What steps are involved in the commissioning wizard for the MSD ServoDrive?,A4,"From setting voltage supplies to calculating control settings and selecting temperature sensors, the wizard covers comprehensive setup steps.",1.1875,1.21875,3.125,1.109375,0.470703125
49,msd_servo_drive.txt,5,958c76078475e958c052932cfac0d49c67658feb6d44a70a5047a95490256333,"- For proper functional capability of the complete machine.

3    Initial commissioning

 Chapter overview
 Pictogram


 Navigation              ►Project tree ►Device setup ►Initial commissioning
 Brief description           l  The initial commissioning for the drive can be
                                carried out with the help of a wizard. The wizard
                                will take you through the process step-by-step,
                                ensuring that the available configuration options
                                are presented in a clear and manageable manner.
                             l  This chapter describes how the initial
                                commissioning wizard works. This wizard is used
                                to set up the initial configuration for the MSD Servo
                                Drive and make it possible to move the connected
 Contents                       motor.
                         3.1 Initial Commissioning wizard                     17
                         3.2 Automatic test                                   22
                         3.3 Motor                                            23
                         3.4 Encoder                                          24
                         3.5 Control                                          24
MOOG                       ID No.:CB40859-001 Date:11/2020
3    Initial commissioning
3.1     Initial Commissioning wizard
The wizard guides you through the subject areas that are relevant for the initial
commissioning. Correct setting of the parameters permits controlled movement of
the drive via the manual mode window (for details see Section ""Manual mode"" on
page 449). Further settings must be made to exactly adapt the drive system to an
application.
3.1.1 Hardware requirements

    l  Correct assembly and installation, in line with the intended use, as per the
       instructions in the applicable operation manual (see Section ""Applicable
       documentation"" on page 12).
    l  Voltage supplies
           o  24 V control voltage
           o  Mains voltage

    l  Hardware enable
           o  Safe Standstill (ISDSH)
           o  Enable Power (ENPO)

3.1.2 Prompt Initial commissioning
If the Moog DRIVEADMINISTRATOR 5 is opened without an existing project, a prompt to
undertake initial commissioning appears automatically.

                                             MSD ServoDrive - DeviceHelp    17

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.1.3 Initial commissioning

Image 3.1: Prompt to activate wizard

If this window does not open automatically, you can also start the wizard manually by double-clicking on the pictogram (see “Chapter overview” in Section ""Initial commissioning"" on page 17) or via ►Project tree ►Device setup ►Initial commissioning.

Image 3.2: Commissioning wizard

# Step

# Subject area

# Action

# Instruction

|1.|Set the switching frequency and the voltage supply of the power stage.|Matching the voltage supply to the clock frequency|Set the motor type (P 450[0]) to ""PSM(1)|
|---|---|---|---|
|2.|Select the motor type (P 450[0])|Permanent magnet synchronous motor|Selection of motor type|
|3.|Set (P 490[0]) motor movement to “ROT (0) = rotating motor”|Set (P 490[0]) motor movement to “LIN (1) = linear motor”|Selection of motor system|
|4.|Identification:|- Measurement of electrical parameters (resistance, inductivity)
- Current controller tuning
- Calculation of nominal flux
|Identification or calculation of motor data set|
|5.|Data set calculation:|- Complete ""Calculation of control settings"" screen and start the calculation
- Set the I2xt monitor
| |
|6.|Select of temperature sensor|Motor protection| |
| |Characteristic setting| | |
| |Encoder selection|Encoder setting| |
| |Channel selection| | |

Table 3.1: Instructions for the commissioning wizard

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 19

# Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 20

|Step|Subject area|Action|Instruction|
|---|---|---|---|
|7.|Rotary motor|- Motor phase test
- Determine encoder offset
- Determine mass inertia
|Open manual mode window|
|8.|Linear motor|- Control type V/Hz (open loop) operation
- Move motor at low speed
- Check direction
- Optimize current controller (test signal generator). When there is a motor data set the current of the test signal generator is set automatically.
- Optimizing the speed controller
|Motor test in manual mode without intervention of a higher-level PLC|
|9.| |- Determine mass inertia [J] (basic settings)
- Set speed filter: P 0351 CON_SCALC_TF = (0,6 ms)
- Recommendation, Sin/Cos encoder 0.2 ms - 0.6 ms
- Recommendation, resolver: 1 ms - 2 ms
- Adjust control parameters to suit the mechanism (set stiffness).
|- Current Controller
- Speed controller
- Position controller
|
|10.| |- Units
- Reference source
- Reference processing
- Stop ramps
- Homing method
|Motion profile setting|

Table 3.1: Instructions for the commissioning wizard (continue)

# Step

# Subject area

# Action

# Instruction

|11.|Torque|Define limits|Rotary motor|
|---|---|---|---|
| | |Linear motor| |
| | |Limits:| |
|12.|Speed|Set marginal conditions. For more information refer to the User Manuals for the individual bus systems.|CANopen|
| | |Position|PROFIBUS|
| | |SERCOS| |
|13.|13.|13.|Saving the settings and creating a commissioning file| | |
| | | |For more information on data handling refer to the Moog DRIVEADMINISTRATOR 5 help.| | |

Table 3.1: Instructions for the commissioning wizard (continue)

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 21

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 22

# 3.2 Automatic test

To be able to run the automatic tests, you will need to read and confirm the safety prompts. Once you are done doing so, you will be able to run the individual tests.

Image 3.4: “Initial Commissioning - Automatic tests” screen

# Motor phase test

A motor phase check has been implemented which permits monitoring of the motor wiring. It also checks whether the parameter setting of the pulses per revolution of the encoder and the number of pole pairs of the resolver match the number of pole pairs of the motor. When it has been successfully determined, a green tick (check-mark) is displayed. Disable motor brake during the motor phase test.

# Determining the encoder offset

Once the safety notice window has been confirmed, the wizard is activated to determine the encoder offset. When it has been successfully determined, a green tick (check-mark) is displayed.

Image 3.3: Safety information

# 3.3 Motor

Once the safety notice window has been confirmed, the wizard is activated to determine the mass inertia. When it has been successfully determined, a green tick (check-mark) is displayed.

See also Section ""Automatic inertia detection"" on page 111.

# Enhanced >>

When you click the “Enhanced >>"" button, the wizard provides you with support in setting up the current, torque, speed and position controllers. If further optimization is required, the controller buttons route you to more detailed screens.

Image 3.5: “Initial Commissioning - Motor data and control settings” screen

- You can click on the ""Select motor data set"" to select a motor from Moog.
- If you want to use a different motor, you can configure it by clicking on the ""Manual motor settings"" button. For details see Section ""Motor configuration data"" on page 32.
- If you need to configure the temperature and current monitoring mechanism, click on the ""Motor protection"" button. For details see Section ""Motor protection"" on page 40.
- To configure a motor brake, click on the ""Motor brake"" button. For details see Section ""Motor brake output"" on page 308.

MOOG ID No.:CB40859-001 Date:11/2020

MSD ServoDrive - DeviceHelp 23

# 3 Initial commissioning

# 3 Initial commissioning

MOOG ID No.:CB40859-001 Date:11/2020

# 3.4 Encoder

Image 3.6: “Initial commissioning - Encoder selection” screen

- There is a database available for commissioning the encoder. This database can be used to select from a large number of standard models.
- If you are unable to find your encoder model or want to configure additional settings, click on the ""Settings..."" button. For details see Section ""Encoder selection"" on page 53.

# 3.5 Control

Image 3.7: “Initial Commissioning - Control” screen

- You can use this screen to select the control mode for the device.
- To determine the system’s inertia and configure position and speed control settings, click on the ""Basic settings"" button. For details see Section ""Basic settings"" on page 110.
- To access the “Control” screen, click on the ""Advanced >>"" button. For details see Section ""Basic settings"" on page 110.

# 4 Power stage

# Chapter overview

Pictogram

Navigation &nbsp;&nbsp;&nbsp;&nbsp; ►Project tree ►Device setup ►Power stage

Brief description &nbsp;&nbsp;&nbsp;&nbsp; This chapter describes the configuration options for the power stage (power supply, switching frequency, power failure bridging).

Contents

- 4.1 Power stage settings &nbsp;&nbsp;&nbsp;&nbsp; 25
- 4.2 Power failure bridging &nbsp;&nbsp;&nbsp;&nbsp; 28

Image 4.1: “Power stage settings” screen AC device

The power stages of the Servo Drive can be operated with different voltages and switching frequencies. The list boxes in the screen are used to adapt the power stage to the application conditions.

NOTE

- Any changes to parameters must be saved in the device.
- The setting is only applied on the device after a power off/on cycle.
- If the power stage parameters are changed, the rated currents, overload values and brake chopper thresholds may also change.

MOOG &nbsp;&nbsp;&nbsp;&nbsp; ID No.:CB40859-001 Date:11/2020 &nbsp;&nbsp;&nbsp;&nbsp; MSD ServoDrive - DeviceHelp &nbsp;&nbsp;&nbsp;&nbsp; 25

# 4 Power stage

MOOG ID No.:CB40859-001 Date:11/2020 MSD ServoDrive - DeviceHelp 26

# 4.1.1 Voltage supply

Step0: No reduction of the switching frequency (the operating switching frequency from P 302 is used).

P 307[0] - CON_VoltageSupply is used to configure the power supply. For single-axis applications only the settings (0) to (5) are allowed. ",What steps are involved in the commissioning wizard for the MSD ServoDrive?,A5,"The process includes initial settings, motor and encoder configuration, control adjustments, and saving the settings for operation.",1.8984375,2.015625,3.546875,1.1171875,0.53515625
