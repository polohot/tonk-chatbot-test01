,NODE_FILE_NAME,NODE_NUMBER,NODE_HASH,NODE_TEXT,Q,A_NUMBER,A,helpfulness,correctness,coherence,complexity,verbosity
0,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",How does the CPU react if the update fails in the 'SIMATIC PCS 7 Process Control System CPU 410 Process Automation' manual?,A1,The CPU continues in solo mode and retries updating the reserve CPU after the specified wait time.,2.1875,2.34375,3.671875,1.3828125,0.470703125
1,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",How does the CPU react if the update fails in the 'SIMATIC PCS 7 Process Control System CPU 410 Process Automation' manual?,A2,"On failure, it operates solo and attempts reserve CPU update again post wait time.",1.4296875,1.6328125,3.515625,1.1875,0.384765625
2,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",How does the CPU react if the update fails in the 'SIMATIC PCS 7 Process Control System CPU 410 Process Automation' manual?,A3,Failure leads to solo mode operation with a subsequent update attempt after waiting.,1.859375,2.046875,3.421875,1.3125,0.3125
3,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",How does the CPU react if the update fails in the 'SIMATIC PCS 7 Process Control System CPU 410 Process Automation' manual?,A4,"The CPU persists in solo mode, delaying before reattempting to update the reserve CPU.",1.71875,1.9296875,3.546875,1.2265625,0.474609375
4,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",How does the CPU react if the update fails in the 'SIMATIC PCS 7 Process Control System CPU 410 Process Automation' manual?,A5,Solo mode continuation followed by a delayed update retry is the CPU's failure response.,2.125,2.5,3.53125,1.28125,0.380859375
5,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",How is the PROFIsafe address (F_DEST_ADD) set for F-signal modules in 'Compendium Part B - Process Safety (V9.0)'?,A1,"F_DEST_ADD is set via DIP switches on the module, representing its binary address, unique across network and station.",1.1015625,1.296875,3.28125,1.5390625,0.2138671875
6,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",How is the PROFIsafe address (F_DEST_ADD) set for F-signal modules in 'Compendium Part B - Process Safety (V9.0)'?,A2,"By configuring DIP switches to match the binary form of F_DEST_ADD, ensuring network and station uniqueness.",1.1328125,1.1484375,3.171875,1.59375,0.3984375
7,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",How is the PROFIsafe address (F_DEST_ADD) set for F-signal modules in 'Compendium Part B - Process Safety (V9.0)'?,A3,"DIP switch settings on the module encode F_DEST_ADD in binary, requiring uniqueness in the network and station.",1.296875,1.375,3.21875,1.609375,0.341796875
8,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",How is the PROFIsafe address (F_DEST_ADD) set for F-signal modules in 'Compendium Part B - Process Safety (V9.0)'?,A4,F_DEST_ADD is manually set using DIP switches to a unique binary value for the module's identification.,1.3984375,1.4609375,3.296875,1.4765625,0.25
9,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",How is the PROFIsafe address (F_DEST_ADD) set for F-signal modules in 'Compendium Part B - Process Safety (V9.0)'?,A5,"Setting involves adjusting DIP switches to the binary equivalent of F_DEST_ADD, guaranteeing unique module identification.",0.91796875,0.90234375,3.09375,1.546875,0.310546875
10,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What are the consequences of incorrect 'Maximum disabling time for priority classes > 15' settings in 'Compendium Part B - Process Safety (V9.0)'?,A1,"Incorrect settings may prevent adherence to F-monitoring times or unsuccessful update attempts, with specific error messages.",1.7421875,1.7734375,3.390625,1.5234375,0.484375
11,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What are the consequences of incorrect 'Maximum disabling time for priority classes > 15' settings in 'Compendium Part B - Process Safety (V9.0)'?,A2,"Errors can lead to non-compliance with F-monitoring times or failed updates, indicated by messages.",1.65625,1.7265625,3.3125,1.34375,0.322265625
12,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What are the consequences of incorrect 'Maximum disabling time for priority classes > 15' settings in 'Compendium Part B - Process Safety (V9.0)'?,A3,"Miscalculations risk F-monitoring time violations or update failures, flagged by system alerts.",1.359375,1.40625,3.328125,1.328125,0.302734375
13,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What are the consequences of incorrect 'Maximum disabling time for priority classes > 15' settings in 'Compendium Part B - Process Safety (V9.0)'?,A4,"Wrong values might cause F-monitoring time breaches or update issues, with diagnostic messages.",1.9296875,1.9375,3.40625,1.3671875,0.365234375
14,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What are the consequences of incorrect 'Maximum disabling time for priority classes > 15' settings in 'Compendium Part B - Process Safety (V9.0)'?,A5,"Faulty settings could result in unmet F-monitoring times or update problems, signaled by warnings.",1.703125,1.8828125,3.328125,1.3515625,0.3671875
15,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What are the software requirements for using PROFINET with S7 F Systems as per 'Compendium Part B - Process Safety (V9.0)'?,A1,"PCS 7 V8.0 SP2 or higher, S7 F Systems V6.1 SP1 or higher, S7 F Systems Lib V1_3, and S7 F Configuration Pack V5.5 SP11 or higher.",1.6875,1.671875,3.34375,1.5859375,0.55078125
16,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What are the software requirements for using PROFINET with S7 F Systems as per 'Compendium Part B - Process Safety (V9.0)'?,A2,"Minimum versions: PCS 7 V8.0 SP2, S7 F Systems V6.1 SP1, S7 F Systems Lib V1_3, S7 F Configuration Pack V5.5 SP11.",2.3125,2.46875,3.375,1.6484375,0.55078125
17,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What are the software requirements for using PROFINET with S7 F Systems as per 'Compendium Part B - Process Safety (V9.0)'?,A3,"Required: PCS 7  V8.0 SP2, S7 F Systems  V6.1 SP1, S7 F Systems Lib  V1_3, S7 F Configuration Pack  V5.5 SP11.",2.203125,2.265625,3.421875,1.59375,0.57421875
18,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What are the software requirements for using PROFINET with S7 F Systems as per 'Compendium Part B - Process Safety (V9.0)'?,A4,"Software must include PCS 7 from V8.0 SP2, S7 F Systems from V6.1 SP1, Lib from V1_3, Configuration Pack from V5.5 SP11.",1.9609375,2.03125,3.3125,1.5625,0.54296875
19,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What are the software requirements for using PROFINET with S7 F Systems as per 'Compendium Part B - Process Safety (V9.0)'?,A5,"Necessary software: PCS 7 V8.0 SP2+, S7 F Systems V6.1 SP1+, S7 F Systems Lib V1_3+, S7 F Configuration Pack V5.5 SP11+.",1.96875,2.140625,3.375,1.609375,0.498046875
20,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What are the times T1 to T4 relevant to the update process in the 'SIMATIC High Availability Systems S7-400H' manual?,A1,T1: End of active OBs up to priority class 15. T2: Stopping of all communication functions. T3: End of cyclic interrupt OB with special handling. T4: End of copying of outputs to reserve CPU.,2.453125,2.75,3.5625,1.6484375,0.77734375
21,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What are the times T1 to T4 relevant to the update process in the 'SIMATIC High Availability Systems S7-400H' manual?,A2,"The times are: T1 for active OBs end, T2 for communication halt, T3 for special OB handling end, and T4 for output copying completion to the reserve CPU.",2.234375,2.421875,3.625,1.5703125,0.5859375
22,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What are the times T1 to T4 relevant to the update process in the 'SIMATIC High Availability Systems S7-400H' manual?,A3,"In 'SIMATIC High Availability Systems S7-400H', T1 marks the end of active OBs for priority 15, T2 stops communications, T3 ends special cyclic interrupt OB handling, and T4 completes output copying to the reserve CPU.",2.828125,2.953125,3.53125,1.84375,0.96875
23,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What are the times T1 to T4 relevant to the update process in the 'SIMATIC High Availability Systems S7-400H' manual?,A4,"T1-T4 in the manual denote: termination of active OBs (T1), cessation of communications (T2), conclusion of special cyclic interrupt OB (T3), and finalization of output transfer to reserve CPU (T4).",2.84375,2.96875,3.734375,1.8125,0.86328125
24,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What are the times T1 to T4 relevant to the update process in the 'SIMATIC High Availability Systems S7-400H' manual?,A5,"For update process relevance: T1 concludes OBs for priority 15, T2 halts communications, T3 finishes special cyclic interrupt OB, T4 completes reserve CPU output copying.",2.296875,2.59375,3.4375,1.7265625,0.8046875
25,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What formula calculates 'Max. disabling time for priority classes > 15' in 'Compendium Part B - Process Safety (V9.0)'?,A1,TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) and TP15_UP = 0.7 x size of DBs in work memory in bytes/1024 + 75.,1.5546875,1.4453125,3.296875,1.65625,0.7421875
26,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What formula calculates 'Max. disabling time for priority classes > 15' in 'Compendium Part B - Process Safety (V9.0)'?,A2,The formula combines TPTO minus several time components for DP master system and a linear function of DB size for user program.,1.1328125,1.015625,3.046875,1.4765625,0.5
27,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What formula calculates 'Max. disabling time for priority classes > 15' in 'Compendium Part B - Process Safety (V9.0)'?,A3,"For DP master system: TPTO minus sum of 2xTTR, TCI, TPROG, TDP_ST, TSLAVE_ST. For UP: 0.7 times DB size in KB plus 75 ms.",1.859375,2.03125,3.328125,1.6171875,0.71875
28,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What formula calculates 'Max. disabling time for priority classes > 15' in 'Compendium Part B - Process Safety (V9.0)'?,A4,Calculation involves subtracting multiple time factors from TPTO for DP system and applying a DB size-based formula for UP.,0.9609375,0.8203125,3.140625,1.5859375,0.455078125
29,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What formula calculates 'Max. disabling time for priority classes > 15' in 'Compendium Part B - Process Safety (V9.0)'?,A5,DP master system's TP15 derives from TPTO adjusted by several times; UP's TP15_UP from DB size scaled and offset.,0.6640625,0.7265625,2.875,1.4453125,0.4453125
30,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What hardware is required for PROFINET with S7 F Systems according to 'Compendium Part B - Process Safety (V9.0)'?,A1,"CPU 412-5H, 414-5H, 416-5H, 417-5H, or 410, 410E; specific SM 326F and SM 336F I/O modules.",1.890625,1.9921875,3.3125,1.5546875,0.53125
31,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What hardware is required for PROFINET with S7 F Systems according to 'Compendium Part B - Process Safety (V9.0)'?,A2,"CPUs like 412-5H to 417-5H or 410/410E, alongside designated fail-safe signal modules.",1.765625,1.7578125,3.4375,1.40625,0.341796875
32,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What hardware is required for PROFINET with S7 F Systems according to 'Compendium Part B - Process Safety (V9.0)'?,A3,"Required CPUs: 412-5H, 414-5H, 416-5H, 417-5H, 410, 410E; specific F-I/O modules.",1.8125,1.8671875,3.421875,1.46875,0.490234375
33,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What hardware is required for PROFINET with S7 F Systems according to 'Compendium Part B - Process Safety (V9.0)'?,A4,"Essential hardware includes certain 400H/410 CPUs and specified SM 326F, SM 336F modules.",1.5078125,1.4921875,3.21875,1.2890625,0.392578125
34,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What hardware is required for PROFINET with S7 F Systems according to 'Compendium Part B - Process Safety (V9.0)'?,A5,Needed: 400H series or 410/410E CPUs plus particular fail-safe SM 326F and SM 336F modules.,1.7109375,1.6875,3.234375,1.421875,0.404296875
35,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What is recommended regarding the 'Use only calculated values' setting in the 'Compendium Part B - Process Safety (V9.0)'?,A1,"It's recommended to use only calculated values for monitoring times, disabling manual entry.",1.6875,1.9453125,3.609375,1.2734375,0.193359375
36,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What is recommended regarding the 'Use only calculated values' setting in the 'Compendium Part B - Process Safety (V9.0)'?,A2,"The manual advises sticking to calculated values, preventing manual adjustments.",1.265625,1.3359375,3.4375,0.9921875,0.353515625
37,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What is recommended regarding the 'Use only calculated values' setting in the 'Compendium Part B - Process Safety (V9.0)'?,A3,"Opt for calculated values exclusively, as manual modifications are blocked.",1.3671875,1.4765625,3.375,1.0,0.369140625
38,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What is recommended regarding the 'Use only calculated values' setting in the 'Compendium Part B - Process Safety (V9.0)'?,A4,"Adherence to calculated values is suggested, with manual changes not permitted.",1.359375,1.4296875,3.421875,0.96875,0.3203125
39,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What is recommended regarding the 'Use only calculated values' setting in the 'Compendium Part B - Process Safety (V9.0)'?,A5,The default and recommended setting is to rely solely on automatically calculated values.,1.9140625,2.21875,3.59375,1.21875,0.31640625
40,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What is the significance of the 'Safety mode' setting for F-signal modules in 'Compendium Part B - Process Safety (V9.0)'?,A1,"'Safety mode' enables fail-safe operation of signal modules, crucial for process safety applications.",1.640625,1.6796875,3.375,1.3984375,0.3359375
41,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What is the significance of the 'Safety mode' setting for F-signal modules in 'Compendium Part B - Process Safety (V9.0)'?,A2,"It activates fail-safe functionality in signal modules, essential for safety-critical processes.",1.7109375,1.71875,3.453125,1.4296875,0.470703125
42,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What is the significance of the 'Safety mode' setting for F-signal modules in 'Compendium Part B - Process Safety (V9.0)'?,A3,"This setting ensures modules operate in a fail-safe manner, vital for safety systems.",1.5546875,1.4921875,3.296875,1.4296875,0.38671875
43,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What is the significance of the 'Safety mode' setting for F-signal modules in 'Compendium Part B - Process Safety (V9.0)'?,A4,"Enabling 'Safety mode' allows signal modules to perform in a fail-safe capacity, important for safety.",1.5859375,1.640625,3.359375,1.40625,0.43359375
44,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What is the significance of the 'Safety mode' setting for F-signal modules in 'Compendium Part B - Process Safety (V9.0)'?,A5,"The mode is key for fail-safe signal module operation, supporting safety requirements.",1.390625,1.375,3.09375,1.359375,0.330078125
45,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What parameters are needed to calculate monitoring times for updating the standby CPU in 'Compendium Part B - Process Safety (V9.0)'?,A1,Runtime of cyclic interrupt OB with special handling and work memory used for all data blocks.,1.453125,1.3984375,3.390625,1.34375,0.1943359375
46,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What parameters are needed to calculate monitoring times for updating the standby CPU in 'Compendium Part B - Process Safety (V9.0)'?,A2,Required inputs include special cyclic interrupt OB runtime and total data block work memory usage.,1.328125,1.296875,3.234375,1.2265625,0.216796875
47,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What parameters are needed to calculate monitoring times for updating the standby CPU in 'Compendium Part B - Process Safety (V9.0)'?,A3,Calculation needs: special handling cyclic interrupt OB duration and all data blocks' memory allocation.,1.1328125,1.140625,3.171875,1.2421875,0.125
48,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What parameters are needed to calculate monitoring times for updating the standby CPU in 'Compendium Part B - Process Safety (V9.0)'?,A4,Essential for calculation: runtime of specified cyclic interrupt OB and data blocks' work memory size.,1.4921875,1.46875,3.421875,1.203125,0.2890625
49,pcs7_compendium_part_b_en-US_en-US.txt,16,bbab6a6635532a377e902ae7d2a684b7033f6069639451f3ed72346f8966f13a,"The times of relevance to the update process are summarized in the figure below.

|T1|T2|T3|T4|
|---|---|---|---|
|Redundant mode|Redundant mode|Redundant mode|Redundant mode|
|Min. IIO retention time|or|Disable time for priority classes > 15|Master-to-reserve changeover|
|Communications delay|Cycle time extension|Cycle time extension|Cycle time extension|

T1: End of active OBs up to priority class 15

T2: Stopping of all communication functions

T3: End of cyclic interrupt OB with special handling

T4: End of copying of outputs to reserve CPU

If the update fails due to a maximum value being exceeded, the CPU will continue to run in solo mode and try again to update the reserve CPU once the specified wait time has elapsed.

Note

You will find more information in the following manuals:

- ""SIMATIC High Availability Systems S7-400H""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation""

If the ""Use only calculated values"" box is checked (recommended default setting), it will not be possible to enter or modify the monitoring times manually. The best values for the user program can then be determined automatically by clicking the ""Calculate..."" button.

Note

We recommend only using calculated values.

Compendium Part B - Process Safety (V9.0)
Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# 6.2.4 Calculating monitoring times

Calculation

You can use this dialog to calculate monitoring times for updating the standby CPU. You need to enter information about your user program for this purpose:

- Runtime of cyclic interrupt OB with special handling
- Work memory used for all data blocks in the user program

Defaults from the process (monitoring times) and the current configuration (bus parameters, number and type of DP slaves, etc.) are also used in the calculation.

|Properties CPU 410-SH (Ro/s3)|General|Startup|Cycle/Clock|Memory|Retentive Memory|Intemupts|
|---|---|---|---|---|---|---|
|Time -of-Day|Intemupts|Cyclic Intenupts|Diagnostics/Clock|Protection|H Parameters| |
|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|Parameters for Expanded CPU Test|
|Test scan cycle time [min]:|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|TROUBLESHOOTING|
|Reaction to RAM/PIQ comparson enor:|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|Update the Standby CPU|
|Maximur rumber 0f atterpts;|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|Cyclic interupt OB with special handling:|
|Waiting tirfe betweer two attempts [s]| | | | | | |
|Montoring times| | | | | | |
|Max. scan cycle time extension [ms]:|8c00|Calculate| | | | |
|Max communication delay [ms]:|3200| | | | | |
|Max disabling time for pronty classes 15 [ms]:|pC0|Use only| | | | |
|MinVO retention time [ms}:| |calculated values|calculated values|calculated values|calculated values|calculated values|

Redundant VO

Data block no_ and

Passivation behavior - By channels

Ok Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Run time of the cyclic interrupt concerned

If a cyclic interrupt OB with special handling has already been configured, half its execution interval will be entered as the default setting for ""Runtime of the watchdog interrupt concerned"". Here, enter the actual runtime of the cyclic interrupt with special handling, plus some reserve time (10 to 20%).

Note

The runtime can be calculated using the TIME_BEG and TIME_END blocks. You can find information on this in the ""How do I set the runtime and time scale of a cyclic interrupt OB?"" FAQ.

As of PCS 7 V7.0 and an S7-400H CPU as of FW V4.5, the run times for the cyclic interrupt OBs may also be read at the CPU_RT block.

Work memory allocation (data memory)

The work memory allocation comprises all data blocks; in other words, it also includes DBs generated dynamically. A value of 1024 KB is entered here by default. This value should be modified to reflect the actual data memory requirements of the user program. We recommend adding an expansion reserve of approximately 10%.

The allocation of work memory for data blocks can be read in SIMATIC Manager by selecting the block container with the menu command ""Edit > Object Properties"".

|Properties Block Folder Offline| | | |
|---|---|---|---|
|General|Blocks|Checksums|Address priority: Fill Level|
|User Program Memory|Size in load memory:|635362 bytes| |
|Size work Memory:|358206 bytes| | |
|Data|133404 bytes| | |
|Total|291610 bytes| | |
|System data memory|Size load Memory:|16412 bytes| |
|Number of Blocks|SFB:|170| |

Cancel Help

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

# Calculation

Once all the parameters have been set, the values are calculated by pressing the ""Recalculate"" button.

If the F-signal modules are configured in safety mode in HW Config, the ""Max. disabling time for priority classes > 15"" parameter is calculated using the following formula:

- TP15 (DP master system) = TPTO - (2 x TTR + TCI + TPROG + TDP_ST + TSLAVE_ST) (determined for each DP master system)
- TP15_UP in ms = 0.7 x size of DBs in work memory in bytes/1024 + 75

where:

- TPTO = Shortest F-monitoring time configured on an F-signal module
- TTR = Target rotation time of the PROFIBUS line
- TCI = Call time of the cyclic interrupt OB
- TPROG = Runtime of the cyclic interrupt OB
- TDP_ST = DP switchover time
- TSLAVE_ST = Slave switchover time
- TP15_UP = Time for copying the DBs of the user program (UP)

Calculating the parameters may cause one of the following messages to appear:

- ""The F-monitoring times cannot be adhered to due to the configuration specified. Times which can no longer be used were output."" if: ""Maximum disabling time for priority classes > 15"" < ""Minimum I/O retention time"" + 50 ms
- ""Due to the configuration specified, monitoring times have been calculated to ensure that the F-monitoring time can be adhered to. It cannot be guaranteed that each attempt at coupling and updating will be successful."" if: TP15 (DP master system) < TP15_UP

The ""Maximum communication delay"" and ""Maximum scan cycle time extension"" are calculated from the ""Maximum disabling time for priority classes > 15"" by multiplying this setting once by 4 and once by 10.

Note

When determining the shortest F-monitoring time configured on an F-signal module, none of the monitoring times set in PROFIsafe PA devices are taken into account.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# 6.2 Adapting CPU parameters (fault-tolerant F system)

Maximum disabling time for priority classes

Check the value for ""Maximum disabling time for priority classes > 15"".

Note

We recommend doing this again on the plant once commissioning is complete.

Follow the steps outlined below:

- Start up the standby CPU in an H-system. Observe the FAQ ""What do I have to keep in mind when downloading changes of an H-system with safety program?"" (https://support.industry.siemens.com/cs/ww/en/view/89330232).
- In the diagnostic buffer of the master CPU, search for messages relating to the master CPU's ""Transition from coupling to updating"", as well as for the message ""Redundant mode"".
- The ""Maximum disabling time for priority classes > 15"" must be greater than the time difference between the two messages. Make sure you factor reserve time of approximately 20% into your setting.

Note

For more information and remedies, refer to the following manuals:

- ""SIMATIC High Availability Systems S7-400H (https://support.industry.siemens.com/cs/ww/en/view/82478488)""
- ""SIMATIC PCS 7 Process Control System CPU 410 Process Automation (https://support.industry.siemens.com/cs/ww/en/view/109748473)""

Compendium Part B - Process Safety (V9.0) Operating Manual, 04/2018, A5E43228905-AA

# 6.3 Communications module parameters/Networks

The settings for communication modules are explained in Compendium Part A. It may be advisable to operate the F-I/O on a separate DP master system when there are numerous nodes or nodes with low transmission speeds.

# PROFINET

PROFINET with PROFINET IO is increasingly used in automation engineering. PROFINET IO is the open standard defined according to the PROFINET standard for communication between controller and I/O devices based on Switched Ethernet. The PROFIsafe specification has been expanded for fail-safe communication between controller and PROFINET IOs, and is used in version PROFIsafe V2.x with PROFINET. You can find additional information about PROFINET IO in the entry ""PROFINET in Process Automation with SIMATIC PCS 7"" (https://support.industry.siemens.com/cs/ww/en/view/72887082).

# Requirements for using PROFINET with S7 F Systems

PROFIsafe version V2, which is required for fail-safe communication via PROFINET, is available in S7 F Systems as of V6.0. The following components are required to use PROFINET with S7 F Systems:

# Recommended software requirements:

- PCS 7 V8.0 SP2 or higher
- S7 F Systems V6.1 SP1 or higher
- As of S7 F Systems Lib V1_3
- S7 F Configuration Pack V5.5 SP11 or higher

# Hardware requirements:

- CPU (CPU 412-5H, CPU 414-5H, CPU 416-5H, CPU 417-5H or CPU 410, CPU 410E)
- I/O modules:
- SM 326F, DI 24xDC24V (6ES7 326-1BK02-0AB0)
- SM 326F, DO 10xDC24V/2A, P-switching (6ES7 326-2BF10-0AB0)
- SM 326F, DO 8xDC24V/2A, P-M-switching (6ES7 326-2BF41-0AB0)
- SM 336F, AI 6x0/4...20mA HART (6ES7 336-4GE00-0AB0)

Note: Before you use the fail-safe devices make sure that they support PROFIsafe V2 mode (F_Par_Version = 1) on PROFINET IO as well as in the downstream networks (PROFINET IO or PROFIBUS DP). The set PROFIsafe mode of the device is documented in the hardware printout.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Example

|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|Fail-safe signal modules on PROFINET|
|---|---|---|
|IO|IO as well as on PROFIBUS DP*|IO as well as in the downstream PROFIBUS DP* via IE/PB Link|
|PROFIsafe V2-Mode|poOOOC DooooG|OOOOOO299900|
|Dooood DooOOO|PROFIsafe V2-Mode| |
|PROFIsafe V2-Mode|PROFIsafe V1-Mode| |
|* PROFIsafe V1 mode possible|* PROFIsafe V2 mode required| |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

41

# Configuring S7F/FH hardware

# 6.3 Communications module parameters/Networks

Fail-safe signal modules on PROFINET

|Fail-safe signal modules on PROFINET IO as well as on PROFIBUS DP*|IO|
|---|---|
|PROFIsafe V2-Mode|PROFIsafe V2-Mode|
| |PROFIsafe V1-Mode|
|* PROFIsafe V1 mode possible| |

Fail-safe signal modules on PROFINET IO as well as in the downstream PROFIBUS DP* via IE/PB Link in combination with signal modules on PROFIBUS DP

|JIL|PROFIsafe V2-Mode|PROFIsafe VI-Mode|
|---|---|---|
|* PROFIsafe V2 mode required| | |

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

Similar to standard modules, F-signal modules are configured in HW Config. This requires the corresponding S7 F Configuration Pack.

Unused channels can be added during operation, provided that, during first commissioning, they have been activated in HW Config and equipped with resistors in order to suppress channel faults.

# Procedure

Once you have added the F-signal modules to the ET 200M station in HW Config, you can access the ""Properties"" dialog by selecting the menu command ""Edit > Object Properties"" or double-clicking the corresponding F-signal module.

# Properties FDI2AxDC24V (R-/55)

|General|Addresses|Parameters|Identification|Redundancy|
|---|---|---|---|---|
|Parameters|Parameters|Parameters|Parameters|Parameters|
|Operating mode|Safety mode|parameters|source_address|CPU 410-5H|
|target_address|1020|DIP switch setting (9 to 0)|11100|monitoring time (ms)|
| | | | |2500|

# 6.4.1 Operating mode

Safety mode

""Safety mode"" is to be set for the signal modules.

# 6.4.2 PROFIsafe addresses

F source and destination addresses

The PROFIsafe addresses (F_SOURCE_ADD, F_DEST_ADD) are used to uniquely identify the source and destination during PROFIsafe communication. The F_DEST_ADD uniquely identifies the PROFIsafe destination (the module). The F_DEST_ADD must, therefore, be unique across both the network and the station. The F_SOURCE_ADD is permanently assigned to the CPU.

To prevent parameter assignment errors, the F_SOURCE_ADD and the F_DEST_ADD are assigned automatically.

Compendium Part B - Process Safety (V9.0)

Operating Manual, 04/2018, A5E43228905-AA

43

# Configuring S7F/FH hardware

# 6.4 Setting system parameters for F-signal modules

# DIP switch settings

The DIP switch setting is the binary representation of the F_DEST_ADD. It must be set on the F signal module DIP switches before you install the F signal module.

|Standard mode|Safety mode|
|---|---|
|3 832888382C|3 833388382C|
|All possible combinations that do not correspond to standard mode|All possible combinations that do not correspond to standard mode|
|9 8 7 6 5 4 3 2 1 0|9 8 7 6 5 4 3 2 1 0|
|Module start address 192 corresponds to|F_DEST_ADD 24|
|3 832888382C| |

When these modules are in standard mode, F_DEST_ADD is always set to ""0"" (delivery condition).

In the case of older module versions, the F_DEST_ADD is dependent on the module start address. ",What parameters are needed to calculate monitoring times for updating the standby CPU in 'Compendium Part B - Process Safety (V9.0)'?,A5,Two key parameters: special cyclic interrupt OB's runtime and the user program's data block memory usage.,1.5546875,1.828125,3.4375,1.4453125,0.349609375
